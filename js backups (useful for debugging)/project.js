window.__require = function e(t, i, s) {
function n(a, r) {
if (!i[a]) {
if (!t[a]) {
var l = a.split("/");
l = l[l.length - 1];
if (!t[l]) {
var c = "function" == typeof __require && __require;
if (!r && c) return c(l, !0);
if (o) return o(l, !0);
throw new Error("Cannot find module '" + a + "'");
}
a = l;
}
var h = i[a] = {
exports: {}
};
t[a][0].call(h.exports, function(e) {
return n(t[a][1][e] || e);
}, h, h.exports, e, t, i, s);
}
return i[a].exports;
}
for (var o = "function" == typeof __require && __require, a = 0; a < s.length; a++) n(s[a]);
return n;
}({
1: [ function(e, t, i) {
var s = e("util/"), n = Array.prototype.slice, o = Object.prototype.hasOwnProperty, a = t.exports = u;
a.AssertionError = function(e) {
this.name = "AssertionError";
this.actual = e.actual;
this.expected = e.expected;
this.operator = e.operator;
if (e.message) {
this.message = e.message;
this.generatedMessage = !1;
} else {
this.message = c(this);
this.generatedMessage = !0;
}
var t = e.stackStartFunction || h;
if (Error.captureStackTrace) Error.captureStackTrace(this, t); else {
var i = new Error();
if (i.stack) {
var s = i.stack, n = t.name, o = s.indexOf("\n" + n);
if (o >= 0) {
var a = s.indexOf("\n", o + 1);
s = s.substring(a + 1);
}
this.stack = s;
}
}
};
s.inherits(a.AssertionError, Error);
function r(e, t) {
return s.isUndefined(t) ? "" + t : s.isNumber(t) && !isFinite(t) ? t.toString() : s.isFunction(t) || s.isRegExp(t) ? t.toString() : t;
}
function l(e, t) {
return s.isString(e) ? e.length < t ? e : e.slice(0, t) : e;
}
function c(e) {
return l(JSON.stringify(e.actual, r), 128) + " " + e.operator + " " + l(JSON.stringify(e.expected, r), 128);
}
function h(e, t, i, s, n) {
throw new a.AssertionError({
message: i,
actual: e,
expected: t,
operator: s,
stackStartFunction: n
});
}
a.fail = h;
function u(e, t) {
e || h(e, !0, t, "==", a.ok);
}
a.ok = u;
a.equal = function(e, t, i) {
e != t && h(e, t, i, "==", a.equal);
};
a.notEqual = function(e, t, i) {
e == t && h(e, t, i, "!=", a.notEqual);
};
a.deepEqual = function(e, t, i) {
d(e, t) || h(e, t, i, "deepEqual", a.deepEqual);
};
function d(e, t) {
if (e === t) return !0;
if (s.isBuffer(e) && s.isBuffer(t)) {
if (e.length != t.length) return !1;
for (var i = 0; i < e.length; i++) if (e[i] !== t[i]) return !1;
return !0;
}
return s.isDate(e) && s.isDate(t) ? e.getTime() === t.getTime() : s.isRegExp(e) && s.isRegExp(t) ? e.source === t.source && e.global === t.global && e.multiline === t.multiline && e.lastIndex === t.lastIndex && e.ignoreCase === t.ignoreCase : s.isObject(e) || s.isObject(t) ? f(e, t) : e == t;
}
function p(e) {
return "[object Arguments]" == Object.prototype.toString.call(e);
}
function f(e, t) {
if (s.isNullOrUndefined(e) || s.isNullOrUndefined(t)) return !1;
if (e.prototype !== t.prototype) return !1;
if (s.isPrimitive(e) || s.isPrimitive(t)) return e === t;
var i = p(e), o = p(t);
if (i && !o || !i && o) return !1;
if (i) return d(e = n.call(e), t = n.call(t));
var a, r, l = _(e), c = _(t);
if (l.length != c.length) return !1;
l.sort();
c.sort();
for (r = l.length - 1; r >= 0; r--) if (l[r] != c[r]) return !1;
for (r = l.length - 1; r >= 0; r--) if (!d(e[a = l[r]], t[a])) return !1;
return !0;
}
a.notDeepEqual = function(e, t, i) {
d(e, t) && h(e, t, i, "notDeepEqual", a.notDeepEqual);
};
a.strictEqual = function(e, t, i) {
e !== t && h(e, t, i, "===", a.strictEqual);
};
a.notStrictEqual = function(e, t, i) {
e === t && h(e, t, i, "!==", a.notStrictEqual);
};
function m(e, t) {
return !(!e || !t) && ("[object RegExp]" == Object.prototype.toString.call(t) ? t.test(e) : e instanceof t || !0 === t.call({}, e));
}
function g(e, t, i, n) {
var o;
if (s.isString(i)) {
n = i;
i = null;
}
try {
t();
} catch (e) {
o = e;
}
n = (i && i.name ? " (" + i.name + ")." : ".") + (n ? " " + n : ".");
e && !o && h(o, i, "Missing expected exception" + n);
!e && m(o, i) && h(o, i, "Got unwanted exception" + n);
if (e && o && i && !m(o, i) || !e && o) throw o;
}
a.throws = function(e, t, i) {
g.apply(this, [ !0 ].concat(n.call(arguments)));
};
a.doesNotThrow = function(e, t) {
g.apply(this, [ !1 ].concat(n.call(arguments)));
};
a.ifError = function(e) {
if (e) throw e;
};
var _ = Object.keys || function(e) {
var t = [];
for (var i in e) o.call(e, i) && t.push(i);
return t;
};
}, {
"util/": 4
} ],
2: [ function(e, t, i) {
"function" == typeof Object.create ? t.exports = function(e, t) {
e.super_ = t;
e.prototype = Object.create(t.prototype, {
constructor: {
value: e,
enumerable: !1,
writable: !0,
configurable: !0
}
});
} : t.exports = function(e, t) {
e.super_ = t;
var i = function() {};
i.prototype = t.prototype;
e.prototype = new i();
e.prototype.constructor = e;
};
}, {} ],
3: [ function(e, t, i) {
t.exports = function(e) {
return e && "object" == typeof e && "function" == typeof e.copy && "function" == typeof e.fill && "function" == typeof e.readUInt8;
};
}, {} ],
4: [ function(e, t, i) {
(function(t, s) {
var n = /%[sdj%]/g;
i.format = function(e) {
if (!I(e)) {
for (var t = [], i = 0; i < arguments.length; i++) t.push(r(arguments[i]));
return t.join(" ");
}
i = 1;
for (var s = arguments, o = s.length, a = String(e).replace(n, function(e) {
if ("%%" === e) return "%";
if (i >= o) return e;
switch (e) {
case "%s":
return String(s[i++]);

case "%d":
return Number(s[i++]);

case "%j":
try {
return JSON.stringify(s[i++]);
} catch (e) {
return "[Circular]";
}

default:
return e;
}
}), l = s[i]; i < o; l = s[++i]) C(l) || !S(l) ? a += " " + l : a += " " + r(l);
return a;
};
i.deprecate = function(e, n) {
if (v(s.process)) return function() {
return i.deprecate(e, n).apply(this, arguments);
};
if (!0 === t.noDeprecation) return e;
var o = !1;
return function() {
if (!o) {
if (t.throwDeprecation) throw new Error(n);
t.traceDeprecation ? console.trace(n) : console.error(n);
o = !0;
}
return e.apply(this, arguments);
};
};
var o, a = {};
i.debuglog = function(e) {
v(o) && (o = t.env.NODE_DEBUG || "");
e = e.toUpperCase();
if (!a[e]) if (new RegExp("\\b" + e + "\\b", "i").test(o)) {
var s = t.pid;
a[e] = function() {
var t = i.format.apply(i, arguments);
console.error("%s %d: %s", e, s, t);
};
} else a[e] = function() {};
return a[e];
};
function r(e, t) {
var s = {
seen: [],
stylize: c
};
arguments.length >= 3 && (s.depth = arguments[2]);
arguments.length >= 4 && (s.colors = arguments[3]);
T(t) ? s.showHidden = t : t && i._extend(s, t);
v(s.showHidden) && (s.showHidden = !1);
v(s.depth) && (s.depth = 2);
v(s.colors) && (s.colors = !1);
v(s.customInspect) && (s.customInspect = !0);
s.colors && (s.stylize = l);
return u(s, e, s.depth);
}
i.inspect = r;
r.colors = {
bold: [ 1, 22 ],
italic: [ 3, 23 ],
underline: [ 4, 24 ],
inverse: [ 7, 27 ],
white: [ 37, 39 ],
grey: [ 90, 39 ],
black: [ 30, 39 ],
blue: [ 34, 39 ],
cyan: [ 36, 39 ],
green: [ 32, 39 ],
magenta: [ 35, 39 ],
red: [ 31, 39 ],
yellow: [ 33, 39 ]
};
r.styles = {
special: "cyan",
number: "yellow",
boolean: "yellow",
undefined: "grey",
null: "bold",
string: "green",
date: "magenta",
regexp: "red"
};
function l(e, t) {
var i = r.styles[t];
return i ? "[" + r.colors[i][0] + "m" + e + "[" + r.colors[i][1] + "m" : e;
}
function c(e, t) {
return e;
}
function h(e) {
var t = {};
e.forEach(function(e, i) {
t[e] = !0;
});
return t;
}
function u(e, t, s) {
if (e.customInspect && t && N(t.inspect) && t.inspect !== i.inspect && (!t.constructor || t.constructor.prototype !== t)) {
var n = t.inspect(s, e);
I(n) || (n = u(e, n, s));
return n;
}
var o = d(e, t);
if (o) return o;
var a = Object.keys(t), r = h(a);
e.showHidden && (a = Object.getOwnPropertyNames(t));
if (R(t) && (a.indexOf("message") >= 0 || a.indexOf("description") >= 0)) return p(t);
if (0 === a.length) {
if (N(t)) {
var l = t.name ? ": " + t.name : "";
return e.stylize("[Function" + l + "]", "special");
}
if (E(t)) return e.stylize(RegExp.prototype.toString.call(t), "regexp");
if (b(t)) return e.stylize(Date.prototype.toString.call(t), "date");
if (R(t)) return p(t);
}
var c, T = "", C = !1, y = [ "{", "}" ];
if (_(t)) {
C = !0;
y = [ "[", "]" ];
}
if (N(t)) {
T = " [Function" + (t.name ? ": " + t.name : "") + "]";
}
E(t) && (T = " " + RegExp.prototype.toString.call(t));
b(t) && (T = " " + Date.prototype.toUTCString.call(t));
R(t) && (T = " " + p(t));
if (0 === a.length && (!C || 0 == t.length)) return y[0] + T + y[1];
if (s < 0) return E(t) ? e.stylize(RegExp.prototype.toString.call(t), "regexp") : e.stylize("[Object]", "special");
e.seen.push(t);
c = C ? f(e, t, s, r, a) : a.map(function(i) {
return m(e, t, s, r, i, C);
});
e.seen.pop();
return g(c, T, y);
}
function d(e, t) {
if (v(t)) return e.stylize("undefined", "undefined");
if (I(t)) {
var i = "'" + JSON.stringify(t).replace(/^"|"$/g, "").replace(/'/g, "\\'").replace(/\\"/g, '"') + "'";
return e.stylize(i, "string");
}
return y(t) ? e.stylize("" + t, "number") : T(t) ? e.stylize("" + t, "boolean") : C(t) ? e.stylize("null", "null") : void 0;
}
function p(e) {
return "[" + Error.prototype.toString.call(e) + "]";
}
function f(e, t, i, s, n) {
for (var o = [], a = 0, r = t.length; a < r; ++a) F(t, String(a)) ? o.push(m(e, t, i, s, String(a), !0)) : o.push("");
n.forEach(function(n) {
n.match(/^\d+$/) || o.push(m(e, t, i, s, n, !0));
});
return o;
}
function m(e, t, i, s, n, o) {
var a, r, l;
(l = Object.getOwnPropertyDescriptor(t, n) || {
value: t[n]
}).get ? r = l.set ? e.stylize("[Getter/Setter]", "special") : e.stylize("[Getter]", "special") : l.set && (r = e.stylize("[Setter]", "special"));
F(s, n) || (a = "[" + n + "]");
r || (e.seen.indexOf(l.value) < 0 ? (r = C(i) ? u(e, l.value, null) : u(e, l.value, i - 1)).indexOf("\n") > -1 && (r = o ? r.split("\n").map(function(e) {
return "  " + e;
}).join("\n").substr(2) : "\n" + r.split("\n").map(function(e) {
return "   " + e;
}).join("\n")) : r = e.stylize("[Circular]", "special"));
if (v(a)) {
if (o && n.match(/^\d+$/)) return r;
if ((a = JSON.stringify("" + n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)) {
a = a.substr(1, a.length - 2);
a = e.stylize(a, "name");
} else {
a = a.replace(/'/g, "\\'").replace(/\\"/g, '"').replace(/(^"|"$)/g, "'");
a = e.stylize(a, "string");
}
}
return a + ": " + r;
}
function g(e, t, i) {
return e.reduce(function(e, t) {
0;
t.indexOf("\n") >= 0 && 0;
return e + t.replace(/\u001b\[\d\d?m/g, "").length + 1;
}, 0) > 60 ? i[0] + ("" === t ? "" : t + "\n ") + " " + e.join(",\n  ") + " " + i[1] : i[0] + t + " " + e.join(", ") + " " + i[1];
}
function _(e) {
return Array.isArray(e);
}
i.isArray = _;
function T(e) {
return "boolean" == typeof e;
}
i.isBoolean = T;
function C(e) {
return null === e;
}
i.isNull = C;
i.isNullOrUndefined = function(e) {
return null == e;
};
function y(e) {
return "number" == typeof e;
}
i.isNumber = y;
function I(e) {
return "string" == typeof e;
}
i.isString = I;
i.isSymbol = function(e) {
return "symbol" == typeof e;
};
function v(e) {
return void 0 === e;
}
i.isUndefined = v;
function E(e) {
return S(e) && "[object RegExp]" === w(e);
}
i.isRegExp = E;
function S(e) {
return "object" == typeof e && null !== e;
}
i.isObject = S;
function b(e) {
return S(e) && "[object Date]" === w(e);
}
i.isDate = b;
function R(e) {
return S(e) && ("[object Error]" === w(e) || e instanceof Error);
}
i.isError = R;
function N(e) {
return "function" == typeof e;
}
i.isFunction = N;
i.isPrimitive = function(e) {
return null === e || "boolean" == typeof e || "number" == typeof e || "string" == typeof e || "symbol" == typeof e || "undefined" == typeof e;
};
i.isBuffer = e("./support/isBuffer");
function w(e) {
return Object.prototype.toString.call(e);
}
function U(e) {
return e < 10 ? "0" + e.toString(10) : e.toString(10);
}
var A = [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" ];
function L() {
var e = new Date(), t = [ U(e.getHours()), U(e.getMinutes()), U(e.getSeconds()) ].join(":");
return [ e.getDate(), A[e.getMonth()], t ].join(" ");
}
i.log = function() {
console.log("%s - %s", L(), i.format.apply(i, arguments));
};
i.inherits = e("inherits");
i._extend = function(e, t) {
if (!t || !S(t)) return e;
for (var i = Object.keys(t), s = i.length; s--; ) e[i[s]] = t[i[s]];
return e;
};
function F(e, t) {
return Object.prototype.hasOwnProperty.call(e, t);
}
}).call(this, e("_process"), "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
}, {
"./support/isBuffer": 3,
_process: 6,
inherits: 2
} ],
5: [ function(e, t, i) {
(function(i) {
var s = e("util"), n = e("assert");
function o() {
return new Date().getTime();
}
var a, r = Array.prototype.slice, l = {};
a = "undefined" != typeof i && i.console ? i.console : "undefined" != typeof window && window.console ? window.console : {};
for (var c = [ [ function() {}, "log" ], [ function() {
a.log.apply(a, arguments);
}, "info" ], [ function() {
a.log.apply(a, arguments);
}, "warn" ], [ function() {
a.warn.apply(a, arguments);
}, "error" ], [ function(e) {
l[e] = o();
}, "time" ], [ function(e) {
var t = l[e];
if (!t) throw new Error("No such label: " + e);
delete l[e];
var i = o() - t;
a.log(e + ": " + i + "ms");
}, "timeEnd" ], [ function() {
var e = new Error();
e.name = "Trace";
e.message = s.format.apply(null, arguments);
a.error(e.stack);
}, "trace" ], [ function(e) {
a.log(s.inspect(e) + "\n");
}, "dir" ], [ function(e) {
if (!e) {
var t = r.call(arguments, 1);
n.ok(!1, s.format.apply(null, t));
}
}, "assert" ] ], h = 0; h < c.length; h++) {
var u = c[h], d = u[0], p = u[1];
a[p] || (a[p] = d);
}
t.exports = a;
}).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
}, {
assert: 1,
util: 9
} ],
6: [ function(e, t, i) {
var s, n, o = t.exports = {};
function a() {
throw new Error("setTimeout has not been defined");
}
function r() {
throw new Error("clearTimeout has not been defined");
}
(function() {
try {
s = "function" == typeof setTimeout ? setTimeout : a;
} catch (e) {
s = a;
}
try {
n = "function" == typeof clearTimeout ? clearTimeout : r;
} catch (e) {
n = r;
}
})();
function l(e) {
if (s === setTimeout) return setTimeout(e, 0);
if ((s === a || !s) && setTimeout) {
s = setTimeout;
return setTimeout(e, 0);
}
try {
return s(e, 0);
} catch (t) {
try {
return s.call(null, e, 0);
} catch (t) {
return s.call(this, e, 0);
}
}
}
function c(e) {
if (n === clearTimeout) return clearTimeout(e);
if ((n === r || !n) && clearTimeout) {
n = clearTimeout;
return clearTimeout(e);
}
try {
return n(e);
} catch (t) {
try {
return n.call(null, e);
} catch (t) {
return n.call(this, e);
}
}
}
var h, u = [], d = !1, p = -1;
function f() {
if (d && h) {
d = !1;
h.length ? u = h.concat(u) : p = -1;
u.length && m();
}
}
function m() {
if (!d) {
var e = l(f);
d = !0;
for (var t = u.length; t; ) {
h = u;
u = [];
for (;++p < t; ) h && h[p].run();
p = -1;
t = u.length;
}
h = null;
d = !1;
c(e);
}
}
o.nextTick = function(e) {
var t = new Array(arguments.length - 1);
if (arguments.length > 1) for (var i = 1; i < arguments.length; i++) t[i - 1] = arguments[i];
u.push(new g(e, t));
1 !== u.length || d || l(m);
};
function g(e, t) {
this.fun = e;
this.array = t;
}
g.prototype.run = function() {
this.fun.apply(null, this.array);
};
o.title = "browser";
o.browser = !0;
o.env = {};
o.argv = [];
o.version = "";
o.versions = {};
function _() {}
o.on = _;
o.addListener = _;
o.once = _;
o.off = _;
o.removeListener = _;
o.removeAllListeners = _;
o.emit = _;
o.prependListener = _;
o.prependOnceListener = _;
o.listeners = function(e) {
return [];
};
o.binding = function(e) {
throw new Error("process.binding is not supported");
};
o.cwd = function() {
return "/";
};
o.chdir = function(e) {
throw new Error("process.chdir is not supported");
};
o.umask = function() {
return 0;
};
}, {} ],
7: [ function(e, t, i) {
arguments[4][2][0].apply(i, arguments);
}, {
dup: 2
} ],
8: [ function(e, t, i) {
arguments[4][3][0].apply(i, arguments);
}, {
dup: 3
} ],
9: [ function(e, t, i) {
arguments[4][4][0].apply(i, arguments);
}, {
"./support/isBuffer": 8,
_process: 6,
dup: 4,
inherits: 7
} ],
ActionUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "8110enbMtNKb5ShXqf8EWJW", "ActionUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
function s(e) {
"@babel/helpers - typeof";
return (s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
return typeof e;
} : function(e) {
return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
})(e);
}
function n(e) {
return l(e) || r(e) || a(e) || o();
}
function o() {
throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function a(e, t) {
if (e) {
if ("string" == typeof e) return c(e, t);
var i = Object.prototype.toString.call(e).slice(8, -1);
"Object" === i && e.constructor && (i = e.constructor.name);
return "Map" === i || "Set" === i ? Array.from(i) : "Arguments" === i || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i) ? c(e, t) : void 0;
}
}
function r(e) {
if ("undefined" != typeof Symbol && Symbol.iterator in Object(e)) return Array.from(e);
}
function l(e) {
if (Array.isArray(e)) return c(e);
}
function c(e, t) {
(null == t || t > e.length) && (t = e.length);
for (var i = 0, s = new Array(t); i < t; i++) s[i] = e[i];
return s;
}
var h = {
sequence: function(e) {
for (var t = arguments.length, i = new Array(t > 1 ? t - 1 : 0), s = 1; s < t; s++) i[s - 1] = arguments[s];
var n = this.getActionsArray.apply(this, i);
e.runAction(cc.sequence(n));
},
spawn: function(e) {
for (var t, i = arguments.length, s = new Array(i > 1 ? i - 1 : 0), o = 1; o < i; o++) s[o - 1] = arguments[o];
var a = this.getActionsArray.apply(this, s);
e.runAction((t = cc).spawn.apply(t, n(a)));
},
callOnce: function(e, t, i) {
e.runAction(cc.sequence(cc.delayTime(i), cc.callFunc(function() {
TypeUtils.isFunction(t) && t();
})));
},
repeat: function(e) {
for (var t, i = arguments.length, s = new Array(i > 1 ? i - 1 : 0), o = 1; o < i; o++) s[o - 1] = arguments[o];
var a = this.getActionsArray.apply(this, s);
e.runAction(cc.repeatForever((t = cc).sequence.apply(t, n(a))));
},
timerAct: function(e, t, i, s) {
var n = 0;
e.runAction(cc.repeatForever(cc.sequence(cc.delayTime(i), cc.callFunc(function() {
n += i;
if (TypeUtils.isFunction(t)) {
var o = !1;
TypeUtils.isRealNull(s) || (o = n >= s);
t(i, n, o);
o && e.stopAllActions();
}
}))));
},
getActionsArray: function() {
for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++) t[i] = arguments[i];
for (var s = [].concat(t), n = [], o = 0; o < s.length; o++) TypeUtils.isNumber(s[o]) ? n.push(cc.delayTime(s[o])) : TypeUtils.isFunction(s[o]) ? n.push(cc.callFunc(s[o])) : n.push(s[o]);
return n;
},
getBezier: function(e, t, i, s, n) {
var o = 3.14159 * n / 180, a = t.x + (i.x - t.x) / 4, r = cc.v2(a, s + t.y + Math.cos(o) * a), l = t.x + (i.x - t.x) / 2, c = cc.v2(l, s + t.y + Math.cos(o) * l);
return cc.bezierTo(e, [ r, c, i ]);
},
doJumpAct: function(e) {
if ("object" == s(e) && e.isValid) {
var t = cc.v2(e.x, e.y), i = e.scale || 1;
e.scale = 0;
var n = cc.spawn(cc.moveTo(.15, cc.v2(t.x, t.y + 15)), cc.scaleTo(.15, 1.1 * i, 1.05 * i)), o = cc.spawn(cc.moveTo(.15, cc.v2(t.x, t.y - 10)), cc.scaleTo(.15, .9 * i, .9 * i)), a = cc.spawn(cc.moveTo(.2, t), cc.scaleTo(.2, i));
e.runAction(cc.sequence(n, o, a));
}
},
doDisperseAct: function(e, t) {
for (var i = t.scale || 1, s = t.pixel || 1200, n = t.startPos, o = t.endPos, a = t.disperse || 1.3, r = [ {
scale: 1.2,
pos: cc.v2(-85, 60)
}, {
scale: 1.2,
pos: cc.v2(65, 85)
}, {
scale: 1.2,
pos: cc.v2(10, -30)
}, {
scale: 1.2,
pos: cc.v2(85, 10)
}, {
scale: 1,
pos: cc.v2(-30, 75)
}, {
scale: 1,
pos: cc.v2(-10, 105)
}, {
scale: 1,
pos: cc.v2(65, 50)
}, {
scale: 1,
pos: cc.v2(90, 45)
}, {
scale: .9,
pos: cc.v2(45, -40)
}, {
scale: .9,
pos: cc.v2(-85, -10)
} ], l = PointUtils.pointDistance(o, n) / s, c = function(s) {
var c = e[s];
c.active = !1;
if (s < r.length) {
c.active = !0;
c.setPosition(n.x, n.y);
var h = s, u = 20 * (Math.floor(h / 4) % 2 == 0 ? 1 : -1), d = r[h].pos, p = cc.sequence(cc.delayTime(.3), cc.rotateTo(.2, -u / 5 * 3), cc.rotateTo(.1, 0));
c.runAction(cc.sequence(cc.rotateTo(.05, u), cc.callFunc(function() {
c.opacity = 255;
c.scale = r[h].scale * i;
}), cc.spawn(cc.moveBy(.7, cc.v2(d.x * a, d.y * a)).easing(cc.easeExponentialOut()), p), cc.delayTime(.1), cc.moveTo(l, o), cc.callFunc(function() {
c.active = !1;
h == r.length - 1 && TypeUtils.isFunction(t.callback) && t.callback();
})));
}
}, h = 0; h < e.length; h++) c(h);
},
doBreatheAct: function(e, t) {
if (e) {
t = t || 1;
e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5, 1.2 * t).easing(cc.easeOut(1)), cc.delayTime(.2), cc.scaleTo(.5, t).easing(cc.easeIn(1)), cc.delayTime(.3))));
}
},
doTeetertotterAct: function(e, t) {
if (e) {
t = t || 1;
var i = e.y;
e.runAction(cc.repeatForever(cc.sequence(cc.spawn(cc.scaleTo(.4, 1.05 * t, t).easing(cc.easeOut(1)), cc.moveTo(.4, cc.v2(e.x, i - 2))), cc.delayTime(.1), cc.spawn(cc.scaleTo(.4, t).easing(cc.easeOut(1)), cc.moveTo(.4, cc.v2(e.x, i + 5))), cc.delayTime(.1))));
}
},
doBubbleAct: function(e) {
if (e) {
var t = t || 1;
e.runAction(cc.repeatForever(cc.sequence(cc.spawn(cc.scaleTo(2, 1.1 * t), cc.moveBy(2, cc.v2(0, 3))), cc.spawn(cc.scaleTo(2, .9 * t), cc.moveBy(2, cc.v2(0, -5))), cc.spawn(cc.scaleTo(1, t), cc.moveBy(1, cc.v2(0, 2))))));
}
},
doBubbleActHide: function(e) {
if (e) {
var t = t || 1;
e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.2, t).easing(cc.easeBackOut()), cc.spawn(cc.scaleTo(2, 1.1 * t), cc.moveBy(2, cc.v2(0, 3))), cc.spawn(cc.scaleTo(2, .9 * t), cc.moveBy(2, cc.v2(0, -5))), cc.spawn(cc.scaleTo(1, t), cc.moveBy(1, cc.v2(0, 2))), cc.scaleTo(.2, 0).easing(cc.easeBackIn()), cc.delayTime(2))));
}
},
shake: function(e, t, i, s, n) {
var o = 0, a = e.x, r = e.y, l = 0, c = 0;
h.timerAct(e, function(h) {
var u = (o += h) / t;
if (u > 1) {
e.x = a;
e.y = r;
e.stopAllActions();
} else {
var d = Math.sin(u * (2 * Math.PI) * n), p = 1 - u, f = i * d * p, m = s * d * p;
e.x = e.x - l + f;
e.y = e.y - c + m;
l = f;
c = m;
}
}, 1 / 60);
}
}, u = h;
i.default = u;
t.exports = i.default;
cc._RF.pop();
}, {} ],
AdVideoManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "c2997XmCO1AuZphE0UwyTgd", "AdVideoManager");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
e("BaseManager");
var s = cc.Class({
extends: BaseManager,
statics: {},
ctor: function() {},
showVedio: function(e, t, i) {
AppUtils.seeAd({
bonusType: e,
loadCallback: function() {},
closeCallback: function(e) {
if (e.isEnable) {
TaskCtrl.getInstance().incrTaskStep(TaskEnum.Type.WatchAds, 1);
i.call(t, ManagerEnum.AdVideoManager.VedioStatus.ShowFinish);
} else logger.warn("中途关闭视频");
},
errorCallback: function() {}
});
},
showAdVideo: function(e, t, i) {
AppUtils.seeAd({
adType: e,
loadCallback: function() {},
closeCallback: function(e) {
if (e.isEnable) i.call(t, ManagerEnum.AdVideoManager.VedioStatus.ShowFinish, {
award: void 0
}); else {
logger.warn("中途关闭视频");
i.call(t, ManagerEnum.AdVideoManager.VedioStatus.CloseOnHalf);
}
},
errorCallback: function() {
i.call(t, ManagerEnum.AdVideoManager.VedioStatus.Error);
}
});
}
});
i.default = s;
t.exports = i.default;
cc._RF.pop();
}, {
BaseManager: "BaseManager"
} ],
AdaptUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "60a1biRCiFNzqQx/1/HX997", "AdaptUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {};
s.DesignResolutionSize = new cc.size(1280, 720);
s.AdaptNodeToHeightAdapt = function(e) {
var t = this.getAdaptHeightScale();
e.scaleX = t;
e.scaleY = t;
};
s.getAdaptHeightScale = function() {
return cc.winSize.height / s.DesignResolutionSize.height;
};
s.getMinAdaptiveScale = function() {
var e = cc.winSize.width / s.DesignResolutionSize.width, t = cc.winSize.height / s.DesignResolutionSize.height;
return e < t ? e : t;
};
s.AdaptNodeToHWAdapt = function(e) {
var t = this.getAdaptHeightScale(), i = this.getAdaptWidthScale(), s = Math.min(t, i);
e.scaleX = s;
e.scaleY = s;
};
s.AdaptNodeToFullAdapt = function(e) {
var t = this.getAdaptHeightScale(), i = this.getAdaptWidthScale();
e.scaleX = i;
e.scaleY = t;
};
s.AdaptNodeToFullSize = function(e) {
e.width = cc.winSize.width;
e.height = cc.winSize.height;
};
s.getAdaptWidthScale = function() {
return cc.winSize.width / s.DesignResolutionSize.width;
};
s.adaptiveTopY = function(e, t, i) {
var s = e.height, n = e.anchorY, o = e.scaleY, a = e.parent.convertToWorldSpaceAR(cc.v2(e.x, e.y)), r = s * o * (1 - n), l = cc.v2(a.x, cc.winSize.height / 2 * 3 - r - (t || 0)), c = e.parent.convertToNodeSpaceAR(l);
if (i) return c;
e.position = c;
};
s.isLiuHai = function() {
return UserUtils.getFloatVal(UserDefaultConst.UserSettingIsLiuHai, 0) > 0;
};
var n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
AlignUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "89344T+37JBkpBJC+RQclsK", "AlignUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
CenterForNodes: function(e) {
for (var t = arguments.length, i = new Array(t > 1 ? t - 1 : 0), s = 1; s < t; s++) i[s - 1] = arguments[s];
var n = [].concat(i);
this.CenterForNodesArray(e, n);
},
CenterForNodesArray: function(e, t) {
if (t) if (0 !== t.length) {
for (var i = 0, s = 0; s < t.length; s++) i += t[s].x;
for (var n = e - i / t.length, o = 0; o < t.length; o++) t[o].x += n;
} else logger.error("nodesArray.length == 0"); else logger.error("nodesArray == null");
},
CenterAlignForNodes: function(e, t) {
for (var i = arguments.length, s = new Array(i > 2 ? i - 2 : 0), n = 2; n < i; n++) s[n - 2] = arguments[n];
for (var o = [].concat(s), a = [], r = 0; r < o.length - 1; r++) a.push(t);
this.CenterAlignForNodesArray(e, a, o);
},
CenterAlignForNodesArray: function(e, t, i) {
if (i) if (0 !== i.length) {
for (var n = 0, o = 0; o < i.length; o++) n += i[o].width;
for (var a = 0, r = 0; r < t.length; r++) a += t[r];
var l = e - (n + a) / 2;
i[0].x = l + i[0].width / 2;
s.L2RForNodesArray(t, i);
} else logger.error("nodesArray.length == 0"); else logger.error("nodesArray == null");
},
L2RForNodes: function(e) {
for (var t = arguments.length, i = new Array(t > 1 ? t - 1 : 0), s = 1; s < t; s++) i[s - 1] = arguments[s];
for (var n = [].concat(i), o = [], a = 0; a < n.length - 1; a++) o.push(e);
this.L2RForNodesArray(o, n);
},
L2RForNodesArray: function(e, t) {
for (var i = t[0], s = 1; s < t.length; s++) {
var n = t[s], o = i.x + i.width * i.scaleX * (1 - i.anchorX) + n.width * n.scaleX * n.anchorX + e[s - 1];
n.x = o;
i = n;
}
},
R2LForNodes: function(e) {
for (var t = arguments.length, i = new Array(t > 1 ? t - 1 : 0), s = 1; s < t; s++) i[s - 1] = arguments[s];
for (var n = [].concat(i), o = [], a = 0; a < n.length - 1; a++) o.push(e);
this.R2LForNodesArray(o, n);
},
R2LForNodesArray: function(e, t) {
for (var i = t.length - 1, s = t[i], n = i - 1; n >= 0; n--) {
var o = t[n], a = s.x - s.width * s.scaleX * s.anchorX - o.width * o.scaleX * (1 - o.anchorX) - e[i];
o.x = a;
s = o;
}
}
}, n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
AndroidPlatform: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "3a28eAWA49P0oQkKeqkw437", "AndroidPlatform");
var s = e("BasePlatfrom");
cc.Class({
extends: s,
ctor: function() {},
init: function() {
s.prototype.init.call(this, "IOSPlatform");
this.setWXCallback();
return this;
},
initAd: function() {},
onExit: function() {
s.prototype.onExit.call(this);
},
seeAd: function(e) {
if (s.prototype.seeAd.call(this)) {
this.seeAdReal(e);
}
},
seeAdReal: function(e) {
this._bonusType = e.bonusType;
this._loadCallback = e.loadCallback;
this._closeCallback = e.closeCallback;
this._errorCallback = e.errorCallback;
jsb.reflection.callStaticMethod("org/cocos2dx/javascript/SDKHelper", "playRewardVideoJs", "(Ljava/lang/String;Ljava/lang/String;Z)V", "123123", "extra", !1);
},
onCloseAd: function(e) {
s.prototype.onCloseAd.call(this);
console.info("onCloseAd res = ", e);
if (this._closeCallback) if (e && e.isEnded) {
console.info("res.isEnded = ", e.isEnded);
this.didRewardAd();
this._closeCallback({
isEnable: e.isEnded
});
} else {
this.didCloseAd();
this._closeCallback({
isEnable: !1
});
}
},
onErrorAd: function(e) {
s.prototype.onErrorAd.call(this);
console.info("res = ", e);
console.info("res.errMsg = ", e.errMsg);
this.didErrorAd();
this._errorCallback && this._errorCallback();
},
onLoadAd: function(e) {
s.prototype.onLoadAd.call(this);
},
onShowAd: function() {
System.out.println("@@@@@@@@@@@@@@@@@@ AndroidPlatform  onShowAd");
EventManager.emit(AppEvent.PlayerSeedAdBegin, {});
},
copy: function(e) {
jsb.reflection.callStaticMethod("org/cocos2dx/javascript/SDKHelper", "JavaCopy", "(Ljava/lang/String;)V", e);
},
setWXCallback: function() {
var e = this;
cc.wxLoginResult = function(t) {
e.onGetAuthCode(t);
};
cc.wxShareResult = function(t) {
if (TypeUtils.isFunction(e.shareCallback)) {
e.shareCallback(t);
e.shareCallback = null;
}
};
cc.jumpMiniResult = function(e) {
console.log("jumpMiniResult >>>>>>>>>>>", e);
};
},
login: function() {
jsb.reflection.callStaticMethod("org/cocos2dx/javascript/SDKHelper", "wxLogin", "()V");
},
shareURLToWX: function(e, t, i, s, n) {
s = !0 === s;
this.shareCallback = n;
jsb.reflection.callStaticMethod("org/cocos2dx/javascript/SDKHelper", "shareURLToWX", "(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Z)V", e || "", t || "", i || "", s);
},
shareImageToWX: function(e, t, i) {
t = !0 === t;
this.shareCallback = i;
jsb.reflection.callStaticMethod("org/cocos2dx/javascript/SDKHelper", "shareImageToWX", "(Ljava/lang/String;Z)V", e || "", t);
},
jumpMiniProgram: function(e, t, i) {
jsb.reflection.callStaticMethod("org/cocos2dx/javascript/SDKHelper", "jumpMiniProgram", "(Ljava/lang/String;Ljava/lang/String;I)V", e, t || "", i || 2);
},
onGetAuthCode: function(e) {
var t = this;
app.ctrls.login.wechatLogin(e.authCode, function(e) {
t.setUserData(e);
TypeUtils.isFunction(_callback) && _callback(e);
});
},
loadNetImage: function(e, t, i) {
this.download(e, t, function(e) {
cc.loader.load(e, function(e, t) {
if (e) cc.error(e); else {
var s = new cc.SpriteFrame(t);
if (s) {
s.retain();
i(s);
}
}
});
});
},
download: function(e, t, i) {
var s = jsb.fileUtils.getWritablePath() + "download/";
console.log("dirpath ->", s);
var n = s + t + ".png";
console.log("filepath ->", n);
if (jsb.fileUtils.isFileExist(n)) {
cc.log("Remote is find" + n);
i(n);
} else {
var o = function(e) {
if ("undefined" != typeof e) {
jsb.fileUtils.isDirectoryExist(s) ? console.log("路径exist") : jsb.fileUtils.createDirectory(s);
if (jsb.fileUtils.writeDataToFile(new Uint8Array(e), n)) {
cc.log("Remote write file succeed.");
i(n);
} else cc.log("Remote write file failed.");
} else cc.log("Remote download file failed.");
}, a = new XMLHttpRequest();
a.onreadystatechange = function() {
cc.log("xhr.readyState  " + a.readyState);
cc.log("xhr.status  " + a.status);
4 === a.readyState && (200 === a.status ? o(a.response) : o(null));
}.bind(this);
a.responseType = "arraybuffer";
a.open("GET", e, !0);
a.send();
}
}
});
cc._RF.pop();
}, {
BasePlatfrom: "BasePlatfrom"
} ],
AnimationCacheManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "affb5HwwAJOsJs/EjFbmn3D", "AnimationCacheManager");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = cc.Class({});
i.default = s;
t.exports = i.default;
cc._RF.pop();
}, {} ],
AppEvent: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "75f6c20E9JB6qEiv3vh1vu8", "AppEvent");
window.AppEvent = {
TestEventType: "TestEventType",
GameRemoveView: "GameRemoveView",
GameOpenView: "GameOpenView",
CountingUpdate: "CountingUpdate",
GameResourceUpdate: "GameResourceUpdate",
GameEventEnterBackground: "GameEventEnterBackground",
GameEventEnterForeground: "GameEventEnterForeground",
RoleEventItemChange: "RoleEventItemChange",
RoleEventGoldChange: "RoleEventGoldChange",
RoleEventBagChange: "RoleEventBagChange",
BagItemInfoChange: "BagItemInfoChange",
PlayerSeedAdBegin: "PlayerSeedAdBegin",
PlayerSeedAdEnd: "PlayerSeedAdEnd",
ChangeRecordState: "ChangeRecordState",
RestartGame: "RestartGame",
ChannelSyncData: "ChannelSyncData",
TryEnterGame: "TryEnterGame",
AdaptLiuHaiUI: "AdaptLiuHaiUI",
SystemOnOffInfo: "SystemOnOffInfo",
AllowUserProtocol: "AllowUserProtocol",
RemindsChange: "RemindsChange",
RedPointFishSevenDayTask: "RedPointFishSevenDayTask",
RedPointFishSignUp: "RedPointFishSignUp",
RedPointFishDailyTask: "RedPointFishDailyTask",
RedPointOnlineAward: "RedPointOnlineAward",
RedPointOnlineSign: "RedPointOnlineSign",
RedPointClubDepot: "RedPointClubDepot",
RedPointMail: "RedPointMail",
BetTreasureRecordLuckyer: "BetTreasureRecordLuckyer",
BetTreasureRecordForDuoBao: "BetTreasureRecordForDuoBao",
BetTreasureRecordForExchange: "BetTreasureRecordForExchange",
OnChargeSuccess: "OnChargeSuccess"
};
cc._RF.pop();
}, {} ],
AppUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "58763SY4FRGe4ZSIXb402qR", "AppUtils");
var s = e("QQPlatfrom"), n = e("TTPlatform"), o = e("WXPlatform"), a = e("WindowPlatfrom"), r = cc.sys.platform === cc.sys.ANDROID, l = cc.sys.isNative, c = cc.sys.isBrowser, h = cc.sys.isMobile, u = cc.sys.platform === cc.sys.IPHONE || cc.sys.platform == cc.sys.IPAD, d = cc.sys.platform === cc.sys.DESKTOP_BROWSER, p = cc.sys.platform === cc.sys.WECHAT_GAME, f = cc.sys.platform === cc.sys.QQ_PLAY, m = cc.sys.platform === cc.sys.BAIDU_GAME, g = cc.sys.platform === cc.sys.VIVO_GAME, _ = cc.sys.platform === cc.sys.OPPO_GAME, T = cc.sys.platform === cc.sys.XIAOMI_GAME, C = cc.sys.platform === cc.sys.HUAWEI_GAME, y = (cc.sys.platform, 
cc.sys.JKW_GAME, cc.sys.platform === cc.sys.ALIPAY_GAME);
cc.Class({
ctor: function() {
if (window.qq) if (GlobalUtils.isPid(EnvEnum.Channel.YueRen.Pid)) {
var t = e("YueRenQQPlatfrom");
this.platform = new t().init();
} else this.platform = new s().init(); else if (window.tt) this.platform = new n().init(); else if (window.wx) this.platform = new o().init(); else if (u) {
var i = e("IOSPlatform");
this.platform = new i().init();
} else if (r) {
var l = e("AndroidPlatform");
this.platform = new l().init();
} else this.platform = new a().init();
},
getPlatform: function() {
return this.platform;
},
seeAd: function(e) {
this.platform.seeAd(e);
},
shareMessage: function(e) {
this.platform.shareMessage(e);
},
onGameLaunchInfo: function() {
this.platform.onGameLaunchInfo();
},
login: function(e) {
this.platform.login(e);
},
getToken: function() {
return this.platform.getToken();
},
setUserData: function(e) {
this.platform.setUserData(e);
},
isTokenExpire: function() {
return this.platform.isTokenExpire();
},
getUserName: function() {
return this.platform.getUserName();
},
loadSubPackage: function() {
var e;
return (e = this.platform).loadSubPackage.apply(e, arguments);
},
addOrder: function(e, t) {
return this.platform.addOrder(e, t);
},
download: function(e, t, i) {
return this.platform.download(e, t, i);
},
onShowAdJSBCallback: function() {
console.log("@@@@@@@@@@@@@@@@@@ onShowAdJSBCallback ");
return this.platform.onShowAd();
},
onFinishAdJSBCallback: function(e) {
return this.platform.onCloseAd(e);
},
onErrorAdJSBCallback: function(e) {
return this.platform.onErrorAd(e);
},
onLoadAdJSBCallback: function(e) {
return this.platform.onLoadAd(e);
},
IsBrowser: function() {
return c;
},
IsAndroid: function() {
return r;
},
IsIphone: function() {
return u;
},
IsNative: function() {
return l;
},
IsWechat: function() {
return !this.IsToutiao() && !!window.wx;
},
IsQQPlay: function() {
return !!window.qq;
},
IsToutiao: function() {
return !!window.tt;
},
SupportConfig: function(e) {
console.log(e);
switch (e) {
case "downloader-web":
return !l;

case "EditBoxTabIndex":
return !l && !y;

case "EditBox":
case "EditBoxEvent":
return !y;

case "OnMultiTouchInput":
return h;

case "webp-test":
return cc.sys.capabilities.webp;

case "DeviceMotion":
return h && !f && !g;

case "Native_Call":
return h && (r || u) && !0;

case "TTFFontLabel":
return !f;

case "Subpackages":
return !1;

case "MousePropagation":
return l && !h && !p && !f && !T && !C && !y || d;

case "downloader-native":
return l && !0;

case "capture_to_native":
return l && !g && !_;

case "iOS_getSafeArea":
return u && l;

case "capture_to_wechat":
return p;

case "capture_to_web":
case "ShadowLabel":
return c;

case "MotionStreak":
case "Mask_IMAGE_STENCIL":
case "Mask_NESTED":
return cc.game.renderType === cc.game.RENDER_TYPE_WEBGL;

case "KeyboardInput":
case "platform":
return !(h || p || m || T || C || y);

case "videoPlayer":
return (h || c) && !f && !m && !T && !C && !y;

case "webview":
return (h || c) && !f && !p && !m && !T && !C && !y;

case "mesh":
return !g && !_;
}
}
});
cc._RF.pop();
}, {
AndroidPlatform: "AndroidPlatform",
IOSPlatform: "IOSPlatform",
QQPlatfrom: "QQPlatfrom",
TTPlatform: "TTPlatform",
WXPlatform: "WXPlatform",
WindowPlatfrom: "WindowPlatfrom",
YueRenQQPlatfrom: "YueRenQQPlatfrom"
} ],
ArrayUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "c80e6Az2V1FSYaHayx9IG/8", "ArrayUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
filter: function(e, t) {
for (var i = [], s = 0; s < e.length; s++) t(e[s], s) && i.push(e[s]);
return i;
},
safeRemove: function(e, t) {
for (var i = [], s = 0; s < e.length; s++) t(s, e[s]) && i.push(s);
for (var n = i.length - 1; n >= 0; n--) this.remove(e, i[n]);
},
merge: function(e, t) {
for (var i = 0; i < t.length; i++) e.push(t[i]);
},
concat: function(e) {
for (var t = arguments.length, i = new Array(t > 1 ? t - 1 : 0), s = 1; s < t; s++) i[s - 1] = arguments[s];
return e.concat.apply(e, i);
},
insert: function(e, t, i) {
e.splice(t, 0, i);
},
remove: function(e, t, i) {
if (0 !== i) return e.splice(t, i || 1);
},
keyOf: function(e, t) {
for (var i = 0; i < e.length; i++) if (t == e[i]) return i;
},
swap2: function(e, t, i, s, n) {
var o = e[t][i];
e[t][i] = e[s][n];
e[s][n] = o;
},
clone: function(e) {
return e.slice();
},
sort: function(e, t) {
TypeUtils.isArray(e) ? e.sort(t) : logger.error("array not array:", e);
},
bubbleSort: function(e, t) {
for (var i = e.length, s = 0; s < i; s++) for (var n = 0; n < i - 1 - s; n++) if (t(e[n], e[n + 1])) {
var o = e[n + 1];
e[n + 1] = e[n];
e[n] = o;
}
return e;
},
Max: function(e, t) {
if (e) {
if (0 !== e.length) {
for (var i = e[0], s = 1; s < e.length; s++) {
var n = e[s];
t(i, n) && (i = n);
}
return i;
}
logger.error("arr.length === 0");
} else logger.error("arr == null");
}
}, n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
AudioMusicManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "70c6deh3pVKbLyN8Vg+kTep", "AudioMusicManager");
e("BaseAssetManager");
cc.Class({
extends: BaseAssetManager,
properties: {
_name: {
default: "AudioMusicManager",
override: !0
}
},
ctor: function() {
this._musicVolume = UserUtils.getFloatVal(UserDefaultConst.MusicVolume, 1);
this._soundVolume = UserUtils.getFloatVal(UserDefaultConst.SoundVolume, 1);
this.music = -1;
this.sounds = {};
cc.audioEngine.setMaxAudioInstance(8);
},
setMusicVolume: function(e) {
this._musicVolume = e;
if (-1 != this.music) {
0 == e ? cc.audioEngine.pauseMusic() : cc.audioEngine.resumeMusic();
cc.audioEngine.setMusicVolume(e);
}
UserUtils.setFloatVal(UserDefaultConst.MusicVolume, e);
},
getMusicVolume: function() {
return this._musicVolume;
},
setSoundVolume: function(e) {
this._soundVolume = e;
for (var t in this.sounds) {
var i = this.sounds[t];
cc.audioEngine.getState(i) != cc.audioEngine.AudioState.ERROR && cc.audioEngine.setVolume(i, e);
}
UserUtils.setFloatVal(UserDefaultConst.SoundVolume, e);
},
getSoundVolume: function() {
return this._soundVolume;
},
playMusic: function(e) {
var t = this, i = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
-1 != this.music && cc.audioEngine.stop(this.music);
LoadUtils.loadResWithType(e, cc.AudioClip, function(e, s) {
if (s) {
t.music = cc.audioEngine.playMusic(s, i);
0 == t._musicVolume && cc.audioEngine.pauseMusic();
cc.audioEngine.setMusicVolume(t._musicVolume);
}
});
},
stopMusic: function() {
if (-1 != this.music && cc.audioEngine.getState(this.music) != cc.audioEngine.AudioState.ERROR) {
cc.audioEngine.stopMusic();
this.music = -1;
}
},
playSound: function(e) {
var t = this, i = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
if (0 == this._soundVolume) return -1;
LoadUtils.loadResWithType(e, cc.AudioClip, function(e, s) {
if (s) {
var n = cc.audioEngine.play(s, i, t._soundVolume);
t.sounds[n] = !0;
cc.audioEngine.setFinishCallback(n, function() {
delete t.sounds[n];
});
}
});
},
stopSound: function(e) {
if (-1 != e && cc.audioEngine.getState(e) != cc.audioEngine.AudioState.ERROR) {
cc.audioEngine.stop(e);
delete this.sounds[e];
}
},
stopSounds: function() {
for (var e in this.sounds) {
var t = this.sounds[e];
if (cc.audioEngine.getState(t) != cc.audioEngine.AudioState.ERROR) {
cc.audioEngine.stop(t);
delete this.sounds[t];
}
}
}
});
cc._RF.pop();
}, {
BaseAssetManager: "BaseAssetManager"
} ],
BagConst: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "d93b261uDdIcabJxxPrVHOp", "BagConst");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s;
function n(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}
var o = {
gapY: -100,
baseGunId: 1,
tabList: [ {
index: 1,
zorder: 2,
tip: "道具"
}, {
index: 2,
zorder: 1,
tip: "炮塔"
} ]
};
o.detail = (n(s = {}, 1, {
name: "弹头",
btn_panel: [ {
txt: "赠送",
touchEnable: !0,
isVisible: !1,
handleName: "GiveWarhead",
btn_img_name: "btn_08_select.png",
strokeColor: cc.color(188, 103, 37, 255)
}, {
txt: "获得",
touchEnable: !0,
isVisible: !1,
handleName: "GetWarhead"
}, {
txt: "出售",
touchEnable: !0,
isVisible: !0,
handleName: "SellWarhead"
} ],
btn_panel_laba: [ {
isVisible: !1
}, {
isVisible: !1
}, {
txt: "使用",
touchEnable: !0,
isVisible: !0,
handleName: "UseLaba"
} ],
num_panel: {
tipTxt: "拥有数量：",
txtColor: cc.color(255, 255, 255),
strokeColor: cc.color(110, 71, 38)
}
}), n(s, 2, {
name: "七天礼包",
btn_panel: [ {
isVisible: !1
}, {
txt: "获得",
touchEnable: !0,
isVisible: !0,
handleName: "GetWeekGift"
}, {
isVisible: !1
} ],
num_panel: {
tipTxt: "剩余时间：",
txtColor: cc.color(255, 255, 255),
strokeColor: cc.color(110, 71, 38, 255)
}
}), n(s, 3, {
name: "炮塔",
btn_panel: [ {
txt: "已装备",
touchEnable: !1,
isVisible: !0,
btn_img_name: "btn_08_blue.png",
strokeColor: cc.color(57, 97, 141, 255)
}, {
txt: "永久获得",
touchEnable: !0,
isVisible: !0,
handleName: "GetGun"
}, {
txt: "装备",
touchEnable: !0,
isVisible: !0,
handleName: "EquipGun"
} ],
num_panel: {
tipTxt: "有效时间：",
txtColor: cc.color(59, 233, 110),
strokeColor: cc.color(0, 93, 68, 255)
}
}), s);
var a = o;
i.default = a;
t.exports = i.default;
cc._RF.pop();
}, {} ],
BagCtrl: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "7ab5bxw4MtO1rmwZrp0+ZEA", "BagCtrl");
var s = e("HttpCtrl"), n = e("BagModel");
cc.Class({
extends: s,
properties: {},
ctor: function() {
var e = new n();
this.init(e);
},
requireAfterEnterGame: function() {
this.addEvent(M_Gun.updateGunList, this.handleUpdateGun.bind(this));
this.addEvent(M_Bag.syncItems, this.handleUpdateBagInfo.bind(this));
this.addEvent(M_Bag.showAwards, this.handleShowAwards.bind(this));
this.getBagInfo();
this.getGunList();
},
getBagInfo: function() {
session.request(M_Bag.getBagInfo, null, this.handlerWithError(this, this.handleGetBagInfo), null, !1);
},
sendItems: function(e, t, i, s) {
var n = {
receiverId: e,
itemId: t,
amount: i
};
session.request(M_Bag.giveItem, n, this.handlerWithError(this, this.handleSendItems), s, !0);
},
handleGetBagInfo: function(e) {
if (!TypeUtils.isRealNull(e.data)) {
var t = e.data.list;
this.model.setBagInfo(t);
}
},
handleUpdateBagInfo: function(e) {
this.model.updateBagInfos(e.data.list);
},
handleShowAwards: function(e) {
this.model.handleShowAwards(e.data.list);
},
handleSendItems: function(e) {
var t = e.param || {};
TypeUtils.isFunction(t.callBack) && t.callBack();
},
giveItem: function(e, t, i) {
if (TypeUtils.isRealNull(e)) TipsUtils.showTips(_LANG("RECEIVER_ID_IS_ERROR")); else if (TypeUtils.isRealNull(i) || i <= 0) TipsUtils.showTips(_LANG("GIVE_NUM_IS_ERROR")); else if (!TypeUtils.isRealNull(t)) if (TypeUtils.isRealNull(this.isGiving)) {
this.isGiving = !0;
var s = {
receiverId: e,
itemId: t,
amount: i
};
session.request(M_Bag.giveItem, s, this.handleGiveItem.bind(this), {
itemId: t
}, !1);
} else TipsUtils.showTips(_LANG("IS_GIVING"));
},
handleGiveItem: function(e) {
if (e.errorCode == SystemError.success) {
TipsUtils.showTips(_LANG("GIVE_ITEM_SUCCESS"));
this.model.handleGiveItemSuccess();
} else if (e.errorCode == BagError.chargeNotEnough) {
var t = ConfigMgr.getConfig("item_config").findByIndex(e.param.itemId);
TipsUtils.showTips("累计充值金额达到" + (t.giftChargeLimit || 0) + "才能赠送");
} else ViewManager.showErrorMsg(e.errorCode);
this.isGiving = !1;
},
useItem: function(e, t) {
var i = {
itemId: e,
amount: t
};
session.request(M_Bag.useItem, i, this.handlerWithError(this, this.handleUseItem), null, !1);
},
handleUseItem: function(e) {
app.ctrls.shop.getGiftInfoList();
this.model.setUseItemSuccess();
TypeUtils.isRealNull(e.data) || ViewManager.showAwards({
awards: e.data.list
});
},
getRandomItem: function(e) {
session.request(M_Bag.randomItem, e, this.handlerWithError(this, this.handleRandomItem), null, !1);
},
handleRandomItem: function(e) {
this.model.getRandomItemSucess(e.data);
},
getGunList: function() {
session.request(M_Gun.getGunInfo, null, this.handlerWithError(this, this.handleGetGunInfo), null, !1);
},
handleGetGunInfo: function(e) {
TypeUtils.isRealNull(e.data) || this.model.setGuns(e.data);
},
getGiftRecord: function(e) {
var t = this, i = {
method: "getGiftRecord",
data: {
roleId: e
}
};
this.request(i, function(e) {
t.model.updateGiftRecord(e);
}, !1);
},
handleUpdateGun: function(e) {
this.model.updateGuns(e.data, !0);
},
requestGunForge: function(e, t) {
session.request(M_Gun.forge, e, this.handlerWithError(this, this.handleGunUnlock), null, !1);
},
handleGunUnlock: function(e) {
this.model.handleGunUnlock(e.data);
},
getGiveItemCount: function(e, t) {
session.request(M_Bag.getGiveItemRemainCount, e, this.handlerWithError(this, this.handleGiveItemCount), t, !1);
},
handleGiveItemCount: function(e) {
var t = e.param || {};
TypeUtils.isFunction(t.callback) && t.callback(e.data);
},
getGiftRecordByRoleId: function() {
var e = this, t = {
method: "getGiftRecordByRoleId",
data: {
roleId: RoleUtils.getRoleId()
}
};
this.request(t, function(t) {
e.model.setGiftRecord(t);
});
}
});
cc._RF.pop();
}, {
BagModel: "BagModel",
HttpCtrl: "HttpCtrl"
} ],
BagModel: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "ad4232uFolKVYm+iJU6UrP7", "BagModel");
var s = e("ItemConst"), n = e("ShopConst");
cc.Class({
extends: ModelBase,
properties: {
EVENT_CHECK_DETAIL: "EVENT_CHECK_DETAIL",
EVENT_UPDATE_BAG_GUN: "EVENT_UPDATE_BAG_GUN",
EVENT_REQUEST_BAG_INFO: "EVENT_REQUEST_BAG_INFO",
EVENT_UPDATE_BAG_INFO: "EVENT_UPDATE_BAG_INFO",
EVENT_GIVE_ITEM_SUCCESS: "EVENT_GIVE_ITEM_SUCCESS",
EVENT_GET_GIFT_RECORD_SUCCESS: "EVENT_GET_GIFT_RECORD_SUCCESS",
EVENT_STEEL_SAFE_DIAMOND_CHANGE: "EVENT_STEEL_SAFE_DIAMOND_CHANGE",
EVENT_USE_ITEM_SUCCESS: "EVENT_USE_ITEM_SUCCESS",
EVENT_GET_RANDOM_ITEM_SUCCESS: "EVENT_GET_RANDOM_ITEM_SUCCESS",
EVENT_UPDATE_GUN_FORGE: "EVENT_UPDATE_GUN_FORGE",
EVENT_BAG_WITH_DRAW_SUCCESS: "EVENT_BAG_WITH_DRAW_SUCCESS",
EVENT_GET_RECORD_SUCCESS: "EVENT_GET_RECORD_SUCCESS"
},
ctor: function() {
this.init();
this.bagInfo = [];
},
setBagInfo: function(e) {
this.bagInfo = [];
for (var t in e) if (e.hasOwnProperty(t)) {
var i = e[t];
!TypeUtils.isRealNull(i.itemId) && i.itemId > 0 && this.bagInfo.push(i);
}
for (var o = [ {
itemId: s.ResourceType.Frozen,
amount: 0,
soltId: 0,
rank: 1,
canBuy: !0,
shopId: n.Fish_FrozenId
}, {
itemId: s.ResourceType.KuangBao,
amount: 0,
soltId: 0,
rank: 2,
canBuy: !0,
shopId: n.Fish_KuanagBaoId
}, {
itemId: s.ResourceType.Collimation,
amount: 0,
soltId: 0,
rank: 3,
canBuy: !0,
shopId: n.Fish_CollimationId
}, {
itemId: s.ResourceType.HaoJiao,
amount: 0,
soltId: 0,
rank: 4,
canBuy: !0,
shopId: n.Fish_HaoJiaoId
}, {
itemId: s.ResourceType.ShenDeng,
amount: 0,
soltId: 0,
rank: 5,
canBuy: !0,
shopId: n.Fish_ShenDengId
}, {
itemId: s.ResourceType.WarheadBronze,
amount: 0,
soltId: 0,
rank: 6,
canBuy: !0,
shopId: n.Fish_NBombId
}, {
itemId: s.ResourceType.WarheadSilver,
amount: 0,
soltId: 0,
rank: 7,
canBuy: !1
}, {
itemId: s.ResourceType.WarheadGold,
amount: 0,
soltId: 0,
rank: 8,
canBuy: !1
}, {
itemId: s.ResourceType.WarheadPlatinum,
amount: 0,
soltId: 0,
rank: 9,
canBuy: !1
} ], a = 0; a < this.bagInfo.length; a++) {
var r = this.bagInfo[a], l = ItemUtils.getItemCfg(r.itemId) || {};
this.bagInfo[a] = DicUtils.merge(r || {}, l);
this.bagInfo[a].rank = 10;
for (var c = 0; c < o.length; c++) {
var h = o[c];
if (r.itemId == h.itemId) {
var u = ArrayUtils.remove(o, c);
this.bagInfo[a].rank = u[0].rank;
this.bagInfo[a].canBuy = u[0].canBuy;
this.bagInfo[a].shopId = u[0].shopId;
break;
}
}
}
for (var d = 0; d < o.length; d++) {
var p = o[d], f = ItemUtils.getItemCfg(p.itemId) || {}, m = DicUtils.merge(p || {}, f);
this.bagInfo.push(m);
}
this.dispatchEvent(this.EVENT_REQUEST_BAG_INFO);
},
getBagInfo: function() {
this.bagInfo = this.bagInfo || [];
ArrayUtils.sort(this.bagInfo, function(e, t) {
return TypeUtils.isRealNull(e.rank) || TypeUtils.isRealNull(t.rank) || e.rank == t.rank ? e.priority && t.priority && e.priority != t.priority ? e.priority - t.priority : e.itemId && t.itemId && e.itemId != t.itemId ? e.itemId - t.itemId : e.amount && t.amount && e.amount != t.amount ? e.amount - t.amount : e.soltId - t.soltId : e.rank - t.rank;
});
return DicUtils.copy(this.bagInfo);
},
handleShowAwards: function(e) {
ViewManager.showAwards({
awards: e
});
},
updateBagInfos: function(e) {
for (var t = 0; t < e.length; t++) {
for (var i = e[t], s = ItemUtils.getItemCfg(i.itemId) || {}, n = [], o = !1, a = 0; a < this.bagInfo.length; a++) {
var r = this.bagInfo[a];
if (r.soltId == i.soltId || r.itemId == i.itemId && !TypeUtils.isRealNull(r.canBuy)) {
if (TypeUtils.isRealNull(r.canBuy)) if (0 == i.itemId || 0 == i.amount) {
n.push(a);
e[t].removeItemId = r.itemId;
} else this.bagInfo[a] = DicUtils.merge(i, s); else {
this.bagInfo[a].amount = i.amount;
this.bagInfo[a].soltId = i.soltId;
if (0 == i.amount) {
e[t].removeItemId = r.itemId;
this.bagInfo[a].soltId = 0;
}
}
o = !0;
break;
}
}
for (var l = n.length - 1; l >= 0; l--) {
var c = n[l];
ArrayUtils.remove(this.bagInfo, c, 1);
}
o || this.bagInfo.push(DicUtils.merge(i, s));
}
this.bagInfo = TableUtils.toRankTable(this.bagInfo);
this.emit(AppEvent.BagItemInfoChange, {
updateList: e,
bagInfo: this.bagInfo
});
this.dispatchEvent(this.EVENT_UPDATE_BAG_INFO, {
updateList: e,
bagInfo: this.bagInfo
});
},
getGunEnergy: function(e) {
return TypeUtils.isRealNull(e) || TypeUtils.isRealNull(this.gunsInfo[e]) || 0 == this.gunsInfo[e].expiredAt ? null : this.gunsInfo[e].energy;
},
getGunById: function(e) {
if (!TypeUtils.isRealNull(e) && !TypeUtils.isRealNull(this.gunsInfo[e]) && 0 != this.gunsInfo[e].expiredAt) {
return DicUtils.copy(this.gunsInfo[e]);
}
return null;
},
updateGuns: function(e) {
if (!TypeUtils.isRealNull(e) && !TypeUtils.isRealNull(e.list)) {
for (var t, i = app.ctrls.login.getModel().getCurrentServerTime(), s = 0; s < e.list.length; s++) {
var n = e.list[s];
TypeUtils.isRealNull(t) && TypeUtils.isRealNull(this.gunsInfo[n.id]) && n.expiredAt > i && (t = n.id);
this.gunsInfo[n.id] = n;
}
this.dispatchEvent(this.EVENT_UPDATE_BAG_GUN, {
new: t
});
}
},
getGunForgeLevel: function() {
return this.gunForgeLevel || 1;
},
getGuns: function() {
return this.gunsInfo || {};
},
setGuns: function(e) {
TypeUtils.isRealNull(e.forgeLevel) || (this.gunForgeLevel = e.forgeLevel);
this.gunsInfo = {};
for (var t = 0; t < e.list.length; t++) {
var i = e.list[t];
this.gunsInfo[i.id] = i;
}
},
handleGunUnlock: function(e) {
if (!TypeUtils.isRealNull(e.forgeLevel)) {
this.gunForgeLevel = e.forgeLevel;
this.dispatchEvent(this.EVENT_UPDATE_GUN_FORGE, e);
}
},
getGunInfoById: function(e) {
var t = ConfigMgr.getConfig("gun_config").findByIndex(e);
return TypeUtils.isRealNull() ? null : t;
},
checkDetail: function(e) {
this.dispatchEvent(this.EVENT_CHECK_DETAIL, e);
},
handleGiveItemSuccess: function() {
this.dispatchEvent(this.EVENT_GIVE_ITEM_SUCCESS);
},
updateGiftRecord: function(e) {
this.dispatchEvent(this.EVENT_GET_GIFT_RECORD_SUCCESS, e);
},
setUseItemSuccess: function() {
this.dispatchEvent(this.EVENT_USE_ITEM_SUCCESS);
},
getRandomItemSucess: function(e) {
this.dispatchEvent(this.EVENT_GET_RANDOM_ITEM_SUCCESS, e);
},
checkItemIsGun: function(e) {
var t = ConfigMgr.getConfig("item_config").findByIndex(e);
return !TypeUtils.isRealNull(t.gun);
},
setGiftRecord: function(e) {
this.giftRecord = {};
this.giftRecord[1] = e.sendGiftRecord || {};
this.giftRecord[2] = e.receiveRecord || {};
this.dispatchEvent(this.EVENT_GET_RECORD_SUCCESS);
},
getGiftRecord: function() {
return this.giftRecord || {};
},
getItem: function(e) {
for (var t, i = 0, s = 0; s < this.bagInfo.length; s++) {
var n = this.bagInfo[s];
if (n.itemId == e) {
TypeUtils.isRealNull(t) && (t = DicUtils.copy(n));
i += n.amount;
}
}
TypeUtils.isRealNull(t) || (t.amount = i);
return t;
},
getItemNum: function(e) {
return (this.getItem(e) || {}).amount || 0;
}
});
cc._RF.pop();
}, {
ItemConst: "ItemConst",
ShopConst: "ShopConst"
} ],
BaseAssetManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "d6e09QXPn9PEIsSCDX9vNQ9", "BaseAssetManager");
e("BaseManager");
window.BaseAssetManager = cc.Class({
extends: BaseManager,
properties: {
_name: {
default: "BaseAssetManager",
override: !0
}
},
ctor: function() {
this.m_resources = {};
this.m_waitResources = {};
},
onExit: function() {},
loadResourceReal: function(e, t) {},
loadResource: function(e, t, i, s) {
for (var n = 0, o = function(s, o) {
n++;
t && t(s, o, n);
n === e.length && i && i();
}, a = 0; a < e.length; a++) {
var r = e[a];
this.tryLoadResource(r, o, s);
}
},
deloadResource: function(e) {
for (var t = 0; t < e.length; t++) {
var i = e[t];
this.isUsedMoreThanOnetime(i) ? this.addUsingTime(i, -1) : this.isResourceExist(i) && (this.m_resources[i].isRetain || this.destroyResource(i));
}
},
deloadResourceForce: function(e) {
for (var t = 0; t < e.length; t++) {
var i = e[t];
if (this.isUsedMoreThanOnetime(i)) {
logger.warn("使用次数大于1次,但是调用强行删除:", i);
this.destroyResource(i);
}
this.destroyResource(i);
}
},
getResource: function(e) {
return this.m_resources[e].resource;
},
getResourceByShortUrl: function(e) {
for (var t in this.m_resources) if (this.m_resources[t].shortUrl === e) return this.m_resources[t].resource;
},
retain: function(e) {
if (this.isResourceExist(e)) {
if (this.m_resources[e].isRetain) return;
this.addUsingTime(e, 1);
this.m_resources[e].isRetain = !0;
} else logger.warn("不存在的资源retain");
},
release: function(e) {
if (this.isResourceExist(e)) {
this.addUsingTime(e, -1);
this.m_resources[e].isRetain = !1;
} else logger.warn("不存在的资源retain");
},
clearResource: function(e) {
for (var t = 0; t < e.length; t++) DicUtils.has(this.m_resources, e[t]) && delete this.m_resources[e[t]];
},
destroyResource: function(e) {
var t = this.getAtlasData(e);
t && cc.loader.releaseAsset(t.resource);
this.m_resources[e] = void 0;
},
saveResource: function(e, t) {
this.addUsingTime(e, 1);
this.m_resources[e].resource = t;
},
initResource: function(e) {
if (!this.m_resources[e]) {
var t = e.split("/"), i = t[t.length - 1];
this.m_resources[e] = {
usingTime: 0,
url: e,
shortUrl: i,
loadTime: 1
};
}
},
addUsingTime: function(e, t) {
this.m_resources[e].usingTime += t;
},
isUsedMoreThanOnetime: function(e) {
return this.getUsingTimes(e) > 1;
},
isResourceExist: function(e) {
return this.m_resources[e] && this.m_resources[e].resource;
},
isResourceStructExist: function(e) {
return this.m_resources[e];
},
getAtlasData: function(e) {
return this.m_resources[e];
},
getUsingTimes: function(e) {
return this.isResourceExist(e) ? this.m_resources[e].usingTime : 0;
},
pushIntoArray: function(e, t, i) {
this.m_waitResources[e] || (this.m_waitResources[e] = []);
this.m_waitResources[e].push({
url: e,
callback: t,
type: i
});
},
isEmptyResource: function(e) {
return !this.isResourceExist(e) && !!this.m_resources[e];
},
tryLoadResource: function(e, t, i) {
var s = this;
if (this.isEmptyResource(e)) this.pushIntoArray(e, t, i); else if (this.isResourceExist(e)) {
this.addUsingTime(e, 1);
t(e, this.getResource(e));
} else {
this.initResource(e);
this.loadResourceReal(e, function(e, i) {
s.saveResource(e, i);
if (s.m_waitResources[e]) {
for (var n = 0; n < s.m_waitResources[e].length; n++) s.m_waitResources[e][n].callback && s.m_waitResources[e][n].callback(e, i);
s.m_waitResources[e] = null;
}
t(e, i);
}, i);
}
}
});
cc._RF.pop();
}, {
BaseManager: "BaseManager"
} ],
BaseCacheComponent: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "cdb65IsJNtOubb65lXCBRKn", "BaseCacheComponent");
var s = e("BaseComponent");
window.BaseCacheComponent = cc.Class({
extends: s,
setCacheComponentFinishiCallback: function(e) {
this.__m_finishiCallFunc = e;
},
callbackInitFinish: function() {
this.__m_finishiCallFunc && this.__m_finishiCallFunc();
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
BaseComponent: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "dd182ftMVZJ+rmfpdJbr1r/", "BaseComponent");
window.BaseComponent = cc.Class({
extends: cc.Component,
playSound: function(e) {
var t = "module/fish/sound/" + e;
AudioMusicManager.playSound(t);
},
pauseSoundByAudioId: function(e) {
AudioMusicManager.stopSound(e);
},
stopSounds: function() {
AudioMusicManager.stopSounds();
},
playMusic: function(e) {
var t = "module/fish/sound/bgm/" + e;
AudioMusicManager.playMusic(t);
},
playHallMusic: function() {
this.playMusic("FishHallBGM");
},
delayTimer: function(e, t) {
var i = TimeMgr.on(e, null, t, !0);
this.m_timerTbl.push(i);
},
_initEvent: function() {
this.eventOn(AppEvent.ChannelSyncData, this._handleSyncChannelData, this);
},
_handleSyncChannelData: function(e) {
var t = e.channelType, i = ChannelUtils.getChannelEvent(t);
this[i] && this[i](e.data);
},
_loadSingleTexture: function(e, t, i) {
var s = function(e, i) {
if (this.isValid) {
this.m_SingleSpriteFrameUrls.push(e);
t(e, i);
}
}.bind(this);
SingleTextureManager.loadResource(e, s, i);
},
_retainText: function(e) {
TextManager.retain(e);
},
_loadSingleTexture2D: function(e, t) {
var i = function(e, i) {
if (this.isValid) {
this.m_texture2DUrls.push(e);
t(e, i);
}
}.bind(this);
Texture2DManager.loadResource([ e ], i);
},
_retainTexture2D: function(e) {
Texture2DManager.retain(e);
},
_loadText: function(e, t, i) {
var s = function(e, i) {
if (this.isValid) {
this.m_textUrls.push(e);
t(e, i);
}
}.bind(this);
TextManager.loadResource(e, s, i);
},
_loadSingleText: function(e, t) {
var i = function(e, i) {
if (this.isValid) {
this.m_textUrls.push(e);
t(e, i);
}
}.bind(this);
TextManager.loadResource([ e ], i);
},
_loadAsset: function(e, t, i, s) {
var n = function(e, t) {
if (this.isValid) {
this.m_commonAssetsUrls.push(e);
i(e, t);
}
}.bind(this);
CommonAssetsManager.loadResource(e, n, s, t);
},
_loadSingleAsset: function(e, t, i) {
var s = function(e, t) {
if (this.isValid) {
this.m_commonAssetsUrls.push(e);
i(e, t);
}
}.bind(this);
CommonAssetsManager.loadResource([ e ], s, null, t);
},
getC: function(e) {
return NodeUtils.seekC(this.node, e);
},
getUIChild: function(e) {
return NodeUtils.seekC(this.node, e);
},
seekC: function(e, t) {
return NodeUtils.seekC(e, t);
},
seekChild: function(e, t) {
return NodeUtils.seekC(e, t);
},
onClick: function(e, t, i) {
if (e) {
var s = null;
e instanceof cc.Button ? s = e.node : e instanceof cc.Node && (s = e);
if (null != s) {
s.targetOff(this);
s.on("click", function(i) {
t(e);
}, this);
}
} else logger.error("btn == undefine");
},
onLongClick: function(e, t) {
var i = this, s = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, n = arguments.length > 3 && void 0 !== arguments[3] && arguments[3], o = void 0, a = function(e) {
TypeUtils.isFunction(t) && (e && !o || t(e));
o = void 0;
};
e.on(cc.Node.EventType.TOUCH_START, function(e) {
o = e.getLocation();
i.delayTimer(function() {
a(!0);
}, s);
}, this);
e.on(cc.Node.EventType.TOUCH_MOVE, function(t) {
var i = t.getLocation();
e.getBoundingBoxToWorld().contains(i) || a(!1);
}, this);
e.on(cc.Node.EventType.TOUCH_END, function(e) {
a(!1);
}, this);
e.on(cc.Node.EventType.TOUCH_CANCEL, function(e) {
a(!1);
}, this);
e._touchListener.setSwallowTouches(n);
},
setChannel: function(e, t) {
for (var i = e || [], s = 0; s < i.length; s++) {
var n = i[s].enterChannel, o = i[s].exitChannel;
TypeUtils.isRealNull(n) || this.m_enterChannelTbl.push(n);
TypeUtils.isRealNull(o) || this.m_exitChannelTbl.push(o);
}
this.toEnterChannel();
},
toEnterChannel: function() {
for (var e = 0; e < this.m_enterChannelTbl.length; e++) {
var t = this.m_enterChannelTbl[e];
ChannelUtils.enterChannel(t.channelId, t.param1, t.param2);
}
},
eventOn: function(e, t, i) {
EventManager.on(e, t, i);
this._eventMap.push({
type: e,
callback: t,
target: i
});
},
eventOnce: function(e, t, i) {
EventManager.once(e, t, i);
},
emit: function(e, t) {
EventManager.emit(e, t);
},
pushPool: function(e, t) {
this._m_ComNodePool.pushCache(e, t);
},
popPool: function(e) {
return this._m_ComNodePool.popCache(e);
},
getPoolSize: function(e) {
return this._m_ComNodePool.getSize(e);
},
ctor: function() {
this._eventMap = [];
this.m_jsonUrls = [];
this.m_SingleSpriteFrameUrls = [];
this.m_soundUrls = [];
this.m_spriteFrameUrls = [];
this.m_texture2DUrls = [];
this.m_textUrls = [];
this.m_commonAssetsUrls = [];
this.m_enterChannelTbl = [];
this.m_exitChannelTbl = [];
this.m_timerTbl = [];
},
onDestroy: function() {
if (null != this._eventMap && this._eventMap.length > 0) {
for (var e = 0; e < this._eventMap.length; e++) {
var t = this._eventMap[e];
EventManager.off(t.type, t.callback, t.target);
}
this._eventMap = null;
}
for (var i = 0; i < this.m_exitChannelTbl.length; i++) {
var s = this.m_exitChannelTbl[i];
ChannelUtils.exitChannel(s.channelId, s.param1, s.param2);
}
for (var n = 0; n < this.m_timerTbl.length; n++) {
var o = this.m_timerTbl[n];
TimeMgr.offByIndex(o);
}
JsonManager.deloadResource(this.m_jsonUrls);
SingleTextureManager.deloadResource(this.m_SingleSpriteFrameUrls);
Texture2DManager.deloadResource(this.m_texture2DUrls);
PlistTextureManager.deloadResource(this.m_spriteFrameUrls);
TextManager.deloadResource(this.m_textUrls);
for (var a = [], r = 0; r < this.m_soundUrls.length; r++) a.push(this.m_soundUrls[r].url);
},
destroyAfterEventOff: function() {
if (null != this._eventMap && this._eventMap.length > 0) {
for (var e = 0; e < this._eventMap.length; e++) {
var t = this._eventMap[e];
EventManager.off(t.type, t.callback, t.target);
}
this._eventMap = null;
}
this.node.destroy();
},
onLoad: function() {
this._m_ComNodePool = this.node.addComponent("ComNodePool");
},
start: function() {
this._initEvent();
},
onEnable: function() {},
onDisable: function() {}
});
cc._RF.pop();
}, {} ],
BaseHelper: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "0aa66aHIL5HYqfbvG1Ic8iq", "BaseHelper");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = cc.Class({
ctor: function() {
this._eventMap = [];
},
onExit: function() {
if (null != this._eventMap && this._eventMap.length > 0) {
for (var e = 0; e < this._eventMap.length; e++) {
var t = this._eventMap[e];
EventManager.off(t.type, t.callback, t.target);
}
this._eventMap = null;
}
},
eventOn: function(e, t, i) {
EventManager.on(e, t, i);
this._eventMap.push({
type: e,
callback: t,
target: i
});
},
emit: function(e) {
for (var t, i = arguments.length, s = new Array(i > 1 ? i - 1 : 0), n = 1; n < i; n++) s[n - 1] = arguments[n];
(t = EventManager).emit.apply(t, [ e ].concat(s));
}
});
i.default = s;
t.exports = i.default;
cc._RF.pop();
}, {} ],
BaseManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "d6f46R2H+ZE/KJJcyiB4Jit", "BaseManager");
window.BaseManager = cc.Class({
ctor: function() {
this.__initEvent();
},
__initEvent: function() {
EventManager.on(AppEvent.RestartGame, this.__handlerRestartGame, this);
},
__handlerRestartGame: function() {
this.__onDestroy__();
this.constructor._instance && (this.constructor._instance = null);
},
__onDestroy__: function() {},
onExit: function() {},
eventOn: function(e, t, i) {
EventManager.on(e, t, i);
},
emit: function(e, t) {
EventManager.emit(e, t);
}
});
cc._RF.pop();
}, {} ],
BasePart: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "d7f79gC7SZJNoaQFaN1tg3m", "BasePart");
cc.Class({
ctor: function() {
this.onCreate();
},
onCreate: function() {},
init: function() {
return this;
}
});
cc._RF.pop();
}, {} ],
BasePlatfrom: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "ab740PM5VZNCo0OjntMJUqg", "BasePlatfrom");
var s = e("DataHelper"), n = e("PartTimeBreaker");
cc.Class({
extends: s,
ctor: function() {
this.m_isSupportAdReward = !0;
this.initEvent();
this.initTimer();
},
initEvent: function() {
this.eventOn(AppEvent.GameEventEnterBackground, this.handlerGameEventEnterBackground, this);
this.eventOn(AppEvent.GameEventEnterForeground, this.handlerGameEventEnterForeground, this);
},
init: function() {
for (var e, t = arguments.length, i = new Array(t), o = 0; o < t; o++) i[o] = arguments[o];
(e = s.prototype.init).call.apply(e, [ this ].concat(i));
this.m_seeAdBreaker = new n().init(0, 3e3);
this.m_checkNetWorkBreaker = new n().init(0, 5e3);
this.m_canCheckNetWork = !1;
return this;
},
isTime2CheckNetWork: function() {
if (!this.m_canCheckNetWork) return !1;
if (ViewManager.isViewExist("TOWER_COMFIRM_BOX_VIEW")) {
this.m_checkNetWorkBreaker.reset();
return !1;
}
return this.m_checkNetWorkBreaker.isTimeBreak();
},
resetTime2CheckNetWork: function() {
this.m_checkNetWorkBreaker.reset();
},
checkNetWork: function() {
this.resetTime2CheckNetWork();
},
setCheckNetWorkSwitch: function(e) {
this.m_canCheckNetWork = e;
},
getToken: function() {
return this.loginData ? this.loginData.token : "";
},
setUserData: function(e) {
console.log("user_data = ", e);
this.loginData = e;
this.loginData.expireTimeMil = 1e3 * e.expires_in + TimeUtils.getTimestamp();
this.setValue("loginData", e);
TimeMgr.initServerTimestamp(e.now_server_time);
},
isTokenExpire: function() {
if (!this.loginData) {
logger.error("this.loginData == null");
return !0;
}
return TimeUtils.isTimestampOver(this.loginData.expireTimeMil);
},
getUserName: function() {
return this.loginData ? this.loginData.username : "";
},
onExit: function() {},
isSupportAdReward: function() {
return this.m_isSupportAdReward;
},
seeAd: function(e) {
if (this.m_seeAdBreaker.isTimeBreak()) {
this.m_seeAdBreaker.reset();
return !0;
}
console.log("广告CD中");
return !1;
},
seeAdReal: function(e) {},
login: function(e) {
e();
},
onShowAd: function() {},
isVideoReady: function() {
return !0;
},
shareMessage: function(e) {},
onGameLaunchInfo: function() {},
copy: function(e) {
var t = function(t) {
t.clipboardData.setData("text/plain", e);
t.preventDefault();
}.bind(this);
document.addEventListener("copy", t);
document.execCommand("copy");
document.removeEventListener("copy", t);
},
isVersonBiggerThan: function(e) {
console.warn("isVersonBiggerThan     1  ", e);
var t = this.getSdkVersion() >= e;
console.log("versionStr = ", e, " > this.getSdkVersion() =", this.getSdkVersion(), ", ret = ", t);
return t;
},
getSdkVersion: function() {
return "0.0.0";
},
loginDefault: function(e) {
var t = this.getValue("username", "");
if ("" == t) {
t = "" + TimeUtils.getTimestamp() + RandomUtils.randInt(1, 9999999);
var i = RandomUtils.randInt(1, 9999999);
this.registerDefault(t, i, e);
} else {
var s = this.getValue("password", "");
this.loginRealDefault(t, s, e);
}
},
loginRealDefault: function(e, t, i) {
var s = this;
HttpMgr.post({
method: "login",
isIgnoreToken: !0,
data: {
username: e,
password: t
},
callback: function(e) {
s.setUserData(e);
i();
},
failCallback: function() {
s.loginRealDefault(e, t, i);
}
});
},
registerDefault: function(e, t, i) {
var s = this;
HttpMgr.post({
method: "register",
isIgnoreToken: !0,
data: {
username: e,
password: t
},
callback: function(n) {
s.setValue("username", e);
s.setValue("password", t);
s.setUserData(n);
i(n);
},
failCallback: function() {
s.registerDefault(e + RandomUtils.randInt(1, 99), t, i);
}
});
},
onCloseAd: function() {},
onErrorAd: function() {},
onLoadAd: function() {},
didShowAd: function() {
console.log("didShowAd");
EventManager.emit(AppEvent.PlayerSeedAdBegin, {});
},
didCloseAd: function() {
console.log("didCloseAd");
EventManager.emit(AppEvent.PlayerSeedAdEnd, {});
},
didErrorAd: function() {
console.log("didErrorAd");
EventManager.emit(AppEvent.PlayerSeedAdEnd, {});
},
didRewardAd: function() {
console.log("didRewardAd");
EventManager.emit(AppEvent.PlayerSeedAdEnd, {});
},
addOrder: function(e, t) {
this.orderGoods = e;
this.orderCallback = t;
AdVideoManager.showAdVideo(ManagerEnum.AdVideoManager.AdType.BuyGoods, this, this.onBuyGoods);
},
onBuyGoods: function(e, t) {
e === ManagerEnum.AdVideoManager.VedioStatus.ShowFinish && app.ctrls.shop.buyGoods(this.orderGoods, 1, {
callBack: this.orderCallback
});
},
shareImageToWX: function(e, t) {},
shareURLToWX: function(e, t, i, s) {},
handlerGameEventEnterBackground: function() {},
handlerGameEventEnterForeground: function() {},
handlerTowerPlayerEnterGame: function() {
this.setCheckNetWorkSwitch(!0);
},
isSupportRecorder: function() {
return !1;
},
recordPoint: function() {},
isNewHere: function() {
return !1;
},
isCanLogin: function() {
return !0;
},
doMsgSecCheck: function(e, t) {
TypeUtils.isFunction(t) && t(!0);
},
doImgSecCheck: function(e, t) {
TypeUtils.isFunction(t) && t(!0);
},
getNetworkType: function(e) {
var t = this;
e.getNetworkType({
success: function(e) {
"none" === e.networkType && TipsUtils.showTipsBox({
str: "网络异常,请检查网络~",
isHideCloce: !0,
signBtn: !0,
enterCallBack: function() {
t.resetTime2CheckNetWork();
}
});
}
});
},
initTimer: function() {
TimeMgr.on(this.update, this, 1);
},
update: function(e) {
this.isTime2CheckNetWork() && this.checkNetWork();
},
loadSubPackage: function(e, t, i) {
t && t({
totalBytesExpectedToWrite: 100,
totalBytesWritten: 100,
progress: 100
});
i && i(e);
},
loadNetImage: function(e, t, i) {
LoadUtils.loadImg(e, function(t, s) {
if (null == t) try {
var n = new cc.SpriteFrame(s);
n && i(n);
} catch (t) {
logger.error("loadNetImage", t, e);
}
});
},
download: function(e, t, i) {}
});
cc._RF.pop();
}, {
DataHelper: "DataHelper",
PartTimeBreaker: "PartTimeBreaker"
} ],
BetTreasureConst: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "80726pZywtFtLX7E6AExbCK", "BetTreasureConst");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
betTreasureType: {}
};
s.betTreasureType.TimingOpenReward = 1;
s.betTreasureType.FullOpenReward = 2;
s.betTreasureStatus = {};
s.betTreasureStatus.Ing = 0;
s.betTreasureStatus.Finish = 1;
s.betTreasureOpenStatus = {};
s.betTreasureOpenStatus.NotOpen = 0;
s.betTreasureOpenStatus.Success = 1;
s.betTreasureOpenStatus.Fail = 2;
s.ExchangeItemNumberLimit = {};
s.ExchangeItemNumberLimit.NoLimit = 0;
s.ExchangeItemNumberLimit.Limit = 1;
s.ExchangeIsVipLimit = {};
s.ExchangeIsVipLimit.Yes = 1;
s.ExchangeIsVipLimit.No = 2;
s.ExchangeIsTimeLimit = {};
s.ExchangeIsTimeLimit.Yes = 1;
s.ExchangeIsTimeLimit.No = 2;
s.ExchangeSendOutType = {};
s.ExchangeSendOutType.RightNow = 1;
s.ExchangeSendOutType.Recharge = 2;
s.ExchangeSendOutType.InnerGame = 3;
s.ExchangeSendOutType.EMS = 4;
s.ExchangeSendOutType.SelfLift = 5;
s.ExchangeSendOutTypeChinese = {};
s.ExchangeSendOutTypeChinese[s.ExchangeSendOutType.RightNow] = "立即获取";
s.ExchangeSendOutTypeChinese[s.ExchangeSendOutType.Recharge] = "直充";
s.ExchangeSendOutTypeChinese[s.ExchangeSendOutType.InnerGame] = "邮件发放";
s.ExchangeSendOutTypeChinese[s.ExchangeSendOutType.EMS] = "邮寄";
s.ExchangeSendOutTypeChinese[s.ExchangeSendOutType.SelfLift] = "自提";
s.openRewardStatus = {};
s.openRewardStatus.Suc = 1;
s.openRewardStatus.NoSuc = 2;
s.RecordTabType = {};
s.RecordTabType.ChouJiang = 1;
s.RecordTabType.DuoHuan = 2;
s.RecordTabType.DuoBaoSai = 3;
s.RecordTabType.DaJiangSai = 4;
s.RecordTabType.HuoDong = 5;
s.OverStatus = {};
s.OverStatus.IsSuccessOver = 1;
s.OverStatus.IsFailOver = 2;
s.OrderStatus = {};
s.OrderStatus.NoProductOrder = 0;
s.OrderStatus.ProductOrder = 1;
s.OrderStatus.Waiting = 2;
s.OrderStatus.OrderSendFalse = 3;
s.OrderStatus.OrderInvalid = 4;
s.OrderStatus.OrderSendSuccess = 5;
s.AddrStatus = {};
s.AddrStatus.HasNoAddr = 0;
s.AddrStatus.HasAddr = 1;
s.RecordStatus = {};
s.RecordStatus.NotInput = 1;
s.RecordStatus.NotOpen = 2;
s.RecordStatus.Processing = 3;
s.RecordStatus.HadSend = 4;
s.RecordStatus.NotWin = 5;
s.RecordStatus.OpenFail = 6;
s.ChoujiangFundId = {};
s.ChoujiangFundId.TicketIPXSMax = 14;
s.BetType = {};
s.BetType.By = 1;
s.BetType.Ddz = 2;
s.ExchangeType = {};
s.ExchangeType.Ddz = 1;
s.ExchangeType.Fish = 2;
s.ExchangeType.FishRushBuy = 3;
s.ExchangeVipLimitType = {};
s.ExchangeVipLimitType.NoLimit = 0;
s.ExchangeVipLimitType.DdzVipLimit = 1;
s.ExchangeVipLimitType.FishVipLimit = 2;
var n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
BetTreasureCtrl: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "1235bZmUE9F4ZvOiumZuIYP", "BetTreasureCtrl");
var s = e("HttpCtrl"), n = e("BetTreasureModel"), o = e("BetTreasureConst");
cc.Class({
extends: s,
properties: {},
ctor: function() {
var e = new n();
this.init(e);
},
requireAfterEnterGame: function() {
this.addEvent(M_Fund.syncFundResultInfo, this.syncFundResultInfo.bind(this));
},
requestBetTreasureCenterData: function(e) {
session.request(M_Fund.getLuckyInfo, e || o.BetType.By, this.handlerWithError(this.model, this.model.onBetTreasureCenterData), null, !1);
},
requestBet: function(e, t, i) {
session.request(M_Fund.join, {
fundId: e,
joinNum: t,
journal: i
}, this.handlerWithError(this.model, this.model.onBetResult));
},
OBChannelSyncDataBetTreasurePeopleNum: function(e) {
this.model.onBetTreasurePeopleNum(e.totalJoinNum);
},
OBChannelSyncDataBetTreasureResult: function(e) {
this.model.onBetChannelTreasureResult(e.FundResultInfo);
},
syncFundResultInfo: function(e) {
this.model.onBetTreasureResult(e.data);
},
requestBetRecord: function(e) {
var t = this, i = {
method: "getFundWinRecord",
data: {
fundId: e
}
};
this.request(i, function(e) {
t.emit(AppEvent.BetTreasureRecordLuckyer, e);
});
},
requestRecordForDuoBao: function() {
var e = this, t = {
method: "getJoinFundRecord",
data: {
roleId: RoleUtils.getRoleId()
}
};
this.request(t, function(t) {
e.emit(AppEvent.BetTreasureRecordForDuoBao, t);
}, !1);
},
requestGetExchangeInfo: function() {
session.request(M_Fund.getExchangeInfo, o.ExchangeType.Fish, this.handlerWithError(this.model, this.model.onGetExchangeInfo));
},
requestGetExchangeRecord: function() {
var e = this, t = {
method: "getExchangeRecord",
data: {
roleId: RoleUtils.getRoleId(),
gameType: o.ExchangeType.Fish
}
};
this.request(t, function(t) {
e.emit(AppEvent.BetTreasureRecordForExchange, t);
}, !1);
},
requestLuckyBagRecords: function() {
var e = this, t = {
method: "getLuckyBagRecords",
data: {
roleId: RoleUtils.getRoleId()
}
};
this.request(t, function(t) {
e.model.setLuckyBagRecords(t);
});
},
requestWishPoolRecords: function() {
var e = this, t = {
method: "getWishPoolRecords",
data: {
roleId: RoleUtils.getRoleId()
}
};
this.request(t, function(t) {
e.model.setWishPoolRecords(t);
}, !1);
},
requestExchangeGoods: function(e, t) {
session.request(M_Fund.exchangeGoods, e, this.handlerWithError(this, this.onExchangeGoods), t);
},
onExchangeGoods: function(e) {
this.requestGetExchangeInfo();
var t = e.param;
TypeUtils.isRealNull(t) || TypeUtils.isRealNull(t.awards) || ViewManager.showAwards({
awards: t.awards
});
this.model.onExchangeGoods(e);
},
requestGetPlayerAddr: function(e) {
var t = {
method: "getRoleAddress",
data: {
roleId: RoleUtils.getRoleId()
}
};
this.request(t, function(t) {
TypeUtils.isFunction(e) && e(t);
});
},
requestSetPlayerAddr: function(e, t, i, s, n) {
var o = {
method: "addRoleAddress",
data: {
roleId: RoleUtils.getRoleId(),
phoneNum: e,
province: "",
city: "",
address: s,
name: i,
wechatNum: t
}
};
this.request(o, function(e) {
TypeUtils.isFunction(n) && n();
});
}
});
cc._RF.pop();
}, {
BetTreasureConst: "BetTreasureConst",
BetTreasureModel: "BetTreasureModel",
HttpCtrl: "HttpCtrl"
} ],
BetTreasureModel: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "a8f3eKvFRJCoblMihF1Oewd", "BetTreasureModel");
var s = e("BetTreasureConst");
cc.Class({
extends: ModelBase,
properties: {
EVENT_BET_TREASURE_CENTER_DATA: "EVENT_BET_TREASURE_CENTER_DATA",
EVENT_BET_TREASURE_BET_RESULT: "EVENT_BET_TREASURE_BET_RESULT",
EVENT_BET_TREASURE_OPENING_REWARD: "EVENT_BET_TREASURE_OPENING_REWARD",
EVENT_BET_TREASURE_PEOPLE_NUMBER_CHANGE: "EVENT_BET_TREASURE_PEOPLE_NUMBER_CHANGE",
EVENT_BET_TREASURE_EXCHANGE_INFO: "EVENT_BET_TREASURE_EXCHANGE_INFO",
EVENT_BET_TREASURE_EXCHANGE_GOOD_RETURN: "EVENT_BET_TREASURE_EXCHANGE_GOOD_RETURN",
EVENT_BET_TREASURE_ACTIVITY_INFO: "EVENT_BET_TREASURE_ACTIVITY_INFO",
EVENT_BET_TREASURE_CHANNEL_OPEN_REWARD: "EVENT_BET_TREASURE_CHANNEL_OPEN_REWARD"
},
ctor: function() {
this.init();
this.m_betTreasureCenterDataTmp = [];
this.m_betTreasureCenterData = [];
this.m_exchangeData = [];
this.m_luckyBagData = [];
this.m_wishPoolData = [];
},
onBetTreasureCenterData: function(e) {
e = e || {
data: {}
};
this.m_betTreasureCenterData = e.data.prizeInfo;
this.m_betTreasureCenterDataTmp = DicUtils.copy(this.m_betTreasureCenterData);
this.sortBetTreasureCenterData();
this.dispatchEvent(this.EVENT_BET_TREASURE_CENTER_DATA);
},
getLuckNumberList: function(e, t) {
for (var i = 0; i < this.m_betTreasureCenterData.length; i++) {
var s = this.m_betTreasureCenterData[i];
if (s.fundId == Number(e) && s.journal == Number(t)) return s.myNums;
}
},
getLuckNumber: function(e, t) {
for (var i = 0; i < this.m_betTreasureCenterData.length; i++) {
var s = this.m_betTreasureCenterData[i];
if (s.fundId == Number(e) && s.journal == Number(t)) return s.luckyNum;
}
},
onBetResult: function(e) {
var t = e.data;
if (t.luckyNumList.length > 0) {
var i = this.getBetDataByfundId(t.fundId);
if (TypeUtils.isRealNull(i)) logger.warn("找不到这一期的活动"); else {
DicUtils.merge(i.myNums, t.luckyNumList);
i.joinNum = i.joinNum + t.luckyNumList.length;
}
TipsUtils.showTips(cc.js.formatStr("购买成功!获得%s个抽奖码", t.luckyNumList.length));
} else TipsUtils.showTips("购买购买失败!次数不足");
this.dispatchEvent(this.EVENT_BET_TREASURE_BET_RESULT);
},
onBetTreasurePeopleNum: function(e) {
if (!TypeUtils.isRealNull(e)) {
var t = this.getBetDataByFundIdAndRound(e.fundId, e.journal);
if (TypeUtils.isRealNull(t)) logger.info("betTreasureModel:onBetTreasurePeopleNum(data) 找不到活动:fundId = %s , journal = %s", e.fundId, e.journal); else {
t.totalJoinNum = e.totalJoinNum;
t.journal = e.journal;
t.totalJoinNum >= t.minJoinNum && this.delayTimer(function() {
app.ctrls.betTreasure.requestBetTreasureCenterData();
}, 3);
this.dispatchEvent(this.EVENT_BET_TREASURE_PEOPLE_NUMBER_CHANGE, t);
}
}
},
onBetTreasureResult: function(e) {},
onBetChannelTreasureResult: function(e) {
this.dispatchEvent(this.EVENT_BET_TREASURE_CHANNEL_OPEN_REWARD, e);
},
sortBetTreasureCenterData: function() {
if (!TypeUtils.isRealNull(this.m_betTreasureCenterData)) {
for (var e = 0; e < this.m_betTreasureCenterData.length; e++) {
var t = 0, i = this.m_betTreasureCenterData[e];
i.isOpening ? t += 2e6 : t += 1e6;
i.status == s.betTreasureStatus.Finish ? t += 1e5 : t += 2e5;
t += i.fundId % 100 * 100;
i.sort = t;
}
ArrayUtils.sort(this.m_betTreasureCenterData, function(e, t) {
return e.sort - t.sort;
});
}
},
onGetExchangeInfo: function(e) {
this.m_exchangeData = e.data.list;
this.dispatchEvent(this.EVENT_BET_TREASURE_EXCHANGE_INFO, this.m_exchangeData);
},
getExchangeItemInfo: function(e) {
for (var t = 0; t < this.m_exchangeData.length; t++) {
var i = this.m_exchangeData[t];
if (i.exId == e) return i;
}
},
onExchangeGoods: function(e) {
this.dispatchEvent(this.EVENT_BET_TREASURE_EXCHANGE_GOOD_RETURN, e.data);
},
setLuckyBagRecords: function(e) {
this.m_luckyBagData = e;
this.dispatchEvent(this.EVENT_BET_TREASURE_ACTIVITY_INFO);
},
setWishPoolRecords: function(e) {
this.m_wishPoolData = e;
this.dispatchEvent(this.EVENT_BET_TREASURE_ACTIVITY_INFO);
},
getExchangeData: function() {
return this.m_exchangeData;
},
getActivityData: function() {
for (var e = DicUtils.copy(this.m_luckyBagData) || [], t = 0; t < this.m_wishPoolData.length; t++) {
var i = this.m_wishPoolData[t];
e.push(DicUtils.copy(i));
}
ArrayUtils.sort(e, function(e, t) {
return e.status && t.status && e.status != t.status ? e.status - t.status : e.time - t.time;
});
return e;
},
getBetTreasureCenterData: function() {
return this.m_betTreasureCenterData;
},
getBetDataByfundId: function(e) {
for (var t = 0; t < this.m_betTreasureCenterData.length; t++) {
var i = this.m_betTreasureCenterData[t];
if (i.fundId == Number(e)) return i;
}
},
getBetDataTmpByfundId: function(e) {
for (var t = 0; t < this.m_betTreasureCenterDataTmp.length; t++) {
var i = this.m_betTreasureCenterDataTmp[t];
if (i.fundId == Number(e)) return i;
}
},
getBetDataByFundIdAndRound: function(e, t) {
for (var i = 0; i < this.m_betTreasureCenterData.length; i++) {
var s = this.m_betTreasureCenterData[i];
if (s.fundId == Number(e) && s.journal == t) return s;
}
},
setRemainTime: function(e, t) {
return this.m_betTreasureCenterData;
}
});
cc._RF.pop();
}, {
BetTreasureConst: "BetTreasureConst"
} ],
BezierUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "cb48er2u4dDfaL3jCKcttl5", "BezierUtils");
var s = cc.game.getFrameRate();
cc.Class({
ctor: function() {
this.init(arguments[0], arguments[1], arguments[2]);
},
init: function(e, t, i) {
this._points = e;
this._timeLen = t;
i && (this._cache = {});
e[0].x == e[1].x && e[1].x == e[2].x && (e[1].x = e[1].x + 1);
e[0].y == e[1].y && e[1].y == e[2].y && (e[2].y = e[2].y + 1);
var s = e[0].x - 2 * e[1].x + e[2].x, n = e[0].y - 2 * e[1].y + e[2].y, o = 2 * e[1].x - 2 * e[0].x, a = 2 * e[1].y - 2 * e[0].y;
this._a = 4 * (s * s + n * n);
this._b = 4 * (s * o + n * a);
this._c = o * o + a * a;
this._totalLength = this._length(1);
return this;
},
getTime: function() {
return this._timeLen;
},
getPoint: function(e, t) {
var i = null;
if (TypeUtils.isNotEmptyArray(this._cache) && t) {
i = Math.round(e * s);
var n = this._cache[4 * i - 3], o = this._cache[4 * i - 2], a = this._cache[4 * i - 1], r = this._cache[4 * i];
if (!TypeUtils.isRealNull(n)) return [ {
x: n,
y: o
}, {
x: a,
y: r
} ];
}
var l = (e /= this._timeLen) * this._totalLength, c = {
x: (1 - (e = this._invertL(e, l))) * this._points[0].x + e * this._points[1].x,
y: (1 - e) * this._points[0].y + e * this._points[1].y
}, h = (1 - e) * this._points[1].x + e * this._points[2].x, u = (1 - e) * this._points[1].y + e * this._points[2].y, d = {
x: (1 - e) * c.x + e * h,
y: (1 - e) * c.y + e * u
};
if (TypeUtils.isNotEmptyArray(this._cache) && t) {
this._cache[4 * i - 3] = d.x;
this._cache[4 * i - 2] = d.y;
this._cache[4 * i - 1] = c.x;
this._cache[4 * i] = c.y;
}
return [ d, c ];
},
_speed: function(e) {
return Math.sqrt(this._a * e * e + this._b * e + this._c);
},
_length: function(e) {
var t = Math.sqrt(this._c + e * (this._b + this._a * e)), i = 2 * this._a * e * t + this._b * (t - Math.sqrt(this._c)), s = Math.log(this._b + 2 * Math.sqrt(this._a) * Math.sqrt(this._c)), n = Math.log(this._b + 2 * this._a * e + 2 * Math.sqrt(this._a) * t);
return (2 * Math.sqrt(this._a) * i + (this._b * this._b - 4 * this._a * this._c) * (s - n)) / (8 * Math.pow(this._a, 1.5));
},
_invertL: function(e, t) {
for (var i, s = e; ;) {
i = s - (this._length(s) - t) / this._speed(s);
if (Math.abs(s - i) < 1e-5) break;
s = i;
}
return i;
}
});
cc._RF.pop();
}, {} ],
ButtonUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "80717XYFvdJbpBaeGk3dE7D", "ButtonUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
loadRes: function(e, t, i, s, n, o, a) {
var r = e.getComponent(cc.Button);
if (r) {
t ? o ? SpriteUtils.loadPlistTexture(a, function(e) {
r.normalSprite = e.getSpriteFrame(t);
}, r) : SpriteUtils.getSpriteFrame(t, function(e) {
r.normalSprite = e;
}, r) : r.normalSprite = void 0;
i ? o ? SpriteUtils.loadPlistTexture(a, function(e) {
r.pressedSprite = e.getSpriteFrame(i);
}, r) : SpriteUtils.getSpriteFrame(i, function(e) {
r.pressedSprite = e;
}, r) : r.pressedSprite = void 0;
s ? o ? SpriteUtils.loadPlistTexture(a, function(e) {
r.hoverSprite = e.getSpriteFrame(s);
}, r) : SpriteUtils.getSpriteFrame(s, function(e) {
r.hoverSprite = e;
}, r) : r.hoverSprite = void 0;
n ? o ? SpriteUtils.loadPlistTexture(a, function(e) {
r.disabledSprite = e.getSpriteFrame(n);
}, r) : SpriteUtils.getSpriteFrame(n, function(e) {
r.disabledSprite = e;
}, r) : r.disabledSprite = void 0;
} else console.log("ButtonUtils error: node is not button!");
},
setEnabled: function(e, t, i) {
var s = e.getComponent(cc.Button);
if (s) {
s.interactable = t;
if (TypeUtils.isRealNull(i)) return;
var n = e.getComponentInChildren(cc.Label), o = void 0;
TypeUtils.isRealNull(n) || (o = n.node.getComponent(cc.LabelOutline));
if (!TypeUtils.isRealNull(i.txtDes)) {
var a = i.txtDes;
if (TypeUtils.isRealNull(n)) {
(n = (l = new cc.Node("btnLabel")).addComponent(cc.Label)).string = a.txtName;
l.parent = e;
}
a.txtName && (n.string = a.txtName);
t ? a.enableColor && (n.node.color = a.enableColor) : a.txtColor && (n.node.color = a.txtColor);
}
if (!TypeUtils.isRealNull(i.outline)) {
var r = i.outline;
if (TypeUtils.isRealNull(o)) if (TypeUtils.isRealNull(n)) {
var l;
(n = (l = new cc.Node("btnLabel")).addComponent(cc.Label)).string = r.txtName;
o = l.addComponent(cc.LabelOutline);
l.parent = e;
} else {
o = n.node.getComponent(cc.LabelOutline);
TypeUtils.isRealNull(o) && (o = n.node.addComponent(cc.LabelOutline));
}
r.width && (o.width = r.width);
t ? r.enableColor && (o.color = r.enableColor) : r.outlineColor && (o.color = r.outlineColor);
}
} else console.log("ButtonUtils error: node is not button!");
}
}, n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
CatchFishConst: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "d25399kkypO6K0tpfJ5eXhf", "CatchFishConst");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s, n, o, a, r, l;
function c(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}
var h = e("ItemConst"), u = h.ResourceType, d = {
BulletSpeed: 800,
MAX_BULLET_ALIVE_TIME: 20,
MIN_FIRE_INTERVAL: .2,
CRAZY_COUNTDOWN: 20,
FROZEN_COUNTDOWN: 10,
SHENDENG_COUNTDOWN: 3,
AIM_COUNTDOWN: 18,
SUMMON_CHUANZHANG_COUNTDOWN: 210,
SUMMON_NAJIA_COUNTDOWN: 300,
SEVEN_DAY_OPEN_LEVEL: 40,
QUICK_GIFT_OPEN_LEVEL: 400,
PLAYER_MAX_BULLET_NUM: 40,
MAX_FISH_TALK_NUM: 2,
SeatNum: 20,
MAX_ROOM_PLAYER_NUM: 4,
YINGYAN_COUNTDOWN: 20,
GOLD_FISH_LOTTERY_NUM: 5,
POKER_COLOR_OPEN_LEVEL: 100,
SSSC_OPEN_LEVEL: 1e3,
CRAZY_MULTIPLE: {
TWO: 2,
FOUR: 4
},
RoomType: {
XinShouHaiTan: 1,
ShenHaiJuShou: 2,
YouLingChuangZhang: 3,
HaiYaoXuanWo: 4,
QuanMinSai: 5,
DaJiangSai: 6,
WangLingJuYuan: 8,
ClubYouLingChuangZhang: 9,
ClubHaiYaoXuanWo: 10,
MagicHaiYaoXuanWo: 11,
MagicWangLingJuYuan: 12,
TiYanFangJian: 100
}
};
d.RoomOfSystemId = (c(s = {}, d.RoomType.XinShouHaiTan, 20001), c(s, d.RoomType.ShenHaiJuShou, 20002), 
c(s, d.RoomType.YouLingChuangZhang, 20003), c(s, d.RoomType.HaiYaoXuanWo, 20004), 
c(s, d.RoomType.MagicHaiYaoXuanWo, 20006), c(s, d.RoomType.MagicWangLingJuYuan, 20007), 
s);
d.RoomGroup = {
Classical: 1,
Match: 4,
Club: 5,
Magic: 6,
Experience: 7
};
d.FishType = {
GOUHUNSHUISHOU_FISH: 35,
MIHUNSHUISHOU_FISH: 36,
BOMB_FISH: 39,
NAJIA_SHUIMU: 59,
HAIHUANGJI_FISH: 56,
GOLD_DRAGON_FISH: 58,
BLACK_DRAGON_FISH: 77,
BLUE_DRAGON_FISH: 78,
RED_DRAGON_FISH: 79,
GOLD_NAJIA_FISH: 60,
BLACK_NAJIA_FISH: 80,
BLUE_NAJIA_FISH: 81,
RED_NAJIA_FISH: 82,
BLUE_NANJUE_FISH: 71,
BLACK_NANJUE_FISH: 83,
RED_NANJUE_FISH: 84,
GOLD_NANJUE_FISH: 85,
GOLD_CHUANGZHANG_FISH: 37,
BLACK_CHUANGZHANG_FISH: 74,
BLUE_CHUANGZHANG_FISH: 75,
RED_CHUANGZHANG_FISH: 76,
WANGLING_JINGYU_FISH: 62,
WANGLING_ZHANGYU_FISH: 68
};
d.FishBornType = {
NORMAL: 1,
STRIKE: 2,
SUMMON_GOLD: 3,
SUMMON_BOSS: 4
};
d.FishGroupType = {
SMALL_FISH: 1,
MEDIUM_FISH_1: 21,
MEDIUM_FISH_2: 22,
BIG_FISH: 31,
GREAT_FISH: 41,
BOSS_FISH: 5
};
d.FishPlayState = {
DragonTreasure: 1,
MonsterBattle: 2,
FingerPlay: 3,
CrushEggs: 4,
SanGuoWar: 5,
SeaTreasures: 6,
ShanCai: 7,
Kylin: 8
};
d.GroupTypeAct = {
SMALL_FISH: 1,
MEDIUM_FISH: 2,
BIG_FISH: 3
};
d.BossComingBigIcon = (c(n = {}, 31, {
bigIcon: !0
}), c(n, 32, {
bigIcon: !0,
times1: "600~1000倍",
times2: "奖励",
times3: "1000炮倍有几率掉落",
times4: "弹头"
}), c(n, 33, {
bigIcon: !0,
times1: "700倍",
times2: "奖励",
times3: "击杀有几率掉落",
times4: "弹头"
}), c(n, 34, {
bigIcon: !0,
times1: "800倍",
times2: "奖励",
times3: "击杀有几率掉落",
times4: "弹头"
}), c(n, 35, {
bigIcon: !0
}), c(n, 36, {
bigIcon: !0
}), c(n, 37, {
bigIcon: !0
}), c(n, 50, {
bigIcon: !0
}), c(n, 54, {
bigIcon: !0,
times1: "200倍",
times2: "奖励",
times3: "击杀有几率掉落",
times4: "弹头"
}), c(n, 56, {
bigIcon: !0,
times1: "1000~1500倍",
times2: "奖励",
times3: "击杀后获得",
times4: "大量奖励"
}), c(n, 57, {
bigIcon: !0,
times1: "300~999倍",
times2: "奖励",
times3: "击杀后获得",
times4: "大量奖励"
}), c(n, 58, {
bigIcon: !0,
times1: "301~2999倍",
times2: "奖励",
times3: "击杀后获得",
times4: "大量奖励"
}), c(n, 70, {
bigIcon: !0
}), c(n, 77, {
bigIcon: !0,
times1: "3301~9999倍",
times2: "奖励",
times3: "击杀后获得",
times4: "大量奖励"
}), c(n, 78, {
bigIcon: !0,
times1: "1301~4999倍",
times2: "奖励",
times3: "击杀后获得",
times4: "大量奖励"
}), c(n, 79, {
bigIcon: !0,
times1: "2301~6999倍",
times2: "奖励",
times3: "击杀后获得",
times4: "大量奖励"
}), c(n, 60, {
bigIcon: !0,
times1: "2301~6999倍",
times2: "奖励",
times3: "击杀有几率掉落",
times4: "弹头"
}), c(n, 80, {
bigIcon: !0,
times1: "2301~6999倍",
times2: "奖励",
times3: "击杀有几率掉落",
times4: "弹头"
}), c(n, 81, {
bigIcon: !0,
times1: "2301~6999倍",
times2: "奖励",
times3: "击杀有几率掉落",
times4: "弹头"
}), c(n, 82, {
bigIcon: !0,
times1: "2301~6999倍",
times2: "奖励",
times3: "击杀有几率掉落",
times4: "弹头"
}), c(n, 71, {
bigIcon: !0,
times1: "2301~6999倍",
times2: "奖励",
times3: "击杀后获得",
times4: "大量玉石"
}), c(n, 83, {
bigIcon: !0,
times1: "2301~6999倍",
times2: "奖励",
times3: "击杀后获得",
times4: "大量玉石"
}), c(n, 84, {
bigIcon: !0,
times1: "2301~6999倍",
times2: "奖励",
times3: "击杀后获得",
times4: "大量玉石"
}), c(n, 85, {
bigIcon: !0,
times1: "2301~6999倍",
times2: "奖励",
times3: "击杀后获得",
times4: "大量玉石"
}), c(n, 37, {
bigIcon: !0,
times1: "2301~6999倍",
times2: "奖励",
times3: "击杀有几率掉落",
times4: "弹头"
}), c(n, 74, {
bigIcon: !0,
times1: "2301~6999倍",
times2: "奖励",
times3: "击杀有几率掉落",
times4: "弹头"
}), c(n, 75, {
bigIcon: !0,
times1: "2301~6999倍",
times2: "奖励",
times3: "击杀有几率掉落",
times4: "弹头"
}), c(n, 76, {
bigIcon: !0,
times1: "2301~6999倍",
times2: "奖励",
times3: "击杀有几率掉落",
times4: "弹头"
}), n);
d.PokerColorItems = [ u.PokerJoker, u.PokerSpade, u.PokerHeart, u.PokerClub, u.PokerDiamond ];
d.ZaJinDanHammer = [ {
id: 1,
costRatio: 1,
hitMultiple: 8
}, {
id: 2,
costRatio: .75,
hitMultiple: 4
}, {
id: 3,
costRatio: .5,
hitMultiple: 2
} ];
d.CurrenyKeys = (c(o = {}, h.ResourceType.Gold, "gold"), c(o, h.ResourceType.Ticket, "ticket"), 
c(o, h.ResourceType.Jade, "jade"), c(o, h.ResourceType.Diamond, "diamond"), c(o, h.ResourceType.EnjoyGold, "enjoyGold"), 
o);
d.WarheadGunType = (c(a = {}, h.WarheadType.WarheadPlatinum, 103), c(a, h.WarheadType.WarheadGold, 102), 
c(a, h.WarheadType.WarheadSilver, 101), c(a, h.WarheadType.WarheadBronze, 100), 
a);
d.WarheadItems = [ h.WarheadType.WarheadPlatinum, h.WarheadType.WarheadGold, h.WarheadType.WarheadSilver, h.WarheadType.WarheadBronze ];
d.DynjPartTimes = (c(r = {}, u.DynjMask, 10), c(r, u.DynjGloves, 40), c(r, u.DynjSucker, 200), 
c(r, u.DynjGasBottle, 1e3), r);
d.ShuiShouCards = (c(l = {}, h.SSCCCardType.SSCC_Diamond_J, {
type: 11,
color: 4
}), c(l, h.SSCCCardType.SSCC_Diamond_Q, {
type: 12,
color: 4
}), c(l, h.SSCCCardType.SSCC_Diamond_K, {
type: 13,
color: 4
}), c(l, h.SSCCCardType.SSCC_Diamond_A, {
type: 14,
color: 4
}), c(l, h.SSCCCardType.SSCC_Club_J, {
type: 11,
color: 3
}), c(l, h.SSCCCardType.SSCC_Club_Q, {
type: 12,
color: 3
}), c(l, h.SSCCCardType.SSCC_Club_K, {
type: 13,
color: 3
}), c(l, h.SSCCCardType.SSCC_Club_A, {
type: 14,
color: 3
}), c(l, h.SSCCCardType.SSCC_Heart_J, {
type: 11,
color: 2
}), c(l, h.SSCCCardType.SSCC_Heart_Q, {
type: 12,
color: 2
}), c(l, h.SSCCCardType.SSCC_Heart_K, {
type: 13,
color: 2
}), c(l, h.SSCCCardType.SSCC_Heart_A, {
type: 14,
color: 2
}), c(l, h.SSCCCardType.SSCC_Spade_J, {
type: 11,
color: 1
}), c(l, h.SSCCCardType.SSCC_Spade_Q, {
type: 12,
color: 1
}), c(l, h.SSCCCardType.SSCC_Spade_K, {
type: 13,
color: 1
}), c(l, h.SSCCCardType.SSCC_Spade_A, {
type: 14,
color: 1
}), l);
d.FishPlayState = {
DragonTreasure: 1,
MonsterBattle: 2,
FingerPlay: 3,
CrushEggs: 4,
SanGuoWar: 5,
SeaTreasures: 6
};
d.BtnType = {
Normal: 1,
Item: 2,
Shop: 3
};
d.CatchFishBtns = {
LeftHide: {
name: "LeftHide",
type: d.BtnType.Normal,
img: "module/fish/texture/catchFishUi/btn_side",
isOpen: !0,
reminds: [ AppEvent.RedPointFishSevenDayTask ]
},
Shop: {
name: "Shop",
type: d.BtnType.Normal,
img: "module/fish/texture/catchFishUi/icons/shop",
title: "module/fish/texture/catchFishUi/icons/shop_txt",
isOpen: !0,
reminds: []
},
Welfare: {
name: "Welfare",
type: d.BtnType.Normal,
img: "module/fish/texture/catchFishUi/icons/zm_btn_fl",
title: "module/fish/texture/catchFishUi/icons/zm_btn_txt_fl",
view: "WELFARE_VIEW",
reminds: [ AppEvent.RedPointFishSignUp, AppEvent.RedPointFishDailyTask, AppEvent.RedPointOnlineAward, AppEvent.RedPointOnlineSign ]
},
JadeExchange: {
name: "JadeExchange",
type: d.BtnType.Normal,
img: "module/fish/texture/catchFishUi/icons/zm_btn_23",
title: "module/fish/texture/catchFishUi/icons/zm_txt_22",
view: "JADE_EXCHANGE_VIEW",
reminds: []
},
QuickGift: {
name: "QuickGift",
type: d.BtnType.Normal,
img: "module/fish/texture/catchFishUi/icons/levelup_gift",
title: "module/fish/texture/catchFishUi/icons/levelup_gift_txt",
view: "FISH_QUICK_GIFT_VIEW",
reminds: []
},
Leave: {
name: "Leave",
type: d.BtnType.Normal,
img: "module/fish/texture/catchFishUi/icons/leave",
title: "module/fish/texture/catchFishUi/icons/leave_txt",
isOpen: !0,
reminds: []
},
Introduction: {
name: "Introduction",
type: d.BtnType.Normal,
img: "module/fish/texture/catchFishUi/icons/fish_type",
title: "module/fish/texture/catchFishUi/icons/fish_type_txt",
view: "FISH_INTRODUCE_VIEW",
isOpen: !0,
reminds: []
},
SevenDay: {
name: "SevenDay",
type: d.BtnType.Normal,
img: "module/fish/texture/catchFishUi/icons/zm_btn_25",
title: "module/fish/texture/catchFishUi/icons/zm_btn_txt_qtl",
view: "SEVEN_DAY_VIEW",
reminds: [ AppEvent.RedPointFishSevenDayTask ]
},
ChangeSeat: {
name: "ChangeSeat",
type: d.BtnType.Normal,
img: "module/fish/texture/catchFishUi/icons/zm_btn_26",
title: "module/fish/texture/catchFishUi/icons/zm_btn_txt_hz",
reminds: []
}
};
d.CatchFishUIAreas = {
Left: [ d.CatchFishBtns.LeftHide, d.CatchFishBtns.Welfare, d.CatchFishBtns.JadeExchange ],
LeftTips: [ d.CatchFishBtns.Leave, d.CatchFishBtns.Introduction, d.CatchFishBtns.SevenDay, d.CatchFishBtns.ChangeSeat ],
Bottom: [],
Right: []
};
d.FirstExitRoomPop = [ {
name: "SevenDay",
open: function() {
return app.fishCtrls.catchFish.getModel().isSevenDayOpen();
},
view: "SEVEN_DAY_VIEW"
} ];
var p = d;
i.default = p;
t.exports = i.default;
cc._RF.pop();
}, {
ItemConst: "ItemConst"
} ],
ChannelConst: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "b4065K2NERBs42BF4pE3N40", "ChannelConst");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
Type: {}
};
s.Type.GameList = 1;
s.Type.RoomList = 2;
s.Type.OnlineNum = 3;
s.Type.ClubRoomList = 4;
s.Type.PrixProcess = 5;
s.Type.PrixInfo = 6;
s.Type.BetTreasurePeopleNum = 7;
s.Type.BetTreasureResult = 8;
s.Type.KefuLuckInfo = 9;
s.Type.SystemOpenInfo = 10;
s.Type.FishClubRoomList = 11;
s.Type.FishRoomSeatList = 12;
s.Type.FishLevelBattle = 13;
s.Type.FishBossTreasure = 14;
var n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
ChannelCtrl: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "c8313qtrm5GrIQ1rDeIL6vi", "ChannelCtrl");
var s = e("HttpCtrl"), n = e("ChannelModel");
cc.Class({
extends: s,
properties: {},
ctor: function() {
var e = new n();
this.init(e);
},
requireAfterEnterGame: function() {
this.initEvent();
},
initEvent: function() {
this.addEvent(M_Channel.syncMsg, this.syncMsg.bind(this));
},
enterChannel: function(e, t, i) {
if (this.getModel().isIamAtChannel(e, t, i)) logger.info("我已经在该频道了,不需要再次进入,%s%s%s", e, t, i); else {
var s = "", n = "";
TypeUtils.isAllNull(t) || (s = t + "");
TypeUtils.isAllNull(i) || (n = i + "");
logger.info(">>>>>>>>>>> 进入频道:" + ChannelUtils.getChannelName(e));
this.getModel().insertEnterChannel(e, s, n);
var o = {
type: e,
param1: s,
param2: n
};
session.request(M_Channel.join, o, this.handlerWithError(this, this.syncMsg), null, !1);
}
},
exitChannel: function(e, t, i) {
var s = this;
if (this.getModel().isIamAtChannel(e, t, i)) {
logger.info(">>>>>>>>>>> 离开频道:", ChannelUtils.getChannelName(e));
var n = "", o = "";
TypeUtils.isAllNull(t) || (n = t);
TypeUtils.isAllNull(i) || (o = i);
session.request(M_Channel.leave, {
type: e,
param1: n,
param2: o
}, function() {
s.getModel().removeEnterChannel(e, t, i);
}, null, !1);
}
},
exitAllChannel: function(e, t) {
var i = function(e, t) {
return null != e && null != t && e.typical == t.typical;
};
if (!TypeUtils.isRealNull(e)) {
var s = [];
for (var n in e) if (e.hasOwnProperty(n)) {
var o = e[n];
if (i(t, o)) logger.info("这个频道需要进入,不需要调用离开: " + this.getModel().getChannelTypical(o.channel, o.param1, o.param2)); else {
this.exitChannel(o.channel, o.param1, o.param2);
s.push(this.getModel().getChannelTypical(o.channel, o.param1, o.param2));
}
}
for (var a = 0; a < s.length; a++) {
var r = s[a];
this.getModel().clearChannelByTypical(r);
logger.info("清除频道:", r);
}
}
},
syncMsg: function(e) {
var t = e.data;
if (TypeUtils.isRealNull(t)) logger.warn("channelCtrl:syncMsg  传入data为空"); else {
var i = t.ID.type;
this.emit(AppEvent.ChannelSyncData, {
channelType: i,
data: t
});
}
}
});
cc._RF.pop();
}, {
ChannelModel: "ChannelModel",
HttpCtrl: "HttpCtrl"
} ],
ChannelModel: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "f37b1daMTxDm7LOM/PLxUEF", "ChannelModel");
cc.Class({
extends: ModelBase,
properties: {},
ctor: function() {
this.init();
this.m_syncMsgCallback = null;
this.m_enterChannel = [];
this.m_lastEnterChannel = {};
},
setSyncMsgCallback: function(e) {
this.m_syncMsgCallback = e;
},
syncMsg: function(e) {
TypeUtils.isFunction(this.m_syncMsgCallback) ? this.m_syncMsgCallback(e) : logger.info("没有设置回调函数,不需要回调");
},
insertEnterChannel: function(e, t, i) {
this.m_enterChannel.push(this.getTypicalTb(e, t, i));
},
removeEnterChannel: function(e, t, i) {
this.clearChannelByTypical(this.getChannelTypical(e, t, i));
},
setLastEnterChannels: function(e) {
this.m_lastEnterChannel = DicUtils.copy(e);
},
getLastEnterChannels: function() {
return this.m_lastEnterChannel;
},
clearAllChannel: function() {
this.m_enterChannel = [];
},
clearChannel: function(e, t, i) {
var s = this.getChannelTypical(e, t, i);
this.clearChannelByTypical(s);
},
clearChannelByTypical: function(e) {
for (var t = 0; t < this.m_enterChannel.length; t++) {
if (this.m_enterChannel[t].typical == e) {
ArrayUtils.remove(this.m_enterChannel, t);
return;
}
}
},
isIamAtChannel: function(e, t, i) {
for (var s = this.getChannelTypical(e, t, i), n = 0; n < this.m_enterChannel.length; n++) {
if (this.m_enterChannel[n].typical == s) return !0;
}
return !1;
},
getChannelTypical: function(e, t, i) {
return "" + e + (t || "") + (i || "");
},
getTypicalTb: function(e, t, i) {
return {
channel: e,
param1: t,
param2: i,
typical: this.getChannelTypical(e, t, i)
};
},
getEnterChannel: function() {
return this.m_enterChannel;
}
});
cc._RF.pop();
}, {} ],
ChannelUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "08df95SQwBINrBUYj9nj0Ed", "ChannelUtils");
var s = e("ChannelConst");
cc.Class({
ctor: function() {},
enterChannel: function(e, t, i) {
this.getCtrl().enterChannel(e, t, i);
},
exitChannel: function(e, t, i) {
this.getCtrl().exitChannel(e, t, i);
},
getChannelEvent: function(e) {
return "channelSyncData" + this.getChannelName(e);
},
getChannelName: function(e) {
var t = s.Type || {};
for (var i in t) if (t.hasOwnProperty(i)) {
if (t[i] == e) return i;
}
return "null";
},
getCtrl: function() {
return app.ctrls.channel;
},
getModel: function() {
return this.getCtrl().getModel();
}
});
cc._RF.pop();
}, {
ChannelConst: "ChannelConst"
} ],
ClubConst: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "21436oqL9pDAI86MTcSnMQM", "ClubConst");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
ApproveMemberStatus: {}
};
s.ApproveMemberStatus.Approving = 1;
s.ApproveMemberStatus.Agree = 2;
s.ApproveMemberStatus.Disagree = 3;
s.PlayerApplyClubStatus = {};
s.PlayerApplyClubStatus.NoApply = 1;
s.PlayerApplyClubStatus.HadApply = 2;
s.MemberShipLevel = {};
s.MemberShipLevel.Master = 1;
s.MemberShipLevel.ViceMaster = 2;
s.MemberShipLevel.Member = 99;
s.MaxViceMasterNum = 4;
s.AccessType = {};
s.AccessType.Save = 1;
s.AccessType.Take = 2;
var n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
ClubCtrl: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "1c012THD9tEFpvHlggsCJj5", "ClubCtrl");
var s = e("HttpCtrl"), n = e("ClubModel");
e("MiniGameConst");
cc.Class({
extends: s,
properties: {},
ctor: function() {
var e = new n();
this.init(e);
},
requireAfterEnterGame: function() {
this.addEvent(M_union.syncMyContribution, this.model.syncMyContribution.bind(this));
this.addEvent(M_union.syncMembershipLevel, this.syncMembershipLevel.bind(this));
},
syncMembershipLevel: function(e) {
this.model.syncMembershipLevel(e);
this.requestUnionInfo();
},
requestUnionInfo: function() {
session.request(M_union.getUnionInfo, null, this.handlerWithError(this.model, this.model.onUnionInfo));
},
requestUnionList: function() {
session.request(M_union.getUnionList, null, this.handlerWithError(this.model, this.model.onUnionList), null, !1);
},
requestCreateClub: function(e) {
var t = this;
session.request(M_union.createUnion, e, function(e) {
e.errorCode == SystemError.success ? t.model.onCreateClub(e) : 29191 == e.errorCode ? TipsUtils.showTips("该公会名已有公会使用，请重新输入~") : ViewManager.showErrorMsg(e.errorCode);
});
},
requestUnionMembers: function(e) {
session.request(M_union.getUnionMembers, e, this.handlerWithError(this.model, this.model.onGetUnionMembers));
},
requestApplyClub: function(e, t) {
var i = this;
session.request(M_union.joinUnion, e, function(e) {
if (e.errorCode == SystemError.success) {
TypeUtils.isFunction(t) && t();
i.model.onApplyClub(e);
} else ViewManager.showErrorMsg(e.errorCode);
});
},
requireUnionApplicants: function(e) {
session.request(M_union.getUnionApplicants, e, this.handlerWithError(this.model, this.model.onUnionApplicants), null, !1);
},
requireApproveMember: function(e) {
session.request(M_union.approveMember, e, this.handlerWithError(this.model, this.model.onApproveMember));
},
requireSearchClub: function(e) {
session.request(M_union.searchUnion, Number(e), this.handlerWithError(this.model, this.model.onSearchClub));
},
requireUpdateIntroduction: function(e) {
session.request(M_union.updateIntroduction, e, this.handlerWithError(this.model, this.model.onUpdateIntroduction));
},
requireExitClub: function(e) {
session.request(M_union.exitUnion, e, this.handlerWithError(this.model, this.model.onExitClub));
},
requireKickOutClub: function(e) {
session.request(M_union.kickMember, e, this.handlerWithError(this.model, this.model.onKickOutClub));
},
requireChangeHead: function(e) {
session.request(M_union.updateUnionAvatar, e, this.handlerWithError(this.model, this.model.onChangeHead));
},
requireRankInfoBySociaty: function() {
var e = this;
this.request({
method: "getRankInfoBySociaty"
}, function(t) {
e.model.onRankInfoBySociaty(t);
});
},
requireUpgradeUnion: function(e) {
session.request(M_union.upgradeUnion, e, this.handlerWithError(this.model, this.model.onUpgradeUnion));
},
requireUnionGames: function(e) {
session.request(M_union.getUnionGames, e, this.handlerWithError(this.model, this.model.onUnionGames));
},
requireUnionScoreInfo: function(e) {
session.request(M_union.getUnionScoreInfo, e, this.handlerWithError(this.model, this.model.onGetUnionScoreInfo));
},
requireEnterClubFishRoom: function(e) {
session.request(M_union.enterUnionGame, e, this.handlerWithError(this, this.onEnterClubFishRoom));
},
onEnterClubFishRoom: function(e) {
ViewManager.closeView("FISH_CLUB_HALL");
var t = ConfigMgr.getConfig("fish_room_config").findByIndex(e.data.roomType);
app.fishCtrls.catchFish.enterRoom(e.data.roomType, t.group);
},
httpGetShareImage: function(e, t, i) {
var s = {
method: "getShareSociatyQrCode",
data: {
socId: e,
roleId: t
}
};
this.request(s, function(e) {
AppUtils.download(e.url, e.md5, function(e) {
TypeUtils.isFunction(i) && i(e);
});
});
},
requireUpUnionMaxmember: function(e) {
session.request(M_union.upUnionMaxMember, e, this.handlerWithError(this.model, this.model.onUpUnionMaxmember));
},
requireSettingMembershipLevel: function(e) {
session.request(M_union.settingMembershipLevel, e, this.handlerWithError(this.model, this.model.onSettingMembershipLevel), e);
},
requireInputInvitationCode: function(e) {
session.request(M_union.getUnionInfoByCode, e, this.handlerWithError(this.model, this.model.onInputInvitationCode));
},
requestApplyClubForInvite: function(e, t) {
session.request(M_union.inputInvitationCode, e, function(e) {
e.errorCode == SystemError.success ? TypeUtils.isFunction(t) && t() : ViewManager.showErrorMsg(e.errorCode);
});
},
searchUnionMember: function(e) {
session.request(M_union.searchUnionMember, e, this.handlerWithError(this.model, this.model.searchUnionMemberInfo));
},
channelSyncDataFishClubRoomList: function(e) {
this.model.syncUnionGames(e);
},
getUnionWarehouse: function() {
session.request(M_union.getUnionWarehouse, null, this.handlerWithError(this.model, this.model.onUnionDepotInfo));
},
putIntoUnionWarehouse: function(e) {
session.request(M_union.putIntoUnionWarehouse, e, this.handlerWithError(this, this.onPutIntoUnionDepot));
},
onPutIntoUnionDepot: function(e) {
this.model.onPutIntoUnionDepot(e);
},
takeOutUnionWarehouse: function(e) {
session.request(M_union.takeOutUnionWarehouse, e, this.handlerWithError(this, this.onTakeOutUnionDepot));
},
onTakeOutUnionDepot: function(e) {
this.model.onTakeOutUnionDepot(e);
},
getUnionWarehouseRecord: function(e) {
session.request(M_union.getUnionWarehouseRecord, e, this.handlerWithError(this.model, this.model.onUnionWarehouseRecord));
},
getWarehouseRedPoint: function() {
session.request(M_union.getWarehouseRedPoint, null, function(e) {}, null, !1);
},
getLatelyRecord: function() {
session.request(M_union.getLatelyRecord, null, this.handlerWithError(this.model, this.model.onLatelyRecord));
},
getPutinRemainCount: function(e) {
session.request(M_union.getPutinRemainCount, e, this.model.onPutinRemainCount.bind(this.model));
},
getTakeRemainCount: function(e) {
session.request(M_union.getTakeRemainCount, e, this.model.onTakeRemainCount.bind(this.model));
},
getUnionApplyRecord: function(e) {
session.request(M_union.getUnionApplyRecord, e, this.handlerWithError(this.model, this.model.onUnionApplyRecord));
}
});
cc._RF.pop();
}, {
ClubModel: "ClubModel",
HttpCtrl: "HttpCtrl",
MiniGameConst: "MiniGameConst"
} ],
ClubModel: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "f43b5u0X6VACqb4LFj3LWR2", "ClubModel");
var s = e("ClubConst");
cc.Class({
extends: ModelBase,
properties: {
EVENT_FISH_CLUB_MY_CLUB_INFO: "EVENT_FISH_CLUB_MY_CLUB_INFO",
EVENT_FISH_CLUB_CREATE_CLUB: "EVENT_FISH_CLUB_CREATE_CLUB",
EVENT_FISH_CLUB_MEMBER_LIST: "EVENT_FISH_CLUB_MEMBER_LIST",
EVENT_FISH_CLUB_LIST: "EVENT_FISH_CLUB_LIST",
EVENT_FISH_CLUB_APPLY_INFO_LIST: "EVENT_FISH_CLUB_APPLY_INFO_LIST",
EVENT_FISH_CLUB_SEARCH_CLUB: "EVENT_FISH_CLUB_SEARCH_CLUB",
EVENT_FISH_APPROVE_MEMBER: "EVENT_FISH_APPROVE_MEMBER",
EVENT_FISH_UPDATE_INTRODUCTION: "EVENT_FISH_UPDATE_INTRODUCTION",
EVENT_FISH_CLUB_EXIT_CLUB: "EVENT_FISH_CLUB_EXIT_CLUB",
EVENT_FISH_CLUB_KICK_OUT_CLUB: "EVENT_FISH_CLUB_KICK_OUT_CLUB",
EVENT_FISH_CLUB_CHANGE_HEAD: "EVENT_FISH_CLUB_CHANGE_HEAD",
EVENT_FISH_CLUB_RANK: "EVENT_FISH_CLUB_RANK",
EVENT_FISH_CLUB_UPDATE: "EVENT_FISH_CLUB_UPDATE",
EVENT_FISH_CLUB_APPLY_CLUB: "EVENT_FISH_CLUB_APPLY_CLUB",
EVENT_FISH_CLUB_GAME_ROOM_LIST: "EVENT_FISH_CLUB_GAME_ROOM_LIST",
EVENT_FISH_CLUB_GAME_ROOM_LIST_REFRESH: "EVENT_FISH_CLUB_GAME_ROOM_LIST_REFRESH",
EVENT_FISH_CLUB_SCORE_INFO: "EVENT_FISH_CLUB_SCORE_INFO",
EVENT_FISH_CLUB_SYNC_MY_CONTRIBUTION: "EVENT_FISH_CLUB_SYNC_MY_CONTRIBUTION",
EVENT_FISH_CLUB_UP_CLUB_MAX_MEM: "EVENT_FISH_CLUB_UP_CLUB_MAX_MEM",
EVENT_FISH_CLUB_UP_MEMBER_SHIP: "EVENT_FISH_CLUB_UP_MEMBER_SHIP",
EVENT_FISH_CLUB_INVITE_CODE_INFO: "EVENT_FISH_CLUB_INVITE_CODE_INFO",
EVENT_FISH_CLUB_DEPOT_INFO: "EVENT_FISH_CLUB_DEPOT_INFO",
EVENT_FISH_CLUB_DEPOT_RECORD: "EVENT_FISH_CLUB_DEPOT_RECORD",
EVENT_FISH_CLUB_DEPOT_LATELY_RECORD: "EVENT_FISH_CLUB_DEPOT_LATELY_RECORD",
EVENT_FISH_CLUB_DEPOT_PUTIN_REMAIN_COUNT: "EVENT_FISH_CLUB_DEPOT_PUTIN_REMAIN_COUNT",
EVENT_FISH_CLUB_DEPOT_TAKE_REMAIN_COUNT: "EVENT_FISH_CLUB_DEPOT_TAKE_REMAIN_COUNT",
EVENT_FISH_CLUB_DEPOT_SAVE_AND_TAKE_SUCCESS: "EVENT_FISH_CLUB_DEPOT_SAVE_AND_TAKE_SUCCESS"
},
ctor: function() {
this.init();
this._clubInfo = {};
this._clubMemberList = {};
},
onUnionInfo: function(e) {
this._clubInfo = e.data;
this.dispatchEvent(this.EVENT_FISH_CLUB_MY_CLUB_INFO);
},
onCreateClub: function(e) {
this._clubInfo = e.data;
this.dispatchEvent(this.EVENT_FISH_CLUB_CREATE_CLUB);
},
getClubInfo: function() {
return this._clubInfo;
},
getClubId: function() {
return this._clubInfo.unionId;
},
onGetUnionMembers: function(e) {
this._clubMemberList = e.data.list;
this.dispatchEvent(this.EVENT_FISH_CLUB_MEMBER_LIST);
},
getUnionMembers: function() {
return this._clubMemberList;
},
getOneMemberInfo: function(e) {
if (!TypeUtils.isRealNull(this._clubMemberList)) for (var t = 0; t < this._clubMemberList.length; t++) {
var i = this._clubMemberList[t];
if (i.roleId == e) return i;
}
},
onUnionList: function(e) {
this._clubList = e.data.list;
for (var t = 0; t < this._clubList.length; t++) this._clubList[t].status = s.PlayerApplyClubStatus.NoApply;
this.dispatchEvent(this.EVENT_FISH_CLUB_LIST);
},
onSearchClub: function(e) {
this._clubList = [ e.data ];
this.dispatchEvent(this.EVENT_FISH_CLUB_SEARCH_CLUB, e.data);
},
getUnionList: function() {
return this._clubList || [];
},
onApplyClub: function(e) {
for (var t = e.data, i = this.getUnionList(), n = 0; n < i.length; n++) {
var o = i[n];
o.unionId == t.unionId && (o.status = s.PlayerApplyClubStatus.HadApply);
}
this.dispatchEvent(this.EVENT_FISH_CLUB_APPLY_CLUB);
},
onUnionApplicants: function(e) {
this._ApplyInfo = e.data.list;
for (var t = 0; t < this._ApplyInfo.length; t++) this._ApplyInfo[t].status = s.ApproveMemberStatus.Approving;
this.dispatchEvent(this.EVENT_FISH_CLUB_APPLY_INFO_LIST);
},
getUnionApplicants: function() {
return this._ApplyInfo;
},
removeOneUnionApplicant: function(e) {
ArrayUtils.safeRemove(this._ApplyInfo, function(t, i) {
if (i.roleId == e.roleId) return !0;
});
},
onApproveMember: function(e) {
ArrayUtils.safeRemove(this._ApplyInfo, function(t, i) {
if (i.roleId == e.data.roleId && e.data.approve) return !0;
});
this.dispatchEvent(this.EVENT_FISH_APPROVE_MEMBER, e.data);
},
isViceMaster: function(e) {
return (e = e || {}).membershipLevel == s.MemberShipLevel.ViceMaster;
},
isIamMaster: function() {
if (!TypeUtils.isRealNull(this._clubInfo)) return this._clubInfo.creatorRoleId == RoleUtils.getRoleId();
},
isCommonMember: function(e) {
return (e = e || {}).membershipLevel == s.MemberShipLevel.Member;
},
isIamCommonMember: function(e) {
if (!this.isIamMaster()) {
for (var t = this.getUnionMembers(), i = 0; i < t.length; i++) {
var s = t[i];
if (s.roleId == RoleUtils.getRoleId()) return this.isCommonMember(s);
}
logger.warn("找不到成员信息");
return !0;
}
},
isIamViceMaster: function() {
for (var e = 0; e < this._clubMemberList.length; e++) {
var t = this._clubMemberList[e];
if (t.roleId == RoleUtils.getRoleId()) return !!this.isViceMaster(t);
}
logger.error("找不到成员信息:%s", this._clubMemberList);
return !1;
},
IsCanIKitMember: function(e) {
return !!(this.isIamViceMaster() && (e = e || {}).membershipLevel && e.membershipLevel == s.MemberShipLevel.Member && e.inviteRoleId && Number(e.inviteRoleId) == RoleUtils.getRoleId());
},
onUpdateIntroduction: function(e) {
this._introductionInfo = e.data;
this._clubInfo.unionId == e.data.unionId && (this._clubInfo.introduction = e.data.introduction);
this.dispatchEvent(this.EVENT_FISH_UPDATE_INTRODUCTION, e.data);
},
getUpdateIntroduction: function() {
return this._clubInfo.introduction;
},
onExitClub: function(e) {
this.dispatchEvent(this.EVENT_FISH_CLUB_EXIT_CLUB, e.data);
},
onKickOutClub: function(e) {
for (var t, i = 0; i < this._clubMemberList.length; i++) {
this._clubMemberList[i].roleId == e.data.roleId && (t = i);
}
t ? ArrayUtils.remove(this._clubMemberList, t) : logger.warn("不应该找不到key", e.data);
this.dispatchEvent(this.EVENT_FISH_CLUB_KICK_OUT_CLUB, e.data);
},
onChangeHead: function(e) {
if (!TypeUtils.isRealNull(this._clubInfo)) {
this._clubInfo.unionAvatar = e.data.unionAvatar;
this.dispatchEvent(this.EVENT_FISH_CLUB_CHANGE_HEAD, e.data);
}
},
onRankInfoBySociaty: function(e) {
this._randkData = e;
this.dispatchEvent(this.EVENT_FISH_CLUB_RANK, this._randkData);
},
getRank: function() {
return this._randkData;
},
onUpgradeUnion: function(e) {
this.dispatchEvent(this.EVENT_FISH_CLUB_UPDATE, this._clubInfo);
},
onUnionGames: function(e) {
this._gameList = e.data.list;
this.dispatchEvent(this.EVENT_FISH_CLUB_GAME_ROOM_LIST, e.data);
},
onChannelUnionRoomList: function(e) {
if (!TypeUtils.isRealNull(e)) {
this._gameList = e;
this.dispatchEvent(this.EVENT_FISH_CLUB_GAME_ROOM_LIST, this._gameList);
}
},
getUnionGames: function() {
return this._gameList;
},
syncUnionGames: function(e) {
var t = e.roomList;
if (!TypeUtils.isRealNull(e.roomList)) {
var i = t[0].roomType;
this._gameList = this._gameList || [];
ArrayUtils.safeRemove(this._gameList, function(e, t) {
if (t.roomType == i) return !0;
});
ArrayUtils.merge(this._gameList, t);
this.dispatchEvent(this.EVENT_FISH_CLUB_GAME_ROOM_LIST_REFRESH, this._gameList);
}
},
onGetUnionScoreInfo: function(e) {
this._scoreInfo = e.data;
this.dispatchEvent(this.EVENT_FISH_CLUB_SCORE_INFO, e.data);
},
getScoreInfo: function() {
return this._scoreInfo;
},
syncMyContribution: function(e) {
if (!TypeUtils.isRealNull(this._clubMemberList)) {
for (var t = 0; t < this._clubMemberList.length; t++) {
var i = this._clubMemberList[t];
if (i.roleId == RoleUtils.getRoleId()) {
i.totalContribution = e.data.totalContribution;
i.todayContribution = e.data.todayContribution;
break;
}
}
this._clubInfo.myContribution = e.data.contribution;
this.dispatchEvent(this.EVENT_FISH_CLUB_SYNC_MY_CONTRIBUTION, e.data);
}
},
onUpUnionMaxmember: function(e) {
if (!TypeUtils.isRealNull(this._clubInfo)) {
TipsUtils.showTips("添加公会人数上限成功");
this._clubInfo.maxMember = e.data;
this.dispatchEvent(this.EVENT_FISH_CLUB_UP_CLUB_MAX_MEM, e.data);
}
},
onSettingMembershipLevel: function(e) {
for (var t = e.param, i = 0; i < this._clubMemberList.length; i++) {
var s = this._clubMemberList[i];
s.roleId == t.memRoleId && (s.membershipLevel = t.membershipLevel);
}
this.dispatchEvent(this.EVENT_FISH_CLUB_UP_MEMBER_SHIP);
this.dispatchEvent(this.EVENT_FISH_CLUB_MEMBER_LIST);
},
getViceMasterNum: function() {
for (var e = 0, t = 0; t < this._clubMemberList.length; t++) {
this._clubMemberList[t].membershipLevel == s.MemberShipLevel.ViceMaster && (e += 1);
}
return e;
},
syncMembershipLevel: function(e) {
for (var t = e.data, i = RoleUtils.getRoleId(), s = 0; s < this._clubMemberList.length; s++) {
var n = this._clubMemberList[s];
n.roleId == i && (n.membershipLevel = t);
}
this.dispatchEvent(this.EVENT_FISH_CLUB_MEMBER_LIST);
},
onInputInvitationCode: function(e) {
this.dispatchEvent(this.EVENT_FISH_CLUB_INVITE_CODE_INFO, e.data);
},
onUnionDepotInfo: function(e) {
this.depotData = e.data;
this.dispatchEvent(this.EVENT_FISH_CLUB_DEPOT_INFO, e.data);
},
onPutIntoUnionDepot: function(e) {
if (!TypeUtils.isRealNull(this.depotData) && !TypeUtils.isRealNull(this.depotData.list)) {
TipsUtils.showTips(_LANG("UNION_DEPOT_PUTIN_SUCC"));
this.depotData.list.push(e.data);
this.dispatchEvent(this.EVENT_FISH_CLUB_DEPOT_SAVE_AND_TAKE_SUCCESS);
this.dispatchEvent(this.EVENT_FISH_CLUB_DEPOT_INFO, this.depotData);
}
},
onTakeOutUnionDepot: function(e) {
if (!TypeUtils.isRealNull(this.depotData) && !TypeUtils.isRealNull(this.depotData.list)) {
TipsUtils.showTips(_LANG("UNION_DEPOT_TAKEOUT_SUCC"));
for (var t = 0; t < this.depotData.list.length; t++) {
var i = this.depotData.list[t];
if (i.warehouseItemId == e.data.warehouseItemId) {
e.data.amount <= 0 ? ArrayUtils.remove(this.depotData.list, t) : i.amount = e.data.amount;
break;
}
}
this.dispatchEvent(this.EVENT_FISH_CLUB_DEPOT_SAVE_AND_TAKE_SUCCESS);
this.dispatchEvent(this.EVENT_FISH_CLUB_DEPOT_INFO, this.depotData);
}
},
onUnionWarehouseRecord: function(e) {
this.dispatchEvent(this.EVENT_FISH_CLUB_DEPOT_RECORD, e.data);
},
syncWarehouseRedPoint: function(e) {
this.bRemindClubDepot = e.data.display;
},
getClubDepotRemid: function() {
return this.bRemindClubDepot;
},
onLatelyRecord: function(e) {
this.dispatchEvent(this.EVENT_FISH_CLUB_DEPOT_LATELY_RECORD, e.data);
},
onPutinRemainCount: function(e) {
this.dispatchEvent(this.EVENT_FISH_CLUB_DEPOT_PUTIN_REMAIN_COUNT, e);
},
onTakeRemainCount: function(e) {
this.dispatchEvent(this.EVENT_FISH_CLUB_DEPOT_TAKE_REMAIN_COUNT, e);
},
onUnionApplyRecord: function(e) {
this.dispatchEvent(this.EVENT_FISH_CLUB_APPLY_RECORD, e.data);
}
});
cc._RF.pop();
}, {
ClubConst: "ClubConst"
} ],
ColorUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "c5c22B/EWNBS4doP/ZRXb1r", "ColorUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
str2c3b: function(e) {
var t;
if ((t = "#" == e[0] ? e.slice(1) : e).length < 6) {
logger.warn("颜色长度不对");
return cc.color(0, 0, 0);
}
for (var i = [], s = 0; s < 6; s += 2) {
var n = "0x" + t.slice(s, s + 2);
i.push(Number(n));
}
return cc.color(i[0], i[1], i[2]);
}
}, n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
ComGrid: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "22286vQRA1Mg40Iv7/2WT6e", "ComGrid");
var s = cc.Enum({
PortraitHorizontal: 0,
rPortraitHorizontal: 1
});
cc.Class({
extends: cc.Component,
properties: {
m_roomWidth: cc.Float,
m_roomHeight: cc.Float,
m_row: cc.Integer,
m_rowSpace: cc.Float,
m_col: cc.Integer,
m_colSpace: cc.Float,
m_direction: {
default: s.PortraitHorizontal,
type: s
}
},
start: function() {
this.initGrid();
},
initGrid: function() {
var e = (this.m_roomWidth + this.m_colSpace) / (this.m_col + this.m_colSpace), t = (this.m_roomHeight + this.m_rowSpace) / (this.m_row + this.m_rowSpace);
this.m_cellSize = cc.size(e, t);
},
getPosition: function(e, t) {
if (this.m_direction === s.PortraitHorizontal) {
var i = (this.m_cellSize.width + this.m_colSpace) * t, n = -(this.m_cellSize.height + this.m_rowSpace) * e;
return cc.v2(i, n);
}
if (this.m_direction === s.rPortraitHorizontal) {
var o = (this.m_cellSize.width + this.m_colSpace) * t, a = (this.m_cellSize.height + this.m_rowSpace) * e;
return cc.v2(o, a);
}
},
getPositionWithOffset: function(e, t, i) {
var s = this.getPosition(e, t);
return cc.v2(s.x + i.x, s.y + i.y);
},
getCollisionRanks: function(e, t) {},
getRow: function() {
return this.m_row;
},
getCol: function() {
return this.m_col;
}
});
cc._RF.pop();
}, {} ],
ComListView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "ac4dbl6tjVDV4gbjFi9LP6E", "ComListView");
cc.Class({
extends: cc.Component
});
cc._RF.pop();
}, {} ],
ComNodePool: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "e4a23fxuwJLkomhflyZ7A0r", "ComNodePool");
cc.Class({
extends: cc.Component,
onLoad: function() {
this.m_commonCache = {};
},
tryInitCache: function(e) {
this.m_commonCache[e] || (this.m_commonCache[e] = new cc.NodePool(e));
},
pushCache: function(e, t) {
this.tryInitCache(e);
t.active = !1;
this.m_commonCache[e].put(t);
},
popCache: function(e) {
this.tryInitCache(e);
var t = this.m_commonCache[e].get();
if (t) {
t.active = !0;
return t;
}
return null;
},
getSize: function(e) {
this.tryInitCache(e);
return this.m_commonCache[e].size();
},
onDestroy: function() {
for (var e in this.m_commonCache) {
this.m_commonCache[e].clear();
}
}
});
cc._RF.pop();
}, {} ],
ComSpineBaseData: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "40a48m8Aw9K44cjkG95hGZ0", "ComSpineBaseData");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = cc.Class({
ctor: function() {},
init: function(e) {
this._args = e;
return this;
},
setSkeUrl: function(e) {
this._args.ske = e;
},
getSkeUrl: function() {
this._args.ske || logger.error("this._args.ske == null");
return this._args.ske;
},
setImageUrl: function(e) {
this._args.image = e;
},
getImageUrl: function() {
this._args.image || logger.error("this._args.image == null");
return this._args.image;
},
setAtlasUrl: function(e) {
this._args.atlas = e;
},
getAtlasUrl: function() {
this._args.atlas || logger.error("this._args.atlas == null");
return this._args.atlas;
},
getTextureName: function() {
this._args.textureName || logger.error("this._args.textureName == null");
return this._args.textureName;
},
setEnableBatch: function(e) {
this._args.isEnableBatch = e;
},
isEnableBatch: function() {
return this._args.isEnableBatch;
},
setRetainImage: function(e) {
this._args.isRetainImage = e;
},
isRetainImage: function() {
return this._args.isRetainImage;
},
setRetainText: function(e) {
this._args.isRetainText = e;
},
isRetainText: function() {
return this._args.isRetainText;
}
});
i.default = s;
t.exports = i.default;
cc._RF.pop();
}, {} ],
ComSpine: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "0494b413qRHyo0zx+qcoeS1", "ComSpine");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = e("ComSpineBaseData"), n = cc.Class({
extends: BaseComponent,
properties: {},
onLoad: function() {},
init: function(e, t) {
var i = this;
if (TypeUtils.isType(e, s)) {
this.comSke = this.node.addComponent(sp.Skeleton);
e.isEnableBatch() && (this.comSke.enableBatch = !0);
var n = this, o = e.getSkeUrl(), a = e.getImageUrl(), r = e.getAtlasUrl();
this._loadSingleTexture2D(a, function(s, l) {
i._loadSingleText(r, function(s, c) {
i._loadSingleAsset(o, sp.SkeletonData, function(s, o) {
var h = new sp.SkeletonData();
h.skeletonJson = o;
h.atlasText = c.text;
h.textures = [ l ];
h.textureNames = [ e.getTextureName() ];
n.comSke.skeletonData = h;
e.isRetainImage() && i._retainTexture2D(a);
e.isRetainText() && i._retainText(r);
t();
});
});
});
} else logger.error("ComSpine :_ComSpineBaseData !== ComSpineBaseData");
},
play: function(e, t, i) {
this.comSke.setAnimation(e, t, i);
},
setTimeScale: function(e) {
this.comSke.timeScale = e;
},
setStartListener: function(e) {
this.comSke.setStartListener(e);
},
setCompleteListener: function(e) {
this.comSke.setCompleteListener(e);
},
setEndListener: function(e) {
this.comSke.setEndListener(e);
},
setEventListener: function(e) {
this.comSke.setEventListener(e);
},
setInterruptListener: function(e) {
this.comSke.setInterruptListener(e);
},
onDestroy: function() {
BaseComponent.prototype.onDestroy.call(this);
},
isCurAnimationName: function(e) {
return this.comSke.animation === e;
}
});
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {
ComSpineBaseData: "ComSpineBaseData"
} ],
ComTileMap: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "a995emmXU9F/ILxS9uYkOfr", "ComTileMap");
(function(e) {
e && e.__esModule;
})(e("../Uitls/TilemapUtils"));
cc.Class({
extends: BaseComponent,
setTileMapPath: function(e, t) {
this.m_tmPath = e;
},
getNode: function(e) {
this.isTileInit && logger.warn("tilemap还没有初始化");
return NodeUtils.seekC(this.node, e);
},
onLoad: function() {
this.initData();
this.initUI();
},
initUI: function() {},
initData: function() {
this.isTileInit = !1;
}
});
cc._RF.pop();
}, {
"../Uitls/TilemapUtils": "TilemapUtils"
} ],
CommonAssetsManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "77814Q/UpFHQpmveJEFPR2w", "CommonAssetsManager");
cc.Class({
extends: BaseAssetManager,
properties: {
_name: {
default: "CommonAssetsManager",
override: !0
}
},
loadResourceReal: function(e, t, i) {
i === sp.SkeletonData && LoadUtils.loadResWithType(e, sp.SkeletonData, function(i, s) {
i ? logger.error("加载sp.SkeletonData.skeletonJson失败:", e, ",", i) : t(e, s);
});
}
});
cc._RF.pop();
}, {} ],
CommonConst: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "50cf1wqwiJMl5koDEhAmNG0", "CommonConst");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
TurntableType: {}
};
s.TurntableType.YaoQingFriend = 1;
s.TurntableType.DdzWin = 2;
s.TurntableType.FishVIP = 4;
s.TurntableType.OnLine = 9;
s.ShareType = {};
s.ShareType.Hall = 1;
s.ShareType.Club = 2;
s.ShareTarget = {};
s.ShareTarget.WeChatFriends = 1;
s.ShareTarget.Moments = 2;
var n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
ConfigManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "5d543sx42NGUZ+Ma0uhl3q8", "ConfigManager");
var s = e("BaseManager");
cc.Class({
extends: s,
ctor: function() {
console.log("初始化ConfigManager");
this.init();
},
init: function() {
this.m_configs = {};
this.m_gameConfigsArray = {};
},
getConfig: function(e) {
return this.m_configs[e];
},
enterGame: function(e, t, i, s) {
var n = this;
this.saveConfigArry(e, t);
var o = 0;
JsonManager.loadResource(t, function(e, t, i) {
var a = e.split("/"), r = a[a.length - 1];
n.m_configs[r] = t;
s && s(++o);
}, function() {
i && i();
});
},
exitGame: function(e) {
JsonManager.deloadResourceForce(this.m_jsonUrls);
},
saveConfigArry: function(e, t) {
this.m_gameConfigsArray[e] ? this.m_gameConfigsArray[e].concat(t) : this.m_gameConfigsArray[e] = t;
}
});
cc._RF.pop();
}, {
BaseManager: "BaseManager"
} ],
ConfigMgr: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "d0461sMJVBARI0vJc4BwtoP", "ConfigMgr");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = e("ConfigTable"), n = cc.Class({
ctor: function() {
this.initData();
},
initData: function() {
this._configMap = {};
this._loadConfigMap = {};
},
initConfig: function(e, t, i) {
var s = this;
LoadUtils.loadResDir(e, function(e, s, n) {
i && t(e, s);
}, function(e, t) {
for (var n = 0; n < t.length; n++) {
var o = t[n];
s.initTable(o.name, o.json);
}
i(e, t);
});
},
initTable: function(e, t) {
var i = e.replace(/.*\/config\//, ""), n = new s();
n.init(i, t);
this._configMap[i] = n;
},
getConfig: function(e) {
if (this._configMap.hasOwnProperty(e)) return this._configMap[e];
logger.warn("not find config! name:", e);
},
getInitCfg: function(e, t) {
var i = this;
TypeUtils.isRealNull(this._configMap[e]) && LoadUtils.loadJson("resources/module/fish/config/" + e + ".json", function(t) {
i.initTable(e, t);
});
},
getCommon: function(e) {
var t = this.getConfig("common_config");
if (void 0 != t) {
var i = t.findFirst(function(t) {
return t.key == e;
});
if (void 0 != i) return i.value;
logger.error("common_config[" + key + "] == nil");
}
},
getGunLevelMap: function() {
var e = this.getConfig("gun_level");
if (void 0 != e) {
var t = {};
e.forEach(function(e) {
var i = t[e.type];
if (TypeUtils.isRealNull(i)) {
i = {};
t[e.type] = i;
}
i[e.level] = e;
});
return t;
}
},
getLoadCfg: function(e, t) {
var i = this;
TypeUtils.isRealNull(this._loadConfigMap[e]) || TypeUtils.isFunction(t) && t(this._loadConfigMap[e]);
LoadUtils.loadJson("resources/module/fish/config/" + e + ".json", function(s) {
i._loadConfigMap[e] = s;
TypeUtils.isFunction(t) && t(i._loadConfigMap[e]);
});
}
});
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {
ConfigTable: "ConfigTable"
} ],
ConfigTable: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "cec71Y4S/FFmol+F+Rno1pH", "ConfigTable");
var s = e("ConfigVO");
cc.Class({
init: function(e, t) {
this.VOList = [];
this.VOMap = {};
for (var i = t[0], n = 1; n < t.length; n++) {
var o = t[n], a = new s();
a.init(i, o);
this.VOList.push(a);
null != a.getIndex() && (this.VOMap[a.getIndex()] = a);
}
},
findByIndex: function(e) {
return this.VOMap[e];
},
findFirst: function(e) {
for (var t = 0; t < this.VOList.length; t++) {
var i = this.VOList[t];
if (e(i)) return i;
}
},
findAll: function(e) {
for (var t = [], i = 0; i < this.VOList.length; i++) {
var s = this.VOList[i];
(null == e || e(s)) && t.push(s);
}
return t;
},
forEach: function(e) {
for (var t = 0; t < this.VOList.length; t++) {
e(this.VOList[t]);
}
},
getLen: function() {
return this.VOList.length;
}
});
cc._RF.pop();
}, {
ConfigVO: "ConfigVO"
} ],
ConfigVO: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "49f02gBswZF6r4JbYU7K5RJ", "ConfigVO");
cc.Class({
init: function(e, t) {
for (var i = 0; i < e.length; i++) {
var s = e[i];
if (-1 != (s = s.replace(/\(.*\)/, "")).indexOf("__index:")) {
s = s.replace("__index:", "");
this.__index = t[i];
}
this[s] = t[i];
}
},
getIndex: function() {
return this.__index;
}
});
cc._RF.pop();
}, {} ],
CountingConst: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "e7b99UbKmJEP55zPfI9X4yz", "CountingConst");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
CountingType: {}
};
s.CountingType.CommonMonthCard = 1;
s.CountingType.SuperMonthCard = 2;
s.CountingType.FeelMonthCard = 3;
s.CountingType.DiscountGift = 4;
s.CountingType.KoiFishCome = 5;
s.CountingType.UpVip8Gift = 6;
s.CountingType.QmMatchTimes = 20;
s.CountingType.DjMatchTimes = 21;
s.CountingType.SnatchTreasureWeekScore = 100;
s.CountingType.SnatchTreasureMonthScore = 101;
s.CountingType.SnatchTreasureJoinTimes = 102;
s.CountingType.SnatchTreasurecontinueWinTimes = 103;
s.CountingType.BindMobileNum = 200;
s.CountingType.BindWechat = 201;
s.CountingType.Certification = 202;
s.CountingType.VIPAwardTimes = 300;
s.CountingType.HallRedEnvelope = 601;
s.CountingType.RedEnvelopeToday = 602;
s.CountingType.DDZPlayTimesToday = 603;
s.CountingType.DDZPlayWinTimes = 604;
s.CountingType.RedEnvelopeTotal = 605;
s.CountingType.PlayGameObtainRedEnvelope = 606;
s.CountingType.SuspensionTurntableTimes = 608;
s.CountingType.CheckinTimesForGold = 2100;
s.CountingType.CheckinTimesForDiamond = 2101;
s.CountingType.VIPGift = {};
s.CountingType.VIPGift.VIP1 = 1e3;
s.CountingType.VIPGift.VIP2 = 1001;
s.CountingType.VIPGift.VIP3 = 1002;
s.CountingType.VIPGift.VIP4 = 1003;
s.CountingType.VIPGift.VIP5 = 1004;
s.CountingType.VIPGift.VIP6 = 1005;
s.CountingType.VIPGift.VIP7 = 1006;
s.CountingType.VIPGift.VIP8 = 1007;
s.CountingType.VIPGift.VIP9 = 1008;
s.CountingType.KuangBao = 1e4;
var n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
CountingCtrl: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "7a29ejQ/tNLV67OQqRmnwpK", "CountingCtrl");
var s = e("HttpCtrl"), n = e("CountingModel");
cc.Class({
extends: s,
properties: {},
ctor: function() {
var e = new n();
this.init(e);
},
requireAfterEnterGame: function() {
this.addEvent(M_Counting.syncCounting, this.handlerWithError(this.model, this.model.syncCounting));
this.onExchange();
},
requireExchange: function(e) {
session.request(M_Counting.exchange, e, this.handlerWithError(this, this.onExchange), null, !0);
},
onExchange: function() {
session.request(M_Counting.getList, null, this.handlerWithError(this.model, this.model.onGetList), null, !0);
},
reset: function(e, t) {
session.request(M_Counting.reset, {
type: e,
count: t
}, this.handlerWithError(this.model, this.model.reset), null, !0);
}
});
cc._RF.pop();
}, {
CountingModel: "CountingModel",
HttpCtrl: "HttpCtrl"
} ],
CountingModel: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "94462zp/thHZZxriX3I3VP2", "CountingModel");
cc.Class({
extends: ModelBase,
properties: {
EVENT_COUNTING_UPDATE: "EVENT_COUNTING_UPDATE"
},
ctor: function() {
this.init();
this.initData();
},
initData: function() {
this.m_countingList = {};
this.isFirst = !0;
},
getCountingData: function(e) {
return this.m_countingList[e];
},
onGetList: function(e) {
this.m_countingList = {};
var t = e.data.list;
for (var i in t) if (t.hasOwnProperty(i)) {
var s = t[i];
this.setCounting(s.type, s);
}
this.emit(AppEvent.CountingUpdate, this.isFirst);
this.isFirst = !1;
this.dispatchEvent(this.EVENT_COUNTING_UPDATE);
},
syncCounting: function(e) {
var t = e.data;
this.setCounting(t.type, t);
},
onExchange: function(e) {
logger.info("次数更新,未实现 TODO");
},
setCounting: function(e, t) {
this.m_countingList[e] = t;
},
reset: function(e) {
var t = e.data.type, i = e.data.count;
TypeUtils.isRealNull(this.m_countingList[t]) ? this.m_countingList[_type] = {
type: t,
count: i
} : this.m_countingList[t].count = i;
this.dispatchEvent(this.EVENT_COUNTING_UPDATE);
}
});
cc._RF.pop();
}, {} ],
CountingUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "0caaaLddHtMbIpRqlEptV9l", "CountingUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {}, n = null, o = null;
s.getCountingData = function(e) {
return this.getModel().getCountingData(e) || {};
};
s.getCountingTime = function(e) {
return this.getCountingData(e).count || 0;
};
s.getCountingExchangeCount = function(e) {
return this.getCountingData(e).exchangeCount || 0;
};
s.getRemainUsingCount = function(e) {
return this.getMaxUsingCount(e) - this.getCountingTime(e);
};
s.getRemainExchangeCount = function(e) {
var t = this.getCountingExchangeCount(e);
return this.getMaxExchangeCount(e) - t;
};
s.getMaxUsingCount = function(e) {
return this.getBaseUsingCount(e) + this.getExchangeMaxUsingCount(e);
};
s.getHadUsedCount = function(e) {
return this.getMaxUsingCount(e) - this.getRemainUsingCount(e);
};
s.getBaseUsingCount = function(e) {
var t = VipUtils.getFishVipLevel();
TypeUtils.isRealNull(o) && (o = ConfigMgr.getConfig("counting_config"));
var i = o.findByIndex(e);
console.assert(!TypeUtils.isRealNull(i), "countingType: " + e);
var s = i.ceil || 0;
0;
t > 0 && i.fishVipCeil && (s = i.fishVipCeil[t] || 0);
return s;
};
s.getExchangeMaxUsingCount = function(e) {
TypeUtils.isRealNull(n) && (n = ConfigMgr.getConfig("counting_buy_config"));
var t = TableUtils.filterObj(n, function(t, i) {
if (i.countType == e) return !0;
}), i = {};
for (var s in t) if (t.hasOwnProperty(s)) {
var o = t[s];
i[o.buyTime] = o;
}
for (var a = this.getCountingExchangeCount(e), r = 0, l = 0; l < a; l++) {
var c = i[l];
TypeUtils.isRealNull(c) || (r += c.count);
}
return r;
};
s.getMaxExchangeCount = function(e) {
TypeUtils.isRealNull(n) && (n = ConfigMgr.getConfig("counting_buy_config"));
var t = TableUtils.filterObj(n, function(t, i) {
if (0 >= i.vipLimit && i.countType == e) return !0;
});
return TableUtils.getMax(t, function(e, t) {
return e.buyTime > t.buyTime;
}).buyTime;
};
s.buyTicket = function(e) {
logger.info("countingType = " + e);
this.getCtrl().requireExchange(e);
};
s.getCtrl = function() {
return app.ctrls.counting;
};
s.getModel = function() {
return this.getCtrl().getModel();
};
s.reset = function(e, t) {
this.getCtrl().reset(e, this.getMaxUsingCount(e) - t);
};
var a = s;
i.default = a;
t.exports = i.default;
cc._RF.pop();
}, {} ],
CtrlBase: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "3d90bn7u/5AVbPj3roN2HD0", "CtrlBase");
window.CtrlBase = cc.Class({
ctor: function() {
this.init();
this._initEvent();
},
doAfterInit: function() {
TypeUtils.isRealNull(this.model) || this.model.doAfterInit();
this.requireAfterEnterGame();
},
requireAfterEnterGame: function() {},
init: function(e) {
this.model = e;
this._eventMap = [];
this.m_freezeEvents = [];
},
_initEvent: function() {
this.eventOn(AppEvent.ChannelSyncData, this._handleSyncChannelData, this);
},
_handleSyncChannelData: function(e) {
var t = e.channelType, i = ChannelUtils.getChannelEvent(t);
this[i] && this[i](e.data);
},
getModel: function() {
return this.model;
},
setModel: function(e) {
this.model = e;
},
addEvent: function(e, t) {
session.addEventListener(e, t);
},
onExit: function() {
this.reset();
},
reset: function() {
if (null != this._eventMap && this._eventMap.length > 0) {
for (var e = 0; e < this._eventMap.length; e++) {
var t = this._eventMap[e];
EventManager.off(t.type, t.callback, t.target);
}
this._eventMap = null;
}
this.m_freezeEvents = [];
},
eventOn: function(e, t, i) {
EventManager.on(e, t, i);
this._eventMap.push({
type: e,
callback: t,
target: i
});
},
eventOnce: function(e, t, i) {
EventManager.once(e, t, i);
},
emit: function(e, t) {
EventManager.emit(e, t);
},
handlerWithError: function(e, t) {
return function(i) {
if (i.errorCode == SystemError.success) t.call(e, i); else {
ViewManager.showErrorMsg(i.errorCode);
i.errorCode == BagError.notEnoughItem && app.ctrls.bag.getBagInfo();
}
};
}
});
cc._RF.pop();
}, {} ],
CurrencyConst: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "d7cf328gjBBjZUg4mWvhdFt", "CurrencyConst");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s;
function n(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}
var o = {
ITEM_IDS: {
gold: 1,
treasure: 2,
bullet: 3,
food: 4,
goldCard: 101,
silverCard: 102,
platinum_warhead: 103,
gold_warhead: 104,
silver_warhead: 105,
bronze_warhead: 106,
laba: 110
}
};
o.ITEM_TYPES = (n(s = {}, "GOLD", [ o.ITEM_IDS.gold ]), n(s, "TREASURE", [ o.ITEM_IDS.treasure ]), 
n(s, "BULLET", [ o.ITEM_IDS.bullet ]), n(s, "FOOD", [ o.ITEM_IDS.food ]), n(s, "CARD", [ o.ITEM_IDS.goldCard, o.ITEM_IDS.silverCard ]), 
n(s, "WARHEAD", [ o.ITEM_IDS.platinum_warhead, o.ITEM_IDS.gold_warhead, o.ITEM_IDS.silver_warhead, o.ITEM_IDS.bronze_warhead ]), 
n(s, "LABA", [ o.ITEM_IDS.laba ]), s);
o.LIMIT_TYPE = {
broken: 1e3
};
var a = o;
i.default = a;
t.exports = i.default;
cc._RF.pop();
}, {} ],
CurrencyCtrl: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "247a0WO3L9MZIjQcjW/PrXJ", "CurrencyCtrl");
var s = e("HttpCtrl"), n = e("CurrencyModel");
cc.Class({
extends: s,
properties: {},
ctor: function() {
var e = new n();
this.init(e);
},
requireAfterEnterGame: function() {
this.addEvent(M_Currency.updateCurrencyList, this.handleUpdateCurrencyList.bind(this));
this.addEvent(M_Disk.syncRandomRedEnvelope, this.syncRandomRedEnvelope.bind(this));
this.addEvent(M_Disk.syncStopRedEnvelope, this.syncStopRedEnvelope.bind(this));
this.getCurrencyList();
},
freezeEvents: function() {
session.freezeEvent(M_Currency.updateCurrencyList);
},
unfreezeEvents: function() {
session.unfreezeEvent(M_Currency.updateCurrencyList);
},
getCurrencyList: function() {
session.request(M_Currency.getCurrencyList, null, this.handlerWithError(this, this.handleGetCurrencyList), null, !1);
},
handleGetCurrencyList: function(e) {
this.model.updateCurrencyList(e.data);
},
handleUpdateCurrencyList: function(e) {
this.model.updateCurrencyList(e.data);
},
syncRandomRedEnvelope: function(e) {
this.model.syncRandomRedEnvelope(e.data);
},
syncStopRedEnvelope: function(e) {
this.model.syncStopRedEnvelope();
}
});
cc._RF.pop();
}, {
CurrencyModel: "CurrencyModel",
HttpCtrl: "HttpCtrl"
} ],
CurrencyModel: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "3ec20OewaZPp5uIarS3hmC/", "CurrencyModel");
var s;
function n(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}
var o = e("ItemConst"), a = e("CurrencyConst"), r = "EVENT_UPDATE_", l = (n(s = {}, o.ResourceType.Silver, "SILVER"), 
n(s, o.ResourceType.Gold, "GOLD"), n(s, o.ResourceType.Diamond, "DIAMOND"), n(s, o.ResourceType.Ticket, "TICKET"), 
n(s, o.ResourceType.CofferDiamond, "COFFER_DIAMOND"), n(s, o.ResourceType.HongBaoTicket, "HONGBAO_TICKET"), 
n(s, o.ResourceType.Jade, "JADE"), n(s, o.ResourceType.QMBullet, "QMBULLET"), n(s, o.ResourceType.DJBullet, "DJBULLET"), 
s);
cc.Class({
extends: ModelBase,
properties: {
EVENT_UPDATE_SILVER: r + "SILVER",
EVENT_UPDATE_GOLD: r + "GOLD",
EVENT_UPDATE_DIAMOND: r + "DIAMOND",
EVENT_UPDATE_TICKET: r + "TICKET",
EVENT_UPDATE_COFFER_DIAMOND: r + "COFFER_DIAMOND",
EVENT_UPDATE_HONGBAO_TICKET: r + "HONGBAO_TICKET",
EVENT_UPDATE_JADE: r + "JADE",
EVENT_UPDATE_QMBULLET: r + "QMBULLET",
EVENT_UPDATE_DJBULLET: r + "DJBULLET",
EVENT_UPDATE_CURRENCY: "EVENT_UPDATE_CURRENCY",
EVENT_UPDATE_TREASURE: r + "TREASURE",
EVENT_UPDATE_FOOD: r + "FOOD",
EVENT_UPDATE_CARD: r + "CARD",
EVENT_UPDATE_WARHEAD: r + "WARHEAD",
EVENT_UPDATE_LABA: r + "LABA",
SYNC_RANDOM_RED_ENVELOPE: "SYNC_RANDOM_RED_ENVELOPE",
SYNC_STOP_RED_ENVELOPE: "SYNC_STOP_RED_ENVELOPE",
EVENT_CURRENCY_GET_DISK_COUNT: "EVENT_CURRENCY_GET_DISK_COUNT"
},
ctor: function() {
this.init();
this.initData();
},
initData: function() {
this._currencyList = {};
},
updateCurrencyList: function(e) {
if (TypeUtils.isRealNull(e) || TypeUtils.isRealNull(e.list)) console.log("货币更新，但是更新数据有问题"); else {
for (var t in e.list) if (e.list.hasOwnProperty(t)) {
var i = e.list[t];
if (TypeUtils.isString(i.amount)) {
i.amount = Number(i.amount);
i.amount = Math.floor(1e3 * i.amount + .1) / 1e3;
}
this.setCurrency(i.id, i.amount || 0);
if (i.id == o.ResourceType.Gold) {
ConfigMgr.getCommon("PlayerFishBroke_GoldLimit");
i.amount;
}
}
this.dispatchEvent(this.EVENT_UPDATE_CURRENCY);
this.emit(AppEvent.GameResourceUpdate);
}
},
syncRandomRedEnvelope: function(e) {
this.dispatchEvent(this.SYNC_RANDOM_RED_ENVELOPE, e.count);
},
syncStopRedEnvelope: function() {
this.dispatchEvent(this.SYNC_STOP_RED_ENVELOPE);
},
setCurrency: function(e, t) {
var i = t - (this._currencyList[e] || 0);
this._currencyList[e] = t;
var s = l[e];
TypeUtils.isRealNull(s) || this.dispatchEvent(r + s, {
id: e,
amount: t,
changeNum: i
});
},
isCurrency: function(e) {
return !!l[e];
},
getCurrency: function() {
return this._currencyList;
},
getCurrencyById: function(e) {
return this._currencyList[e] || 0;
},
getSilver: function() {
return this._currencyList[o.ResourceType.Silver] || 0;
},
getGold: function() {
return this._currencyList[o.ResourceType.Gold] || 0;
},
getTicket: function() {
return this._currencyList[o.ResourceType.Ticket] || 0;
},
getDiamond: function() {
return this._currencyList[o.ResourceType.Diamond] || 0;
},
getJade: function() {
return this._currencyList[o.ResourceType.Jade] || 0;
},
getBullet: function() {
return this._currencyList[a.ResourceType.Bullet] || 0;
},
getHongBaoTicket: function() {
return this._currencyList[o.ResourceType.HongBaoTicket] || 0;
},
getCofferDiamond: function() {
return this._currencyList[o.ResourceType.CofferDiamond] || 0;
},
getResourceNum: function(e) {
return this._currencyList[e] || 0;
},
getFood: function() {
return this._currencyList[a.ITEM_IDS.food] || 0;
},
getTreasure: function() {
return this._currencyList[a.ITEM_IDS.treasure] || 0;
},
getLaba: function() {
return this._currencyList[a.ITEM_IDS.laba] || 0;
},
getCard: function(e) {
return this._currencyList[e] || 0;
},
getWarhead: function(e) {
return this._currencyList[e] || 0;
}
});
cc._RF.pop();
}, {
CurrencyConst: "CurrencyConst",
ItemConst: "ItemConst"
} ],
DataHelper: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "5141dBpDd1D4JT8ELEiKYWt", "DataHelper");
var s = e("UserUtils"), n = e("JsonUtils"), o = e("BaseHelper");
cc.Class({
extends: o,
ctor: function() {},
init: function(e) {
if (e) {
this.m_rootKeyStr = e;
this._initData(e);
} else logger.error("key === null");
},
onExit: function() {
this._saveData();
},
isInit: function() {
return !!this.m_rootKeyStr;
},
_initData: function(e) {
var t = s.getVal(e);
this.m_Data = t ? n.json2Data(t) : {
original: {},
secret: {}
};
},
_saveData: function() {
if (!GameManager.isStopSaveData()) {
var e = n.data2Json(this.m_Data);
s.setVal(this.m_rootKeyStr, e);
}
},
getValue: function(e, t) {
this.m_Data || logger.error("this.m_Data === null , key = ", e, ",this.m_rootKeyStr = ", this.m_rootKeyStr);
if (TypeUtils.isRealNull(this.m_Data.original[e])) {
if (void 0 === t) {
logger.warn("DataHelper.getValue key = ", e, ",defaultVal = ", t, "默认设置成数组");
this.m_Data.original[e] = [];
} else this.m_Data.original[e] = t;
this._saveData();
return this.m_Data.original[e];
}
return this.m_Data.original[e];
},
setValue: function(e, t) {
this.m_Data.original[e] = t;
this._saveData();
},
encryption: function(e) {},
decryption: function(e) {}
});
cc._RF.pop();
}, {
BaseHelper: "BaseHelper",
JsonUtils: "JsonUtils",
UserUtils: "UserUtils"
} ],
DebugCtrl: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "9d4c1gEc1JADJl/dT/SqiKN", "DebugCtrl");
var s = e("HttpCtrl"), n = e("DebugModel");
cc.Class({
extends: s,
properties: {},
ctor: function() {
var e = new n();
this.init(e);
},
requireAfterEnterGame: function() {
this.addEvent(M_Debug.syncDebugInfo, this.syncDebugInfo.bind(this));
},
syncDebugInfo: function(e) {
this.model.syncDebugInfo(e.data);
},
enterDebugState: function(e) {
session.request(M_Debug.enterDebugState, e, this.handlerWithError(this, this.handlEnterDebug));
},
handlEnterDebug: function(e) {
this.model.enterDebug(e.data);
},
leaveDebugState: function() {
session.request(M_Debug.leaveDebugState, null, this.handlerWithError(this, this.handleLeaveDebug));
},
handleLeaveDebug: function(e) {
this.model.leaveDebug(e.data);
}
});
cc._RF.pop();
}, {
DebugModel: "DebugModel",
HttpCtrl: "HttpCtrl"
} ],
DebugModel: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "c3089z4S0lAaIGVzprYf9Nn", "DebugModel");
cc.Class({
extends: ModelBase,
properties: {
EVENT_ENTER_DEBUG_STATE: "EVENT_ENTER_DEBUG_STATE",
EVENT_LEAVE_DEBUG_STATE: "EVENT_LEAVE_DEBUG_STATE",
EVENT_SYNC_DEBUG_INFO: "EVENT_SYNC_DEBUG_INFO"
},
ctor: function() {
this.init();
},
syncDebugInfo: function(e) {
this.dispatchEvent(this.EVENT_SYNC_DEBUG_INFO, e);
},
enterDebug: function(e) {
this.dispatchEvent(this.EVENT_ENTER_DEBUG_STATE, e);
},
leaveDebug: function(e) {
this.dispatchEvent(this.EVENT_LEAVE_DEBUG_STATE, e);
}
});
cc._RF.pop();
}, {} ],
DicUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "f0787phGc5BKKisuNhIkRKu", "DicUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
function s(e) {
"@babel/helpers - typeof";
return (s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
return typeof e;
} : function(e) {
return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
})(e);
}
var n = {
has: function(e, t) {
return !!e && e.hasOwnProperty(t);
},
merge: function(e, t) {
for (var i in t) e[i] = t[i];
return e;
},
find: function(e, t) {
for (var i in e) {
var s = e[i];
if (t(s)) return s;
}
},
filter: function(e, t) {
var i = [];
for (var s in e) {
var n = e[s];
t(n, s) && i.push(n);
}
return i;
},
forEach: function(e, t) {
for (var i in e) {
t(e[i], i);
}
return [];
},
copy: function(e) {
var t = {};
TypeUtils.isArray(e) && (t = []);
for (var i in e) TypeUtils.isArray(e[i]) ? t[i] = ArrayUtils.clone(e[i]) : t[i] = "object" === s(e[i]) ? this.copy(e[i]) : e[i];
return t;
},
deepClone: function(e) {
var t;
if (TypeUtils.isObj(e)) {
t = new e.constructor();
for (var i in e) t[i] = this.deepClone(e[i]);
} else if (TypeUtils.isArray(e)) {
t = [];
for (var s = 0; s < e.length; s++) t.push(this.deepClone(e[s]));
} else t = e;
return t;
},
rand: function(e, t) {
e = e || 0;
t = t || 0;
var i = Math.max(e, t) + 1, s = Math.min(e, t), n = i - s;
n = Math.random() * n;
return s + (n = Math.floor(n));
},
deg: function(e) {
return e / Math.PI * 180;
},
rad: function(e) {
return e / 180 * Math.PI;
},
deleteVal: function(e, t) {
delete e[t];
},
len: function(e) {
var t = 0;
for (var i in e) t++;
return t;
}
}, o = n;
i.default = o;
t.exports = i.default;
cc._RF.pop();
}, {} ],
DragonBoneUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "fc6b0hr2GdMSaMO2pyerAbu", "DragonBoneUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
createDragon: function(e, t, i) {
var s = new cc.Node(""), n = s.addComponent(dragonBones.ArmatureDisplay);
this.initDragonCom(s, n, e, t, i);
return s;
},
addDragonComByNode: function(e, t, i, s) {
if (e) {
if (e.isValid) {
var n = e.getComponent(dragonBones.ArmatureDisplay);
n || (n = e.addComponent(dragonBones.ArmatureDisplay));
this.initDragonCom(e, n, t, i, s);
return e;
}
} else logger.warn("node == null");
},
initDragonCom: function(e, t, i, s, n) {
LoadUtils.loadResDir(i, function(i, o) {
if (i) logger.error("加载龙骨失败"); else if (e.isValid) {
for (var a = 0; a < o.length; a++) {
o[a] instanceof dragonBones.DragonBonesAsset && (t.dragonAsset = o[a]);
o[a] instanceof dragonBones.DragonBonesAtlasAsset && (t.dragonAtlasAsset = o[a]);
}
t.armatureName = "armatureName";
s && t.playAnimation(s, 0);
n && n(t, e);
}
});
},
playAnimation: function(e, t, i) {
e ? e.playAnimation(t, i) : logger.error("dragonBone === null");
},
playAnimationByNode: function(e, t, i) {
var s = e.getComponent(dragonBones.ArmatureDisplay);
s ? this.playAnimation(s, t, i) : logger.warn("comBone == null");
},
playAnimationArrayByNode: function(e, t) {
var i = e.getComponent(dragonBones.ArmatureDisplay), s = 0, n = function() {
++s < t.length && this.playAnimation(i, t[s].name, t[s].time);
};
i.addEventListener(dragonBones.EventObject.COMPLETE, n, i);
i.addEventListener(dragonBones.EventObject.LOOP_COMPLETE, n, i);
this.playAnimation(i, t[s], t[s].time);
}
}, n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
EnumManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "6e295Fl44RLyK6pXdqs0/ao", "EnumManager");
cc.Class({
ctor: function() {}
});
cc._RF.pop();
}, {} ],
EnvEnum: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "25f86s36IJBWKAihZAP9yRv", "EnvEnum");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
Channel: {}
};
s.Channel.YueRen = {
Pid: 300
};
s.Environmental = {
Debug: 1,
Tiyan: 2,
Release: 3
};
s.ShopType = {
Charge: 1,
SeeAdd: 2
};
var n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
Errorcode: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "d824fX4lJpM96JvsBNcMhHn", "Errorcode");
window.errors = {};
window.errmsg = function(e) {
return null == e || void 0 == e ? "null" : errors[e] || e;
};
var s = function(e) {
console.assert(null == errors[e.code], "had the same error code[" + e.code.toString(16) + "], msg[" + e.message + "]");
errors[e.code] = e.message;
return e.code;
};
window.SystemError = {
success: s({
code: 0,
message: "成功"
}),
forward: s({
code: 1,
message: "重定向"
}),
unknown: s({
code: 2,
message: "未知错误"
}),
timeout: s({
code: 3,
message: "请求超时"
}),
serialize: s({
code: 4,
message: "序列化错误"
}),
argument: s({
code: 5,
message: "参数错误"
}),
notImplement: s({
code: 6,
message: "协议未实现"
}),
illegalOperation: s({
code: 7,
message: "非法操作"
}),
db: s({
code: 8,
message: "数据库操作失败"
}),
messageTooLong: s({
code: 9,
message: "消息包太长"
}),
protoNotExisits: s({
code: 10,
message: "不存在此协议"
}),
notLogin: s({
code: 11,
message: "未登录"
}),
serviceIsStoped: s({
code: 12,
message: "服务故障"
}),
busy: s({
code: 13,
message: "服务忙"
}),
logined: s({
code: 14,
message: "已登录"
}),
network: s({
code: 15,
message: "网络异常"
}),
ServerMaintenance: s({
code: 16,
message: "服务器维护"
}),
config: s({
code: 17,
message: "配置错误"
}),
roleIsSeal: s({
code: 18,
message: "您的账号已被封,请与客服联系"
}),
loginExpetion: s({
code: 19,
message: "账号登录受限"
}),
RequestTooFast: s({
code: 20,
message: "请求太快，请稍后再试"
}),
createRoleLimit: s({
code: 21,
message: "账号注册数量已达上限"
}),
roleOffline: s({
code: 22,
message: "玩家离线"
}),
NetworkDelay: s({
code: 23,
message: "网络卡了一下，请重试"
})
};
window.GameError = {
resourceNotEnough: s({
code: 161,
message: "资源不足"
}),
goldNotEnough: s({
code: 162,
message: "金币不足"
}),
treasureNotEnough: s({
code: 163,
message: "金券不足"
}),
luckyBagNotEnough: s({
code: 164,
message: "福袋不足"
}),
bagNotEnough: s({
code: 165,
message: "背包空间不够"
}),
openHoleResLimit: s({
code: 166,
message: "打孔材料不足"
}),
petGemNotEnough: s({
code: 167,
message: "宠物晶石不够"
}),
starCoreNotEnough: s({
code: 168,
message: "星核不够"
}),
petCoinNotEnough: s({
code: 169,
message: "宠物币不够"
}),
upmaterialNotEnough: s({
code: 170,
message: "强化材料不够"
}),
resourceNotExist: s({
code: 171,
message: "资源不存在"
}),
unionResNotEnough: s({
code: 172,
message: "公会资源不够"
}),
goodsNotEnough: s({
code: 173,
message: "道具数量不足"
}),
goodsNotExist: s({
code: 174,
message: "道具不存在"
}),
roleLevelNotEnough: s({
code: 175,
message: "角色等级不足"
}),
fightPointNotEnough: s({
code: 176,
message: "战力不足"
}),
pieceNotEnough: s({
code: 177,
message: "碎片不足"
}),
ticketNotEnough: s({
code: 178,
message: "话费券不足"
}),
diamondNotEnough: s({
code: 179,
message: "金币不足"
}),
notFindPlayer: s({
code: 180,
message: "房间异常，请重试"
})
};
window.AuthError = {
tokenIsInvalid: s({
code: 257,
message: "token不合法"
}),
tokenIsTimeout: s({
code: 258,
message: "token已经过期"
}),
nicknameIsInvalid: s({
code: 259,
message: "昵称含有非法字符"
}),
nicknameIsExists: s({
code: 260,
message: "昵称已经存在"
}),
hasRole: s({
code: 261,
message: "该账户已经存在角色"
}),
banAccount: s({
code: 262,
message: "该账号已被暂停服务"
}),
imeiIsInvalid: s({
code: 263,
message: "异常的设备号"
}),
notFindRole: s({
code: 264,
message: "找不到玩家"
})
};
window.RoleError = {
invalidRoleInfo: s({
code: 513,
message: "账号异常，请联系客服"
}),
cantChangName: s({
code: 529,
message: "你已经创建过昵称了"
}),
freeGoldNumMax: s({
code: 530,
message: "今天领取上限"
}),
freeGoldZero: s({
code: 531,
message: "金币数量超标"
}),
freeGoldTimeLeft: s({
code: 532,
message: "未到领取时间"
}),
mobileNotLock: s({
code: 533,
message: "请先绑定手机号码"
}),
noGoldEnergy: s({
code: 534,
message: "未获得黄金炮"
}),
goldEnergyTooLow: s({
code: 535,
message: "能量不足，无法兑换"
}),
noChangeBag: s({
code: 536,
message: "请先换包再领取"
}),
sendCodeTooFrequently: s({
code: 537,
message: "获取验证码过于频繁"
}),
forbidLogin: s({
code: 538,
message: "您的账号存在异常，请联系客服"
}),
invalidAvatarBox: s({
code: 539,
message: "异常的头像框"
}),
AvatarBoxLevelNotEnough: s({
code: 540,
message: "玩家等级不足"
}),
AvatarBoxVipLevelNotEnough: s({
code: 541,
message: "vip等级不足"
}),
GunLevelNotEnough: s({
code: 542,
message: "炮倍等级不足"
}),
GunLevelAwardRepeat: s({
code: 543,
message: "炮倍奖励已经领取"
}),
AwardRepeat: s({
code: 545,
message: "奖励已经领取"
}),
notBindWechat: s({
code: 546,
message: "没有绑定微信"
}),
notCertification: s({
code: 547,
message: "没有实名认证"
}),
signatureIsInvalid: s({
code: 548,
message: "签名含有非法字符"
}),
secondPwdNotSetting: s({
code: 549,
message: "请先设置二级密码"
}),
secondPwdError: s({
code: 550,
message: "密码错误"
})
};
window.CatchFishError = {
noHaveGunType: s({
code: 769,
message: "你还没有该炮塔类型"
}),
passwordWrong: s({
code: 770,
message: "密码错误"
}),
gunLevelTooLow: s({
code: 771,
message: "炮倍等级不够"
}),
roomNotFound: s({
code: 772,
message: "房间不存在"
}),
fireCding: s({
code: 773,
message: "发炮太频繁"
}),
roomIsFull: s({
code: 774,
message: "房间已满"
}),
lessThenMinGunLevel: s({
code: 775,
message: "不能低于房间最低炮倍"
}),
joined: s({
code: 776,
message: "你已经报名了当前竞技比赛"
}),
notEnoughMoney: s({
code: 777,
message: "您不满足参赛条件"
}),
bulletNotEnough: s({
code: 778,
message: "子弹不足"
}),
notStart: s({
code: 779,
message: "竞技比赛还未开始,请等待其他玩家"
}),
isInArena: s({
code: 780,
message: "已经在竞技比赛中"
}),
arenaIsOver: s({
code: 781,
message: "竞技比赛已经结束"
}),
gunLevelUnlock: s({
code: 783,
message: "炮倍未解锁"
}),
energyNotFull: s({
code: 784,
message: "能量还未满"
}),
invalidSliceRate: s({
code: 785,
message: "别着急慢慢来",
describe: "异常的切鱼频率"
}),
invalidGunLevel: s({
code: 786,
message: "炮倍等级异常"
}),
notOpen: s({
code: 787,
message: "房间未开启"
}),
canNotEnter: s({
code: 788,
message: "不满足进入条件"
}),
gunExpired: s({
code: 789,
message: "炮台已过期"
}),
invalidGun: s({
code: 790,
message: "异常的炮台"
}),
arenaFinished: s({
code: 791,
message: "比赛已经结束"
}),
invalidBullet: s({
code: 792,
message: "异常的子弹信息"
}),
invalidFishLevel: s({
code: 793,
message: "异常的捕鱼等级"
}),
repeatReceive: s({
code: 794,
message: "已经领取"
}),
goldFishNotEnough: s({
code: 795,
message: "黄金鱼数量不足"
}),
invalidGoldFish: s({
code: 796,
message: "异常的黄金鱼请求"
}),
AimNeedDiamondCard: s({
code: 797,
message: "购买钻石月卡可以使用瞄准"
}),
RoomDisableHaoJiao: s({
code: 798,
message: "该房间不能使用该技能"
}),
inTideDisableItem: s({
code: 799,
message: "鱼潮时间不能使用该技能"
}),
TooManyBullets: s({
code: 800,
message: "子弹太多了，慢一点"
}),
FreezeTime: s({
code: 801,
message: "冰冻期间不能使用技能"
}),
inTideDisableShenDeng: s({
code: 802,
message: "鱼潮时间不能使用该技能"
}),
TooManyFish: s({
code: 803,
message: "鱼儿已经挤不下了"
}),
invalidDantouTarget: s({
code: 804,
message: "异常的弹头目标"
}),
invalidDantouRoom: s({
code: 805,
message: "该房间不允许使用弹头"
}),
useDanTouNotFindFish: s({
code: 806,
message: "目标鱼消失"
}),
BossTaskInProgress: s({
code: 807,
message: "BOSS任务进行中"
}),
notHaveLongWangBox: s({
code: 808,
message: "未获得龙王宝箱"
}),
isMaxLongWangBox: s({
code: 809,
message: "已经是最高等级的宝箱了"
}),
notHaveJuShouDuiJue: s({
code: 810,
message: "未触发巨兽对决"
}),
isMaxJuShouDuiJue: s({
code: 811,
message: "已经是最高等级了"
}),
notPlayingCaiQuan: s({
code: 812,
message: "未触发猜拳"
}),
isMaxCaiQuan: s({
code: 813,
message: "已经是最高等级了"
}),
notPlayingZaJinDan: s({
code: 814,
message: "未触发砸金蛋"
}),
notFindHammer: s({
code: 815,
message: "没有对应的锤子"
}),
notPlayingSanGuo: s({
code: 816,
message: "未触发三国征战"
}),
hadSelectIndex: s({
code: 817,
message: "已经选择区域了"
}),
notPlayingPangXie: s({
code: 818,
message: "未触发宝藏螃蟹"
}),
roomTimeNotOpen: s({
code: 819,
message: "开放时间未到,请耐心等待"
}),
roomTimeHadClosed: s({
code: 820,
message: "房间已关闭,明天再来"
}),
notPlayingShanCai: s({
code: 821,
message: "未触发善财童子"
}),
invalidMultiple: s({
code: 822,
message: "无效倍数"
}),
notQiLinBaoDian: s({
code: 823,
message: "未触发麒麟爆点"
}),
invalidFishType: s({
code: 824,
message: "异常的鱼种类型"
}),
playPangXieMax: s({
code: 825,
message: "次数已用尽"
})
};
window.DiskError = {
canRoll: s({
code: 1025,
message: "不能参加转盘"
})
};
window.ChatError = {
contentIsInvalid: s({
code: 1537,
message: "聊天消息含有非法字符"
}),
speakTooOfen: s({
code: 1538,
message: "聊天消息发送过快"
}),
forbidSpeak: s({
code: 1539,
message: "已被禁言"
}),
targetOffline: s({
code: 1540,
message: "对方已下线"
}),
channelNotExist: s({
code: 1541,
message: "频道号不存在"
}),
msgTooLang: s({
code: 1542,
message: "聊天内容过长"
}),
notInRoom: s({
code: 1543,
message: "不在房间内"
})
};
window.BoxError = {
noOpenNum: s({
code: 1793,
message: "无开启次数"
})
};
window.FundError = {
RoundError: s({
code: 2305,
message: "期数不一致"
}),
VipError: s({
code: 2306,
message: "VIP等级太低或太高"
}),
JoinIsFull: s({
code: 2307,
message: "报名失败,人员已满"
}),
TypeError: s({
code: 2308,
message: "不是指定的抽奖类型,加入抽奖失败"
}),
notFindLuckyWheelVO: s({
code: 2309,
message: "查询不到该奖品信息"
}),
RoundNotOpen: s({
code: 2310,
message: "开奖时间小于当前时间,未达到开奖时间"
}),
CountError: s({
code: 2311,
message: "未达到人满要求,开奖时间"
}),
addOrderError: s({
code: 2312,
message: "添加抽奖订单失败"
}),
RoleIdError: s({
code: 2313,
message: "用户不存在"
}),
exIdError: s({
code: 2314,
message: "兑换ID不存在"
}),
inventoryShortage: s({
code: 2315,
message: "库存不足,不可以兑换"
}),
buyCount: s({
code: 2316,
message: "已达到可购买数量上限"
}),
limitError: s({
code: 2317,
message: "全服限量,你已兑换过,不能重复兑换"
}),
ExchangeError: s({
code: 2318,
message: "兑换失败"
}),
overBuyCount: s({
code: 2321,
message: "已超出可购买的数量"
})
};
window.MiscError = {
miscCodeEmpty: s({
code: 2561,
message: "礼包码不能为空"
}),
miscCodeNotExist: s({
code: 2562,
message: "请输入正确的兑换码"
}),
miscCodeHadGet: s({
code: 2563,
message: "兑换码已被使用"
}),
miscTypeNotExist: s({
code: 2564,
message: "此类型兑换码不存在"
}),
notInUseTime: s({
code: 2565,
message: "此兑换码不在使用期间内"
}),
useTheSameTypeMisccode: s({
code: 2566,
message: "你已经领取过该类型礼包"
}),
invalidMiscInfo: s({
code: 2567,
message: "异常的兑换信息"
}),
canNotReceive: s({
code: 2568,
message: "还不能领取奖励"
})
};
window.ActivityError = {
diskNoNum: s({
code: 2817,
message: "充值金额不足"
}),
canNotGet: s({
code: 2818,
message: "信息过期，请重新刷新界面"
}),
noRollNum: s({
code: 2819,
message: "转盘次数不够"
}),
diskNotOpen: s({
code: 2820,
message: "活动未开启"
}),
notOpen: s({
code: 2821,
message: "活动暂未开放"
}),
boxNotEnough: s({
code: 2822,
message: "宝箱个数不足"
}),
isReceived: s({
code: 2823,
message: "已经领取奖励"
}),
Time: s({
code: 2824,
message: "已经领取奖励"
}),
overTime: s({
code: 2825,
message: "活动已经结束"
}),
cannotGet: s({
code: 2826,
message: "不满足领取条件"
}),
yesterdayNotSign: s({
code: 2827,
message: "昨日未报名"
}),
todayHadReceived: s({
code: 2828,
message: "今日已打卡"
}),
receiveTimeNotYet: s({
code: 2829,
message: "未到今日打卡时间"
}),
overReceiveTime: s({
code: 2830,
message: "已过今日打卡时间"
}),
ActivityNotOpen: s({
code: 2831,
message: "活动未开启"
}),
treasureMapNotEnough: s({
code: 2832,
message: "藏宝图不足"
}),
piecesNumNotEnough: s({
code: 2833,
message: "藏宝图碎片不足"
})
};
window.ChargeError = {
shopIndexError: s({
code: 3073,
message: "充值物品不存在"
}),
repeatCharge: s({
code: 3074,
message: "重复的充值"
}),
overMaxRechargeNum: s({
code: 3084,
message: "超出今日最大充值额度"
})
};
window.MobileError = {
hadExist: s({
code: 3329,
message: "该号码已被绑定"
}),
httpError: s({
code: 3330,
message: "输入有误"
}),
notMatch: s({
code: 3331,
message: "验证码错误"
}),
setNewPwdErr: s({
code: 3332,
message: "绑定手机成功，修改密码失败"
})
};
window.RankError = {
hadGet: s({
code: 4353,
message: "已经领取奖励"
}),
canNotGet: s({
code: 4354,
message: "不能领取奖励"
})
};
window.MailError = {
invalidMail: s({
code: 4609,
message: "请求的邮件信息不存在"
}),
invalidAttach: s({
code: 4610,
message: "没有可以领取的附件"
}),
attachDelete: s({
code: 4611,
message: "存在附件没有领取不能删除"
})
};
window.OnlineError = {
cannotGet: s({
code: 4865,
message: "不满足领取条件"
}),
hasGot: s({
code: 4866,
message: "该奖励已经领取"
})
};
window.TaskError = {
canNotGet: s({
code: 5121,
message: "未达到领取条件"
}),
hadGet: s({
code: 5122,
message: "已经领取奖励"
}),
notFindTask: s({
code: 5123,
message: "没有找到任务"
}),
taskExpired: s({
code: 5124,
message: "任务已经过期，请刷新界面"
}),
repeatReceive: s({
code: 5125,
message: "已经领取"
}),
invalidVitalityId: s({
code: 5126,
message: "异常的活跃度奖励"
}),
notEnoughVitality: s({
code: 5127,
message: "活跃度不足"
})
};
window.PotError = {
timeError: s({
code: 5633,
message: "竞猜时间为21:30分至次日20:50分"
}),
codeError: s({
code: 5634,
message: "竞猜号码格式错误"
})
};
window.SevenDayError = {
notOpen: s({
code: 5889,
message: "登录天数未满足"
}),
canNotGet: s({
code: 5890,
message: "不能领取"
})
};
window.SignInError = {
hadDrawToday: s({
code: 6145,
message: "今天已经抽奖"
}),
awardCanNotGet: s({
code: 6146,
message: "未达到领取天数"
}),
awardHadGet: s({
code: 6147,
message: "奖励已领取"
})
};
window.WishPoolError = {
overLeftNum: s({
code: 6401,
message: "剩余奖品不足10次"
})
};
window.TreasureBowlError = {
notLeftTimes: s({
code: 6913,
message: "没有剩余次数"
})
};
window.CouponError = {
notLeftTimes: s({
code: 7169,
message: "没有剩余次数"
}),
isOpen: s({
code: 7170,
message: "此卡已经刮开"
}),
cannotGet: s({
code: 7171,
message: "未达到领取条件"
}),
hadGot: s({
code: 7172,
message: "该奖励已经领取"
})
};
window.BlessError = {
luckyValueNotFull: s({
code: 7425,
message: "幸运值未满"
})
};
window.CrazyBoxError = {
notLeftTimes: s({
code: 7937,
message: "没有剩余次数"
}),
isOpen: s({
code: 7938,
message: "此宝箱已开启"
})
};
window.DailyChargeError = {
chargeDaysNotEnough: s({
code: 8193,
message: "充值天数不足"
})
};
window.InviteError = {
notInActivityTime: s({
code: 8449,
message: "活动时间内创建角色才可领取"
}),
inviteIdNotExist: s({
code: 8450,
message: "请输入正确的邀请人ID"
}),
hadGot: s({
code: 8451,
message: "该奖励已经领取"
}),
inviteNotEnough: s({
code: 8452,
message: "邀请人数不足"
}),
canNotGet: s({
code: 8453,
message: "无奖励可领取"
})
};
window.ScoreLotteryError = {
scoreNotEnough: s({
code: 8705,
message: "积分不足"
})
};
window.MoneyTreeError = {
leftNumNotEnough: s({
code: 8961,
message: "剩余奖品不足10份"
})
};
window.TreasurePalaceError = {
openTimesNotEnough: s({
code: 9217,
message: "开启次数不足"
})
};
window.EggError = {
notLeftTimes: s({
code: 9473,
message: "没有剩余次数"
}),
isOpen: s({
code: 9474,
message: "此金蛋已砸开"
})
};
window.GoldGunError = {
prizeNotEnough: s({
code: 9729,
message: "彩金不足"
})
};
window.QBSignError = {
notFindConfig: s({
code: 9985,
message: "找不到配置"
}),
canNotReceive: s({
code: 9986,
message: "领取条件不足"
})
};
window.MorrowGiftError = {
giftIsReceived: s({
code: 10241,
message: "已经领取过奖励了"
}),
invalidReceivedTime: s({
code: 10242,
message: "领取时间还未到"
})
};
window.VipError = {
levelNotEnough: s({
code: 10497,
message: "VIP等级不足"
}),
notFindVIPVO: s({
code: 10498,
message: "异常的 VIP 等级"
}),
canNotReceive: s({
code: 10499,
message: "领取条件不足"
}),
repeatReceive: s({
code: 10500,
message: "重复领取"
}),
turntableNotEnough: s({
code: 10501,
message: "转盘次数不足"
}),
invalidDailyAward: s({
code: 10502,
message: "不能领取每日奖励"
}),
lotteryNeedVip3: s({
code: 10503,
message: "V3即可开启抽奖~"
})
};
window.AchievementError = {
achievementIsLock: s({
code: 10753,
message: "成就未达成"
}),
isReceived: s({
code: 10754,
message: "奖励已经领取了"
}),
invalidScore: s({
code: 10755,
message: "异常的积分"
})
};
window.FruitError = {
notEnoughTimes: s({
code: 11009,
message: "次数不足"
})
};
window.PrizeClawError = {
notFindPrizeClawVO: s({
code: 11265,
message: "异常的娃娃信息"
})
};
window.FruitSlotsError = {
invalidWagerInfo: s({
code: 11521,
message: "异常的押注请求"
}),
invalidConfig: s({
code: 11522,
message: "配置出错"
}),
invalidCompare: s({
code: 11523,
message: "异常的比大小请求"
})
};
window.NiuniuError = {
invalidWagerInfo: s({
code: 11777,
message: "异常的押注请求"
}),
invalidWagerStatus: s({
code: 11778,
message: "请在下注时间下注"
}),
playerMaxBetNum: s({
code: 11779,
message: "超出个人最大投注"
}),
enterRoomFail: s({
code: 11780,
message: "进入房间失败"
}),
changeRoomFail: s({
code: 11781,
message: "切换房间失败"
}),
notFindMatchRoom: s({
code: 11782,
message: "没有参赛的房间"
}),
notAllowLeave: s({
code: 11783,
message: "不允许离场"
}),
notAllowDeal: s({
code: 11784,
message: "不符合上庄条件"
}),
repeatedDeal: s({
code: 11785,
message: "不要重复上庄"
}),
repeatedSitDown: s({
code: 11786,
message: "已经坐下"
}),
chairIdError: s({
code: 11787,
message: "座椅ID错误"
}),
hasPersonSit: s({
code: 11788,
message: "已经有人占座了"
}),
invalidStandup: s({
code: 11789,
message: "无效站起"
}),
notSitDown: s({
code: 11790,
message: "没有坐下"
}),
pleaseStandup: s({
code: 11792,
message: "请站起来"
}),
nextUnDeal: s({
code: 11793,
message: "下一轮下庄"
}),
dealCanNotSit: s({
code: 11794,
message: "庄家不能坐下"
}),
notAllowSit: s({
code: 11795,
message: "不符合坐下条件"
}),
roomMaxBetNum: s({
code: 11796,
message: "超出房间最大投注"
}),
depositError: s({
code: 11797,
message: "上庄金额错误"
}),
maxplayerCount: s({
code: 11798,
message: "房间人数已满"
}),
gameStatusError: s({
code: 11799,
message: "当前游戏状态非法请求"
}),
dailyWinError: s({
code: 11800,
message: "应文化部要求适度游戏有益身心健康，请明天再来吧！"
}),
fishLevelSmall: s({
code: 11801,
message: "捕鱼等级太低"
})
};
window.FishGiftError = {
invalidOpenInfo: s({
code: 12033,
message: "异常的礼包请求"
})
};
window.BagError = {
BagIsLock: s({
code: 12289,
message: "背包被锁定了"
}),
notEnoughItem: s({
code: 12290,
message: "物品不足"
}),
notFindItem: s({
code: 12291,
message: "找不到物品"
}),
canNotUse: s({
code: 12292,
message: "物品不能使用"
}),
itemIsNotGift: s({
code: 12293,
message: "该物品不能赠送"
}),
notFindReceiver: s({
code: 12294,
message: "接受者不存在"
}),
chargeNotEnough: s({
code: 12295,
message: "充值额度不够"
}),
inRoomCofferSave: s({
code: 12296,
message: "游戏房间内不允许存钱"
}),
invalidItemAmount: s({
code: 12297,
message: "异常的物品数量"
}),
giveNumExceedsLimit: s({
code: 12298,
message: "赠送失败，已达到今日赠送上限"
}),
receiveNumExceedsLimit: s({
code: 12299,
message: "失败，对方已达到今日接收上限"
}),
tooManyLimitItem: s({
code: 12300,
message: "失败，对方已经拥有太多该物品"
}),
giveNeedDiamondCard: s({
code: 12301,
message: "赠送需要月卡"
}),
receiverError: s({
code: 12302,
message: "不能赠送该玩家"
})
};
window.BrokeError = {
brokeMaxTimes: s({
code: 16385,
message: "今日破产补助已达上限"
}),
invalidBrokeInfo: s({
code: 16386,
message: "异常的破产补助"
}),
hadReceive: s({
code: 16387,
message: "已经领取"
})
};
window.BackGroundError = {
noRoleInComeInfo: s({
code: 20481,
message: "个人收益信息不存在"
}),
noSysInComeInfo: s({
code: 20482,
message: "系统收益信息不存在"
})
};
window.GoldToadError = {
invalidFeed: s({
code: 20737,
message: "异常的喂食请求"
}),
invalidUpgrade: s({
code: 20738,
message: "异常的升级请求"
}),
invalidGetAward: s({
code: 20739,
message: "异常的领取请求"
}),
notEnoughFood: s({
code: 20740,
message: "没有足够的食物"
})
};
window.AlmsError = {
invalidReceive: s({
code: 20993,
message: "异常的领取请求"
})
};
window.DoudizhuError = {
invalidOperation: s({
code: 24833,
message: "当前游戏状态非法请求"
}),
invalidCallScore: s({
code: 24834,
message: "异常的叫分请求"
}),
invalidReady: s({
code: 24835,
message: "异常的准备请求"
}),
notTurnYou: s({
code: 24836,
message: "没有轮到你"
}),
invalidScore: s({
code: 24837,
message: "叫分错误"
}),
cardTypeError: s({
code: 24838,
message: "牌型错误"
}),
cardValueError: s({
code: 24839,
message: "出牌不符合规则，请重新选择"
}),
passCardError: s({
code: 24840,
message: "过牌错误"
}),
playingGame: s({
code: 24841,
message: "游戏中不能退出"
}),
gameStartError: s({
code: 24842,
message: "游戏已开始不能退出"
}),
gotoHightType: s({
code: 24843,
message: "请前往更高级场"
}),
playTypeError: s({
code: 24844,
message: "玩法错误"
}),
costItemTypeNotEnough: s({
code: 24845,
message: "货币不足"
}),
hadTrusteeship: s({
code: 24848,
message: "已经是托管状态了"
}),
invalidTrusteeship: s({
code: 24849,
message: "取消托管协议非法"
}),
invalidDouble: s({
code: 24850,
message: "无效加倍请求"
})
};
window.RobotCenterError = {
InvalidCreateRobot_UID: s({
code: 25089,
message: "创建机器人，UID错误"
}),
InvalidCreateRobot_Nickname: s({
code: 25090,
message: "创建机器人，Nickname错误"
}),
InvalidLoginRobot_UID: s({
code: 25091,
message: "登陆机器人，UID错误"
})
};
window.ClubError = {
clubNotExist: s({
code: 25345,
message: "俱乐部不存在"
}),
notJoinThisClub: s({
code: 25346,
message: "没有加入这个俱乐部"
}),
hasJoinThisClub: s({
code: 25347,
message: "已加入该俱乐部"
}),
notClubCreator: s({
code: 25348,
message: "不是创始人"
}),
clubNameLenError: s({
code: 25349,
message: "俱乐部名字太长"
}),
introductionError: s({
code: 25350,
message: "俱乐部简介太长"
}),
sameNameError: s({
code: 25351,
message: "俱乐部名字相同"
}),
createTooMuch: s({
code: 25352,
message: "创建俱乐部超过上限了"
}),
unionIsFull: s({
code: 25353,
message: "俱乐部满员了"
}),
joinTooMuch: s({
code: 25354,
message: "加入俱乐部太多了"
}),
creatornotExit: s({
code: 25355,
message: "创始人不能退出"
}),
notApplicant: s({
code: 25356,
message: "没有申请"
}),
repeatApplicant: s({
code: 25357,
message: "重复申请"
}),
maxClubLevel: s({
code: 25358,
message: "俱乐部等级已经最大了"
}),
checkIdError: s({
code: 25360,
message: "审核ID错误"
}),
sameCheckId: s({
code: 25361,
message: "审核ID相同"
}),
contributionError: s({
code: 25362,
message: "贡献值错误"
}),
notMemberJoin: s({
code: 25363,
message: "没有成员申请加入"
}),
fundNotEnough: s({
code: 25364,
message: "基金不足"
}),
gamesCountError: s({
code: 25365,
message: "游戏局数错误"
}),
createClubGameParamErr: s({
code: 25366,
message: "创建俱乐部游戏参数错误"
}),
haveGame: s({
code: 25367,
message: "俱乐部游戏还未解散 不能退出"
}),
clubNameIsInvalid: s({
code: 25368,
message: "俱乐部名字含有非法字符"
}),
introductionIsInvalid: s({
code: 25369,
message: "俱乐部简介含有非法字符"
})
};
window.GameCenterError = {
roomNotFound: s({
code: 25601,
message: "房间不存在"
}),
inTheOtherRooms: s({
code: 25602,
message: "在其它房间内，请先退出房间"
}),
invalidEnterInfo: s({
code: 25603,
message: "错误的进入房间方式"
}),
repeatMatch: s({
code: 25604,
message: "重复匹配"
}),
matchParamErr: s({
code: 25605,
message: "匹配参数错误"
}),
doingPrix: s({
code: 25606,
message: "正在进行大奖赛 不能进行其他匹配"
})
};
window.ShopError = {
goodsNotFound: s({
code: 25857,
message: "商品不存在"
}),
goodsCountError: s({
code: 25858,
message: "商品数量错误"
}),
goodsCoolDown: s({
code: 25859,
message: "商品冷却中"
}),
buyLastOne: s({
code: 25860,
message: "请购买上一个"
}),
EndOfSaleTime: s({
code: 25861,
message: "已经错过了购买时间"
}),
BuyHaoJiaoDiamondLimit: s({
code: 25862,
message: "钻石数量≥1000才可购买号角喔"
}),
shipLevelError: s({
code: 25863,
message: "该商品无法购买"
})
};
window.prixError = {
prixNotFound: s({
code: 26113,
message: "大奖赛不存在"
}),
hasSignUp: s({
code: 26114,
message: "已经签名了"
})
};
window.snatchTreasureError = {
TreasureNotFound: s({
code: 26369,
message: "夺宝赛不存在"
}),
hasMatch: s({
code: 26370,
message: "已经在匹配了"
}),
snatchObjNotFound: s({
code: 26371,
message: "夺宝赛对象不存在"
}),
snatchCountNotEnough: s({
code: 26372,
message: "夺宝次数不足"
}),
doNotMatch: s({
code: 26373,
message: "没有进行匹配"
}),
buyCountNotEnough: s({
code: 26374,
message: "购买次数已用完"
}),
getTreasureCodeNumErr: s({
code: 26375,
message: "获取夺宝码数量错误"
}),
serverFuncError: s({
code: 26376,
message: "返回值错误"
})
};
window.CountingError = {
NotFound: s({
code: 26625,
message: "次数不存在"
}),
notEnough: s({
code: 26626,
message: "次数不足"
}),
canNotExchange: s({
code: 26627,
message: "不允许兑换"
})
};
window.SevenDayTaskError = {
canNotGet: s({
code: 26881,
message: "未达到领取条件"
}),
hadGet: s({
code: 26882,
message: "已经领取奖励"
}),
notFindTask: s({
code: 26883,
message: "没有找到任务"
})
};
window.RedEnvelopeError = {
ddzFightCountNotEnough: s({
code: 28673,
message: "参与3局斗地主可提现"
}),
RedEnvelopeNotEnough: s({
code: 28674,
message: "转盘次数不足"
}),
serverFuncError: s({
code: 28675,
message: "后台返回值错误"
}),
analyzeResultError: s({
code: 28676,
message: "解析后台返回值错误"
}),
withdrawError: s({
code: 28677,
message: "提现失败"
}),
roleIdIsNil: s({
code: 28678,
message: "roleId为null"
}),
amountIsNil: s({
code: 28679,
message: "amount为null"
}),
ipNotWhite: s({
code: 28680,
message: "提现IP不在IP白名单内"
}),
amountIsError: s({
code: 28681,
message: "提现额度不合法"
}),
amountCountErr: s({
code: 28682,
message: "当前该提现额度次数已达到上限"
}),
totalAmountErr: s({
code: 28683,
message: "当前提现总额度已达到当天提现总额度上限"
}),
WechatError: s({
code: 28684,
message: "微信提现服务器未知错误"
}),
notFindDiskTypeId: s({
code: 28685,
message: "道具没有关联转盘ID"
}),
notEnoughVipLevel: s({
code: 28686,
message: "VIP等级不够"
})
};
window.ShuiHuError = {
invalidBet: s({
code: 28929,
message: "异常的下注信息"
})
};
window.UnionError = {
unionNotExist: s({
code: 29185,
message: "公会不存在"
}),
notJoinThisUnion: s({
code: 29186,
message: "没有加入这个公会"
}),
hasJoinThisUnion: s({
code: 29187,
message: "已加入该公会"
}),
notUnionCreator: s({
code: 29188,
message: "不是创始人"
}),
unionNameLenError: s({
code: 29189,
message: "公会名字太长"
}),
introductionError: s({
code: 29190,
message: "公会简介太长"
}),
sameNameError: s({
code: 29191,
message: "公会名字相同"
}),
hadJoin: s({
code: 29192,
message: "已经加入其它公会了"
}),
unionIsFull: s({
code: 29193,
message: "公会满员了"
}),
joinTooMuch: s({
code: 29194,
message: "加入公会太多了"
}),
creatornotExit: s({
code: 29195,
message: "创始人不能退出"
}),
notApplicant: s({
code: 29196,
message: "没有申请"
}),
repeatApplicant: s({
code: 29197,
message: "重复申请"
}),
maxUnionLevel: s({
code: 29198,
message: "公会等级已经最大了"
}),
checkPowerErr: s({
code: 29200,
message: "没有审核权限"
}),
sameCheckId: s({
code: 29201,
message: "审核ID相同"
}),
contributionError: s({
code: 29202,
message: "贡献值错误"
}),
notMemberJoin: s({
code: 29203,
message: "没有成员申请加入"
}),
fundNotEnough: s({
code: 29204,
message: "基金不足"
}),
gamesCountError: s({
code: 29205,
message: "游戏局数错误"
}),
createUnionGameParamErr: s({
code: 29206,
message: "创建公会游戏参数错误"
}),
haveGame: s({
code: 29207,
message: "公会游戏还未解散 不能退出"
}),
unionNameIsInvalid: s({
code: 29208,
message: "公会名字含有非法字符"
}),
introductionIsInvalid: s({
code: 29209,
message: "公会简介含有非法字符"
}),
expNotEnough: s({
code: 29210,
message: "公会经验不足"
}),
notEnoughVipLevel: s({
code: 29211,
message: "VIP等级不够"
}),
unionlevelNotEnough: s({
code: 29212,
message: "公会等级不够"
}),
joinUnionCDTime: s({
code: 29213,
message: "明天才能加入公会哟"
}),
unionNameLenShort: s({
code: 29214,
message: "公会名字太短"
}),
fuhuizhangNumErr: s({
code: 29216,
message: "副会长人数已到上限"
}),
applyCDTime: s({
code: 29217,
message: "1小时内只能申请1个公会喔~"
}),
applySameUnion: s({
code: 29218,
message: "周一4点后可再次申请此公会~"
}),
warehouseGoodsError: s({
code: 29219,
message: "存入工会数量错误"
}),
recviveCodeInvalid: s({
code: 29220,
message: "验证码格式不正确"
}),
warehouseHadLock: s({
code: 29221,
message: "取出码错误已达上限,已停止使用该功能"
}),
recviveCodeError: s({
code: 29222,
message: "取出码错误"
}),
warehouseItemNotExist: s({
code: 29223,
message: "仓库物品不存在"
}),
goodsAmountError: s({
code: 29224,
message: "仓库物品数量不足"
}),
recviverError: s({
code: 29225,
message: "指定取出人不是你"
}),
warehouseItemConfErr: s({
code: 29226,
message: "公会仓库道具错误"
}),
putNumExceedsLimit: s({
code: 29227,
message: "放入仓库道具超出限制"
}),
takeNumExceedsLimit: s({
code: 29228,
message: "仓库道具取出超出限制"
}),
recviverNotSelf: s({
code: 29229,
message: "指定取出人不能为自己"
}),
recviverObjTakeErr: s({
code: 29230,
message: "超过该玩家取出上限"
}),
putinNeedDiamondCard: s({
code: 29232,
message: "放入仓库需要月卡"
})
};
window.ProgressError = {
NotFound: s({
code: 29441,
message: "进度不存在"
}),
notEnough: s({
code: 29442,
message: "进度不足"
})
};
window.ExchangeCodeError = {
roleNotFind: s({
code: 29696,
message: "用户不存在"
}),
notExchangeCode: s({
code: 29697,
message: "该兑换码不存在"
}),
platformIdError: s({
code: 29698,
message: "当前用户所属平台不能兑换"
}),
exchangeTimeError: s({
code: 29699,
message: "未到达兑换开始时间"
}),
codeOverTime: s({
code: 29700,
message: "兑换码已过期"
}),
forbidExchange: s({
code: 29701,
message: "该兑换码已禁用"
}),
codeUserOver: s({
code: 29702,
message: "该兑换码兑换次数已用完"
}),
userHadExchange: s({
code: 29703,
message: "你已使用过该兑换码"
}),
userSameExchange: s({
code: 29704,
message: "使用失败，已用过同类礼包"
})
};
window.GemstoneError = {
levelNotEnough: s({
code: 29952,
message: "关卡等级不足"
})
};
cc._RF.pop();
}, {} ],
EventManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "57d69nrdZdH8a2lRVf7Sniv", "EventManager");
window.EventManager = {
_eventList: [],
on: function(e, t, i) {
if ("string" == typeof e && "function" == typeof t) {
"undefined" == typeof this._eventList[e] && (this._eventList[e] = []);
this._eventList[e].push({
callback: t,
target: i
});
} else cc.error("EventManager.js: NOTIFICATION method 'on' param error! type:", e);
},
once: function(e, t, i) {
if ("string" == typeof e && "function" == typeof t) {
"undefined" == typeof this._eventList[e] && (this._eventList[e] = []);
this._eventList[e].push({
callback: t,
target: i,
once: !0
});
} else cc.error("EventManager.js: NOTIFICATION method 'on' param error! type:", e);
},
emit: function(e) {
if ("string" == typeof e) {
var t = this._eventList[e];
if ("undefined" != typeof t) {
for (var i = arguments.length, s = new Array(i > 1 ? i - 1 : 0), n = 1; n < i; n++) s[n - 1] = arguments[n];
for (var o = 0; o < t.length; o++) {
var a = t[o];
if (a) {
var r;
(r = a.callback).call.apply(r, [ a.target ].concat(s));
a.once && this.off(e, a.callback, a.target);
}
}
}
} else cc.error("EventManager.js: NOTIFICATION method 'emit' param error! type:", e);
},
off: function(e, t, i) {
if ("string" == typeof e && "function" == typeof t) {
var s = this._eventList[e];
if ("undefined" != typeof s) for (var n = 0; n < s.length; n++) {
var o = s[n];
if (o && o.callback === t && o.target === i) {
s.splice(n, 1);
break;
}
}
} else cc.error("EventManager.js: NOTIFICATION method 'off' param error! type:", e);
},
offByType: function(e) {
if ("string" == typeof e) {
for (;this._eventList[e].length > 1; ) this._eventList[e].shift();
this._eventList[e] = void 0;
} else cc.error("EventManager.js: NOTIFICATION method 'offByType' param error! type:", e);
},
offByTarget: function(e) {
if ("undefined" != typeof e) {
for (var t in this._eventList) for (var i = 0; i < this._eventList[t].length; i++) if (this._eventList[t][i].target === e) {
this._eventList[t].splice(i, 1);
cc.log("off " + t);
break;
}
} else cc.error("EventManager.js: NOTIFICATION method 'offByTarget' param error! type:", type);
}
};
cc._RF.pop();
}, {} ],
FishConst: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "ad523RJSRZOI4qVhYVCkJZV", "FishConst");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s, n;
function o(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}
var a = {}, r = {
ActivityIds: {}
};
a.BtnType = {
Com: 1,
Act: 2
};
a.FishHallBtns = {
Vip: {
type: a.BtnType.Com,
name: "Vip",
statue: !0,
isBgSpine: !0,
btnPath: "fishHall/btn_menu_3_2",
viewName: "VIP_VIEW",
reminds: [ AppEvent.RedPointFishVipGift ]
},
MoonCard: {
type: a.BtnType.Com,
name: "MoonCard",
statue: !0,
isBgSpine: !0,
systemId: 20017,
btnPath: "fishHall/btn_menu_3_3",
viewName: "CARD_GIFT_VIEW"
},
Shop: {
type: a.BtnType.Com,
name: "Shop",
statue: !0,
isBgSpine: !0,
systemId: 10005,
btnPath: "fishHall/btn_menu_3_1",
funcName: "onClickFishShop",
viewName: "SHOP_VIEW"
},
Welfare: {
type: a.BtnType.Com,
name: "Welfare",
statue: !0,
systemId: 10007,
viewName: "WELFARE_VIEW",
btnPath: "fishHall/newhall_icon_22",
reminds: [ AppEvent.RedPointFishSignUp, AppEvent.RedPointFishDailyTask, AppEvent.RedPointOnlineAward, AppEvent.RedPointOnlineSig ]
},
SignUp: {
type: a.BtnType.Com,
name: "SignUp",
statue: !0,
systemId: 20019,
btnPath: "fishHall/newhall_icon_25",
viewName: "FISH_SIGN_UP_VIEW",
reminds: [ AppEvent.RedPointFishSignUp ]
},
Task: {
type: a.BtnType.Com,
name: "Task",
statue: !0,
systemId: 20018,
btnPath: "fishHall/newhall_icon_24",
viewName: "FISH_TASK_VIEW",
reminds: [ AppEvent.RedPointFishDailyTask ]
},
Bind: {
type: a.BtnType.Com,
name: "Bind",
statue: !0,
systemId: 20026,
btnPath: "fishHall/btn_menu_3_8",
funcName: "onClickBindAward",
viewName: "FISH_BIND_AWARD_VIEW",
reminds: [ AppEvent.RedPointFishBindInfo ]
},
WXAccount: {
type: a.BtnType.Com,
name: "WXAccount",
statue: !0,
systemId: 20021,
btnPath: "fishHall/btn_menu_3_10",
viewName: "FISH_WECHAT_ACOUNT_VIEW"
},
QMBet: {
type: a.BtnType.Act,
actId: r.ActivityIds.QMBet,
name: "QMBet",
statue: !0,
btnPath: "fishHall/newhall_icon_20",
viewName: "FISH_BET_CENTER",
reminds: [ AppEvent.RedPointViewQMBet ]
},
Carnival: {
type: a.BtnType.Com,
name: "Carnival",
statue: !0,
btnPath: "fishHall/newhall_icon_19",
viewName: "CHARGE_CARNIVAL_VIEW",
open: "isCarnivalOpen"
},
GunForgeBattle: {
type: a.BtnType.Act,
actId: r.ActivityIds.GunForgeBattle,
name: "GunForgeBattle",
statue: !0,
btnPath: "fishHall/newhall_icon_18",
viewName: "GUN_FORGE_BATTLE_VIEW",
reminds: [ AppEvent.RedPointGunForgeBattle ],
tips: "活动开启中！"
},
Warhead: {
type: a.BtnType.Act,
actId: r.ActivityIds.WarheadRank,
name: "Warhead",
statue: !0,
btnPath: "fishHall/newhall_icon_21",
viewName: "WARHEAD_RANK_VIEW",
reminds: [ AppEvent.RedPointViewWarheadRank ]
},
Activity: {
type: a.BtnType.Com,
name: "Activity",
statue: !0,
btnPath: "fishHall/newhall_icon_36",
funcName: "onClickActivity",
open: "isChargeActOpen",
viewName: "FISH_ACTIVITY_VIEW",
reminds: [ AppEvent.RedPointActivities ]
},
Ranking: {
type: a.BtnType.Com,
name: "Ranking",
statue: !0,
systemId: 10009,
funcName: "onClickRank",
btnPath: "fishHall/btn_menu_2_3",
viewName: "RANK_VIEW"
},
GunForge: {
type: a.BtnType.Com,
name: "GunForge",
statue: !0,
systemId: 10010,
open: "isGunForgeOpen",
btnPath: "fishHall/btn_menu_2_5",
funcName: "onClickGunForge"
},
ClubDepot: {
type: a.BtnType.Com,
name: "ClubDepot",
statue: !0,
btnPath: "fishHall/hall_icon_y_10",
funcName: "onClickClubDepot",
viewName: "FISH_CLUB_DEPOT",
reminds: [ AppEvent.RedPointClubDepot ]
},
Bag: {
type: a.BtnType.Com,
name: "Bag",
statue: !0,
systemId: 10011,
btnPath: "fishHall/btn_menu_2_2",
viewName: "BAG_VIEW"
},
AcceptAwards: {
type: a.BtnType.Com,
name: "AcceptAwards",
statue: !0,
systemId: 10012,
btnPath: "fishHall/btn_menu_2_9",
viewName: "ACCEPT_AWARD_VIEW"
},
Mail: {
type: a.BtnType.Com,
name: "Mail",
statue: !0,
systemId: 10013,
btnPath: "fishHall/newhall_icon_12",
viewName: "MAIL_VIEW",
reminds: [ AppEvent.RedPointMail ]
},
Share: {
type: a.BtnType.Com,
name: "Share",
statue: !0,
systemId: 10014,
btnPath: "fishHall/btn_menu_2_10"
},
FirstCharge: {
type: a.BtnType.Com,
name: "FirstCharge",
statue: !0,
open: "hasCharge",
spinePath: "module/fish/spine/hall/gift/dt_yylb",
ani: "1",
viewName: "FISH_FIRST_CHARGE_VIEW"
},
NewerGift: {
type: a.BtnType.Com,
name: "NewerGift",
statue: !0,
open: "hasBuyGoods",
spinePath: "module/fish/spine/hall/gift/dt_xshl",
ani: "1",
viewName: "FISH_NEWER_GIFT_VIEW"
},
BombGold: {
type: a.BtnType.Act,
actId: r.ActivityIds.BombGold,
name: "BombGold",
statue: !0,
btnPath: "fishHall/newhall_icon_26",
viewName: "BOMB_GOLD_VIEW",
reminds: [ AppEvent.RedPointViewBombGold ]
},
LevelBattle: {
type: a.BtnType.Act,
actId: r.ActivityIds.LevelBattle,
name: "LevelBattle",
statue: !0,
btnPath: "fishHall/hall_icon_hd_07",
viewName: "FISH_LEVEL_BATTLE_VIEW"
},
VipTurntable: {
type: a.BtnType.Com,
name: "VipTurntable",
statue: !0,
spinePath: "module/fish/spine/hall/vipLottery/dt_viprk",
ani: "1",
spPos: cc.v2(0, -50),
viewName: "VIP_TURNTABLE_VIEW",
reminds: [ AppEvent.RedPointFishVipTurntable ]
},
SuperBuy: {
type: a.BtnType.Com,
name: "SuperBuy",
statue: !0,
systemId: 10006,
btnPath: "fishHall/newhall_icon_27"
},
WonderfulAct: {
type: a.BtnType.Com,
name: "WonderfulAct",
statue: !0,
btnPath: "fishHall/newhall_icon_28",
reminds: [ AppEvent.RedPointGunForgeBattle, AppEvent.RedPointViewQMBet, AppEvent.RedPointViewWarheadRank, AppEvent.RedPointViewBombGold, AppEvent.RedPointFishFreeItem, AppEvent.RedPointActivities ]
},
CheckIn: {
type: a.BtnType.Act,
actId: r.ActivityIds.CheckIn,
name: "CheckIn",
statue: !0,
btnPath: "fishHall/newhall_icon_29",
viewName: "FISH_CHECKIN",
reminds: [ AppEvent.RedPointFishCheckin ]
},
TreasureCrab: {
type: a.BtnType.Act,
actId: r.ActivityIds.TreasureCrab,
name: "TreasureCrab",
statue: !0,
btnPath: "fishHall/newhall_icon_30",
viewName: "FISH_PIRATE_HOUSE"
},
QuickGift: {
type: a.BtnType.Com,
name: "QuickGift",
open: "isQuickGiftOpen",
statue: !0,
btnPath: "fishHall/hall_icon_o_04",
viewName: "FISH_QUICK_GIFT_VIEW"
},
ItemSend: {
type: a.BtnType.Act,
actId: r.ActivityIds.ItemExchange,
name: "ItemSend",
statue: !0,
btnPath: "fishHall/hall_icon_hd_03",
viewName: "FISH_ITEM_SEND_VIEW",
reminds: [ AppEvent.RedPointFishFreeItem ]
},
FishClub: {
type: a.BtnType.Com,
name: "FishClub",
funcName: "onClickClub",
statue: !0,
systemId: 10003,
btnPath: "fishHall/newhall_icon_33",
tips: "加公会发福利！",
showTime: 1,
delayTime: 3,
fadeTime: .5,
tipFunc: "isShowClubTips"
},
CrazyBox: {
type: a.BtnType.Act,
actId: r.ActivityIds.CrazyBox,
name: "CrazyBox",
statue: !0,
btnPath: "fishHall/hall_icon_o_03",
viewName: "FISH_CRAZY_BOX_VIEW",
reminds: [ AppEvent.RedPointFishCrazyBox ]
},
JadeRank: {
type: a.BtnType.Act,
actId: r.ActivityIds.JadeRank,
name: "JadeRank",
statue: !0,
btnPath: "fishHall/hall_icon_hd_08",
viewName: "FISH_JADE_RANK_VIEW",
reminds: [ AppEvent.RedPointViewJadeRank ]
}
};
a.FishHallBtns.SuperBuy.btnList = [ a.FishHallBtns.MoonCard, a.FishHallBtns.Carnival ];
a.FishHallBtns.WonderfulAct.btnList = [ a.FishHallBtns.Activity, a.FishHallBtns.QMBet, a.FishHallBtns.Warhead, a.FishHallBtns.GunForgeBattle, a.FishHallBtns.BombGold ];
a.FishAreaName = {
Top: "Top",
Left: "Left",
Right: "Right",
Bot: "Bot",
More: "More",
List: "List"
};
a.FishHallArea = (o(s = {}, a.FishAreaName.Top, [ a.FishHallBtns.VipTurntable, a.FishHallBtns.Vip ]), 
o(s, a.FishAreaName.Left, [ a.FishHallBtns.Shop, a.FishHallBtns.Carnival, a.FishHallBtns.MoonCard, a.FishHallBtns.Welfare ]), 
o(s, a.FishAreaName.Right, []), o(s, a.FishAreaName.Bot, [ a.FishHallBtns.Ranking, a.FishHallBtns.Bag, a.FishHallBtns.AcceptAwards, a.FishHallBtns.Mail, a.FishHallBtns.FishClub, a.FishHallBtns.GunForge ]), 
s);
a.FishAreaPnl = (o(n = {}, a.FishAreaName.Top, {
name: "pnlTop_",
num: 3
}), o(n, a.FishAreaName.Left, {
name: "pnlLeft_",
num: 4
}), o(n, a.FishAreaName.Right, {
name: "pnlRight_",
num: 4
}), o(n, a.FishAreaName.Bot, {
name: "pnlBot_",
num: 6
}), n);
var l = a;
i.default = l;
t.exports = i.default;
cc._RF.pop();
}, {} ],
FishUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "8fadfeytJBKALsWGziTsBX7", "FishUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
window.FishUtils = {};
FishUtils.playSpine = function(e, t, i) {
var s = new cc.Node(), n = s.addComponent("comNodeSpine"), o = !1, a = null, r = e.scale || 1, l = e.zorder || 1;
s.parent = t;
s.scale = r;
s.zIndex = l;
var c = e.x || 0, h = e.y || 0;
s.x = c;
s.y = h;
var u = function() {
!TypeUtils.isRealNull(a) && o && s.destroy();
};
n.loadSpine(e.path, function(t, i) {
if (t) cc.log("load err errff"); else {
(a = i).setAnimation(0, e.ani, e.isLoop);
s.spine = a;
TypeUtils.isFunction(e.loadCallBack) && e.loadCallBack(a);
u();
}
});
TypeUtils.isRealNull(i) || s.runAction(cc.sequence(cc.delayTime(i), cc.callFunc(function() {
o = !0;
u();
})));
return s;
};
FishUtils.getDropItemPos = function(e, t, i, s) {
var n = e, o = t;
if (s <= 4) n = e - 50 * s / 2 + 50 * (i - 1); else if (5 == s) {
if (5 == i) return cc.v2(n, o);
var a = DicUtils.rad(90 * (i - 1));
n = e + 50 * Math.cos(a);
o = t + 50 * Math.sin(a);
} else if (9 == s) {
if (i == s) return cc.v2(n, o);
var r = i % 2 == 0 ? 50 : 70, l = DicUtils.rad(45 * (i - 1));
n = e + r * Math.cos(l);
o = t + r * Math.sin(l);
} else if (16 == s) {
var c = [ [ e, t + 70 ], [ e + 70, t ], [ e, t - 70 ], [ e - 70, t ] ][Math.floor(i / 4)], h = DicUtils.rad(90 * (Math.ceil((i - .1) % 4) - 1));
n = c[0] + 35 * Math.cos(h);
o = c[1] + 35 * Math.sin(h);
} else if (s % 2 == 0) {
var u = s / 2;
n = e - 50 * u / 2 + 50 * ((i <= u ? i : i - u) - 1);
o = t + (i > u ? -25 : 25);
}
return cc.v2(n, o);
};
FishUtils.showConfirmBox = function(e, t, i, s, n, o) {
var a = "";
o && (a = new Date().toDateString());
t += a;
if (i) {
if ("TRUE" == UserUtils.getDataStr(t, "FALSE")) {
TypeUtils.isFunction(s) && s();
return;
}
}
var r = {
desc: e,
needCheckBox: i,
cbTag: t,
sureCallBack: function() {
TypeUtils.isFunction(s) && s();
},
cancelCallback: function() {
TypeUtils.isFunction(n) && n();
}
};
ViewManager.showView("COMFIRM_BOX_VIEW", null, r);
};
FishUtils.showOpenSpine = function(e, t, i, s, n) {
LoadUtils.loadRes("module/fish/fishComponent/nodeOpenSp", function(o, a) {
if (o) console.log("showOpenSpine error:" + o.errorMessage); else {
var r = cc.instantiate(a);
r.parent = e;
r.x = t || 0;
r.y = i || 0;
r.zIndex = s || 0;
r.scale = n || 1;
}
});
};
FishUtils.showTitleSpine = function(e, t, i) {
var s = null;
e instanceof sp.Skeleton ? s = e : e instanceof cc.Node && (s = e.getComponent(sp.Skeleton));
TypeUtils.isRealNull(s) && (s = e.addComponent(sp.Skeleton));
SpineUtils.changeSpine("module/fish/spine/BiaoTi/by_hysc_bt", function(e, n) {
s.skeletonData = n;
if (TypeUtils.isRealNull(i)) s.setAnimation(0, t, !0); else {
s.setAnimation(0, t, !1);
s.addAnimation(0, i, !0, 0);
}
});
};
var s = FishUtils;
i.default = s;
t.exports = i.default;
cc._RF.pop();
}, {} ],
GameCtrl: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "c36f3aQ8D1L0LmptDNe+oDr", "GameCtrl");
var s = e("HttpCtrl"), n = e("GameModel"), o = e("MiniGameConst"), a = e("LoginConst");
cc.Class({
extends: s,
properties: {},
ctor: function() {
var e = new n();
this.init(e);
this.eventOn(AppEvent.TryEnterGame, this.onTryEnterGame.bind(this));
},
tryToLoginView: function(e) {
GlobalUtils.isCanUpdate() ? e() : this.showLoginView();
},
showLoginView: function() {
ViewManager.showView("LOGIN_VIEW");
},
authSuccess: function(e) {
var t = app.ctrls.role;
t.getModel().setRoleId(e);
t.getRoleInfo(e);
},
onTryEnterGame: function() {
if (app.ctrls.login.getModel().isLoginNeedLoadResStatus()) {
app.ctrls.login.getModel().setLoginNeedLoadResStatus(a.LoginStatus.NotToLoadRes);
this.enterGame();
}
},
requireAllData: function() {
for (var e in app.ctrls) if (app.ctrls.hasOwnProperty(e)) {
var t = app.ctrls[e];
TypeUtils.isFunction(t) || t.doAfterInit();
}
return !0;
},
enterGame: function() {
app.ctrls.games.goToGameByIndex(o.GameType.Fish);
this.requireAllData();
},
relogin: function() {
var e = this;
TimeMgr.delayTime(function() {
if (!TypeUtils.isRealNull(e)) {
e.resetData();
e.showLoginView();
app.ctrls.login.checkAutoLogin();
}
}, 0);
},
resetData: function() {
session.close();
session.reset();
app.ctrls.reset();
app.ctrls.init();
app.fishCtrls.reset();
ViewManager.reset();
},
modifyIp: function(e) {
var t = {
method: "getClientConfig",
data: {
cfg_name: "testServerUrl" + GlobalUtils.getPid()
}
};
this.request(t, function(t) {
e(1 == t.cfg_value);
}, !0);
}
});
cc._RF.pop();
}, {
GameModel: "GameModel",
HttpCtrl: "HttpCtrl",
LoginConst: "LoginConst",
MiniGameConst: "MiniGameConst"
} ],
GameManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "6662an6FqBLe6CD40ii0iWu", "GameManager");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = cc.Class({
extends: BaseManager,
ctor: function() {
this.init();
},
init: function() {
this.initEvent();
this.initData();
},
initEvent: function() {
cc.game.on(cc.game.EVENT_HIDE, function() {
console.log("进入后台");
this.emit(AppEvent.GameEventEnterBackground);
cc.game.pause();
}.bind(this));
cc.game.on(cc.game.EVENT_SHOW, function() {
console.log("进入前台");
this.emit(AppEvent.GameEventEnterForeground);
cc.game.resume();
}.bind(this));
EventManager.on(AppEvent.PlayerSeedAdBegin, this.handleronPlayerSeedAdBegin, this);
EventManager.on(AppEvent.PlayerSeedAdEnd, this.handleronPlayerSeedAdEnd, this);
},
initData: function() {
this.m_isStopSaveData = !1;
this.m_isEnterToPlayGame = !1;
},
handleronPlayerSeedAdBegin: function() {
cc.game.pause();
},
handleronPlayerSeedAdEnd: function() {
cc.game.resume();
},
setStopSaveData: function(e) {
this.m_isStopSaveData = !0;
},
isStopSaveData: function() {
return this.m_isStopSaveData;
},
isEnterToPlayGame: function() {
return this.m_isEnterToPlayGame;
},
setEnterToPlayGame: function(e) {
this.m_isEnterToPlayGame = e;
}
});
i.default = s;
t.exports = i.default;
cc._RF.pop();
}, {} ],
GameModel: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "86716C3LJBBBYRAEOTzPB6b", "GameModel");
cc.Class({
extends: ModelBase,
properties: {},
ctor: function() {
this.init();
}
});
cc._RF.pop();
}, {} ],
GamesCtrl: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "36e2ftW3tlDJLE5MH+O01An", "GamesCtrl");
var s = e("HttpCtrl"), n = e("GamesModel");
e("MiniGameConst");
cc.Class({
extends: s,
properties: {},
ctor: function() {
var e = new n();
this.init(e);
},
goToGameByIndex: function(t, i) {
var s = e("fishStart");
i = i || {};
this._start = new s(i);
}
});
cc._RF.pop();
}, {
GamesModel: "GamesModel",
HttpCtrl: "HttpCtrl",
MiniGameConst: "MiniGameConst",
fishStart: "fishStart"
} ],
GamesModel: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "077fc21ZTpJZ4spzvDvZNYK", "GamesModel");
cc.Class({
extends: ModelBase,
properties: {},
ctor: function() {
this.init();
},
getDataByGameId: function(e) {
return ConfigMgr.getConfig("game_center_config").findFirst(function(t) {
return t.gameId == e;
});
}
});
cc._RF.pop();
}, {} ],
GlobalEnum: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "32e02HkEKFEprjw8DkPZ5Zz", "GlobalEnum");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = e("EnvEnum"), n = {};
n.Env = s.Environmental.Release;
n.ShopType = s.ShopType.SeeAdd;
n.Pid = 606;
n.ChannelId = 60601;
n.CenterServerMd5 = "6b56f3f6d19f9c536dd0bce84476a3cc";
n.PlatFormType = {};
n.PlatFormType.Andorid = 1;
n.PlatFormType.Ios = 2;
n.PlatFormType.WeChat = 3;
n.PlatFormType.Browser = 4;
n.ExamStatus = {};
n.ExamStatus.Examing = 1;
n.ExamStatus.Normal = 2;
n.UpdateState = {};
n.UpdateState.Update = 1;
n.UpdateState.Updating = 2;
n.UpdateState.Finish = 3;
n.UpdateState.Failed = 4;
n.UpdateState.Error = 5;
n.ApiKey = "dd99f1ff2386c9060d4dea8b16fb0eb9";
n.Url = "https://dafuhao.center.test.threegame.cn/";
n.YSAppId = "wx8afc704e3471a973";
n.MiniAppId = "wx8af13afbbeaeb6b7";
n.DesignResolutionSizeV = cc.size(720, 1080);
n.DesignResolutionSizeH = cc.size(1080, 720);
n.InfBig = -1;
n.FrameRate1 = .05;
n.FrameRate2 = .025;
n.FrameRate3 = 1 / 60;
n.FrameRate4 = 1 / 30;
n.AuthHeartbeatInterval = 5;
n.BaseVersion = "1.1.4";
var o = n;
i.default = o;
t.exports = i.default;
cc._RF.pop();
}, {
EnvEnum: "EnvEnum"
} ],
GlobalUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "ed19dQKCXFHXaFOUjltEHBm", "GlobalUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = function(e) {
return e && e.__esModule ? e : {
default: e
};
}(e("../Enum/EnvEnum"));
var n = {
isCharge: function() {
return GlobalEnum.ShopType == s.default.ShopType.Charge;
},
isSendDot: function() {
return !n.isDebug();
},
isDebug: function() {
return GlobalEnum.Env === s.default.Environmental.Debug;
},
isExamine: function() {
return this.iosExamine;
},
setExamine: function(e) {
this.iosExamine = e;
},
isTiYan: function() {
return GlobalEnum.Env === s.default.Environmental.Tiyan;
},
isRelease: function() {
return GlobalEnum.Env === s.default.Environmental.Release;
},
isOpenGuide: function() {
return !AppUtils.IsBrowser();
},
isCanUpdate: function() {
return cc.sys.isNative;
},
getPid: function() {
return GlobalEnum.Pid;
},
getPlatformConst: function() {
return AppUtils.IsBrowser() ? GlobalEnum.PlatFormType.Browser : AppUtils.IsAndroid() ? GlobalEnum.PlatFormType.Andorid : AppUtils.IsIphone() ? GlobalEnum.PlatFormType.Ios : AppUtils.IsWechat() ? GlobalEnum.PlatFormType.WeChat : void 0;
},
getDevicePlatform: function() {
return AppUtils.IsBrowser() ? "browser" : AppUtils.IsAndroid() ? "android" : AppUtils.IsIphone() ? "ios" : AppUtils.IsWechat() ? "wechat" : void 0;
},
getApiKey: function() {
return GlobalEnum.ApiKey;
},
isPid: function(e) {
return GlobalEnum.Pid === e;
},
getChannelId: function() {
return AppUtils.IsAndroid() ? 100 * GlobalEnum.Pid + 1 : AppUtils.IsIphone() ? 100 * GlobalEnum.Pid + 2 : GlobalEnum.ChannelId;
},
getRandomDeviceNum: function() {
if (this._devNum) return this._devNum;
var e = UserUtils.getDataStr(UserDefaultConst.DeviceNumber);
if (e && "" != e) {
this._devNum = e;
return e;
}
for (var t = "", i = 0; i < 20; i++) t += Math.floor(10 * Math.random());
e = "CC" + cc.sys.platform + t + new Date().getTime();
this._devNum = e;
UserUtils.setDataStr(UserDefaultConst.DeviceNumber, e);
return e;
},
getPlatformConfig: function(e) {
var t = this, i = null;
if (e) LoadUtils.loadJson("resources/platform_config.json", function(e) {
i = e;
}); else {
TypeUtils.isRealNull(this.__platform_config) && LoadUtils.loadJson("resources/platform_config.json", function(e) {
t.__platform_config = e;
});
i = this.__platform_config;
}
return i;
},
getGameBaseVersion: function() {
return GlobalEnum.BaseVersion;
},
getCenterApiKey: function() {
return GlobalEnum.CenterServerMd5;
},
setApiKey: function(e) {
this.__apikey = e;
}
};
n.getApiKey = function() {
if (this.__apikey) return this.__apikey;
this.__apikey = GlobalEnum.ApiKey;
return this.__apikey;
};
n.setFrameRate = function(e) {
cc.game.setFrameRate(60);
};
n.getVersion = function() {
if (this.version) return this.version;
this.version = GlobalEnum.BaseVersion;
return this.version;
};
n.setVersion = function(e) {
this.version = e;
};
n.getAuthUrl = function() {
return GlobalEnum.Url;
};
var o = n;
i.default = o;
t.exports = i.default;
cc._RF.pop();
}, {
"../Enum/EnvEnum": "EnvEnum"
} ],
HeadManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "b09bbLfb6RLR7H5dc6WykCm", "HeadManager");
cc.Class({
ctor: function() {
this.init();
},
init: function() {
this.headList = {};
var e = UserUtils.getDataStr(UserDefaultConst.CheckVailHeadImgs, "[]");
this.hasLoadMd5s = JSON.parse(e);
},
loadHead: function(e, t) {
if (!TypeUtils.isRealNull(e)) if (TypeUtils.isAllNull(t.url)) {
if (!TypeUtils.isRealNull(t.roleId)) {
var i = this.headList[t.roleId];
TypeUtils.isRealNull(i) || t.isRequest ? this.requestHead(e, t.roleId, t.isRequest) : this.freshHead(e, i);
}
} else {
TypeUtils.isRealNull(t.roleId) || (this.headList[t.roleId] = {
url: t.url,
md5: t.md5
});
this.freshHead(e, t);
}
},
requestHead: function(e, t, i) {
var s = this;
app.ctrls.role.getFaceById(t, function(n) {
s.headList[t] = s.headList[t] || {};
if (!i || TypeUtils.isRealNull(s.headList[t]) || s.headList[t].url != n.image) {
s.headList[t] = {
url: n.image,
md5: n.md5
};
s.freshHead(e, s.headList[t]);
} else ActionUtils.callOnce(e, function() {
s.requestHead(e, t, !1);
}, .1);
});
},
freshHead: function(e, t) {
this.checkImgValid(t.url, function(i) {
i ? LoadUtils.loadImg(t.url, function(i, s) {
if (null == i) try {
e.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(s);
} catch (e) {
logger.error("freshHead", e, t);
}
}) : SpriteUtils.setTexture({
path: "module/fish/texture/icon/icon_a_100"
}, e, e);
});
},
checkImgValid: function(e, t) {
for (var i = this, s = function(e) {
TypeUtils.isFunction(t) && t(e);
}, n = 0; n < this.hasLoadMd5s.length; n++) if (this.hasLoadMd5s[n].url == e) {
s(this.hasLoadMd5s[n].isValid);
return;
}
AppUtils.getPlatform().doImgSecCheck(e, function(t) {
i.hasLoadMd5s.push({
url: e,
isValid: t
});
s(t);
t || TipsUtils.showTips("非法图片！");
UserUtils.setDataStr(UserDefaultConst.CheckVailHeadImgs, JSON.stringify(i.hasLoadMd5s));
});
},
update: function(e) {}
});
cc._RF.pop();
}, {} ],
HelpUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "db231i03hRPBaA7sbuCKRgq", "HelpUtils");
cc.Class({
ctor: function() {},
Enum: function(t) {
console.log("help utils enum  " + t);
return e("src/frameworks/Enum/" + t);
},
callFish: function(e) {
session.request(M_Debug.dealGmCommand, "refresh " + e, function(e) {
console.log("HelpUtils >>>>>>>> 34 callFish", e);
}, null, !1);
},
addItem: function(e) {
var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1;
session.request(M_Debug.receiveItemList, {
itemId: e,
amount: t
}, function(e) {
console.log("HelpUtils >>>>>>>> 34 addItem", e);
});
},
delItem: function(e) {
var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1;
session.request(M_Debug.removeItemList, {
itemId: e,
amount: t
}, function(e) {
console.log("HelpUtils >>>>>>>> 34 delItem", e);
});
},
doGmStr: function(e, t) {
session.request(M_Debug.dealGmCommand, e, function(e) {
t(e);
}, null, !1);
},
secondKill: function() {
var e = this;
this.doGmStr("kill 1", function(t) {
e.reEnterFishRoom();
});
},
reEnterFishRoom: function() {
var e = this, t = app.fishCtrls.catchFish;
if (!TypeUtils.isRealNull(t)) {
var i = t.getModel().getRoomType();
t.leaveRoom(function() {
ViewManager.closeView("CATCH_FISH_VIEW");
TimeMgr.delayTime(function() {
t.enterRoom(i);
}, 1, e);
});
}
},
upTopGun: function() {
session.request(M_Debug.receiveItemList, {
itemId: 5,
amount: 2e5
}, function(e) {}, null, !1);
session.request(M_Debug.receiveItemList, {
itemId: 21004,
amount: 2e5
}, function(e) {}, null, !1);
session.request(M_Debug.receiveItemList, {
itemId: 21005,
amount: 2e5
}, function(e) {}, null, !1);
for (var e = 0; e < 46; e++) setTimeout(function() {
app.ctrls.bag.requestGunForge(!0);
}, .1);
},
getBast: function() {
this.upTopGun();
this.addItem(2, 1e10);
this.addItem(5, 1e10);
this.addItem(6, 1e10);
},
testShow: function() {
ViewManager.showView("NAJIA_PLAY_VIEW", null, {
catchInfo: {
crit: 1,
fishId: 1,
dropList: [ {
itemId: 21014,
amount: 10
}, {
itemId: 2,
amount: 274e3
} ],
dropMultiple: 258,
isHaveWarhead: !0,
pos: 3,
longWangBox: {
multiple: 5
}
},
fishType: 60,
bulletLevel: 300
});
}
});
cc._RF.pop();
}, {} ],
HotUpdateHelper: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "7b94c8VoDFPLLeRuq44C0c1", "HotUpdateHelper");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = cc.Class({
statics: {
_instance: null,
getInstance: function() {
s._instance || (s._instance = new s());
return s._instance;
}
},
ctor: function() {
this._updating = !1;
this._canRetry = !1;
this._storagePath = "";
this.manifestUrl = null;
this.downCount = 0;
},
checkCb: function(e) {
console.log("Code: " + e.getEventCode());
var t = !1;
switch (e.getEventCode()) {
case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:
console.log("ERROR_NO_LOCAL_MANIFEST: No local manifest file found, hot update skipped.");
break;

case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:
console.log("ERROR_DOWNLOAD_MANIFEST: Fail to download manifest file, hot update skipped.");
break;

case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:
console.log("ERROR_PARSE_MANIFEST: Fail to download manifest file, hot update skipped.");
break;

case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:
console.log("ALREADY_UP_TO_DATE: Already up to date with the latest remote version.");
break;

case jsb.EventAssetsManager.NEW_VERSION_FOUND:
console.log("NEW_VERSION_FOUND: New version found, please try to update.");
t = !0;
break;

default:
return;
}
this._am.setEventCallback(null);
this._checkListener = null;
this._updating = !1;
return t;
},
updateCb: function(e, t) {
var i = !1, s = !1;
switch (e.getEventCode()) {
case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:
TipsUtils.showTips("没有本地manifest文件，跳过更新！");
t({
code: e.getEventCode(),
state: GlobalEnum.UpdateState.Failed
});
s = !0;
break;

case jsb.EventAssetsManager.UPDATE_PROGRESSION:
TypeUtils.isFunction(t) && t({
code: e.getEventCode(),
state: GlobalEnum.UpdateState.Updating,
bytePer: e.getPercent(),
filePer: e.getPercentByFile(),
downFiles: e.getDownloadedFiles(),
totalFiles: e.getTotalFiles(),
downBytes: e.getDownloadedBytes(),
totalBytes: e.getTotalBytes(),
msg: e.getMessage()
});
break;

case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:
case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:
TipsUtils.showTips("下载manifest文件失败，跳过更新！");
t({
code: e.getEventCode(),
state: GlobalEnum.UpdateState.Failed
});
s = !0;
break;

case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:
TipsUtils.showTips("准备完成，等待更新！");
s = !0;
break;

case jsb.EventAssetsManager.UPDATE_FINISHED:
TipsUtils.showTips("更新完成！");
t({
code: e.getEventCode(),
state: GlobalEnum.UpdateState.Finish
});
i = !0;
break;

case jsb.EventAssetsManager.UPDATE_FAILED:
this._updating = !1;
this._canRetry = !0;
this.downCount++;
if (this.downCount < 5) this.retry(); else {
t({
code: e.getEventCode(),
state: GlobalEnum.UpdateState.Error
});
this.downCount = 0;
}
TipsUtils.showTips("更新失败！");
break;

case jsb.EventAssetsManager.ERROR_UPDATING:
console.log("更新错误: " + e.getAssetId() + ", " + e.getMessage());
TipsUtils.showTips("更新错误: " + e.getAssetId() + ", " + e.getMessage());
break;

case jsb.EventAssetsManager.ERROR_DECOMPRESS:
TipsUtils.showTips(e.getMessage());
}
if (s) {
this._am.setEventCallback(null);
this._updateListener = null;
this._updating = !1;
}
if (i) {
this._am.setEventCallback(null);
this._updateListener = null;
for (var n = jsb.fileUtils.getSearchPaths(), o = this._am.getLocalManifest().getSearchPaths(), a = 0; a < o.length; a++) -1 == n.indexOf(o[a]) && Array.prototype.unshift(n, o[a]);
jsb.fileUtils.setSearchPaths(n);
cc.sys.localStorage.setItem("HotUpdateSearchPaths", JSON.stringify(n));
}
},
retry: function() {
if (!this._updating && this._canRetry) {
this._canRetry = !1;
TipsUtils.showTips("Retry failed Assets...");
this._am.downloadFailedAssets();
return !0;
}
},
checkUpdate: function(e) {
var t = this;
if (this._updating) TipsUtils.showTips("检查更新中..."); else {
if (this._am.getState() === jsb.AssetsManager.State.UNINITED) {
var i = this.manifestUrl.nativeUrl;
cc.loader.md5Pipe && (i = cc.loader.md5Pipe.transformURL(i));
this._am.loadLocalManifest(i);
}
if (this._am.getLocalManifest() && this._am.getLocalManifest().isLoaded()) {
this._am.setEventCallback(function(i) {
var s = t.checkCb(i);
!TypeUtils.isRealNull(s) && TypeUtils.isFunction(e) && e(s);
});
this._am.checkUpdate();
this._updating = !0;
GlobalUtils.setVersion(this._am.getLocalManifest().getVersion());
} else TipsUtils.showTips("加载本地manifest文件失败...");
}
},
hotUpdate: function(e) {
var t = this;
if (this._am && !this._updating) {
this._am.setEventCallback(function(i) {
t.updateCb(i, e);
});
if (this._am.getState() === jsb.AssetsManager.State.UNINITED) {
var i = this.manifestUrl.nativeUrl;
cc.loader.md5Pipe && (i = cc.loader.md5Pipe.transformURL(i));
this._am.loadLocalManifest(i);
}
this._failCount = 0;
this._am.update();
this._updating = !0;
return !0;
}
},
initData: function(e) {
this.manifestUrl = e;
if (cc.sys.isNative) {
this._storagePath = (jsb.fileUtils ? jsb.fileUtils.getWritablePath() : "/") + "dafuhaoFish";
this.versionCompareHandle = function(e, t) {
cc.log("当前版本 :  ".concat(e, " , 远程版本 : ").concat(t));
for (var i = e.split("."), s = t.split("."), n = 0; n < i.length; ++n) {
var o = parseInt(i[n]), a = parseInt(s[n] || 0);
if (o !== a) return o - a;
}
return s.length > i.length ? -1 : 0;
};
this._am = new jsb.AssetsManager(this.manifestUrl, this._storagePath, this.versionCompareHandle);
this._am.setVerifyCallback(function(e, t) {
t.compressed, t.md5, t.path;
return !0;
});
cc.sys.os === cc.sys.OS_ANDROID && this._am.setMaxConcurrentTask(2);
}
},
onDestroy: function() {
if (this._updateListener) {
this._am.setEventCallback(null);
this._updateListener = null;
}
}
}), n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
HttpCtrl: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "eeb7aSNNU5IfYvwLLm1xMDI", "HttpCtrl");
var s = e("CtrlBase");
window.HttpCtrl = cc.Class({
extends: s,
properties: {},
request: function(e, t, i, s, n, o) {
HttpUtils.post({
method: e.method,
url: e.url,
data: e.data || {},
callback: t,
failCallback: s,
showRequest: i,
config: n,
timeOutcallback: o
});
}
});
cc._RF.pop();
}, {
CtrlBase: "CtrlBase"
} ],
HttpMgr: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "6fc23NqwRFB+J8jTzspyCzS", "HttpMgr");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = cc.Class({
ctor: function() {
this.initData();
},
initData: function() {
this.m_posArray = [];
},
post: function(e) {
if (DicUtils.has(e, "isIgnoreToken") && e.isIgnoreToken) HttpUtils.post(e); else if (AppUtils.isTokenExpire()) {
var t = this;
this.m_posArray.push(e);
HttpUtils.post({
method: "freshToken",
isIgnoreToken: !0,
data: {
username: AppUtils.getUserName(),
token: AppUtils.getToken()
},
callback: function(e) {
AppUtils.setUserData(e);
for (var i = 0; i < t.m_posArray.length; i++) HttpUtils.post(t.m_posArray[i]);
t.m_posArray = [];
}
});
} else HttpUtils.post(e);
}
});
i.default = s;
t.exports = i.default;
cc._RF.pop();
}, {} ],
HttpUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "1362eeePdpF2qfc77Qo8QtA", "HttpUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = e("DicUtils"), n = {
post: function(e) {
var t = !(0 == e.showRequest), i = ViewManager.getHttpReqCount();
if (t) {
ViewManager.addHttpReqCount();
ViewManager.showRequest(null, ViewManager.TypeHttps, {
id: i,
name: e.method
});
}
var n = new XMLHttpRequest();
n.onreadystatechange = function() {
if (4 === n.readyState && n.status >= 200 && n.status < 400) {
t && ViewManager.hideRequest(ViewManager.TypeHttps, {
id: i,
name: e.method
});
var o = n.responseText, a = JsonUtils.json2Data(o);
if (0 === a.errorCode) s.has(e, "callback") && e.callback(a.data); else {
console.log("http请求失败 ", e.method, " ,response = ", o);
var r = JSON.parse(o), l = httpErrorCode[r.errorCode] || r.data.message;
l ? TipsUtils.showTips(l) : r.errorCode == httpErrorCode.EC_PWD_IS_ERROR && console.warn("后台errorCode[" + r.errorCode + "]:", e);
s.has(e, "failCallback") && TypeUtils.isFunction(e.failCallback) && e.failCallback();
}
}
};
this.addOtherArgs(e.data);
var o = JSON.stringify(e.data), a = Md5Utils.hex_md5(o + GlobalUtils.getApiKey());
TypeUtils.isAllNull(e.url) ? n.open("POST", GlobalEnum.Url + "api/" + e.method) : n.open("POST", e.url);
n.timeout = 3e3;
n.ontimeout = function(s) {
t && ViewManager.hideRequest(ViewManager.TypeHttps, {
id: i,
name: e.method
});
TypeUtils.isFunction(e.timeOutcallback) && e.timeOutcallback(s);
};
n.setRequestHeader("content-type", "application/json");
var r = AppUtils.getToken();
s.has(e, "isIgnoreToken") && e.isIgnoreToken || "" !== r && n.setRequestHeader("Access-Token", r);
n.send(JSON.stringify({
data: o,
md5: a
}));
},
addOtherArgs: function(e) {
s.merge(e, {
pid: GlobalEnum.Pid
});
s.has(e, "channelId") || (e.channelId = GlobalUtils.getChannelId());
s.has(e, "imeiCode") || (e.imeiCode = GlobalUtils.getRandomDeviceNum());
}
}, o = n;
i.default = o;
t.exports = i.default;
cc._RF.pop();
}, {
DicUtils: "DicUtils"
} ],
IOSPlatform: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "c6b4613b9RNtKrDRLhnBYIG", "IOSPlatform");
var s = e("BasePlatfrom");
cc.Class({
extends: s,
ctor: function() {},
init: function() {
s.prototype.init.call(this, "IOSPlatform");
this.setWXCallback();
return this;
},
initAd: function() {
var e = jsb.reflection.callStaticMethod("RootViewController", "initExpAdVideoJs:extra:userId:", "945168602", "0", "0");
console.log("@@@@@@@@@ jsb ret = ", e);
},
onExit: function() {
s.prototype.onExit.call(this);
},
seeAd: function(e) {
if (s.prototype.seeAd.call(this)) {
this.seeAdReal(e);
}
},
isVideoReady: function() {
var e = jsb.reflection.callStaticMethod("RootViewController", "isVideoReadyJs");
console.log("@@@@@@@@@ jsb isVideoReady ret = ", e);
return e;
},
seeAdReal: function(e) {
if (this.isVideoReady()) {
this._bonusType = e.bonusType;
this._loadCallback = e.loadCallback;
this._closeCallback = e.closeCallback;
this._errorCallback = e.errorCallback;
var t = jsb.reflection.callStaticMethod("RootViewController", "showExpAdVideoJs:extra:userId:", "945168602", "0", "0");
console.log("@@@@@@@@@ jsb ret = ", t);
} else TipsUtils.showTips("广告准备中，请稍后~");
},
onCloseAd: function(e) {
s.prototype.onCloseAd.call(this);
console.info("onCloseAd res = ", e);
if (this._closeCallback) if (e && e.isEnded) {
console.info("res.isEnded = ", e.isEnded);
this.didRewardAd();
this._closeCallback({
isEnable: e.isEnded
});
} else {
this.didCloseAd();
this._closeCallback({
isEnable: !1
});
}
},
onErrorAd: function(e) {
s.prototype.onErrorAd.call(this);
console.info("res = ", e);
console.info("res.errMsg = ", e.errMsg);
this.didErrorAd();
this._errorCallback && this._errorCallback();
},
onLoadAd: function(e) {
s.prototype.onLoadAd.call(this);
},
addOrder: function(e, t) {
app.ctrls.shop.addOrder(e);
this.orderCallback = t;
},
copy: function(e) {
jsb.reflection.callStaticMethod("AppController", "JavaCopy:", e);
},
setWXCallback: function() {
var e = this;
cc.jsWXLoginCallback = function(t) {
e.onGetAuthCode(t);
};
cc.jsShareCallback = function(e) {
if (TypeUtils.isFunction(this.shareCallback)) {
this.shareCallback(e);
this.shareCallback = null;
}
};
cc.jsJumpMiniProgram = function(e) {
console.log("jsJumpMiniProgram >>>>>>>>", e);
};
cc.callJsPayCallBack = function(t) {
if (!TypeUtils.isRealNull(t) && ("recoveryOrder" == t.eventName || "payFinish" == t.eventName)) {
"recoveryOrder" == t.eventName ? ViewManager.hideRequest(ViewManager.TypeHttps, {
id: 2000001,
name: "苹果内购"
}) : ViewManager.hideRequest(ViewManager.TypeHttps, {
id: 2e6,
name: "苹果内购"
});
e.ocCallBack(t.isPurchase, t.receiptStr, t.roleIdAndOrder);
}
};
},
login: function() {
jsb.reflection.callStaticMethod("AppController", "login");
},
getAppID: function() {
return jsb.reflection.callStaticMethod("AppController", "getAppID");
},
isWXAppInstalled: function() {
return jsb.reflection.callStaticMethod("AppController", "isWXAppInstalled");
},
openWXApp: function() {
return jsb.reflection.callStaticMethod("AppController", "openWXApp");
},
shareImageToWX: function(e, t) {
this.shareCallback = callback;
jsb.reflection.callStaticMethod("AppController", "shareImageToWX:isPYQ:", e, t);
},
shareURLToWX: function(e, t, i, s) {
this.shareCallback = callback;
jsb.reflection.callStaticMethod("AppController", "shareURLToWX:title:des:isPYQ:", e, t, i, s);
},
jumpMiniProgram: function(e, t, i) {
return jsb.reflection.callStaticMethod("AppController", "jumpMiniProgram:path:miniProgramType:", e, t, i);
},
onGetAuthCode: function(e) {
var t = this;
app.ctrls.login.wechatLogin(e.code, function(e) {
t.setUserData(e);
TypeUtils.isFunction(_callback) && _callback(e);
});
},
loadNetImage: function(e, t, i) {
this.download(e, t, function(e) {
cc.loader.load(e, function(e, t) {
if (e) cc.error(e); else {
var s = new cc.SpriteFrame(t);
if (s) {
s.retain();
i(s);
}
}
});
});
},
download: function(e, t, i) {
var s = jsb.fileUtils.getWritablePath() + "download/";
console.log("dirpath ->", s);
var n = s + t + ".png";
console.log("filepath ->", n);
if (jsb.fileUtils.isFileExist(n)) {
cc.log("Remote is find" + n);
i(n);
} else {
var o = function(e) {
if ("undefined" != typeof e) {
jsb.fileUtils.isDirectoryExist(s) ? console.log("路径exist") : jsb.fileUtils.createDirectory(s);
if (jsb.fileUtils.writeDataToFile(new Uint8Array(e), n)) {
cc.log("Remote write file succeed.");
i(n);
} else cc.log("Remote write file failed.");
} else cc.log("Remote download file failed.");
}, a = new XMLHttpRequest();
a.onreadystatechange = function() {
cc.log("xhr.readyState  " + a.readyState);
cc.log("xhr.status  " + a.status);
4 === a.readyState && (200 === a.status ? o(a.response) : o(null));
}.bind(this);
a.responseType = "arraybuffer";
a.open("GET", e, !0);
a.send();
}
},
checkRecoverOrder: function() {
var e = jsb.reflection.callStaticMethod("AppController", "recoveryOrder");
ViewManager.showRequest(null, ViewManager.TypeHttps, {
id: 2000001,
name: "苹果内购"
});
return e;
},
iosPay: function(e, t, i) {
this.appfeeid = e;
this.cpOrderId = t;
this.roleId = i;
this.toIosPay(e + "", i + "", t + "");
},
toIosPay: function(e, t, i) {
var s = jsb.reflection.callStaticMethod("AppController", "payUseIOSRMI:roleId:cpOrderId:", e, t, i);
ViewManager.showRequest(null, ViewManager.TypeHttps, {
id: 2e6,
name: "苹果内购"
});
UserUtils.setVal(UserDefaultConst.Shop_isOrderNotFinish, "true");
return s;
},
ocCallBack: function(e, t, i) {
var s = this;
if (e) {
var n = StringUtils.stringSplit(i, ";"), o = n[0], a = n[1], r = n[2];
console.log("======================= js 回调 =======================");
app.ctrls.shop.appstoreCallback({
itemId: r,
receiptData: t,
cpOrderId: a,
roleId: o
}, i, function() {
UserUtils.setVal(UserDefaultConst.Shop_isOrderNotFinish, "false");
TypeUtils.isFunction(s.orderCallback) && s.orderCallback();
});
} else {
TipsUtils.showTips("充值失败");
UserUtils.setVal(UserDefaultConst.Shop_isOrderNotFinish, "false");
}
},
finishCheckOrderIOSRMI: function(e) {
return jsb.reflection.callStaticMethod("AppController", "finishCheckOrderIOSRMI:", e);
}
});
cc._RF.pop();
}, {
BasePlatfrom: "BasePlatfrom"
} ],
ItemConst: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "8cea4I5KR1Fi5qz/P3n9KM5", "ItemConst");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
ItemType: {}
};
s.ItemType.Resource = 1;
s.ItemType.BagItem = 2;
s.ItemType.Gun = 3;
s.ItemType.RealItem = 4;
s.ItemType.BiaoXianItem = 5;
s.ItemType.TreasureMap = 6007;
s.ItemAwardType = {};
s.ItemAwardType.Default = 1;
s.ItemAwardType.FirstCharge = 2;
s.ItemAwardType.VIPSend = 3;
s.ItemAwardType.ExtraSend = 4;
s.ResourceType = {};
s.ResourceType.Silver = 1;
s.ResourceType.Gold = 2;
s.ResourceType.Ticket = 3;
s.ResourceType.HongBaoTicket = 4;
s.ResourceType.Diamond = 5;
s.ResourceType.Jade = 6;
s.ResourceType.QMBullet = 7;
s.ResourceType.DJBullet = 8;
s.ResourceType.EnjoyGold = 30;
s.ResourceType.VipExp = 10;
s.ResourceType.ClubExp = 11;
s.ResourceType.ClubJiJin = 20;
s.ResourceType.CofferDiamond = 100;
s.ResourceType.ChangeNameCard = 5e3;
s.ResourceType.DiamondExpeCard = 5002;
s.ResourceType.GoldCard = 5003;
s.ResourceType.DiamondCard = 5005;
s.ResourceType.CarnivalConch = 6008;
s.ResourceType.MysticalGift = 7e3;
s.ResourceType.JiPaiQiTimes = 1e4;
s.ResourceType.JiPaiQiDay = 10100;
s.ResourceType.ShipAnchor = 21105;
s.ResourceType.DoubleFire = 21201;
s.ResourceType.PokerSpade = 21006;
s.ResourceType.PokerHeart = 21007;
s.ResourceType.PokerClub = 21008;
s.ResourceType.PokerDiamond = 21009;
s.ResourceType.PokerJoker = 21010;
s.ResourceType.DynjMask = 21100;
s.ResourceType.DynjGloves = 21101;
s.ResourceType.DynjSucker = 21102;
s.ResourceType.DynjGasBottle = 21103;
s.ResourceType.WarheadBronze = 21012;
s.ResourceType.WarheadSilver = 21013;
s.ResourceType.WarheadGold = 21014;
s.ResourceType.WarheadPlatinum = 21015;
s.CurrencyType = {};
s.CurrencyType.CoinForm = 1;
s.CurrencyType.DiamondForm = 2;
s.ShopType = {};
s.ShopType.GoldCard = 1e3;
s.ShopType.DiamondCard = 1002;
s.ShopType.NoviceGift = 3e3;
s.ShopType.KoiFishGift = 3002;
s.ShopType.UpToV8Gift = 3004;
s.ShopType.JiPaiQiTimes = 40003;
s.GiftType = {};
s.GiftType.GoldCard = 1e3;
s.GiftType.DiamondCard = 1001;
s.GiftType.FishCard = 1002;
s.ResourceChangeReson = {};
s.ResourceChangeReson.DdzFees = 161;
s.ResourceType.KuangBao = 21e3;
s.ResourceType.Frozen = 21001;
s.ResourceType.HaoJiao = 21002;
s.ResourceType.ShenDeng = 21003;
s.ResourceType.ForgeStone = 21004;
s.ResourceType.StoneElite = 21005;
s.ResourceType.Collimation = 21200;
s.PokersType = {};
s.PokersType.Spade = 21006;
s.PokersType.Heart = 21007;
s.PokersType.Club = 21008;
s.PokersType.Diamond = 21009;
s.PokersType.Joker = 21010;
s.WarheadType = {};
s.WarheadType.WarheadBronze = 21012;
s.WarheadType.WarheadSilver = 21013;
s.WarheadType.WarheadGold = 21014;
s.WarheadType.WarheadPlatinum = 21015;
s.WarheadType.WarheadHeDan = 21016;
s.BaronType = {};
s.BaronType.Mask = 21100;
s.BaronType.Gloves = 21101;
s.BaronType.Sucker = 21102;
s.BaronType.GasBottle = 21103;
s.ItemIconPath = [ {
pix: 50,
dirName: "50x50/"
}, {
pix: 76,
dirName: "76x70/"
}, {
pix: 114,
dirName: "114x100/"
}, {
pix: 200,
dirName: ""
} ];
s.ResourceType.ExchangeCard = 21104;
s.SSCCCardType = {};
s.SSCCCardType.SSCC_Diamond_J = 21110;
s.SSCCCardType.SSCC_Diamond_Q = 21111;
s.SSCCCardType.SSCC_Diamond_K = 21112;
s.SSCCCardType.SSCC_Diamond_A = 21113;
s.SSCCCardType.SSCC_Club_J = 21106;
s.SSCCCardType.SSCC_Club_Q = 21107;
s.SSCCCardType.SSCC_Club_K = 21108;
s.SSCCCardType.SSCC_Club_A = 21109;
s.SSCCCardType.SSCC_Heart_J = 21118;
s.SSCCCardType.SSCC_Heart_Q = 21119;
s.SSCCCardType.SSCC_Heart_K = 21120;
s.SSCCCardType.SSCC_Heart_A = 21121;
s.SSCCCardType.SSCC_Spade_J = 21114;
s.SSCCCardType.SSCC_Spade_Q = 21115;
s.SSCCCardType.SSCC_Spade_K = 21116;
s.SSCCCardType.SSCC_Spade_A = 21117;
var n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
ItemUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "e7eccSZGo9BS7+rMIgRzp6Y", "ItemUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = e("ItemConst"), n = {
getItemCfg: function(e) {
return ConfigMgr.getConfig("item_config").findFirst(function(t) {
return t.id == e;
});
},
getItemConfig: function(e) {
return n.getItemCfg(e);
},
getItemName: function(e) {
return n.getItemCfg(e).name;
},
getItemDefaultPng: function() {
return this.toItemPngPath("icon_a_100");
},
getItemPng: function(e) {
var t = n.getItemCfg(e);
if (TypeUtils.isRealNull(t)) {
logger.error("找不到物品配置:", e);
return this.toItemPngPath("icon_a_100");
}
return this.toItemPngPath(t.icon);
},
getItemPngByCfg: function(e, t) {
!TypeUtils.isRealNull(e) && TypeUtils.isArray(e[0]) && (e = e[0]);
var i = e.itemId, s = e.amount || 0;
if (TypeUtils.isRealNull(i) && !TypeUtils.isRealNull(e.prizeId)) {
i = this.getItemConfigByPrizeId(e.prizeId);
if (TypeUtils.isRealNull(i)) {
logger.error("根据后台ID找不到物品配置:" + e.prizeId);
return this.toItemPngPath("icon_a_100", t);
}
}
var n = ConfigMgr.getConfig("goods_icon_config").findFirst(function(e) {
return e.id == i && e.interval[0] <= Number(s) && (e.interval[1] >= Number(s) || -1 == e.interval[1]);
});
if (!TypeUtils.isRealNull(n)) return this.toItemPngPath(n.icons, t);
var o = this.getItemConfig(i);
if (TypeUtils.isRealNull(o)) {
logger.error("找不到物品配置:" + i);
return this.toItemPngPath("icon_a_100", t);
}
return this.toItemPngPath(o.icon, t);
},
toItemPngPath: function(e, t) {
return "module/fish/texture/icon/" + e;
},
getItemNum: function(e) {
TypeUtils.isRealNull(e) && logger.error("itemId == null");
var t = n.getItemCfg(e);
if (t.type == s.ItemType.Resource) return n.getCurrencyModel().getResourceNum(t.id);
if (t.type == s.ItemType.BagItem) {
return n.getBagModel().getItemNum(e);
}
return 0;
},
getItemConfigByPrizeId: function(e) {
var t = ConfigMgr.getConfig("item_config").findFirst(function(t) {
return TypeUtils.isRealNull(t.centerGoodId) && t.centerGoodId == e;
});
return TypeUtils.isRealNull(t) ? null : t.id;
},
getWarheadGunType: function(e) {},
getItemBaronMultiple: function(e) {
var t = n.getItemCfg(e), i = 0;
t && t.baronMultiple && (i = t.baronMultiple);
return i;
},
getPokerColor: function(e) {
var t, i = n.getItemCfg(e || -1);
i && i.pokerColor && (t = i.pokerColor);
return t;
},
getItemSSSCCardInfo: function(e) {
var t, i = n.getItemCfg(e || -1);
i && i.ssscCard && (t = i.ssscCard);
return t;
},
getItemGiveConfig: function(e) {
return ConfigMgr.getConfig("item_give_config").findByIndex(e);
},
isCurrenyItem: function(e) {
return e == s.ResourceType.Gold || e == s.ResourceType.Jade || e == s.ResourceType.EnjoyGold;
},
isSSCCCardItem: function(e) {
for (var t in s.SSCCCardType) if (s.SSCCCardType.hasOwnProperty(t)) {
if (e == s.SSCCCardType[t]) return !0;
}
return !1;
},
isItemShow: function(e) {
var t = this.getItemConfig(e || -1);
return !(!TypeUtils.isRealNull(t) && t.noShow);
},
isEnough: function(e) {
if (TypeUtils.isRealNull(e)) logger.error("ItemUtils:isEnough costCfg is null"); else {
if (this.getItemNum(e.itemId) >= Number(e.amount)) return !0;
TipsUtils.showTips(this.getItemName(e.itemId) + "不足");
}
return !1;
},
getBagModel: function() {
return app.ctrls.bag.getModel();
},
getCurrencyModel: function() {
return app.ctrls.currency.getModel();
}
}, o = n;
i.default = o;
t.exports = i.default;
cc._RF.pop();
}, {
ItemConst: "ItemConst"
} ],
JsonManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "993cdkkapVJh7UH34RqfLjh", "JsonManager");
cc.Class({
extends: BaseAssetManager,
properties: {
_name: {
default: "JsonManager",
override: !0
}
},
loadResourceReal: function(e, t) {
JsonUtils.loadForMgr(e, function(i) {
t(e, i);
});
}
});
cc._RF.pop();
}, {} ],
JsonUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "82879r0o7dPF4hypFCR4cnk", "JsonUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
data2Json: function(e) {
return JSON.stringify(e);
},
json2Data: function(e) {
return JSON.parse(e);
},
filter: function(e) {},
loadForMgr: function(e, t) {
LoadUtils.loadRes(e, function(e, i) {
e ? console.warn("JsonUtils error:", e) : t(i.json);
});
},
load: function(e, t) {
logger.warn("弃用方法,现在使用this._loadJson 来进行加载和管理资源");
LoadUtils.loadRes(e, function(e, i) {
e ? console.warn("JsonUtils error:", e) : t(i.json);
});
},
loadModuleJson: function(e, t, i) {
logger.warn("弃用方法,现在使用this._loadJson 来进行加载和管理资源");
var s = "module/" + e + "/config/" + t;
console.log(s);
LoadUtils.loadRes(s, function(e, t) {
e ? console.warn("JsonUtils error:" + e) : i(t.json);
});
}
}, n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
KeyboardManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "ae7c7d//O1CJJz2Gt9ZGXyN", "KeyboardManager");
cc.Class({
extends: BaseManager,
ctor: function() {
if (!GlobalUtils.isRelease()) {
this.initData();
this.initKeyBoardEvent();
}
},
onExit: function() {
cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);
cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);
},
initData: function() {
this.keyCombo = [];
for (var e = 1; e <= 2; e++) {
this.keyCombo.push([]);
}
},
initKeyBoardEvent: function() {
cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);
cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);
},
onKeyDown: function(e) {
this.pushKey(e.keyCode);
this.pressKey(e.keyCode);
},
onKeyUp: function(e) {
this.popKey(e.keyCode);
this.releaseKey(e.keyCode);
},
pushKey: function(e) {
for (var t = 0; t < this.keyCombo.length; t++) this.keyCombo[t].push(e);
},
popKey: function(e) {
for (var t = 0; t < this.keyCombo.length; t++) this.keyCombo[t] = this.keyCombo[t].filter(function(t) {
return t !== e;
});
},
pressKey: function(e) {
var t = this;
logger.info("keycode = ", e);
if (2 == this.keyCombo[1].length) switch (this.keyCombo[1][0]) {
case cc.macro.KEY.ctrl:
this.checkCtrlDoubleKey(this.keyCombo[1][1]);
} else switch (e) {
case cc.macro.KEY.k:
session.request(M_Debug.dealGmCommand, "kill 1", function(e) {
t.reEnterFishRoom();
}, null, !1);
}
},
releaseKey: function(e) {},
checkCtrlDoubleKey: function(e) {
switch (e) {
case 49:
logger.info("ctrl + 1");
ViewManager.showView("TOWER_DEBUG_VIEW");
break;

case cc.macro.KEY.u:
session.request(M_Debug.receiveItemList, {
itemId: 5,
amount: 2e5
}, function(e) {}, null, !1);
session.request(M_Debug.receiveItemList, {
itemId: 21004,
amount: 2e5
}, function(e) {}, null, !1);
session.request(M_Debug.receiveItemList, {
itemId: 21005,
amount: 2e5
}, function(e) {}, null, !1);
for (var t = 0; t < 46; t++) setTimeout(function() {
app.ctrls.bag.requestGunForge(!0);
}, .1);
}
},
reEnterFishRoom: function() {
var e = this, t = app.fishCtrls.catchFish;
if (!TypeUtils.isRealNull(t)) {
var i = t.getModel().getRoomType();
t.leaveRoom(function() {
ViewManager.closeView("CATCH_FISH_VIEW");
TimeMgr.delayTime(function() {
t.enterRoom(i);
}, 1, e);
});
}
}
});
cc._RF.pop();
}, {} ],
LangOfCN: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "f946aNjcZ5CooPfQgO49qdL", "LangOfCN");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
CONFIRM: "确认",
CANCEL: "取消",
EXIT: "退出",
REQUEST_SERVER_DATA_FAILURE: "请求后台数据失败",
CHECK_THE_NETWORK_IS_GOOD: "请检查网络是否良好！",
INVALID_ARG: "参数错误",
HTTP_METHOD_ERROR: "HTTP请求方法错误",
USERNAME_IS_NULL: "请输入用户名",
PWD_IS_NULL: "请输入密码",
CONNECT_SERVER_FAILURE: "游戏服务器连接失败",
API_METHOD_NOT_SUPPORT: "API方法名不支持",
LOGIN_NOEXIST_PLAYER: "用户不存在",
LOGIN_EXIST_PLAYER: "用户已存在",
LOGIN_SERVER_MAINTAIN: "服务器正在维护中，预计开服时间：<color=#00ff00 >%02d点%02d分</c>",
LOGIN_TITLE: "登录",
DISCONNECTED: "因网络波动，请重新连接服务器",
TIPS_TXT: "提示",
RELOGIN: "重新登录",
LOGIN_IDENTIFY_ERROR: "验证码输入错误",
LOGIN_ACCOUNT_MISMATCH: "手机绑定的账号与当前的账号不匹配",
LOGIN_MODIFY_FAIL: "修改密码失败",
LOGIN_NOBIND_PHONE: "未绑定手机号",
LOGIN_RETRY_FAIL: "修改密码失败，请重试",
LOGIN_IDENTIFY_SUSS: "获取验证码成功，请输入验证码",
LOGIN_WRONG_PHONE: "未找到该手机号码，请检查输入是否正确",
LOGIN_BUSY_IDENTIFY: "获取验证码过于频繁，请稍后再试",
LOGIN_GETIDEN_FAIL: "获取验证码失败，请重试",
LOGIN_MODIFY_SUSS: "修改密码成功",
LOGIN_PARAM_ERROR: "请求参数出错",
LOGIN_OLDPSW_ERROR: "原始密码不正确",
LOGIN_OPERA_FAIL: "操作失败",
LOGIN_CREATE_ROLE_TITLE: "创建角色",
LOGIN_NICK_NAME: "昵称",
NICKNAME_IS_NULL: "昵称不能为空！",
NICKNAME_NOT_CHANGE: "昵称与原有昵称一致！",
NICKNAME_IS_VALID: "昵称输入不合法！",
GET_LOGIN_INGO: "修改密码",
LOGIN_PHONE_ELEVN: "请填写11位手机号码",
LOGIN_IDENTIFY_NEED: "请输入验证码",
LOGIN_WTRITE_NEWPWD: "请输入新密码",
LOGIN_WTRITE_PWD_AGAIN: "请再次填写密码",
LOGIN_ACCOUNT_1: "请输入手机号或账号登陆",
LOGIN_ACCOUNT_2: "请输入账号登陆",
LOGIN_FULL_INFO: "请输入完整信息",
LOGIN_PSW_DIFF: "两次密码输入不一致",
LOGIN_PSW_DIFF_2: "新密码不一致，请重新输入",
PHONE_LENGTH_ERROR: "手机号码有误",
LOGIN_START_GAME: "开始游戏",
NOT_NET_TIPS: "没有网络",
LOGIN_SERVER_SELECT_TITLE: "选择服务器",
SWITCHLOGIN_TIPS_1: "至少6位字符，不含特殊符号",
SWITCHLOGIN_TIPS_2: "不少于6位字符",
ACCOUNT_INVALID: "请输入至少6位字符的账号",
PASSWORD_INVALID: "请输入至少6位字符的密码",
LOADING_TITLE: "加载资源中...",
GAME_HALL_MOREGAME: "更多游戏更新中,敬请期待..",
COMMON_UNIT_TENTHOUSEND: "万",
SETTING_CHANGE_SUCCESS: "修改成功",
ANNOUNCEMENT_TITLE: "公告",
ALMS_TIPS1: "救济金",
ALMS_TIPS2: "后可领取",
ALMS_TIPS3: "点击可领取",
BAGCONST_TIPS_1: "道具",
BAGCONST_TIPS_2: "炮塔",
GIVE_ITEM_SUCCESS: "赠送道具成功",
RECEIVER_ID_IS_ERROR: "请填写正确的玩家ID",
GIVE_NUM_IS_ERROR: "请填写正确的数量",
IS_GIVING: "正在赠送物品，请稍候重试",
GIVE_BY_CHARGE_NOT_ENOUGH: "累计充值金额达到%s才能赠送",
LABA_NUM_NOT_ENOUGH: "大喇叭数量不足！",
BAG_DETAIL_CONFIG_GIFT: "赠送",
BAG_DETAIL_CONFIG_GET: "获得",
BAG_DETAIL_CONFIG_SAIL: "出售",
BAG_DETAIL_CONFIG_USE: "使用",
BAG_DETAIL_CONFIG_NUMBER: "拥有数量：",
BAG_DETAIL_CONFIG_TIME: "剩余时间：",
BAG_DETAIL_CONFIG_FOREVER: "永久获得",
BAG_DETAIL_CONFIG_EFFECT: "有效时间：",
GIFT_RECORD_GETTXT1: "<color=#5ef869 >（获得）%s</c>",
GIFT_RECORD_GETTXT2: "用户【<color=#fafa6c >ID:%s</c>】<color=#51cce0 >%s</c>",
GIFT_RECORD_GETTXT3: "赠送给您<color=#ff9539 >%s</c>个<color=#ff9539 >%s</c>",
GIFT_RECORD_GIVETXT1: "<color=#f065ff>（赠送）%s</c>",
GIFT_RECORD_GIVETXT2: "您赠送了<color=#ff9539 >%s</c>个<color=#ff9539 >%s</c>给",
GIFT_RECORD_GIVETXT3: "用户【<color=#fafa6c >ID:%s</c>】<color=#51cce0 >%s</c>",
COMMON_GE: "%s个",
COMMON_EQUIPPED: "已装备",
COMMON_EQUIPPED_2: "已拥有",
COMMON_DAY: "天",
COMMON_TIPS_NOGET: "未拥有该物品",
COMMON_ID_IS_ERROR: "请填写正确的玩家ID",
COMMON_TIPS_NUMBER: "请输入数字",
SHOP_EQUIP: "装备",
GAME_EXIT_MSG: "您确定要退出游戏吗？",
NICKNAME_MODITY: "最多6个字...",
NICKNAME_MODITY_CONSUME: "本次修改需要消耗改名卡*%s,现有：%s张",
SEND_VERIFY_CODE_SUC: "验证码已发送",
INPUT_PHONE_NUM: "请输入手机号码",
INPUT_CODE_NUM: "请输入验证码",
CODE_BE_OVERDUE: "验证码已过期",
NO_CODE_INFO: "没有验证码信息",
PHONE_NUM_ATYPISM: "手机号码不一致!",
BIND_PHONE_FAIL: "绑定手机号失败!",
PLAYER_HAD_BIND_PHONE: "用户已绑定此手机号!",
INPUT_PHONE_NUM_NULL: "请填写正确的手机号码!",
VERIFY_CODE_NULL: "验证码不能为空！",
VERIFY_CODE_CORRECT: "请输入正确的验证码!",
VERIFY_CODE_CD: "%s秒后重试",
GET_VERIFY_CODE: "获取验证码",
PHONE_NUM_IS_BOUND: "手机号码已绑定",
PHONE_NUM_HAS_BOUND: "此手机号已被绑定!",
HAS_CERTIFIED: "已实名认证,不需要重复验证",
INVALID_ID_CARD: "无效身份证",
CARD_NUMBER_IS_ERROR: "身份证号不正确",
ID_CARD_HAD_BOUND: "该身份证号码已被绑定",
IS_BOUND: "已绑定",
NOT_BOUND: "未绑定",
IS_CERTIFIED: "已认证",
NOT_CERTIFIED: "未认证",
INPUT_REALNAME: "请输入姓名",
INPUT_REALNAME_CORRECT: "请正确输入您的姓名",
INPUT_WECHAT: "请输入您的微信号",
INPUT_WECHAT_NULL: "微信号不能为空！",
INPUT_CCERTIFIC: "请输入身份证号码",
INPUT_CCERTIFIC_CORRECT: "请输入正确的身份证号码",
BIND_PHONE_NUM: "绑定手机号",
REALNAME_AUTHENTICATION: "实名认证",
BIND_WECHAT: "微信认证",
BIND_PHONE_DES: "手机认证后即可获得：",
AUTHENTICATION_DES: "实名认证后即可获得：",
WECHAT_BIND_DES: "微信认证后即可获得：",
SIGNATURE_DEFAULT: "这个人很懒，什么也没留下.....",
INPUT_SAVE_OR_TAKE_NUM: "请输入要存取的金币数量",
INPUT_PLAYER_ID: "请输入玩家ID",
INPUT_SEND_MONEY_NUM: "请输入赠送金额",
UPDATE_TITLE: "游戏更新",
UPDATE_CHECK_TITLE: "检查更新中...",
UPDATE_DOWNLOAD_TITLE: "%0.1fM/%0.1fM",
UPDATE_DOWNLOAD_TITLE_2: "%s/%s",
UPDATE_VERIFY_TITLE: "验证更新文件中...",
UPDATE_DECOMPRESS_TITLE: "解压中\n%0.1f%%",
UPDATE_VERSION_FAIL: "下载版本文件失败，是否重试？",
UPDATE_ASSETS_FAIL: "下载更新资源失败，是否重试？",
UPDATE_DECOMPRESS_FAIL: "解压失败，是否重试？",
UPDATE_VERIFY_FAIL: "验证更新文件失败，是否重试？",
UPDATE_BASE_VERSION_FAIL: "版本校验失败,游戏版本过旧,请下载最新的游戏包",
UPDATE_RETRY: "重试",
UPDATE_GODOWNLOAD: "前往下载",
UPDATE_NEED_DOWNLOAD: "需下载",
UPDATE_NEED_UPDATE: "需热更",
ERROR_GO_TO_HIGHT_LV_ROOM: "请前往更高级场",
CATCH_FISH_GUNLEVL: "炮台>=%s炮倍",
CATCH_FISH_CONDITION: "进房条件: %s%s",
CATCH_FISH_CONDITION1: "进房条件: %s金币",
CATCH_FISH_CONDITION2: "进房条件: %s钻石",
CATCH_FISH_CONDITION3: "进房条件: %s金券",
CATCH_FISH_NOLIMIT: "进房条件: 无限制",
CATCH_FISH_CANNOTJOIN: "金币不足 不能进入%s",
CATCH_FISH_CANNOTJOIN2: "子弹不足 不能进入%s",
GOLD_TOAD_FEED_SUCCESS: "金蟾喂食成功",
GOLD_TOAD_LEVEL_UP_SUCCESS: "金蟾升级成功",
GOLD_TOAD_NOT_ENOUGH: "食物不足",
GOLD_TOAD_LEVEL_DESC: "<color=#ffffff outline=#011d33,2>等级:<color=#fff66b outline=#011d33,2>%s级</c></c>",
GOLD_TOAD_FOOD_NUM_DESC: "<color=#ffffff outline=#011d33,2><color=#fff66b outline=#011d33,2>%s克</c>/天(升级<color=#52d95f outline=#011d33,2>+%s</c>)</c>",
GOLD_TOAD_BULLET_NUM_DESC: "<color=#ffffff outline=#011d33,2><color=#fff66b outline=#011d33,2>%s</c>/秒(升级<color=#52d95f outline=#011d33,2>+%s</c>)</c>",
GOLD_TOAD_BULLET_RATE_DESC: "<color=#ffffff outline=#011d33,2><color=#fff66b outline=#011d33,2>%s</c>/%s</c>",
GOLD_TOAD_FEED_DESC: "投递:%s克",
GOLD_TOAD_SATISFACTION_DESC: "%s%%",
GOLD_TOAD_FOOD_DESC2: "%s克",
GOLD_TOAD_CAN_NOT_GET_AWARDS: "不能领取子弹",
GOLD_TOAD_TIPS: "饱食度影响升级和产量.金蟾每天早上八点钟开始进食,请确保食物充足",
COMMON_NEED_RECHARGE1: "您的金币不足!",
COMMON_NEED_RECHARGE2: "您的玉石不足!",
NORMAL_ROOM_ALERT: "确定要离开该房间吗？",
CATCH_FISH_PAO_BEI: "%s-%s倍",
MW_ARG_FORMAT: "?mwaction=%s&mwcode=%s",
SHOP_BUY_UNIT: "元",
SHOP_TAB_GOLD: "金 钻",
HTTP_ARG_ERROR: "参数错误",
HTTP_ADD_ADDRESS_ERROR: "添加收货地址失败",
HTTP_ERROR_CODE_300007: "已达到参与人满开奖的人数",
LUCKY_BAG_TITLE: "幸运福袋",
LUCKY_BAG_NUM_TITLE: "福袋个数:",
LUCKY_BAG_OPEN_LABEL_1: "开1个",
LUCKY_BAG_OPEN_LABEL_2: "开10个",
LUCKY_BAG_ALL_RECORDS: "幸运记录",
LUCKY_BAG_MY_RECORDS: "我的记录",
LUCKY_BAG_AWARDS: "奖品展示:",
LUCKY_BAG_MY_AWARDS: "我的实物",
LUCKY_BAG_TITLE_AWARD: "奖励",
LUCKY_BAG_TITLE_TIME: "时间",
LUCKY_BAG_TITLE_STATE: "状态",
LUCKY_BAG_RECORD_LABEL1: "<color=#8abb30 >%s</c>鸿运当头单抽中了<color=#f29a28 >%s</c>",
LUCKY_BAG_RECORD_LABEL2: "<color=#8abb30 >%s</c>洪福齐天十连抽中了<color=#f29a28 >%s</c>",
LUCKY_BAG_OPEN_NOT_ENOUGH: "您的福袋不足！是否直接购买？",
LUCKY_BAG_RECORD_STATE_1: "处理中",
LUCKY_BAG_RECORD_STATE_2: "已完成",
LUCKY_BAG_BIND_PHONE: "福袋功能需要先绑定手机，现在就去绑定吧？",
LUCKY_BAG_LEFT_TIME: "活动倒计时:",
WISHWELL_LEFT_AWARDS_NUM: "总许愿次数:%s/%s",
WISHWELL_LEFT_AWARD_NUM: "剩余:%s",
WISHWELL_TIME_OUT: "活动已结束",
WISHWELL_BTN_1: "许愿 %s 次",
WISHWELL_CARD_TITLE: "话费券数量:",
TXT_MY_REWARD: "我的奖品",
LOTTERY_TIME_TITLE: "活动时间:",
CAPTURE_SCREEN_ERROR: "截图失败",
SHARE_IMAGE_SUCCESS: "分享成功",
SHARE_IMAGE_FAILURE: "分享失败",
GUN_LEVEL_UP_OPEN: "点击解锁%s炮倍",
FISH_ROOM_ENTRY_CONDITION: "%s~%s炮倍",
GOLD_FISH_LOTTERY_TIPS: "您离<color=#8abb30 >%s</c>只差<color=#f29a28 >%s金币</c>,确定要继续抽奖吗？",
NAME_DIAMOND: "金钻",
FISH_TASK_CONTENT: "<color=#FFFFFF outline=#183177,1>%s</c><color=#FFDF05 outline=#743100,1>%s/%s</c>",
FISH_TASK_REWARD_TIPS: "<color=#FFFFFF outline=#183177,1>点击领取任务奖励</c>",
GUN_UNLOCK_TIPS: "请先升级炮倍~",
FISH_ROOM_CONDITION_TIPS: "炮倍不足，进入失败",
SKILL_COUNTDOWN: "技能冷却中...",
GUN_LEVEL_UNLOCK_SUCC: "成功解锁%s炮倍",
GUN_LEVEL_UNLOCK_SUCC_AWARD: "成功解锁%s炮倍，获得了%s",
GUN_LEVEL_UNLOCK_FAILURE: "炮倍解锁失败",
GUN_FORGE_TIPS_1: "锻造至%s倍",
GUN_FORGE_TIPS_2: "当前炮能力",
GUN_FORGE_TIPS_3: "升炮后能力",
GUN_FORGE_MAX_LEVEL: "已锻造至最高等级",
GUN_FORGE_RESULT_01: "成功锻造了             炮倍",
GUN_FORGE_RESULT_02: "材料返还",
FISH_ROOM_ENTRY_FAILURE_1: "进入失败，请先提升炮倍~",
FISH_ROOM_ENTRY_FAILURE_2: "您太厉害了，请去高级场玩吧",
FISH_GUN_GAIN_TIPS: "升级VIP即可获得",
FISH_ROOM_EXIT_TIPS: "游戏正在进行，您确定退出？",
QUICK_BUY_ITEM_TIPS: "没有免费道具次数，是否购买？",
SEVEN_DAY_TITLE: "第%s天",
SOMETHING_NOTENOUGH: "%s不足",
FISH_SKILL_USE_TIPS: "当前房间不能使用此技能",
POKER_COLORS_TIPS_01: "炮台倍率越大，花色掉落机会越大",
POKER_COLORS_TIPS_02: "已获得花色，可以兑换奖励",
GUN_FORGE_OPEN_TIPS: "锻造%s炮倍开启",
SHENDENG_USE_TIPS: "冰冻期间，不能使用神灯",
HAOJIAO_USE_TIP: "冰冻期间，不能使用号角",
FISH_NUM_LIMIT_TIPS: "鱼儿已经挤不下了",
BULLET_AUTO_LOSE_TIPS: "目标鱼已消失",
BULLET_AIM_GOLD_FISH: "请瞄准黄金鱼开炮",
SHUIHU_CHANGE_MULTIPLE_TIPS: "抽奖期间不能修改押注倍率",
FISH_ITEM_NOTENOUGH_TIPS: "%s不足，是否购买？",
GAME_PLAYING_TIPS: "游戏过程中无法退出",
USING_WARHEAD_TIPS: "正在使用弹头中",
BOSS_TASK_UNDERWAY: "BOSS任务进行中",
CRAZY_ITEM_NOT_ENOUGH_TIPS1: "%s不足，不能使用狂暴",
CRAZY_ITEM_NOT_ENOUGH_TIPS2: "%s不足，停止开炮",
BOSS_ESCAPE_TIPS: "BOSS%s溜走了",
HAOJIAO_USE_TIPS: "使用%s个%s召唤%s，是否现在使用？",
AIM_COUNTDOWN_TIPS: "瞄准冷却中...",
SHOP_BUY_VIP_LIMIT_TIPS: "VIP%s才能购买%s",
HAOJIAO_USE_VIP_LIMIT: "VIP4才可使用号角喔~",
PLAYER_LEVELUP_TIPS: "恭喜升到%s级~",
STRIKES_FROZEN_TIPS: "鱼潮期间，不能使用冰冻",
FIRE_MAX_BULLET_TIPS: "子弹太多了，慢一点",
PLEASE_SELECT_HAMMER_TIPS: "请先选中锤子",
FISH_CANNOT_BORN_TIPS: "鱼儿已经挤不下了",
ACTCODE_USE_SUCC_TIPS: "使用成功",
ENTER_MATCH_ROOM_TIPS: "报名成功，进入比赛",
CRAZY_MUTIPLE_USE_TIPS: "当前房间无法使用4倍狂暴",
FINGER_PLAY_DESC_TIPS: "点击选择石头、剪刀、布按钮进行猜拳，胜利可获得%s奖励",
ENTER_ROOM_ERROR_MSG_1: "炮倍不足，进入失败",
ENTER_ROOM_ERROR_MSG_2: "您太厉害了，请去高级场玩吧",
ENTER_ROOM_ERROR_MSG_3: "%s不足，进入失败",
ENTER_ROOM_ERROR_MSG_4: "没有可以进入的场次",
UNION_DEPOT_CODE_ERROR: "请正确输入取出码",
UNION_DEPOT_PUTIN_SUCC: "物品存入成功",
UNION_DEPOT_TAKEOUT_SUCC: "物品取出成功",
DOUBLE_FIRE_COUNTDOWN: "翻倍卡冷却中",
CLUB_DEPOT_OPEN_ERROR_TIPS: "开启月卡后可使用仓库哦~"
};
i.default = s;
t.exports = i.default;
cc._RF.pop();
}, {} ],
ListItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "ad155LhdSdGx5jUaVRKlhKM", "ListItem");
var s = cc.Enum({
NONE: 0,
TOGGLE: 1,
SWITCH: 2
});
cc.Class({
editor: {
disallowMultiple: !1,
menu: "自定义组件/List Item",
executionOrder: -5001
},
extends: cc.Component,
properties: {
icon: {
default: null,
type: cc.Sprite
},
title: cc.Node,
selectedMode: {
default: s.NONE,
type: s,
tooltip: !1
},
selectedFlag: {
default: null,
type: cc.Node,
visible: function() {
var e = this.selectedMode > 0;
e || (this.selectedFlag = null);
return e;
}
},
selectedSpriteFrame: {
default: null,
type: cc.SpriteFrame,
visible: function() {
var e = this.selectedMode == s.SWITCH;
e || (this.selectedSpriteFrame = null);
return e;
}
},
adaptiveSize: {
default: !1,
tooltip: !1
},
_selected: !1,
selected: {
visible: !1,
get: function() {
return this._selected;
},
set: function(e) {
this._selected = e;
if (this.selectedFlag) switch (this.selectedMode) {
case s.TOGGLE:
this.selectedFlag.active = e;
break;

case s.SWITCH:
this.selectedFlag.spriteFrame = e ? this.selectedSpriteFrame : this._unselectedSpriteFrame;
}
}
},
_btnCom: null,
btnCom: {
visible: !1,
get: function() {
this._btnCom || (this._btnCom = this.node.getComponent(cc.Button));
return this._btnCom;
}
}
},
onLoad: function() {
if (this.title) {
var e = this.title.getComponent(cc.Label);
e || (e = this.title.getComponent(cc.RichText));
this.title = e;
}
this.btnCom || (this.selectedMode, s.NONE);
if (this.selectedMode == s.SWITCH) {
var t = this.selectedFlag.getComponent(cc.Sprite);
this.selectedFlag = t;
this._unselectedSpriteFrame = t.spriteFrame;
}
},
onDestroy: function() {
var e = this;
e.node.off(cc.Node.EventType.SIZE_CHANGED, e._onSizeChange, e);
},
_registerEvent: function() {
var e = this;
if (!e.eventReg) {
e.btnCom && e._list.selectedMode > 0 && e.btnCom.clickEvents.unshift(e.createEvt(e, "onClickThis"));
e.adaptiveSize && e.node.on(cc.Node.EventType.SIZE_CHANGED, e._onSizeChange, e);
e.eventReg = !0;
}
},
_onSizeChange: function() {
this._list._onItemAdaptive(this.node);
},
createEvt: function(e, t, i) {
if (e.isValid) {
e.comName = e.comName || e.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g, "");
var s = new cc.Component.EventHandler();
s.target = i || e.node;
s.component = e.comName;
s.handler = t;
return s;
}
},
showAni: function(e, t, i) {
var s, n = this;
switch (e) {
case 0:
s = [ new cc.scaleTo(.2, .7), new cc.moveBy(.3, 0, 2 * this.node.height) ];
break;

case 1:
s = [ new cc.scaleTo(.2, .7), new cc.moveBy(.3, 2 * this.node.width, 0) ];
break;

case 2:
s = [ new cc.scaleTo(.2, .7), new cc.moveBy(.3, 0, -2 * this.node.height) ];
break;

case 3:
s = [ new cc.scaleTo(.2, .7), new cc.moveBy(.3, -2 * this.node.width, 0) ];
break;

default:
s = [ new cc.scaleTo(.3, .1) ];
}
(t || i) && s.push(new cc.CallFunc(function() {
if (i) {
n._list._delSingleItem(n.node);
for (var e = n._list.displayData.length - 1; e >= 0; e--) if (n._list.displayData[e].listId == n.node._listId) {
n._list.displayData.splice(e, 1);
break;
}
}
t();
}));
this.node.runAction(new cc.Sequence(s));
},
onClickThis: function() {
this._list.selectedId = this.node._listId;
}
});
cc._RF.pop();
}, {} ],
ListUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "2adbfejcJdKbaCTPX8cFl1i", "ListUtils");
cc.Class({
extends: cc.Component,
properties: {},
start: function() {}
});
cc._RF.pop();
}, {} ],
List: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "e30afLHDgtM4qKlw116ui3p", "List");
var s = cc.Enum({
NODE: 1,
PREFAB: 2
}), n = cc.Enum({
NORMAL: 1,
ADHERING: 2,
PAGE: 3
}), o = cc.Enum({
NONE: 0,
SINGLE: 1,
MULT: 2
}), a = e("ListItem");
cc.Class({
extends: cc.Component,
editor: {
disallowMultiple: !1,
menu: "自定义组件/List",
requireComponent: cc.ScrollView,
executionOrder: -5e3
},
properties: {
templateType: {
default: s.NODE,
type: s
},
tmpNode: {
default: null,
type: cc.Node,
tooltip: !1,
visible: function() {
var e = this.templateType == s.NODE;
e || (this.tmpNode = null);
return e;
}
},
tmpPrefab: {
default: null,
type: cc.Prefab,
tooltip: !1,
visible: function() {
var e = this.templateType == s.PREFAB;
e || (this.tmpPrefab = null);
return e;
}
},
_slideMode: 1,
slideMode: {
type: n,
tooltip: !1,
get: function() {
return this._slideMode;
},
set: function(e) {
null != e && (this._slideMode = e);
}
},
pageDistance: {
default: .3,
type: cc.Float,
range: [ 0, 1, .1 ],
tooltip: !1,
slide: !0,
visible: function() {
return this._slideMode == n.PAGE;
}
},
pageChangeEvent: {
default: null,
type: cc.Component.EventHandler,
tooltip: !1,
visible: function() {
var e = this._slideMode == n.PAGE;
e || (this.pageChangeEvent = null);
return e;
}
},
_virtual: !0,
virtual: {
tooltip: !1,
get: function() {
return this._virtual;
},
set: function(e) {
null != e && (this._virtual = e);
0 != this._numItems && this._onScrolling();
}
},
cyclic: {
default: !1,
tooltip: !1,
visible: function() {
var e = this.virtual && this.slideMode == n.NORMAL;
e || (this.cyclic = !1);
return e;
}
},
lackCenter: {
default: !1,
tooltip: !1,
visible: function() {
return this.virtual;
}
},
lackSlide: {
default: !1,
tooltip: !1,
visible: function() {
var e = this.virtual && !this.lackCenter;
e || (this.lackSlide = !1);
return e;
}
},
_updateRate: 0,
updateRate: {
type: cc.Integer,
range: [ 0, 6, 1 ],
tooltip: !1,
slide: !0,
get: function() {
return this._updateRate;
},
set: function(e) {
e >= 0 && e <= 6 && (this._updateRate = e);
}
},
frameByFrameRenderNum: {
default: 0,
type: cc.Integer,
range: [ 0, 12, 1 ],
tooltip: !1,
slide: !0
},
renderEvent: {
default: null,
type: cc.Component.EventHandler,
tooltip: !1
},
selectedMode: {
default: o.NONE,
type: o,
tooltip: !1
},
repeatEventSingle: {
default: !1,
tooltip: !1,
visible: function() {
return this.selectedMode == o.SINGLE;
}
},
selectedEvent: {
default: null,
type: cc.Component.EventHandler,
tooltip: !1,
visible: function() {
var e = this.selectedMode > 0;
e || (this.selectedEvent = null);
return e;
}
},
_selectedId: -1,
selectedId: {
visible: !1,
get: function() {
return this._selectedId;
},
set: function(e) {
var t, i = this;
switch (i.selectedMode) {
case o.SINGLE:
if (!i.repeatEventSingle && e == i._selectedId) return;
t = i.getItemByListId(e);
i._selectedId >= 0 ? i._lastSelectedId = i._selectedId : i._lastSelectedId = null;
i._selectedId = e;
t && (t.listItem.selected = !0);
if (i._lastSelectedId >= 0 && i._lastSelectedId != i._selectedId) {
var s = i.getItemByListId(i._lastSelectedId);
s && (s.listItem.selected = !1);
}
i.selectedEvent && cc.Component.EventHandler.emitEvents([ i.selectedEvent ], t, e % this._actualNumItems, i._lastSelectedId % this._actualNumItems);
break;

case o.MULT:
if (!(t = i.getItemByListId(e))) return;
if (!i._canSele && !t.listItem.selected) {
cc.Component.EventHandler.emitEvents([ i.selectedEvent ], t);
return;
}
i._selectedId >= 0 && (i._lastSelectedId = i._selectedId);
i._selectedId = e;
var n = !t.listItem.selected;
t.listItem.selected = n;
var a = i.multSelected.indexOf(e);
n && a < 0 ? i.multSelected.push(e) : !n && a >= 0 && i.multSelected.splice(a, 1);
i.selectedEvent && cc.Component.EventHandler.emitEvents([ i.selectedEvent ], t, e % this._actualNumItems, i._lastSelectedId % this._actualNumItems, n);
}
}
},
_numItems: {
default: 0,
serializable: !1
},
numItems: {
visible: !1,
get: function() {
return this._actualNumItems;
},
set: function(e) {
var t = this;
if (t.checkInited()) if (null == e || e < 0) cc.error("numItems set the wrong::", e); else {
t._actualNumItems = t._numItems = e;
t._forceUpdate = !0;
if (t._virtual) {
t._resizeContent();
t.cyclic && (t._numItems = t._cyclicNum * t._numItems);
t._onScrolling();
t.frameByFrameRenderNum || t.slideMode != n.PAGE || (t.curPageNum = t.nearestListId);
} else {
var i = t.content.getComponent(cc.Layout);
i && (i.enabled = !0);
t._delRedundantItem();
t.firstListId = 0;
if (t.frameByFrameRenderNum > 0) {
for (var s = t.frameByFrameRenderNum > t._numItems ? t._numItems : t.frameByFrameRenderNum, o = 0; o < s; o++) t._createOrUpdateItem2(o);
if (t.frameByFrameRenderNum < t._numItems) {
t._updateCounter = t.frameByFrameRenderNum;
t._updateDone = !1;
}
} else {
for (var a = 0; a < e; a++) t._createOrUpdateItem2(a);
t.displayItemNum = e;
}
}
}
}
},
_canSele: !0,
canSele: {
visible: !1,
get: function() {
return this._canSele;
},
set: function(e) {
this._canSele = e;
}
}
},
onLoad: function() {
this._init();
},
onDestroy: function() {
this._itemTmp && this._itemTmp.isValid && this._itemTmp.destroy();
for (;this._pool.size(); ) {
this._pool.get().destroy();
}
},
onEnable: function() {
this._registerEvent();
this._init();
},
onDisable: function() {
this._unregisterEvent();
},
_registerEvent: function() {
var e = this;
e.node.on(cc.Node.EventType.TOUCH_START, e._onTouchStart, e, !0);
e.node.on("touch-up", e._onTouchUp, e, !0);
e.node.on(cc.Node.EventType.TOUCH_CANCEL, e._onTouchCancelled, e, !0);
e.node.on("scroll-began", e._onScrollBegan, e, !0);
e.node.on("scroll-ended", e._onScrollEnded, e, !0);
e.node.on("scrolling", e._onScrolling, e, !0);
e.node.on(cc.Node.EventType.SIZE_CHANGED, e._onSizeChanged, e);
},
_unregisterEvent: function() {
var e = this;
e.node.off(cc.Node.EventType.TOUCH_START, e._onTouchStart, e, !0);
e.node.off("touch-up", e._onTouchUp, e, !0);
e.node.off(cc.Node.EventType.TOUCH_CANCEL, e._onTouchCancelled, e, !0);
e.node.off("scroll-began", e._onScrollBegan, e, !0);
e.node.off("scroll-ended", e._onScrollEnded, e, !0);
e.node.off("scrolling", e._onScrolling, e, !0);
e.node.off(cc.Node.EventType.SIZE_CHANGED, e._onSizeChanged, e);
},
_init: function() {
var e = this;
if (!e._inited) {
e._scrollView = e.node.getComponent(cc.ScrollView);
e.content = e._scrollView.content;
if (e.content) {
e._layout = e.content.getComponent(cc.Layout);
e._align = e._layout.type;
e._resizeMode = e._layout.resizeMode;
e._startAxis = e._layout.startAxis;
e._topGap = e._layout.paddingTop;
e._rightGap = e._layout.paddingRight;
e._bottomGap = e._layout.paddingBottom;
e._leftGap = e._layout.paddingLeft;
e._columnGap = e._layout.spacingX;
e._lineGap = e._layout.spacingY;
e._colLineNum;
e._verticalDir = e._layout.verticalDirection;
e._horizontalDir = e._layout.horizontalDirection;
e.setTemplateItem(cc.instantiate(e.templateType == s.PREFAB ? e.tmpPrefab : e.tmpNode));
e._slideMode != n.ADHERING && e._slideMode != n.PAGE || (e._scrollView.inertia = !1);
e.virtual || (e.lackCenter = !1);
e._lastDisplayData = [];
e.displayData = [];
e._pool = new cc.NodePool();
e._forceUpdate = !1;
e._updateCounter = 0;
e._updateDone = !0;
e.curPageNum = 0;
if (e.cyclic) {
e._scrollView._processAutoScrolling = this._processAutoScrolling.bind(e);
e._scrollView._startBounceBackIfNeeded = function() {
return !1;
};
}
switch (e._align) {
case cc.Layout.Type.HORIZONTAL:
switch (e._horizontalDir) {
case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:
e._alignCalcType = 1;
break;

case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:
e._alignCalcType = 2;
}
break;

case cc.Layout.Type.VERTICAL:
switch (e._verticalDir) {
case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:
e._alignCalcType = 3;
break;

case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:
e._alignCalcType = 4;
}
break;

case cc.Layout.Type.GRID:
switch (e._startAxis) {
case cc.Layout.AxisDirection.HORIZONTAL:
switch (e._verticalDir) {
case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:
e._alignCalcType = 3;
break;

case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:
e._alignCalcType = 4;
}
break;

case cc.Layout.AxisDirection.VERTICAL:
switch (e._horizontalDir) {
case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:
e._alignCalcType = 1;
break;

case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:
e._alignCalcType = 2;
}
}
}
e.content.children.forEach(function(e) {
e.removeFromParent();
e.isValid && e.destroy();
});
e._inited = !0;
} else cc.error(e.node.name + "'s cc.ScrollView unset content!");
}
},
_processAutoScrolling: function(e) {
this._scrollView._autoScrollAccumulatedTime += 1 * e;
var t = Math.min(1, this._scrollView._autoScrollAccumulatedTime / this._scrollView._autoScrollTotalTime);
if (this._scrollView._autoScrollAttenuate) {
var i = t - 1;
t = i * i * i * i * i + 1;
}
var s = this._scrollView._autoScrollStartPosition.add(this._scrollView._autoScrollTargetDelta.mul(t)), n = this._scrollView.getScrollEndedEventTiming(), o = Math.abs(t - 1) <= n;
if (Math.abs(t - 1) <= this._scrollView.getScrollEndedEventTiming() && !this._scrollView._isScrollEndedWithThresholdEventFired) {
this._scrollView._dispatchEvent("scroll-ended-with-threshold");
this._scrollView._isScrollEndedWithThresholdEventFired = !0;
}
o && (this._scrollView._autoScrolling = !1);
var a = s.sub(this._scrollView.getContentPosition());
this._scrollView._moveContent(this._scrollView._clampDelta(a), o);
this._scrollView._dispatchEvent("scrolling");
if (!this._scrollView._autoScrolling) {
this._scrollView._isBouncing = !1;
this._scrollView._scrolling = !1;
this._scrollView._dispatchEvent("scroll-ended");
}
},
setTemplateItem: function(e) {
if (e) {
var t = this;
t._itemTmp = e;
t._resizeMode == cc.Layout.ResizeMode.CHILDREN ? t._itemSize = t._layout.cellSize : t._itemSize = new cc.size(e.width, e.height);
var i = e.getComponent(a), s = !1;
i || (s = !0);
i && (i._btnCom || e.getComponent(cc.Button) || (s = !0));
s && (t.selectedMode = o.NONE);
(i = e.getComponent(cc.Widget)) && i.enabled && (t._needUpdateWidget = !0);
t.selectedMode == o.MULT && (t.multSelected = []);
switch (t._align) {
case cc.Layout.Type.HORIZONTAL:
t._colLineNum = 1;
t._sizeType = !1;
break;

case cc.Layout.Type.VERTICAL:
t._colLineNum = 1;
t._sizeType = !0;
break;

case cc.Layout.Type.GRID:
switch (t._startAxis) {
case cc.Layout.AxisDirection.HORIZONTAL:
var n = t.content.width - t._leftGap - t._rightGap;
t._colLineNum = Math.floor((n + t._columnGap) / (t._itemSize.width + t._columnGap));
t._sizeType = !0;
break;

case cc.Layout.AxisDirection.VERTICAL:
var r = t.content.height - t._topGap - t._bottomGap;
t._colLineNum = Math.floor((r + t._lineGap) / (t._itemSize.height + t._lineGap));
t._sizeType = !1;
}
}
}
},
checkInited: function(e) {
e = null == e || e;
if (!this._inited) {
e && cc.error("List initialization not completed!");
return !1;
}
return !0;
},
_resizeContent: function() {
var e, t = this;
switch (t._align) {
case cc.Layout.Type.HORIZONTAL:
if (t._customSize) {
var i = t._getFixedSize();
e = t._leftGap + i.val + t._itemSize.width * (t._numItems - i.count) + t._columnGap * (t._numItems - 1) + t._rightGap;
} else e = t._leftGap + t._itemSize.width * t._numItems + t._columnGap * (t._numItems - 1) + t._rightGap;
break;

case cc.Layout.Type.VERTICAL:
if (t._customSize) {
var s = t._getFixedSize();
e = t._topGap + s.val + t._itemSize.height * (t._numItems - s.count) + t._lineGap * (t._numItems - 1) + t._bottomGap;
} else e = t._topGap + t._itemSize.height * t._numItems + t._lineGap * (t._numItems - 1) + t._bottomGap;
break;

case cc.Layout.Type.GRID:
t.lackCenter && (t.lackCenter = !1);
switch (t._startAxis) {
case cc.Layout.AxisDirection.HORIZONTAL:
var n = Math.ceil(t._numItems / t._colLineNum);
e = t._topGap + t._itemSize.height * n + t._lineGap * (n - 1) + t._bottomGap;
break;

case cc.Layout.AxisDirection.VERTICAL:
var o = Math.ceil(t._numItems / t._colLineNum);
e = t._leftGap + t._itemSize.width * o + t._columnGap * (o - 1) + t._rightGap;
}
}
var a = t.content.getComponent(cc.Layout);
a && (a.enabled = !1);
t._allItemSize = e;
t._allItemSizeNoEdge = t._allItemSize - (t._sizeType ? t._topGap + t._bottomGap : t._leftGap + t._rightGap);
if (t.cyclic) {
var r = t._sizeType ? t.node.height : t.node.width;
t._cyclicPos1 = 0;
r -= t._cyclicPos1;
t._cyclicNum = Math.ceil(r / t._allItemSizeNoEdge) + 1;
var l = t._sizeType ? t._lineGap : t._columnGap;
t._cyclicPos2 = t._cyclicPos1 + t._allItemSizeNoEdge + l;
t._cyclicAllItemSize = t._allItemSize + t._allItemSizeNoEdge * (t._cyclicNum - 1) + l * (t._cyclicNum - 1);
t._cycilcAllItemSizeNoEdge = t._allItemSizeNoEdge * t._cyclicNum;
t._cycilcAllItemSizeNoEdge += l * (t._cyclicNum - 1);
}
t._lack = !t.cyclic && t._allItemSize < (t._sizeType ? t.node.height : t.node.width);
var c = t._lack && t.lackCenter || !t.lackSlide ? .1 : 0, h = t._lack ? (t._sizeType ? t.node.height : t.node.width) - c : t.cyclic ? t._cyclicAllItemSize : t._allItemSize;
h < 0 && (h = 0);
t._sizeType ? t.content.height = h : t.content.width = h;
},
_onScrolling: function(e) {
null == this.frameCount && (this.frameCount = this._updateRate);
if (!this._forceUpdate && e && "scroll-ended" != e.type && this.frameCount > 0) this.frameCount--; else {
this.frameCount = this._updateRate;
if (!this._aniDelRuning) {
if (this.cyclic) {
var t = this.content.getPosition();
t = this._sizeType ? t.y : t.x;
var i = this._allItemSizeNoEdge + (this._sizeType ? this._lineGap : this._columnGap), s = this._sizeType ? cc.v2(0, i) : cc.v2(i, 0);
switch (this._alignCalcType) {
case 1:
if (t > -this._cyclicPos1) {
this.content.x = -this._cyclicPos2;
this._scrollView.isAutoScrolling() && (this._scrollView._autoScrollStartPosition = this._scrollView._autoScrollStartPosition.sub(s));
} else if (t < -this._cyclicPos2) {
this.content.x = -this._cyclicPos1;
this._scrollView.isAutoScrolling() && (this._scrollView._autoScrollStartPosition = this._scrollView._autoScrollStartPosition.add(s));
}
break;

case 2:
if (t < this._cyclicPos1) {
this.content.x = this._cyclicPos2;
this._scrollView.isAutoScrolling() && (this._scrollView._autoScrollStartPosition = this._scrollView._autoScrollStartPosition.add(s));
} else if (t > this._cyclicPos2) {
this.content.x = this._cyclicPos1;
this._scrollView.isAutoScrolling() && (this._scrollView._autoScrollStartPosition = this._scrollView._autoScrollStartPosition.sub(s));
}
break;

case 3:
if (t < this._cyclicPos1) {
this.content.y = this._cyclicPos2;
this._scrollView.isAutoScrolling() && (this._scrollView._autoScrollStartPosition = this._scrollView._autoScrollStartPosition.add(s));
} else if (t > this._cyclicPos2) {
this.content.y = this._cyclicPos1;
this._scrollView.isAutoScrolling() && (this._scrollView._autoScrollStartPosition = this._scrollView._autoScrollStartPosition.sub(s));
}
break;

case 4:
if (t > -this._cyclicPos1) {
this.content.y = -this._cyclicPos2;
this._scrollView.isAutoScrolling() && (this._scrollView._autoScrollStartPosition = this._scrollView._autoScrollStartPosition.sub(s));
} else if (t < -this._cyclicPos2) {
this.content.y = -this._cyclicPos1;
this._scrollView.isAutoScrolling() && (this._scrollView._autoScrollStartPosition = this._scrollView._autoScrollStartPosition.add(s));
}
}
}
this._calcViewPos();
var n, o, a, r;
if (this._sizeType) {
n = this.viewTop;
a = this.viewBottom;
} else {
o = this.viewRight;
r = this.viewLeft;
}
if (this._virtual) {
this.displayData = [];
var l, c = 0, h = this._numItems - 1;
if (this._customSize) for (var u = !1; c <= h && !u; c++) {
l = this._calcItemPos(c);
switch (this._align) {
case cc.Layout.Type.HORIZONTAL:
l.right >= r && l.left <= o ? this.displayData.push(l) : 0 != c && this.displayData.length > 0 && (u = !0);
break;

case cc.Layout.Type.VERTICAL:
l.bottom <= n && l.top >= a ? this.displayData.push(l) : 0 != c && this.displayData.length > 0 && (u = !0);
break;

case cc.Layout.Type.GRID:
switch (this._startAxis) {
case cc.Layout.AxisDirection.HORIZONTAL:
l.bottom <= n && l.top >= a ? this.displayData.push(l) : 0 != c && this.displayData.length > 0 && (u = !0);
break;

case cc.Layout.AxisDirection.VERTICAL:
l.right >= r && l.left <= o ? this.displayData.push(l) : 0 != c && this.displayData.length > 0 && (u = !0);
}
}
} else {
var d = this._itemSize.width + this._columnGap, p = this._itemSize.height + this._lineGap;
switch (this._alignCalcType) {
case 1:
c = (r + this._leftGap) / d;
h = (o + this._rightGap) / d;
break;

case 2:
c = (-o - this._rightGap) / d;
h = (-r - this._leftGap) / d;
break;

case 3:
c = (-n - this._topGap) / p;
h = (-a - this._bottomGap) / p;
break;

case 4:
c = (a + this._bottomGap) / p;
h = (n + this._topGap) / p;
}
c = Math.floor(c) * this._colLineNum;
h = Math.ceil(h) * this._colLineNum;
h--;
c < 0 && (c = 0);
h >= this._numItems && (h = this._numItems - 1);
for (;c <= h; c++) this.displayData.push(this._calcItemPos(c));
}
if (this.displayData.length <= 0 || !this._numItems) {
this._lastDisplayData = [];
this._delRedundantItem();
return;
}
this.firstListId = this.displayData[0].id;
this.displayItemNum = this.displayData.length;
var f = this._lastDisplayData.length;
if (this._forceUpdate || this.displayItemNum != f || this.firstListId != this._lastDisplayData[0] || this.displayData[this.displayItemNum - 1].id != this._lastDisplayData[f - 1]) {
this._lastDisplayData = [];
if (this.frameByFrameRenderNum > 0) if (this._numItems > 0) {
this._updateDone ? this._updateCounter = 0 : this._doneAfterUpdate = !0;
this._updateDone = !1;
} else {
this._delRedundantItem();
this._updateCounter = 0;
this._updateDone = !0;
} else {
for (var m = 0; m < this.displayItemNum; m++) this._createOrUpdateItem(this.displayData[m]);
this._delRedundantItem();
this._forceUpdate = !1;
}
}
this._calcNearestItem();
}
}
}
},
_calcViewPos: function() {
var e = this.content.getPosition();
switch (this._alignCalcType) {
case 1:
this.elasticLeft = e.x > 0 ? e.x : 0;
this.viewLeft = (e.x < 0 ? -e.x : 0) - this.elasticLeft;
this.viewRight = this.viewLeft + this.node.width;
this.elasticRight = this.viewRight > this.content.width ? Math.abs(this.viewRight - this.content.width) : 0;
this.viewRight += this.elasticRight;
break;

case 2:
this.elasticRight = e.x < 0 ? -e.x : 0;
this.viewRight = (e.x > 0 ? -e.x : 0) + this.elasticRight;
this.viewLeft = this.viewRight - this.node.width;
this.elasticLeft = this.viewLeft < -this.content.width ? Math.abs(this.viewLeft + this.content.width) : 0;
this.viewLeft -= this.elasticLeft;
break;

case 3:
this.elasticTop = e.y < 0 ? Math.abs(e.y) : 0;
this.viewTop = (e.y > 0 ? -e.y : 0) + this.elasticTop;
this.viewBottom = this.viewTop - this.node.height;
this.elasticBottom = this.viewBottom < -this.content.height ? Math.abs(this.viewBottom + this.content.height) : 0;
this.viewBottom += this.elasticBottom;
break;

case 4:
this.elasticBottom = e.y > 0 ? Math.abs(e.y) : 0;
this.viewBottom = (e.y < 0 ? -e.y : 0) - this.elasticBottom;
this.viewTop = this.viewBottom + this.node.height;
this.elasticTop = this.viewTop > this.content.height ? Math.abs(this.viewTop - this.content.height) : 0;
this.viewTop -= this.elasticTop;
}
},
_calcItemPos: function(e) {
var t, i, s, n, o, a, r, l;
switch (this._align) {
case cc.Layout.Type.HORIZONTAL:
switch (this._horizontalDir) {
case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:
if (this._customSize) {
var c = this._getFixedSize(e);
o = this._leftGap + (this._itemSize.width + this._columnGap) * (e - c.count) + (c.val + this._columnGap * c.count);
var h = this._customSize[e];
t = h > 0 ? h : this._itemSize.width;
} else {
o = this._leftGap + (this._itemSize.width + this._columnGap) * e;
t = this._itemSize.width;
}
a = o + t;
if (this.lackCenter) {
var u = this.content.width / 2 - this._allItemSizeNoEdge / 2;
o += u;
a += u;
}
return {
id: e,
left: o,
right: a,
x: o + this._itemTmp.anchorX * t,
y: this._itemTmp.y
};

case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:
if (this._customSize) {
var d = this._getFixedSize(e);
a = -this._rightGap - (this._itemSize.width + this._columnGap) * (e - d.count) - (d.val + this._columnGap * d.count);
var p = this._customSize[e];
t = p > 0 ? p : this._itemSize.width;
} else {
a = -this._rightGap - (this._itemSize.width + this._columnGap) * e;
t = this._itemSize.width;
}
o = a - t;
if (this.lackCenter) {
var f = this.content.width / 2 - this._allItemSizeNoEdge / 2;
o -= f;
a -= f;
}
return {
id: e,
right: a,
left: o,
x: o + this._itemTmp.anchorX * t,
y: this._itemTmp.y
};
}
break;

case cc.Layout.Type.VERTICAL:
switch (this._verticalDir) {
case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:
if (this._customSize) {
var m = this._getFixedSize(e);
s = -this._topGap - (this._itemSize.height + this._lineGap) * (e - m.count) - (m.val + this._lineGap * m.count);
var g = this._customSize[e];
n = s - (i = g > 0 ? g : this._itemSize.height);
} else {
s = -this._topGap - (this._itemSize.height + this._lineGap) * e;
i = this._itemSize.height;
}
n = s - i;
if (this.lackCenter) {
var _ = this.content.height / 2 - this._allItemSizeNoEdge / 2;
s -= _;
n -= _;
}
return {
id: e,
top: s,
bottom: n,
x: this._itemTmp.x,
y: n + this._itemTmp.anchorY * i
};

case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:
if (this._customSize) {
var T = this._getFixedSize(e);
n = this._bottomGap + (this._itemSize.height + this._lineGap) * (e - T.count) + (T.val + this._lineGap * T.count);
var C = this._customSize[e];
i = C > 0 ? C : this._itemSize.height;
} else {
n = this._bottomGap + (this._itemSize.height + this._lineGap) * e;
i = this._itemSize.height;
}
s = n + i;
if (this.lackCenter) {
var y = this.content.height / 2 - this._allItemSizeNoEdge / 2;
s += y;
n += y;
}
return {
id: e,
top: s,
bottom: n,
x: this._itemTmp.x,
y: n + this._itemTmp.anchorY * i
};
}

case cc.Layout.Type.GRID:
var I = Math.floor(e / this._colLineNum);
switch (this._startAxis) {
case cc.Layout.AxisDirection.HORIZONTAL:
switch (this._verticalDir) {
case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:
l = (n = (s = -this._topGap - (this._itemSize.height + this._lineGap) * I) - this._itemSize.height) + this._itemTmp.anchorY * this._itemSize.height;
break;

case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:
s = (n = this._bottomGap + (this._itemSize.height + this._lineGap) * I) + this._itemSize.height;
l = n + this._itemTmp.anchorY * this._itemSize.height;
}
r = this._leftGap + e % this._colLineNum * (this._itemSize.width + this._columnGap);
switch (this._horizontalDir) {
case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:
r += this._itemTmp.anchorX * this._itemSize.width;
r -= this.content.anchorX * this.content.width;
break;

case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:
r += (1 - this._itemTmp.anchorX) * this._itemSize.width;
r -= (1 - this.content.anchorX) * this.content.width;
r *= -1;
}
return {
id: e,
top: s,
bottom: n,
x: r,
y: l
};

case cc.Layout.AxisDirection.VERTICAL:
switch (this._horizontalDir) {
case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:
a = (o = this._leftGap + (this._itemSize.width + this._columnGap) * I) + this._itemSize.width;
r = o + this._itemTmp.anchorX * this._itemSize.width;
r -= this.content.anchorX * this.content.width;
break;

case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:
r = (o = (a = -this._rightGap - (this._itemSize.width + this._columnGap) * I) - this._itemSize.width) + this._itemTmp.anchorX * this._itemSize.width;
r += (1 - this.content.anchorX) * this.content.width;
}
l = -this._topGap - e % this._colLineNum * (this._itemSize.height + this._lineGap);
switch (this._verticalDir) {
case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:
l -= (1 - this._itemTmp.anchorY) * this._itemSize.height;
l += (1 - this.content.anchorY) * this.content.height;
break;

case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:
l -= this._itemTmp.anchorY * this._itemSize.height;
l += this.content.anchorY * this.content.height;
l *= -1;
}
return {
id: e,
left: o,
right: a,
x: r,
y: l
};
}
}
},
_calcExistItemPos: function(e) {
var t = this.getItemByListId(e);
if (!t) return null;
var i = {
id: e,
x: t.x,
y: t.y
};
if (this._sizeType) {
i.top = t.y + t.height * (1 - t.anchorY);
i.bottom = t.y - t.height * t.anchorY;
} else {
i.left = t.x - t.width * t.anchorX;
i.right = t.x + t.width * (1 - t.anchorX);
}
return i;
},
getItemPos: function(e) {
return this._virtual ? this._calcItemPos(e) : this.frameByFrameRenderNum ? this._calcItemPos(e) : this._calcExistItemPos(e);
},
_getFixedSize: function(e) {
if (!this._customSize) return null;
null == e && (e = this._numItems);
var t = 0, i = 0;
for (var s in this._customSize) if (parseInt(s) < e) {
t += this._customSize[s];
i++;
}
return {
val: t,
count: i
};
},
_onScrollBegan: function() {
this._beganPos = this._sizeType ? this.viewTop : this.viewLeft;
},
_onScrollEnded: function() {
var e = this;
if (null != e.scrollToListId) {
var t = e.getItemByListId(e.scrollToListId);
e.scrollToListId = null;
t && t.runAction(new cc.sequence(new cc.scaleTo(.1, 1.06), new cc.scaleTo(.1, 1)));
}
e._onScrolling();
e._slideMode != n.ADHERING || e.adhering ? e._slideMode == n.PAGE && (null != e._beganPos ? this._pageAdhere() : e.adhere()) : e.adhere();
},
_onTouchStart: function(e, t) {
if (!this._scrollView._hasNestedViewGroup(e, t)) {
if (!(e.eventPhase === cc.Event.AT_TARGET && e.target === this.node)) {
for (var i = e.target; null == i._listId && i.parent; ) i = i.parent;
this._scrollItem = null != i._listId ? i : e.target;
}
}
},
_onTouchUp: function() {
var e = this;
e._scrollPos = null;
if (e._slideMode == n.ADHERING) {
e.adhering && (e._adheringBarrier = !0);
e.adhere();
} else e._slideMode == n.PAGE && (null != e._beganPos ? e._pageAdhere() : e.adhere());
this._scrollItem = null;
},
_onTouchCancelled: function(e, t) {
var i = this;
if (!i._scrollView._hasNestedViewGroup(e, t) && !e.simulate) {
i._scrollPos = null;
if (i._slideMode == n.ADHERING) {
i.adhering && (i._adheringBarrier = !0);
i.adhere();
} else i._slideMode == n.PAGE && (null != i._beganPos ? i._pageAdhere() : i.adhere());
this._scrollItem = null;
}
},
_onSizeChanged: function() {
this.checkInited(!1) && this._onScrolling();
},
_onItemAdaptive: function(e) {
var t = this;
if (this.checkInited(!1) && (!this._sizeType && e.width != this._itemSize.width || this._sizeType && e.height != this._itemSize.height)) {
this._customSize || (this._customSize = {});
var i = this._sizeType ? e.height : e.width;
if (this._customSize[e._listId] != i) {
this._customSize[e._listId] = i;
this._resizeContent();
this.content.children.forEach(function(e) {
t._updateItemPos(e);
});
if (!isNaN(this._scrollToListId)) {
this._scrollPos = null;
this.unschedule(this._scrollToSo);
this.scrollTo(this._scrollToListId, Math.max(0, this._scrollToEndTime - new Date().getTime() / 1e3));
}
}
}
},
_pageAdhere: function() {
var e = this;
if (e.cyclic || !(e.elasticTop > 0 || e.elasticRight > 0 || e.elasticBottom > 0 || e.elasticLeft > 0)) {
var t = e._sizeType ? e.viewTop : e.viewLeft, i = (e._sizeType ? e.node.height : e.node.width) * e.pageDistance;
if (Math.abs(e._beganPos - t) > i) {
switch (e._alignCalcType) {
case 1:
case 4:
e._beganPos > t ? e.prePage(.5) : e.nextPage(.5);
break;

case 2:
case 3:
e._beganPos < t ? e.prePage(.5) : e.nextPage(.5);
}
} else e.elasticTop <= 0 && e.elasticRight <= 0 && e.elasticBottom <= 0 && e.elasticLeft <= 0 && e.adhere();
e._beganPos = null;
}
},
adhere: function() {
var e = this;
if (e.checkInited() && !(e.elasticTop > 0 || e.elasticRight > 0 || e.elasticBottom > 0 || e.elasticLeft > 0)) {
e.adhering = !0;
e._calcNearestItem();
var t = (e._sizeType ? e._topGap : e._leftGap) / (e._sizeType ? e.node.height : e.node.width);
e.scrollTo(e.nearestListId, .7, t);
}
},
update: function() {
if (!(this.frameByFrameRenderNum <= 0 || this._updateDone)) if (this._virtual) {
for (var e = this._updateCounter + this.frameByFrameRenderNum > this.displayItemNum ? this.displayItemNum : this._updateCounter + this.frameByFrameRenderNum, t = this._updateCounter; t < e; t++) {
var i = this.displayData[t];
i && this._createOrUpdateItem(i);
}
if (this._updateCounter >= this.displayItemNum - 1) if (this._doneAfterUpdate) {
this._updateCounter = 0;
this._updateDone = !1;
this._scrollView.isScrolling() || (this._doneAfterUpdate = !1);
} else {
this._updateDone = !0;
this._delRedundantItem();
this._forceUpdate = !1;
this._calcNearestItem();
this.slideMode == n.PAGE && (this.curPageNum = this.nearestListId);
} else this._updateCounter += this.frameByFrameRenderNum;
} else if (this._updateCounter < this._numItems) {
for (var s = this._updateCounter + this.frameByFrameRenderNum > this._numItems ? this._numItems : this._updateCounter + this.frameByFrameRenderNum, o = this._updateCounter; o < s; o++) this._createOrUpdateItem2(o);
this._updateCounter += this.frameByFrameRenderNum;
} else {
this._updateDone = !0;
this._calcNearestItem();
this.slideMode == n.PAGE && (this.curPageNum = this.nearestListId);
}
},
_createOrUpdateItem: function(e) {
var t = this.getItemByListId(e.id);
if (t) {
if (this._forceUpdate && this.renderEvent) {
t.setPosition(new cc.v2(e.x, e.y));
this._resetItemSize(t);
this.renderEvent && cc.Component.EventHandler.emitEvents([ this.renderEvent ], t, e.id % this._actualNumItems);
}
} else {
var i = this._pool.size() > 0;
if ((t = i ? this._pool.get() : cc.instantiate(this._itemTmp))._listId != e.id) {
t._listId = e.id;
t.setContentSize(this._itemSize);
}
t.setPosition(new cc.v2(e.x, e.y));
this._resetItemSize(t);
this.content.addChild(t);
if (i && this._needUpdateWidget) {
var s = t.getComponent(cc.Widget);
s && s.updateAlignment();
}
t.setSiblingIndex(this.content.childrenCount - 1);
var n = t.getComponent(a);
t.listItem = n;
if (n) {
n._list = this;
n._registerEvent();
}
this.renderEvent && cc.Component.EventHandler.emitEvents([ this.renderEvent ], t, e.id % this._actualNumItems);
}
this._resetItemSize(t);
this._updateListItem(t.listItem);
this._lastDisplayData.indexOf(e.id) < 0 && this._lastDisplayData.push(e.id);
},
_createOrUpdateItem2: function(e) {
var t = this.content.children[e];
if (t) {
if (this._forceUpdate && this.renderEvent) {
t._listId = e;
this.renderEvent && cc.Component.EventHandler.emitEvents([ this.renderEvent ], t, e);
}
} else {
(t = cc.instantiate(this._itemTmp))._listId = e;
this.content.addChild(t);
var i = t.getComponent(a);
t.listItem = i;
if (i) {
i._list = this;
i._registerEvent();
}
this.renderEvent && cc.Component.EventHandler.emitEvents([ this.renderEvent ], t, e);
}
this._updateListItem(t.listItem);
this._lastDisplayData.indexOf(e) < 0 && this._lastDisplayData.push(e);
},
_updateListItem: function(e) {
if (e && this.selectedMode > o.NONE) switch (this.selectedMode) {
case o.SINGLE:
e.selected = this.selectedId == e.node._listId;
break;

case o.MULT:
e.selected = this.multSelected.indexOf(e.node._listId) >= 0;
}
},
_resetItemSize: function(e) {},
_updateItemPos: function(e) {
var t = isNaN(e) ? e : this.getItemByListId(e), i = this.getItemPos(t._listId);
t.setPosition(i.x, i.y);
},
setMultSelected: function(e, t) {
var i = this;
if (i.checkInited()) {
Array.isArray(e) || (e = [ e ]);
if (null == t) {
for (var s = e.length - 1; s >= 0; s--) {
listId = e[s];
sub = i.multSelected.indexOf(listId);
sub >= 0 && this.updateSeletedId(listId, !0);
}
i.multSelected = e;
} else {
var n, o;
if (t) for (var a = e.length - 1; a >= 0; a--) {
n = e[a];
if ((o = i.multSelected.indexOf(n)) < 0) {
i.multSelected.push(n);
this.updateSeletedId(n, !0);
}
} else for (var r = e.length - 1; r >= 0; r--) {
n = e[r];
if ((o = i.multSelected.indexOf(n)) >= 0) {
i.multSelected.splice(o, 1);
this.updateSeletedId(n, !1);
}
}
}
i._forceUpdate = !0;
i._onScrolling();
}
},
updateSeletedId: function(e, t) {
var i = this, s = i.getItemByListId(e);
i._selectedId >= 0 && (i._lastSelectedId = i._selectedId);
i._selectedId = e;
i.selectedEvent && cc.Component.EventHandler.emitEvents([ i.selectedEvent ], s, e % this._actualNumItems, i._lastSelectedId % this._actualNumItems, t);
},
updateItem: function(e) {
if (this.checkInited()) {
Array.isArray(e) || (e = [ e ]);
for (var t = 0, i = e.length; t < i; t++) {
var s = e[t], n = this.getItemByListId(s);
n && cc.Component.EventHandler.emitEvents([ this.renderEvent ], n, s % this._actualNumItems);
}
}
},
updateAll: function() {
this.checkInited() && (this.numItems = this.numItems);
},
getItemByListId: function(e) {
for (var t = this.content.childrenCount - 1; t >= 0; t--) if (this.content.children[t]._listId == e) return this.content.children[t];
},
_getOutsideItem: function() {
for (var e, t, i = [], s = this.content.childrenCount - 1; s >= 0; s--) {
e = this.content.children[s];
if (t = !0) for (var n = this.displayItemNum - 1; n >= 0; n--) if (this.displayData[n]) {
var o = this.displayData[n].id;
if (e._listId == o) {
t = !1;
break;
}
}
t && i.push(e);
}
return i;
},
_delRedundantItem: function() {
if (this._virtual) for (var e = this._getOutsideItem(), t = e.length - 1; t >= 0; t--) {
var i = e[t];
this._scrollItem && i._listId == this._scrollItem._listId || this._pool.put(i);
} else for (;this.content.childrenCount > this._numItems; ) this._delSingleItem(this.content.children[this.content.childrenCount - 1]);
},
_delSingleItem: function(e) {
e.removeFromParent();
e.destroy && e.destroy();
e = null;
},
aniDelItem: function(e, t, i) {
var s = this;
if (!s.checkInited() || s.cyclic || !s._virtual) return cc.error("This function is not allowed to be called!");
if (s._aniDelRuning) return cc.warn("Please wait for the current deletion to finish!");
var n = s.getItemByListId(e);
if (n) {
s._aniDelRuning = !0;
var a = s.displayData[s.displayData.length - 1].id, r = n.listItem.selected;
n.listItem.showAni(i, function() {
var i;
a < s._numItems - 2 && (i = a + 1);
if (null != i) {
var l = s._calcItemPos(i);
s.displayData.push(l);
s._virtual ? s._createOrUpdateItem(l) : s._createOrUpdateItem2(i);
} else s._numItems--;
if (s.selectedMode == o.SINGLE) r ? s._selectedId = -1 : s._selectedId - 1 >= 0 && s._selectedId--; else if (s.selectedMode == o.MULT && s.multSelected.length) {
var c = s.multSelected.indexOf(e);
c >= 0 && s.multSelected.splice(c, 1);
for (var h = s.multSelected.length - 1; h >= 0; h--) {
s.multSelected[h] >= e && s.multSelected[h]--;
}
}
if (s._customSize) {
s._customSize[e] && delete s._customSize[e];
var u, d = {};
for (var p in s._customSize) {
u = s._customSize[p];
d[(p = parseInt(p)) - (p >= e ? 1 : 0)] = u;
}
s._customSize = d;
}
for (var f, m, g = null != i ? i : a; g >= e + 1; g--) if (n = s.getItemByListId(g)) {
var _ = s._calcItemPos(g - 1);
f = [ new cc.moveTo(.2333, new cc.v2(_.x, _.y)) ];
if (g <= e + 1) {
m = !0;
f.push(new cc.CallFunc(function() {
s._aniDelRuning = !1;
t(e);
}));
}
f.length > 1 ? n.runAction(new cc.Sequence(f)) : n.runAction(f[0]);
}
if (!m) {
s._aniDelRuning = !1;
t(e);
}
}, !0);
} else t(e);
},
scrollTo: function(e, t, i, s) {
var n = this;
if (n.checkInited()) {
n._scrollView.stopAutoScroll();
null == t ? t = .5 : t < 0 && (t = 0);
e < 0 ? e = 0 : e >= n._numItems && (e = n._numItems - 1);
!n._virtual && n._layout && n._layout.enabled && n._layout.updateLayout();
var o, a, r = n.getItemPos(e);
switch (n._alignCalcType) {
case 1:
o = r.left;
o -= null != i ? n.node.width * i : n._leftGap;
r = new cc.v2(o, 0);
break;

case 2:
o = r.right - n.node.width;
o += null != i ? n.node.width * i : n._rightGap;
r = new cc.v2(o + n.content.width, 0);
break;

case 3:
a = r.top;
a += null != i ? n.node.height * i : n._topGap;
r = new cc.v2(0, -a);
break;

case 4:
a = r.bottom + n.node.height;
a -= null != i ? n.node.height * i : n._bottomGap;
r = new cc.v2(0, -a + n.content.height);
}
var l = n.content.getPosition();
l = Math.abs(n._sizeType ? l.y : l.x);
var c = n._sizeType ? r.y : r.x, h = Math.abs((null != n._scrollPos ? n._scrollPos : l) - c) > .5;
n._scrollView.stopAutoScroll();
if (h) {
n._scrollPos = c;
n._scrollToListId = e;
n._scrollToEndTime = new Date().getTime() / 1e3 + t;
n._scrollView.scrollToOffset(r, t);
n._scrollToSo = n.scheduleOnce(function() {
n._adheringBarrier || (n.adhering = n._adheringBarrier = !1);
n._scrollPos = n._scrollToListId = n._scrollToEndTime = n._scrollToSo = null;
if (s) {
var t = n.getItemByListId(e);
t && t.runAction(new cc.sequence(new cc.scaleTo(.1, 1.05), new cc.scaleTo(.1, 1)));
}
}, t + .1);
t <= 0 && n._onScrolling();
}
}
},
_calcNearestItem: function() {
var e, t, i, s, n, o, a = this;
a.nearestListId = null;
a._virtual && a._calcViewPos();
i = a.viewTop;
s = a.viewRight;
n = a.viewBottom;
o = a.viewLeft;
for (var r = !1, l = 0; l < a.content.childrenCount && !r; l += a._colLineNum) {
e = this._virtual ? this.displayData[l] : this._calcExistItemPos(l);
t = this._sizeType ? (e.top + e.bottom) / 2 : t = (e.left + e.right) / 2;
switch (this._alignCalcType) {
case 1:
if (e.right >= o) {
this.nearestListId = e.id;
o > t && (this.nearestListId += this._colLineNum);
r = !0;
}
break;

case 2:
if (e.left <= s) {
this.nearestListId = e.id;
s < t && (this.nearestListId += this._colLineNum);
r = !0;
}
break;

case 3:
if (e.bottom <= i) {
this.nearestListId = e.id;
i < t && (this.nearestListId += this._colLineNum);
r = !0;
}
break;

case 4:
if (e.top >= n) {
this.nearestListId = e.id;
n > t && (this.nearestListId += this._colLineNum);
r = !0;
}
}
}
if ((e = this._virtual ? this.displayData[this.displayItemNum - 1] : this._calcExistItemPos(this._numItems - 1)) && e.id == a._numItems - 1) {
t = a._sizeType ? (e.top + e.bottom) / 2 : t = (e.left + e.right) / 2;
switch (a._alignCalcType) {
case 1:
s > t && (a.nearestListId = e.id);
break;

case 2:
o < t && (a.nearestListId = e.id);
break;

case 3:
n < t && (a.nearestListId = e.id);
break;

case 4:
i > t && (a.nearestListId = e.id);
}
}
},
prePage: function(e) {
if (this.checkInited()) {
null == e && (e = .5);
this.skipPage(this.curPageNum - 1, e);
}
},
nextPage: function(e) {
if (this.checkInited()) {
null == e && (e = .5);
this.skipPage(this.curPageNum + 1, e);
}
},
skipPage: function(e, t) {
var i = this;
if (i.checkInited()) {
if (i._slideMode != n.PAGE) return cc.error("This function is not allowed to be called, Must SlideMode = PAGE!");
if (!(e < 0 || e >= i._numItems) && i.curPageNum != e) {
i.curPageNum = e;
i.pageChangeEvent && cc.Component.EventHandler.emitEvents([ i.pageChangeEvent ], e);
i.scrollTo(e, t);
}
}
},
calcCustomSize: function(e) {
var t = this;
if (t.checkInited()) {
if (!t._itemTmp) return cc.error("Unset template item!");
if (!t.renderEvent) return cc.error("Unset Render-Event!");
t._customSize = {};
var i = cc.instantiate(t._itemTmp);
t.content.addChild(i);
for (var s = 0; s < e; s++) {
cc.Component.EventHandler.emitEvents([ t.renderEvent ], i, s);
i.height == t._itemSize.height && i.width == t._itemSize.width || (t._customSize[s] = t._sizeType ? i.height : i.width);
}
Object.keys(t._customSize).length || (t._customSize = null);
i.removeFromParent();
i.destroy && i.destroy();
return t._customSize;
}
}
});
cc._RF.pop();
}, {
ListItem: "ListItem"
} ],
LoadUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "d3ec10UhRBM2Krjpkda7RYl", "LoadUtils");
cc.Class({
ctor: function() {
this.m_serverUrl = "";
this.m_loadTime = {};
this.urls = {};
this.cachedRes = {};
},
subReloadTime: function(e) {
this.m_loadTime[e] = this.m_loadTime[e] - 1;
return this.m_loadTime[e];
},
isCanReload: function(e) {
return this.m_loadTime[e] > 0;
},
loadRes: function(e, t) {
var i = this;
this.m_loadTime[e] = 5;
cc.loader.loadRes(this.m_serverUrl + e, function(s, n) {
if (s) {
if (i.isCanReload(e)) {
var o = i.subReloadTime(e);
console.warn("loadRes 加载资源失败,再次尝试下载1| ", o, ":", e);
i.loadRes(e, t);
}
} else {
delete i.m_loadTime[e];
t(s, n);
}
});
},
loadResDir: function(e, t, i) {
cc.loader.loadResDir(this.m_serverUrl + e, t, i);
},
loadResWithType: function(e, t, i) {
var s = this;
cc.loader.loadRes(e, t, function(n, o) {
if (n) {
if (s.isCanReload(e)) {
var a = s.subReloadTime(e);
console.warn("loadResWithType 加载资源失败,再次尝试下载2| ", a, ":", e);
s.loadResWithType(e, t, i);
}
} else i(n, o);
});
},
loadJson: function(e, t) {
var i = cc.url.raw(e);
cc.loader.load(i, function(e, i) {
void 0 != i && void 0 != i.json && TypeUtils.isFunction(t) && t(i.json);
});
},
loadImg: function(e, t) {
cc.loader.load({
url: e,
type: "png"
}, function(e, i) {
null === e && TypeUtils.isFunction(t) && t(e, i);
});
},
loadNetPicture: function(e, t) {
cc.assetManager.loadRemote(e, function(e, i) {
TypeUtils.isFunction(t) && t(e, i);
});
},
preload: function(e, t, i) {
this.loadResArray(e, !0, t, i);
},
loadResArray: function(e, t, i, s) {
var n = this, o = 0, a = 0, r = !1, l = e.length, c = e.length, h = {}, u = [];
(function d() {
if (!r) for (var p = function() {
var p = e[o], f = p.url, m = p.type;
r = ++o == c;
if (h[f]) s(null, null); else {
n.loadCacheRes(f, m, void 0 !== p.release ? p.release : t, function(e, o) {
if (e) n.loadCacheRes(f, m, t, s); else {
--l;
--a;
d();
if (i) s && s(e, o); else {
u.push(o);
0 == l && s && s(null, u);
}
}
});
++a;
h[f] = !0;
}
}; o < c && a <= 5; ) p();
})();
},
loadCacheRes: function(e, t) {
var i = this, s = arguments.length > 2 && void 0 !== arguments[2] && arguments[2], n = arguments.length > 3 ? arguments[3] : void 0;
this.cachedRes[e] ? n && n(null, this.cachedRes[e][1]) : cc.loader.loadRes(e, t, function(o, a) {
if (!o && s) {
i.urls[a] = e;
i.cachedRes[e] = [ t, a ];
}
n && n(o, a);
});
}
});
cc._RF.pop();
}, {} ],
LoggerUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "6a0eb1jqqpFd5FDL0Y7huw5", "LoggerUtils");
cc.Class({
ctor: function() {},
info: function() {
var e;
(e = console).log.apply(e, arguments);
},
error: function() {
var e;
(e = console).error.apply(e, arguments);
},
warn: function() {
var e;
(e = console).warn.apply(e, arguments);
},
groupCollapsed: function() {
if (!GlobalUtils.isRelease()) {
var e;
(e = console).groupCollapsed.apply(e, arguments);
}
},
groupEnd: function() {
GlobalUtils.isRelease() || console.groupEnd();
}
});
cc._RF.pop();
}, {} ],
LoginConst: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "4e12eFfVelKI7FQeCAyyOZF", "LoginConst");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
LoginStatus: {}
};
s.LoginStatus.NeedLoadRes = 1;
s.LoginStatus.NotToLoadRes = 2;
var n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
LoginCtrl: [ function(e, t, i) {
(function(i) {
"use strict";
cc._RF.push(t, "b5b38z5/GhBTIXyUesRv/f8", "LoginCtrl");
var s = e("socket"), n = e("HttpCtrl"), o = e("LoginModel"), a = e("LoginConst");
cc.Class({
extends: n,
properties: {
socketS: null
},
ctor: function() {
var e = new o();
this.init(e);
this.initSocket();
},
initSocket: function() {
this.socket = new s();
var t = e("protoMap");
this.socket.registerAllProtos(t);
},
getAccountAndPwd: function(e) {
var t = this;
console.log("getAccountAndPwd");
var i = {
method: "fastRegister",
data: {
udId: GlobalUtils.getRandomDeviceNum()
}
};
this.isLoginByWeChat = !1;
this.request(i, function(e) {
t.model.setAccountAndPwd(e);
t.noSdkLogin(e.account, e.pwd);
}, null, e);
},
register: function(e, t) {
var i = this;
if (TypeUtils.isAllNull(e) || TypeUtils.isAllNull(t)) TipsUtils.showTips("账号或密码为空"); else {
this._account = e;
this._password = t;
var s = {
method: "register",
data: {
accountName: this._account,
pwd: this._password
}
};
this.request(s, function(s) {
i.model.setAccountAndPwd(s);
i.noSdkLogin(e, t);
}, null, function() {
i.model.sendChangeLoginStatus(!1);
});
}
},
noSdkLogin: function(e, t) {
var i = this;
this._account = e;
this._password = t;
this.isLoginByWeChat = !1;
var s = {
method: "login",
data: {
accountName: e,
pwd: t
}
};
this.request(s, function(s) {
s.nickname && i.model.setNickname(s.nickname);
i.model.setAccountAndPwd({
account: e,
pwd: t
});
i.tryGetServerList(s);
}, null, function(e) {
logger.error("noSdkLogin fail:", e);
});
},
getServerList: function(e) {
var t = this, i = {
method: "getServerList",
data: {
accountName: e.accountName,
token: e.token,
deadline: e.deadline
}
};
TypeUtils.isRealNull(this.m_getServerListCiShu) && (this.m_getServerListCiShu = 2);
this.request(i, function(e) {
t.handlerAuthInfoNew(e);
t.model.setLoginToken(e.token);
t.m_getServerListCiShu = 2;
}, !0, function() {
logger.warn("登录失败");
if (t.m_getServerListCiShu > 0) {
t.m_getServerListCiShu = t.m_getServerListCiShu - 1;
TimeMgr.delayTime(function() {
t.tryGetServerList(e);
}, 1, t);
} else t.socket && t.socket.tryReconnect();
}, !0, function() {
t.socket && t.socket.tryReconnect();
});
},
tryGetServerList: function(e) {
this.getServerList(e);
},
handlerAuthInfoNew: function(e) {
var t = DicUtils.copy(e);
this.model.setAuthInfo(t);
var i = e.serverList;
this.saveSignData(e);
this.connectServer({
addr: i.addr,
port: i.port,
sid: i.sid,
time: e.signTime,
token: e.serverToken
});
},
saveSignData: function(e) {
var t = JsonUtils.data2Json(e), i = StringUtils.encodeBase64(t);
UserUtils.setDataStr(UserDefaultConst.QuickLoginData, i);
},
getSignData: function() {
var e = UserUtils.getDataStr(UserDefaultConst.QuickLoginData);
if (!TypeUtils.isAllNull(e)) {
var t = StringUtils.decodeBase64(e);
return JsonUtils.json2Data(t);
}
},
connectServer: function(e) {
var t = this;
if (!TypeUtils.isRealNull(e)) {
this._serverAddr = e.addr;
this._serverPort = e.port;
this._signTime = e.time;
this._token = e.token;
this._serverId = e.id;
}
window.session = this.socket;
ViewManager.showRequest(null, ViewManager.TypeSocket, {
id: 0
});
session.connect(this._serverAddr, this._serverPort, function(e) {
ViewManager.hideRequest(ViewManager.TypeSocket, {
id: 0
});
if ("error" != e.type && "close" != e.type) if ("open" != e.type) ; else {
t.model.setServerId(t._serverId);
t.loginGameServer();
} else {
t.model.sendChangeLoginStatus(!1);
TipsUtils.showTips(_LANG("CONNECT_SERVER_FAILURE"));
}
});
},
requestlogin: function() {
var e = this, t = {
uid: this.model.getAccountName(),
signTime: this.model.getSignTime(),
token: this.model.getServerToken(),
pid: GlobalUtils.getPid(),
channelId: GlobalUtils.getChannelId(),
imei: GlobalUtils.getRandomDeviceNum(),
baseVersion: GlobalUtils.getGameBaseVersion(),
version: GlobalUtils.getVersion()
};
session.request(M_Auth.login, t, this.handleLoginResult.bind(this));
TimeMgr.delayTime(function() {
e.reConnet && session.tryReconnect(!0);
}, 3);
},
handleLoginResult: function(e) {
var t = this;
this.reConnet = !1;
logger.info("请求登录后的处理 === ", e.errorCode);
ViewManager.hideRequest(ViewManager.TypeSocket, {
id: M_Auth.login.id
});
if (e.errorCode == SystemError.success) {
this.getServerTime();
var i = e.data;
if (TypeUtils.isRealNull(i.waittingInfo)) if (TypeUtils.isRealNull(e.data.roleId) || 0 == e.data.roleId) this.isLoginByWeChat ? this.createRole({
nickname: this.model.getNickname(),
avatar: 0
}) : ViewManager.showView("CREATE_VIEW"); else {
this.model.setNewRole(!1);
app.ctrls.game.authSuccess(e.data.roleId);
} else {
this.model.setWattingLine(i.waittingInfo);
TimeMgr.delayTime(function() {
t.requestLogin();
}, 1, this);
}
} else {
this.model.sendChangeLoginStatus(!1);
ViewManager.showErrorMsg(e.errorCode);
}
},
loginGameServer: function() {
console.log("登录游戏服务器");
session.heartbeat(GlobalEnum.AuthHeartbeatInterval);
session.setExpireInterval(i.AuthHeartbeatInterval);
session.addEventListener(session.EVENT_ERROR, this.handleSessionClosed.bind(this));
session.addEventListener(session.EVENT_CLOSED, this.handleSessionClosed.bind(this));
this.reConnet = !0;
this.requestlogin();
},
getServerTime: function() {
var e = this;
session.request(M_Auth.getServerTime, null, function(t) {
t.errorCode == SystemError.success ? e.model.setServerTime(t.data) : ViewManager.showErrorMsg(t.errorCode);
});
},
netWorkClosed: function() {
var e = this;
ViewManager.closeView("COMFIRM_BOX_VIEW");
TipsUtils.showTipsBox({
title: "温馨提示",
desc: _LANG("DISCONNECTED"),
isHideCloce: !0,
signBtn: !0,
enterDesc: _LANG("RELOGIN"),
sureCallBack: function() {
e.model.setLoginNeedLoadResStatus(a.LoginStatus.NeedLoadRes);
e.model.sendChangeLoginStatus(!1);
app.ctrls.game.relogin();
}
});
},
checkAutoLogin: function() {
var e = this.getSignData();
TypeUtils.isObj(e) && e.deadline && e.accountName && e.token ? this.tryGetServerList(e) : console.log("checkAutoLogin", e);
},
createRole: function(e) {
e.imei = GlobalUtils.getRandomDeviceNum();
e.gender = this.model.getLoginSex();
session.request(M_Auth.createRole, e, this.handleCreateRoleResult.bind(this));
},
getDefaultFace: function() {
var e = this, t = {
method: "getDefaultFace",
data: {
accountName: this.model.getAccountName()
}
};
TypeUtils.isAllNull(this._account) || (t.data.accountName = this._account);
this.request(t, function(t) {
e.model.setHeadImgList(t);
});
},
handleSessionClosed: function(e) {
this.netWorkClosed();
},
handleCreateRoleResult: function(e) {
if (e.errorCode == SystemError.success) {
ViewManager.closeView("ACCOUNT_VIEW");
ViewManager.closeView("CREATE_VIEW");
this.model.setNewRole(!0);
app.ctrls.game.authSuccess(e.data.roleId);
} else {
this.model.sendChangeLoginStatus(!1);
if (e.errorCode == AuthError.nicknameIsInvalid) ViewManager.showView("CREATE_VIEW"); else if (e.errorCode == SystemError.createRoleLimit) {
ViewManager.closeView("CREATE_VIEW");
ViewManager.closeView("ACCOUNT_VIEW");
UserUtils.setDataStr(UserDefaultConst.QuickLoginData, "");
}
ViewManager.showErrorMsg(e.errorCode);
}
},
getNoticeInfo: function() {
var e = this;
this.request({
method: "getNoticeInfo"
}, function(t) {
e.model.setNoticeInfo(t);
}, !1);
},
wechatLogin: function(e, t) {
var i = this, s = {
method: "wechatLogin",
data: {
wechatCode: e,
appid: GlobalEnum.YSAppId
}
};
this.request(s, function(e) {
TypeUtils.isRealNull(e.username) || i.model.setNickname(e.username);
TypeUtils.isRealNull(e.sex) || i.model.setLoginSex(e.sex);
TypeUtils.isRealNull(e.accountName) && (e.accountName = e.username);
i.tryGetServerList(e);
TypeUtils.isFunction(t) && t(e);
}, !1);
},
wxLogin: function(e, t) {
var i = this, s = {
method: "wechatAppLogin",
data: {
wechatCode: e,
appid: GlobalEnum.MiniAppId
}
};
this.request(s, function(e) {
TypeUtils.isRealNull(e.username) || i.model.setNickname(e.username);
TypeUtils.isRealNull(e.sex) || i.model.setLoginSex(e.sex);
TypeUtils.isRealNull(e.accountName) && (e.accountName = e.username);
i.tryGetServerList(e);
TypeUtils.isFunction(t) && t(e);
}, !1);
}
});
cc._RF.pop();
}).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
}, {
HttpCtrl: "HttpCtrl",
LoginConst: "LoginConst",
LoginModel: "LoginModel",
protoMap: "protoMap",
socket: "socket"
} ],
LoginModel: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "ac97d6VVPdOaq/rCtkjgkT/", "LoginModel");
var s = e("RoleConst"), n = e("LoginConst");
cc.Class({
extends: ModelBase,
properties: {
EVENT_AUTH: "EVENT_AUTH",
EVENT_CHANGE_LOGIN_TYPE: "EVENT_CHANGE_LOGIN_TYPE",
EVENT_WAITING_LINE: "EVENT_WAITING_LINE",
EVENT_GET_HEAD_IMG_SUCCESS: "EVENT_GET_HEAD_IMG_SUCCESS",
EVENT_NOTICE_INFO: "EVENT_NOTICE_INFO"
},
ctor: function() {
this.init();
this.setLoginNeedLoadResStatus(n.LoginStatus.NeedLoadRes);
},
setAccountAndPwd: function(e) {
UserUtils.setData(UserDefaultConst.UserAccountData, e);
},
setNickname: function(e) {
this.nickname = e;
},
getNickname: function() {
return this.nickname;
},
getLoginToken: function() {
return this.loginToken;
},
setLoginToken: function(e) {
this.loginToken = e;
},
setServerId: function(e) {
this._serverId = e;
},
getServerId: function() {
return this._serverId;
},
setNewRole: function(e) {
this._isNewRole = e;
},
isNewRole: function() {
return this._isNewRole;
},
getAccountName: function() {
return this.authInfo.accountName || "";
},
getSignTime: function() {
return this.authInfo.signTime || "";
},
getServerToken: function() {
return this.authInfo.serverToken || "";
},
getServerName: function() {
return this.authInfo.serverList.name;
},
setAuthInfo: function(e) {
this.authInfo = e;
var t = {
password: e.password,
accountName: e.loginAccountName || ""
};
this.dispatchEvent(this.EVENT_AUTH, t);
},
setLoginSex: function(e) {
this._loginSex = 0 == e ? s.RoleSex.Boy : e;
},
getLoginSex: function() {
return this._loginSex || s.RoleSex.Boy;
},
setHeadImgList: function(e) {
this.headList = e;
this.dispatchEvent(this.EVENT_GET_HEAD_IMG_SUCCESS);
},
getHeadImgList: function() {
return this.headList;
},
setLoginNeedLoadResStatus: function(e) {
this.m_isNeedLoadResStatus = e;
},
isLoginNeedLoadResStatus: function() {
return this.m_isNeedLoadResStatus == n.LoginStatus.NeedLoadRes;
},
setServerTime: function(e, t) {
this._serverTime = e.time;
this._diffTime = Math.ceil(new Date().getTime() / 1e3 - this._serverTime);
this.isNewDay();
},
getServerTime: function() {},
getDiffTimeToServer: function() {
return this._diffTime || 0;
},
isNewDay: function() {
var e = new Date(1e3 * this._serverTime).toDateString(), t = Number(UserUtils.getDataStr(UserDefaultConst.LastLoginTime, 0)), i = new Date(1e3 * t).toDateString();
UserUtils.setDataStr(UserDefaultConst.LastLoginTime, this._serverTime);
return e != i;
},
getCurrentServerTime: function() {
return new Date().getTime() / 1e3 - this._diffTime;
},
sendChangeLoginStatus: function(e) {
this.dispatchEvent(this.EVENT_CHANGE_LOGIN_TYPE, {
status: e
});
},
setWattingLine: function(e) {
this.dispatchEvent(this.EVENT_WAITING_LINE, e);
},
getSpecialFundShopItem: function() {
return TypeUtils.isRealNull(this.loginInfo) || TypeUtils.isRealNull(this.loginInfo.switchItemInfo) ? {} : this.loginInfo.switchItemInfo.fund || {};
},
getSpecialExchangeShopItem: function() {
return TypeUtils.isRealNull(this.loginInfo) || TypeUtils.isRealNull(this.loginInfo.switchItemInfo) ? {} : this.loginInfo.switchItemInfo.exchange || {};
},
setNoticeInfo: function(e) {
this.noticeInfo = e;
this.dispatchEvent(this.EVENT_NOTICE_INFO);
},
getNoticeInfo: function() {
return this.noticeInfo;
}
});
cc._RF.pop();
}, {
LoginConst: "LoginConst",
RoleConst: "RoleConst"
} ],
MailCtrl: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "2c21fQn4O9HPq7L7xEptq7F", "MailCtrl");
var s = e("HttpCtrl"), n = e("MailModel");
cc.Class({
extends: s,
properties: {},
ctor: function() {
var e = new n();
this.init(e);
},
requireAfterEnterGame: function() {
this.addEvent(M_Mail.handleRecvMail, this.handleRecvMail.bind(this));
this.getAllMailsStatus();
},
handleRecvMail: function(e) {
this.model.addNewMail(e.data.mail);
},
getAllMailsStatus: function() {
console.log("请求邮件_______________");
session.request(M_Mail.getAllMailsStatus, null, this.handlerWithError(this, this.handleGetAllMailsStatus), null, !1);
},
handleGetAllMailsStatus: function(e) {
this.model.setMailData(e.data);
},
readMail: function(e, t) {
session.request(M_Mail.readMail, t, this.handlerWithError(this, this.handleReadMail), e);
},
handleReadMail: function(e) {
this.model.readMail(e.param, e.data);
},
getAttachment: function(e, t) {
session.request(M_Mail.getAttachment, t, this.handlerWithError(this, this.handleGetAttachment), e);
},
handleGetAttachment: function(e) {
this.model.getAttachs(e.param, e.data);
},
delMail: function(e, t) {
session.request(M_Mail.delMail, t, this.handlerWithError(this, this.handleDelMail), e);
},
handleDelMail: function(e) {
this.model.delMails(e.param, [ e.data ]);
},
recvAllAttach: function(e) {
session.request(M_Mail.recvAllAttach, e, this.handlerWithError(this, this.handleRecvAllAttach), e);
},
handleRecvAllAttach: function(e) {
this.model.getAttachs(e.param, e.data);
},
delAllMail: function(e) {
session.request(M_Mail.delAllMail, e, this.handlerWithError(this, this.handleDelAllMail), e);
},
handleDelAllMail: function(e) {
this.model.delMails(e.param, e.data.mailIds || []);
}
});
cc._RF.pop();
}, {
HttpCtrl: "HttpCtrl",
MailModel: "MailModel"
} ],
MailModel: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "d0d83P2b8tLfLXgTDVfmVR1", "MailModel");
cc.Class({
extends: ModelBase,
properties: {
EVENT_READ_MAIL: "EVENT_READ_MAIL",
EVENT_NEW_MAIL: "EVENT_NEW_MAIL",
EVENT_GET_ATTACH: "EVENT_GET_ATTACH",
EVENT_DEL_MAIL: "EVENT_DEL_MAIL"
},
ctor: function() {
this.init();
this._allMailData = {};
this.ReadState = {
NO: 1,
YES: 2
};
this.AnnexType = {
YES: 1,
NO: 2
};
this.MailType = {
SYSTEM: 1,
PROTAL: 2
};
RedRemindManager.registerCheckRemind(AppEvent.RedPointMail, this.checkRedPoint, this);
},
setMailData: function(e) {
this._allMailData = e;
this._allMailData.system = this._allMailData.system || [];
this._allMailData.portal = this._allMailData.portal || [];
RedRemindManager.doRemind(AppEvent.RedPointMail);
},
getMailList: function(e) {
return e == this.MailType.SYSTEM ? this._allMailData.system || [] : this._allMailData.portal || [];
},
readMail: function(e, t) {
for (var i = this.getMailList(e), s = null, n = 0; n < i.length; n++) {
var o = i[n];
if (o.mailId == t.mailId) {
o.status = this.ReadState.YES;
o.content = t.content;
o.attach = t.attach || [];
s = o;
break;
}
}
this.dispatchEvent(this.EVENT_READ_MAIL, s);
RedRemindManager.doRemind(AppEvent.RedPointMail);
},
getAttachs: function(e, t) {
for (var i = this.getMailList(e), s = t.recvGoods || [], n = t.mailIds || [], o = 0; o < i.length; o++) for (var a = i[o], r = 0; r < n.length; r++) {
var l = n[r];
if (a.mailId == l) {
a.status = this.ReadState.YES;
a.mailType = this.AnnexType.NO;
a.attach = [];
break;
}
}
s.length > 0 && ViewManager.showAwards({
awards: s
});
this.dispatchEvent(this.EVENT_GET_ATTACH, n);
RedRemindManager.doRemind(AppEvent.RedPointMail);
},
delMails: function(e, t) {
var i = this.getMailList(e);
ArrayUtils.safeRemove(i, function(e, i) {
for (var s = 0; s < t.length; s++) {
var n = t[s];
if (i.mailId == n) return !0;
}
});
this.dispatchEvent(this.EVENT_DEL_MAIL, t);
RedRemindManager.doRemind(AppEvent.RedPointMail);
},
addNewMail: function(e) {
var t = this.getMailList(e.pageType);
ArrayUtils.insert(t, 0, e);
this.dispatchEvent(this.EVENT_NEW_MAIL, e);
RedRemindManager.doRemind(AppEvent.RedPointMail);
},
checkRedPoint: function() {
var e = this.isRedPoint(this.MailType.SYSTEM);
e || (e = this.isRedPoint(this.MailType.PROTAL));
return e;
},
isRedPoint: function(e) {
for (var t = this.getMailList(e), i = !1, s = 0; s < t.length; s++) {
var n = t[s];
if (n.mailType == this.AnnexType.YES) {
i = !0;
break;
}
if (n.status == this.ReadState.NO) {
i = !0;
break;
}
}
return i;
},
hasAttach: function(e) {
for (var t = !1, i = this.getMailList(e), s = 0; s < i.length; s++) {
if (i[s].mailType == this.AnnexType.YES) {
t = !0;
break;
}
}
return t;
},
hasUnreadMail: function(e) {
for (var t = !1, i = this.getMailList(e), s = 0; s < i.length; s++) {
if (i[s].status == this.ReadState.NO) {
t = !0;
break;
}
}
return t;
}
});
cc._RF.pop();
}, {} ],
ManagerEnum: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "d9b8cENss9JfZ/kg+6d0DPA", "ManagerEnum");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
Direction: {
Horizontal: 0,
Vertical: 1
},
KeyboardManager: {}
};
s.KeyboardManager.KeyBoardConfig = [ {} ];
s.SoundManager = {};
s.SoundManager.UserKey = {};
s.SoundManager.UserKey.SoundVol = "SoundManager-soundVol";
s.SoundManager.UserKey.MusicVol = "SoundManager-musicVol";
s.UserDataManager = {};
s.UserDataManager.UserKey = {};
s.UserDataManager.UserKey.isShowHurtNumber = "UserDataManager-isShowHurtNumber";
s.UserDataManager.UserKey.isShowLoadingCartoon = "UserDataManager-isShowLoadingCartoon";
s.UserDataManager.UserKey.isSetHightFrameRate = "UserDataManager-isSetHightFrameRate";
s.UserDataManager.UserKey.HightFrameRate = {};
s.UserDataManager.UserKey.HightFrameRate.Undefined = -1;
s.UserDataManager.UserKey.HightFrameRate.LowFrameRate = 1;
s.UserDataManager.UserKey.HightFrameRate.HightFrameRate = 2;
s.AdVideoManager = {};
s.AdVideoManager.VedioStatus = {};
s.AdVideoManager.VedioStatus.Error = -1;
s.AdVideoManager.VedioStatus.ShowFinish = 0;
s.AdVideoManager.VedioStatus.CloseOnHalf = 1;
s.AdVideoManager.AdType = {};
s.AdVideoManager.AdType.BuyGoods = 1;
s.RecordDotMgr = {};
s.RecordDotMgr.LevelStatus = {};
s.RecordDotMgr.LevelStatus.PassLevelFail = 0;
s.RecordDotMgr.LevelStatus.PassLevelSuc = 1;
s.RecordDotMgr.AdDot = {};
s.RecordDotMgr.AdDot.MulOffLineReward = 1;
s.RecordDotMgr.AdDot.DoubleAttack = 2;
s.RecordDotMgr.AdDot.DoubleIncome = 3;
s.RecordDotMgr.AdDot.AutoCompose = 4;
s.RecordDotMgr.AdDot.ABoxDiamond = 5;
s.RecordDotMgr.AdDot.FreeBox = 6;
s.RecordDotMgr.AdDot.ClassicBox = 7;
s.RecordDotMgr.AdDot.SupremeBox = 8;
s.RecordDotMgr.AdDot.FreeChip = 9;
s.RecordDotMgr.AdDot.SupplementaryCard = 10;
s.RecordDotMgr.AdDot.RandomBox = 11;
s.RecordDotMgr.AdDot.AutoBuy = 12;
s.RecordDotMgr.AdDot.GodSelectPeople = 13;
s.RecordDotMgr.AdDot.DropWealthGold = 14;
s.RecordDotMgr.AdDot.DropWealthDiamond = 15;
s.RecordDotMgr.AdDot.AutoBattle = 16;
s.QueueType = {};
s.QueueType.Common = 1;
s.QueueType.Award = 2;
s.QueueType.GameStart = 3;
s.QueueType.Currency = 4;
s.QueueType.Settlement = 5;
s.QueueType.VipGift = 6;
s.QueueType.RoomExit = 7;
s.QueueState = {};
s.QueueState.UnOpen = 1;
s.QueueState.Zusei = 2;
s.QueueState.Open = 3;
var n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
MarqueeConst: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "984e0qNRqZGd6588XSbs5nb", "MarqueeConst");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s;
function n(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}
var o = {
BroadcastType: {}
};
o.BroadcastType.personal = 1;
o.BroadcastType.system = 2;
o.ShowType = {};
o.ShowType.All = 1;
o.ShowType.DDZHall = 2;
o.ShowType.FishHall = 3;
o.ShowType.MainHall = 4;
o.ShowType.DDZ = 5;
o.ShowType.Fish = 6;
o.ShowType.InGame = 7;
o.Priority = {};
o.Priority.Emergency = 0;
o.WaitType = {
NaJia: 1,
Dragon: 2
};
o.WaitOfId = (n(s = {}, o.WaitType.NaJia, [ 1112 ]), n(s, o.WaitType.Dragon, [ 1113 ]), 
s);
var a = o;
i.default = a;
t.exports = i.default;
cc._RF.pop();
}, {} ],
MarqueeCtrl: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "566036J7FRMNZ6DvYLXMKi8", "MarqueeCtrl");
var s = e("HttpCtrl"), n = e("MarqueeModel");
cc.Class({
extends: s,
properties: {},
ctor: function() {
var e = new n();
this.init(e);
},
requireAfterEnterGame: function() {
this.addEvent(M_Marquee.handleSendMsgByKeyWord, this.handleSendMsgByKeyWord.bind(this));
this.addEvent(M_Marquee.handleSendMsgBySentence, this.handleSendMsgBySentence.bind(this));
this.addEvent(M_Marquee.handleAltMsg, this.handleAltMsg.bind(this));
this.addEvent(M_Marquee.handleDelMsg, this.handleDelMsg.bind(this));
this.getMessage();
},
getMessage: function() {
session.request(M_Marquee.getMessage, null, this.handlerWithError(this, this.handleGetMessage));
},
handleGetMessage: function(e) {
this.model.setMarquees(e.data);
},
handleSendMsgByKeyWord: function(e) {
this.model.addMsgByKeyWord(e.data);
},
handleSendMsgBySentence: function(e) {
this.model.addMsgBySentence(e.data);
},
handleAltMsg: function(e) {
this.model.changeMsg(e.data);
},
handleDelMsg: function(e) {
this.model.delectMsg(e.data);
}
});
cc._RF.pop();
}, {
HttpCtrl: "HttpCtrl",
MarqueeModel: "MarqueeModel"
} ],
MarqueeModel: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "7d0d4L0nxBI8ZKncDoD1IIG", "MarqueeModel");
function s(e) {
return r(e) || a(e) || o(e) || n();
}
function n() {
throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function o(e, t) {
if (e) {
if ("string" == typeof e) return l(e, t);
var i = Object.prototype.toString.call(e).slice(8, -1);
"Object" === i && e.constructor && (i = e.constructor.name);
return "Map" === i || "Set" === i ? Array.from(i) : "Arguments" === i || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i) ? l(e, t) : void 0;
}
}
function a(e) {
if ("undefined" != typeof Symbol && Symbol.iterator in Object(e)) return Array.from(e);
}
function r(e) {
if (Array.isArray(e)) return l(e);
}
function l(e, t) {
(null == t || t > e.length) && (t = e.length);
for (var i = 0, s = new Array(t); i < t; i++) s[i] = e[i];
return s;
}
var c = e("MarqueeConst");
cc.Class({
extends: ModelBase,
properties: {},
ctor: function() {
this.init();
this._marqueeList = {};
this._countDownList = [];
this._msgIndex = 0;
this._carouselIdx = 0;
this._emergeQueue = [];
this._emergeQueueDelayTime = 0;
this._waitQueue = {};
TimeMgr.on(this.countDownQueue, this, 1);
},
getMarqueeList: function() {
return this._marqueeList;
},
checkNewMarquee: function(e) {
for (var t, i, s = !1, n = 0; n <= 10; n++) {
var o = this._marqueeList[n];
if (TypeUtils.isNotEmptyArray(o)) for (var a = 0; a < o.length; a++) {
var r = o[a];
if (!(1 != r.type && 1 != e && r.type != e || r.isWatting || this.isWaitToShow(r.id))) {
if (!(r.leftTime > 0)) {
s = !0;
r.times = r.times - 1;
if (r.times > 0) {
r.leftTime = r.timeInterval;
t = r;
i = n;
} else {
t = ArrayUtils.remove(o, a)[0];
}
TypeUtils.isRealNull(i) || this.sort(i);
return t;
}
r.isWatting = !0;
this._countDownList.push(DicUtils.deepClone(r));
}
}
}
return s ? null : this.carouselMarquee();
},
changeWaitState: function(e, t) {
this._waitQueue[e] = t;
},
isWaitToShow: function(e) {
for (var t in c.WaitType) if (c.WaitType.hasOwnProperty(t)) {
var i = c.WaitType[t];
if (this._waitQueue[i]) for (var s = c.WaitOfId[i] || [], n = 0; n < s.length; n++) if (s[n] == e) return !0;
}
return !1;
},
countDownQueue: function(e) {
if (TypeUtils.isNotEmptyArray(this._countDownList)) {
for (var t = 0; t < this._countDownList.length; t++) {
var i = this._countDownList[t];
i.leftTime = i.leftTime - 1;
if (i.leftTime <= 0) {
i.isWatting = !1;
for (var s = this._marqueeList[i.priority] || [], n = 0; n < s.length; n++) {
var o = s[n];
if (o.index == i.index && o.id == i.id && o.isWatting && o.leftTime > 0) {
this._marqueeList[i.priority][n].isWatting = !1;
this._marqueeList[i.priority][n].leftTime = 0;
break;
}
}
}
}
ArrayUtils.safeRemove(this._countDownList, function(e, t) {
if (!t.isWatting || t.leftTime <= 0) return !0;
});
}
if (this._emergeQueueDelayTime > 0) this._emergeQueueDelayTime = this._emergeQueueDelayTime - 1; else if (!TypeUtils.isEmptyArray(this._emergeQueue)) {
for (var a = [], r = 0; r < this._emergeQueue.length; r++) {
var l = this._emergeQueue[r];
l.leftTime = l.leftTime - 1;
if (l.leftTime <= 0) {
if (this.showEmergeView(l)) {
l.times = l.times - 1;
l.leftTime = l.timeInterval;
this._emergeQueueDelayTime = 3;
l.times <= 0 ? a.push(r) : TableUtils.switch(this._emergeQueue, r, this._emergeQueue.length - 1);
}
break;
}
}
ArrayUtils.safeRemove(this._emergeQueue, function(e, t) {
for (var i = 0; i < a.length; i++) if (a[i] == e) return !0;
return !1;
});
}
},
_sortFunc: function(e, t) {
return e.type == t.type ? e.priority == t.priority ? e.id == t.id ? e.index - t.index : e.id - t.id : e.priority - t.priority : t.type - e.type;
},
sort: function(e) {
if (TypeUtils.isRealNull(e)) {
for (var t in this._marqueeList) if (this._marqueeList.hasOwnProperty(t)) {
var i = this._marqueeList[t];
ArrayUtils.sort(i, this._sortFunc.bind(this));
}
} else {
var s = this._marqueeList[e] || [];
ArrayUtils.sort(s, this._sortFunc.bind(this));
}
},
setMarquees: function(e) {
var t = this;
e.marquees = e.marquees || [];
ArrayUtils.safeRemove(e.marquees, function(e, i) {
if (i.priority == c.Priority.Emergency) {
t.addEmergeData(i);
return !0;
}
});
for (var i = 0; i < e.marquees.length; i++) {
var s = e.marquees[i];
s.leftTime = s.leftTime || 0;
var n = ConfigMgr.getConfig("marquee").findByIndex(s.id);
if (s.id < 1e4) if (TypeUtils.isRealNull(n)) s.type = 1; else {
s.content = n.content;
s.priority = n.priority;
s.type = n.type;
s.times = n.times || 1;
s.timeInterval = n.timeInterval || 0;
} else TypeUtils.isRealNull(n) || TypeUtils.isRealNull(n.type) ? s.type = 1 : s.type = n.type;
this._msgIndex = this._msgIndex + 1;
s.index = this._msgIndex;
this._marqueeList[s.priority] = this._marqueeList[s.priority] || [];
this._marqueeList[s.priority].push(s);
}
this.sort();
},
addMsgByKeyWord: function(e) {
var t = e.id, i = e.words;
TypeUtils.isRealNull(this.ignoreExchangeItem) && (this.ignoreExchangeItem = app.ctrls.login.getModel().getSpecialExchangeShopItem());
TypeUtils.isRealNull(this.ignoreFundItem) && (this.ignoreFundItem = app.ctrls.login.getModel().getSpecialFundShopItem());
if (TypeUtils.isRealNull(t) || 2 != t) {
if (!TypeUtils.isRealNull(t) && 6 == t && this.ignoreFundItem.length > 0) for (var n = 0; n < this.ignoreFundItem.length; n++) if (e.words[2] == this.ignoreFundItem[n].title) return;
} else if (this.ignoreExchangeItem.length > 0) for (var o = 0; o < this.ignoreExchangeItem.length; o++) if (e.words[2] == this.ignoreExchangeItem[o].title) return;
var a = ConfigMgr.getConfig("marquee").findByIndex(t);
if (TypeUtils.isRealNull(a)) logger.error("MarqueeConfig[" + t + "] is null"); else {
e.content = a.content;
if (!TypeUtils.isRealNull(i)) {
var r;
e.content = (r = cc.js).formatStr.apply(r, [ a.content ].concat(s(i)));
}
e.priority = a.priority;
e.type = a.type;
e.times = a.times || 1;
e.timeInterval = a.timeInterval || 0;
e.leftTime = a.timeInterval || 0;
this.addMsg(e);
}
},
addMsgBySentence: function(e) {
if (e.priority != c.Priority.Emergency) {
var t = ConfigMgr.getConfig("marquee").findByIndex(e.id);
if (e.id < 1e4) {
e.content = t.content;
e.priority = t.priority;
e.type = t.type;
e.times = t.times || 1;
e.timeInterval = t.timeInterval || 0;
e.leftTime = t.timeInterval || 0;
} else TypeUtils.isRealNull(t) || TypeUtils.isRealNull(t.type) ? e.type = 1 : e.type = t.type;
this.addMsg(e);
} else this.addEmergeData(e);
},
addChatMsg: function(e) {
var t = {
content: e,
priority: 10,
type: 1,
times: 1,
timeInterval: 0,
leftTime: 0,
msgType: 1
};
this.addMsg(t);
},
addMsg: function(e) {
this._msgIndex = this._msgIndex + 1;
e.index = this._msgIndex;
this._marqueeList[e.priority] = this._marqueeList[e.priority] || [];
e.priority > 2 && this._marqueeList[e.priority].length >= 10 && ArrayUtils.remove(this._marqueeList[e.priority], 2);
this._marqueeList[e.priority].push(e);
this.sort(e.priority);
},
changeMsg: function(e) {
if (item.priority != c.Priority.Emergency) {
for (var t, i = 0; i < this._marqueeList.length; i++) for (var s = this._marqueeList[i], n = 0; n < s.length; n++) {
var o = s[n];
if (o.id == e.id) {
var a = ConfigMgr.getConfig("marquee").findByIndex(e.id);
if (e.id < 1e4) {
e.content = a.content;
e.priority = a.priority;
e.type = a.type;
e.times = a.times || 1;
e.timeInterval = a.timeInterval || 0;
e.leftTime = a.timeInterval || 0;
} else TypeUtils.isRealNull(a) || TypeUtils.isRealNull(a.type) ? o.type = 1 : o.type = a.type;
o = e;
t = e.priority;
break;
}
}
TypeUtils.isRealNull(t) || this.sort(t);
} else this.addEmergeData(e);
},
delectMsg: function(e) {
for (var t, i = 0; i < 10; i++) {
for (var s = this._marqueeList[i], n = 0; n < s.length; n++) {
if (s[n].id == e) {
t = i;
ArrayUtils.remove(s, n);
break;
}
}
if (TypeUtils.isRealNull(t)) {
this.sort(t);
t = null;
}
}
},
clearMarquee: function(e) {
for (var t = this._marqueeList[e.priority] || [], i = 0; i < t.length; i++) {
if (t[i].id == e.id) {
ArrayUtils.remove(t, i);
break;
}
}
this.sort(e.priority);
},
carouselMarquee: function() {
var e = [ 1104, 1105, 1106, 1107, 1108, 1109, 1110, 1111 ];
this._carouselIdx = (this._carouselIdx + 1) % e.length;
return ConfigMgr.getConfig("marquee").findByIndex(e[this._carouselIdx]);
},
addEmergeData: function(e) {
for (var t = 0; t < this._emergeQueue.length; t++) {
var i = this._emergeQueue[t];
if (i.id == e.id) {
if (i.times <= 0) return;
this._emergeQueue[t] = e;
return;
}
}
if (!(e.times <= 0)) {
e.leftTime = e.timeInterval;
this._emergeQueue.push(e);
}
},
changeEmergeData: function(e) {
for (var t = 0; t < this._emergeQueue.length; t++) {
var i = this._emergeQueue[t];
i.id == e.id && (i.times <= 0 ? ArrayUtils.remove(this._emergeQueue, t) : this._emergeQueue[t] = e);
}
},
showEmergeView: function(e) {
var t = !1, i = ViewManager.getView("GAME_LOADING_VIEW"), s = ViewManager.getView("FISH_ROOM_LOADING_VIEW");
TypeUtils.isRealNull(i) && TypeUtils.isRealNull(s) || (t = !0);
return !t;
}
});
cc._RF.pop();
}, {
MarqueeConst: "MarqueeConst"
} ],
Md5Utils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "a6bf38r90FFDIAdx0niCosD", "Md5Utils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
(function(e) {
e && e.__esModule;
})(e("./DicUtils"));
var s = {};
s.hex_md5 = function(e) {
return this.binl2hex(this.core_md5(this.str2binl(e), 8 * e.length));
};
s.b64_md5 = function(e) {
return this.binl2b64(this.core_md5(this.str2binl(e), 8 * e.length));
};
s.str_md5 = function(e) {
return this.binl2str(this.core_md5(this.str2binl(e), 8 * e.length));
};
s.hex_hmac_md5 = function(e, t) {
return this.binl2hex(this.core_hmac_md5(e, t));
};
s.b64_hmac_md5 = function(e, t) {
return this.binl2b64(this.core_hmac_md5(e, t));
};
s.str_hmac_md5 = function(e, t) {
return this.binl2str(this.core_hmac_md5(e, t));
};
s.md5_vm_test = function() {
return "900150983cd24fb0d6963f7d28e17f72" == hex_md5("abc");
};
s.core_md5 = function(e, t) {
e[t >> 5] |= 128 << t % 32;
e[14 + (t + 64 >>> 9 << 4)] = t;
for (var i = 1732584193, s = -271733879, n = -1732584194, o = 271733878, a = 0; a < e.length; a += 16) {
var r = i, l = s, c = n, h = o;
i = this.md5_ff(i, s, n, o, e[a + 0], 7, -680876936);
o = this.md5_ff(o, i, s, n, e[a + 1], 12, -389564586);
n = this.md5_ff(n, o, i, s, e[a + 2], 17, 606105819);
s = this.md5_ff(s, n, o, i, e[a + 3], 22, -1044525330);
i = this.md5_ff(i, s, n, o, e[a + 4], 7, -176418897);
o = this.md5_ff(o, i, s, n, e[a + 5], 12, 1200080426);
n = this.md5_ff(n, o, i, s, e[a + 6], 17, -1473231341);
s = this.md5_ff(s, n, o, i, e[a + 7], 22, -45705983);
i = this.md5_ff(i, s, n, o, e[a + 8], 7, 1770035416);
o = this.md5_ff(o, i, s, n, e[a + 9], 12, -1958414417);
n = this.md5_ff(n, o, i, s, e[a + 10], 17, -42063);
s = this.md5_ff(s, n, o, i, e[a + 11], 22, -1990404162);
i = this.md5_ff(i, s, n, o, e[a + 12], 7, 1804603682);
o = this.md5_ff(o, i, s, n, e[a + 13], 12, -40341101);
n = this.md5_ff(n, o, i, s, e[a + 14], 17, -1502002290);
s = this.md5_ff(s, n, o, i, e[a + 15], 22, 1236535329);
i = this.md5_gg(i, s, n, o, e[a + 1], 5, -165796510);
o = this.md5_gg(o, i, s, n, e[a + 6], 9, -1069501632);
n = this.md5_gg(n, o, i, s, e[a + 11], 14, 643717713);
s = this.md5_gg(s, n, o, i, e[a + 0], 20, -373897302);
i = this.md5_gg(i, s, n, o, e[a + 5], 5, -701558691);
o = this.md5_gg(o, i, s, n, e[a + 10], 9, 38016083);
n = this.md5_gg(n, o, i, s, e[a + 15], 14, -660478335);
s = this.md5_gg(s, n, o, i, e[a + 4], 20, -405537848);
i = this.md5_gg(i, s, n, o, e[a + 9], 5, 568446438);
o = this.md5_gg(o, i, s, n, e[a + 14], 9, -1019803690);
n = this.md5_gg(n, o, i, s, e[a + 3], 14, -187363961);
s = this.md5_gg(s, n, o, i, e[a + 8], 20, 1163531501);
i = this.md5_gg(i, s, n, o, e[a + 13], 5, -1444681467);
o = this.md5_gg(o, i, s, n, e[a + 2], 9, -51403784);
n = this.md5_gg(n, o, i, s, e[a + 7], 14, 1735328473);
s = this.md5_gg(s, n, o, i, e[a + 12], 20, -1926607734);
i = this.md5_hh(i, s, n, o, e[a + 5], 4, -378558);
o = this.md5_hh(o, i, s, n, e[a + 8], 11, -2022574463);
n = this.md5_hh(n, o, i, s, e[a + 11], 16, 1839030562);
s = this.md5_hh(s, n, o, i, e[a + 14], 23, -35309556);
i = this.md5_hh(i, s, n, o, e[a + 1], 4, -1530992060);
o = this.md5_hh(o, i, s, n, e[a + 4], 11, 1272893353);
n = this.md5_hh(n, o, i, s, e[a + 7], 16, -155497632);
s = this.md5_hh(s, n, o, i, e[a + 10], 23, -1094730640);
i = this.md5_hh(i, s, n, o, e[a + 13], 4, 681279174);
o = this.md5_hh(o, i, s, n, e[a + 0], 11, -358537222);
n = this.md5_hh(n, o, i, s, e[a + 3], 16, -722521979);
s = this.md5_hh(s, n, o, i, e[a + 6], 23, 76029189);
i = this.md5_hh(i, s, n, o, e[a + 9], 4, -640364487);
o = this.md5_hh(o, i, s, n, e[a + 12], 11, -421815835);
n = this.md5_hh(n, o, i, s, e[a + 15], 16, 530742520);
s = this.md5_hh(s, n, o, i, e[a + 2], 23, -995338651);
i = this.md5_ii(i, s, n, o, e[a + 0], 6, -198630844);
o = this.md5_ii(o, i, s, n, e[a + 7], 10, 1126891415);
n = this.md5_ii(n, o, i, s, e[a + 14], 15, -1416354905);
s = this.md5_ii(s, n, o, i, e[a + 5], 21, -57434055);
i = this.md5_ii(i, s, n, o, e[a + 12], 6, 1700485571);
o = this.md5_ii(o, i, s, n, e[a + 3], 10, -1894986606);
n = this.md5_ii(n, o, i, s, e[a + 10], 15, -1051523);
s = this.md5_ii(s, n, o, i, e[a + 1], 21, -2054922799);
i = this.md5_ii(i, s, n, o, e[a + 8], 6, 1873313359);
o = this.md5_ii(o, i, s, n, e[a + 15], 10, -30611744);
n = this.md5_ii(n, o, i, s, e[a + 6], 15, -1560198380);
s = this.md5_ii(s, n, o, i, e[a + 13], 21, 1309151649);
i = this.md5_ii(i, s, n, o, e[a + 4], 6, -145523070);
o = this.md5_ii(o, i, s, n, e[a + 11], 10, -1120210379);
n = this.md5_ii(n, o, i, s, e[a + 2], 15, 718787259);
s = this.md5_ii(s, n, o, i, e[a + 9], 21, -343485551);
i = this.safe_add(i, r);
s = this.safe_add(s, l);
n = this.safe_add(n, c);
o = this.safe_add(o, h);
}
return Array(i, s, n, o);
};
s.md5_cmn = function(e, t, i, s, n, o) {
return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t, e), this.safe_add(s, o)), n), i);
};
s.md5_ff = function(e, t, i, s, n, o, a) {
return this.md5_cmn(t & i | ~t & s, e, t, n, o, a);
};
s.md5_gg = function(e, t, i, s, n, o, a) {
return this.md5_cmn(t & s | i & ~s, e, t, n, o, a);
};
s.md5_hh = function(e, t, i, s, n, o, a) {
return this.md5_cmn(t ^ i ^ s, e, t, n, o, a);
};
s.md5_ii = function(e, t, i, s, n, o, a) {
return this.md5_cmn(i ^ (t | ~s), e, t, n, o, a);
};
s.core_hmac_md5 = function(e, t) {
var i = this.str2binl(e);
i.length > 16 && (i = this.core_md5(i, 8 * e.length));
for (var s = Array(16), n = Array(16), o = 0; o < 16; o++) {
s[o] = 909522486 ^ i[o];
n[o] = 1549556828 ^ i[o];
}
var a = this.core_md5(s.concat(this.str2binl(t)), 512 + 8 * t.length);
return this.core_md5(n.concat(a), 640);
};
s.safe_add = function(e, t) {
var i = (65535 & e) + (65535 & t);
return (e >> 16) + (t >> 16) + (i >> 16) << 16 | 65535 & i;
};
s.bit_rol = function(e, t) {
return e << t | e >>> 32 - t;
};
s.str2binl = function(e) {
for (var t = Array(), i = 0; i < 8 * e.length; i += 8) t[i >> 5] |= (255 & e.charCodeAt(i / 8)) << i % 32;
return t;
};
s.binl2str = function(e) {
for (var t = "", i = 0; i < 32 * e.length; i += 8) t += String.fromCharCode(e[i >> 5] >>> i % 32 & 255);
return t;
};
s.binl2hex = function(e) {
for (var t = "0123456789abcdef", i = "", s = 0; s < 4 * e.length; s++) i += t.charAt(e[s >> 2] >> s % 4 * 8 + 4 & 15) + t.charAt(e[s >> 2] >> s % 4 * 8 & 15);
return i;
};
s.binl2b64 = function(e) {
for (var t = "", i = 0; i < 4 * e.length; i += 3) for (var s = (e[i >> 2] >> i % 4 * 8 & 255) << 16 | (e[i + 1 >> 2] >> (i + 1) % 4 * 8 & 255) << 8 | e[i + 2 >> 2] >> (i + 2) % 4 * 8 & 255, n = 0; n < 4; n++) 8 * i + 6 * n > 32 * e.length ? t += "" : t += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s >> 6 * (3 - n) & 63);
return t;
};
var n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {
"./DicUtils": "DicUtils"
} ],
MiniGameConst: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "237b0gVvQZHApwaS91mpDxI", "MiniGameConst");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
GameType: {}
};
s.GameType.DDZ = 1;
s.GameType.Fish = 2;
s.FishRoomType = {};
s.FishRoomType.HaiTan = 1;
s.FishRoomType.JuShou = 2;
s.FishRoomType.ChuangZhang = 3;
s.FishRoomType.XuanWo = 4;
s.FishRoomType.QiHang = 5;
s.FishRoomType.BaoZang = 6;
s.FishRoomType.BaZhu = 7;
s.FishRoomType.JuYuan = 8;
s.FishRoomType.ClubChuangZhang = 9;
s.FishRoomType.ClubXuanWo = 10;
var n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
MiniGameEnum: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "58582+ftp9MIpP5bBKdITJz", "MiniGameEnum");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
Game: {}
};
s.Game.RadishTower = 2;
var n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
ModelBase: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "fb2631sEB9BTbxGJbNPk2xx", "ModelBase");
window.ModelBase = cc.Class({
ctor: function() {
this.init();
},
init: function() {
this._eventMap = [];
},
doAfterInit: function() {},
dispatchEvent: function(e, t) {
this.emit(e, {
data: t
});
},
onExit: function() {
this.reset();
},
reset: function() {
if (null != this._eventMap && this._eventMap.length > 0) {
for (var e = 0; e < this._eventMap.length; e++) {
var t = this._eventMap[e];
EventManager.off(t.type, t.callback, t.target);
}
this._eventMap = null;
}
},
eventOn: function(e, t, i) {
EventManager.on(e, t, i);
this._eventMap.push({
type: e,
callback: t,
target: i
});
},
eventOnce: function(e, t, i) {
EventManager.once(e, t, i);
},
emit: function(e, t) {
EventManager.emit(e, t);
}
});
cc._RF.pop();
}, {} ],
MyApp: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "3defawuI/VDCbLdZNiJPLRF", "MyApp");
var s = e("EnvEnum"), n = e("GlobalEnum"), o = e("./Enum/ManagerEnum"), a = e("./Manager/ViewManager"), r = e("./Manager/RotationManager"), l = e("./Manager/EnumManager"), c = e("./Manager/KeyboardManager"), h = e("./Manager/PlistTextureManager"), u = e("./Manager/JsonManager"), d = e("./Manager/UserDataManager"), p = e("./Manager/ConfigManager"), f = e("TimeMgr"), m = e("./Manager/NodeCacheManager"), g = e("./Manager/SingleTextureManager"), _ = e("AdVideoManager"), T = e("AudioMusicManager"), C = e("GameManager"), y = e("PopViewManager"), I = e("Texture2DManager"), v = e("TextManager"), E = e("CommonAssetsManager"), S = e("./Manager/TaskSchManager"), b = e("./Manager/HeadManager"), R = e("./Manager/RedRemindManager"), N = e("ConfigMgr"), w = e("UidMgr"), U = e("RecordDotMgr"), A = e("HttpMgr"), L = e("./Uitls/Utils"), F = e("./Uitls/ChannelUtils"), M = e("./Uitls/HelpUtils"), x = e("./Uitls/PrefabUtils"), B = e("./Uitls/JsonUtils"), P = e("./Uitls/RandomUtils"), k = e("./Uitls/LoggerUtils"), D = e("./Uitls/LoadUtils"), V = e("./Uitls/TipsUtils"), O = e("./Uitls/AppUtils"), G = e("./Uitls/ArrayUtils"), H = e("./Uitls/TableUtils"), W = e("./Uitls/DicUtils"), q = e("./Uitls/RectUtils"), z = e("./Uitls/SpriteUtils"), j = e("./Uitls/TextureUtils"), Y = e("./Uitls/UserUtils"), J = e("./Uitls/NodeUtils"), K = e("./Uitls/AdaptUtils"), Q = e("SpineUtils"), X = e("./Uitls/DragonBoneUtils"), Z = e("./Uitls/Md5Utils"), $ = e("./Uitls/RoleUtils"), ee = e("./Uitls/TypeUtils"), te = e("./Uitls/NumberUtils"), ie = e("./Uitls/ItemUtils"), se = e("./Uitls/TilemapUtils"), ne = e("./Uitls/PointUtils"), oe = e("./Uitls/ColorUtils"), ae = e("./Uitls/TimeUtils"), re = e("./Uitls/ButtonUtils"), le = e("./Uitls/StringUtils"), ce = e("./Uitls/AlignUtils"), he = e("./Uitls/GlobalUtils"), ue = e("./Uitls/ActionUtils"), de = e("./Uitls/HttpUtils"), pe = e("./Uitls/CountingUtils"), fe = e("./Uitls/SystemUtils"), me = e("./Uitls/VipUtils");
cc.Class({
properties: {
name: "MyApp"
},
ctor: function() {
this.initCommon();
this.initEnum();
this.initUtils();
this.initManager();
this.initComponent();
this.initUtilsLater();
this.initCtrls();
},
initCommon: function() {
window.CC_DESIGN_RESOLUTION = {
width: 1280,
height: 720
};
window.FISH_PATH_AREA = {
width: 1024,
height: 578,
scaleX: 1.25,
scaleY: 720 / 578
};
window.CC_FPS = 60;
window.display = {
width: cc.winSize.width,
height: cc.winSize.height,
cx: cc.winSize.width / 2,
cy: cc.winSize.height / 2
};
},
initEnum: function() {
window.GlobalEnum = n;
window.ManagerEnum = o;
window.EnvEnum = s;
var t = e("LangOfCN");
window._LANG = function(e) {
return t[e] || e;
};
},
initComponent: function() {},
initCtrls: function() {
window.app = this;
var t = e("init");
app.ctrls = {};
app.ctrls.init = function() {
for (var i in t) if (t.hasOwnProperty(i)) {
var s = e(t[i]);
ee.isRealNull(s) || (app.ctrls[i] = new s());
}
};
app.ctrls.reset = function() {
for (var e in t) if (t.hasOwnProperty(e)) {
var i = app.ctrls[e];
if (!ee.isRealNull(i)) {
i.reset();
delete app.ctrls[e];
}
}
};
app.ctrls.init();
},
initManager: function() {
window.ViewManager = new a();
window.RotationManager = new r();
window.EnumManager = new l();
window.KeyboardManager = new c();
window.PlistTextureManager = new h();
window.JsonManager = new u();
window.TimeMgr = new f();
window.UserDataManager = new d().init();
window.ConfigManager = new p();
window.NodeCacheManager = new m();
window.SingleTextureManager = new g();
window.AdVideoManager = new _();
window.AudioMusicManager = new T();
window.GameManager = new C();
window.PopViewManager = new y();
window.Texture2DManager = new I();
window.TextManager = new v();
window.CommonAssetsManager = new E();
window.TaskSchManager = new S();
window.HeadManager = new b();
window.RedRemindManager = new R();
window.ConfigMgr = new N();
window.UidMgr = new w();
window.RecordDotMgr = new U().init();
window.HttpMgr = new A();
},
initUtils: function() {
window.ArrayUtils = G;
window.TableUtils = H;
window.RectUtils = q;
window.SpriteUtils = z;
window.TextureUtils = j;
window.JsonUtils = B;
window.UserUtils = Y;
window.NodeUtils = J;
window.AdaptUtils = K;
window.SpineUtils = Q;
window.DragonBoneUtils = X;
window.Md5Utils = Z;
window.RoleUtils = $;
window.TypeUtils = ee;
window.NumberUtils = te;
window.ItemUtils = ie;
window.TilemapUtils = se;
window.DicUtils = W;
window.PointUtils = ne;
window.ColorUtils = oe;
window.TimeUtils = ae;
window.ButtonUtils = re;
window.StringUtils = le;
window.AlignUtils = ce;
window.GlobalUtils = he;
window.ActionUtils = ue;
window.HttpUtils = de;
window.CountingUtils = pe;
window.SystemUtils = fe;
window.VipUtils = me;
},
initUtilsLater: function() {
window.Utils = new L();
window.ChannelUtils = new F();
window.HelpUtils = new M();
window.PrefabUtils = new x();
window.RandomUtils = new P();
window.logger = new k();
window.LoadUtils = new D();
window.TipsUtils = new V();
window.AppUtils = new O();
}
});
cc._RF.pop();
}, {
"./Enum/ManagerEnum": "ManagerEnum",
"./Manager/ConfigManager": "ConfigManager",
"./Manager/EnumManager": "EnumManager",
"./Manager/HeadManager": "HeadManager",
"./Manager/JsonManager": "JsonManager",
"./Manager/KeyboardManager": "KeyboardManager",
"./Manager/NodeCacheManager": "NodeCacheManager",
"./Manager/PlistTextureManager": "PlistTextureManager",
"./Manager/RedRemindManager": "RedRemindManager",
"./Manager/RotationManager": "RotationManager",
"./Manager/SingleTextureManager": "SingleTextureManager",
"./Manager/TaskSchManager": "TaskSchManager",
"./Manager/UserDataManager": "UserDataManager",
"./Manager/ViewManager": "ViewManager",
"./Uitls/ActionUtils": "ActionUtils",
"./Uitls/AdaptUtils": "AdaptUtils",
"./Uitls/AlignUtils": "AlignUtils",
"./Uitls/AppUtils": "AppUtils",
"./Uitls/ArrayUtils": "ArrayUtils",
"./Uitls/ButtonUtils": "ButtonUtils",
"./Uitls/ChannelUtils": "ChannelUtils",
"./Uitls/ColorUtils": "ColorUtils",
"./Uitls/CountingUtils": "CountingUtils",
"./Uitls/DicUtils": "DicUtils",
"./Uitls/DragonBoneUtils": "DragonBoneUtils",
"./Uitls/GlobalUtils": "GlobalUtils",
"./Uitls/HelpUtils": "HelpUtils",
"./Uitls/HttpUtils": "HttpUtils",
"./Uitls/ItemUtils": "ItemUtils",
"./Uitls/JsonUtils": "JsonUtils",
"./Uitls/LoadUtils": "LoadUtils",
"./Uitls/LoggerUtils": "LoggerUtils",
"./Uitls/Md5Utils": "Md5Utils",
"./Uitls/NodeUtils": "NodeUtils",
"./Uitls/NumberUtils": "NumberUtils",
"./Uitls/PointUtils": "PointUtils",
"./Uitls/PrefabUtils": "PrefabUtils",
"./Uitls/RandomUtils": "RandomUtils",
"./Uitls/RectUtils": "RectUtils",
"./Uitls/RoleUtils": "RoleUtils",
"./Uitls/SpriteUtils": "SpriteUtils",
"./Uitls/StringUtils": "StringUtils",
"./Uitls/SystemUtils": "SystemUtils",
"./Uitls/TableUtils": "TableUtils",
"./Uitls/TextureUtils": "TextureUtils",
"./Uitls/TilemapUtils": "TilemapUtils",
"./Uitls/TimeUtils": "TimeUtils",
"./Uitls/TipsUtils": "TipsUtils",
"./Uitls/TypeUtils": "TypeUtils",
"./Uitls/UserUtils": "UserUtils",
"./Uitls/Utils": "Utils",
"./Uitls/VipUtils": "VipUtils",
AdVideoManager: "AdVideoManager",
AudioMusicManager: "AudioMusicManager",
CommonAssetsManager: "CommonAssetsManager",
ConfigMgr: "ConfigMgr",
EnvEnum: "EnvEnum",
GameManager: "GameManager",
GlobalEnum: "GlobalEnum",
HttpMgr: "HttpMgr",
LangOfCN: "LangOfCN",
PopViewManager: "PopViewManager",
RecordDotMgr: "RecordDotMgr",
SpineUtils: "SpineUtils",
TextManager: "TextManager",
Texture2DManager: "Texture2DManager",
TimeMgr: "TimeMgr",
UidMgr: "UidMgr",
init: "init"
} ],
NodeCacheManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "ca652poQaxD8YCFDy8FJRlm", "NodeCacheManager");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = cc.Class({
ctor: function() {
this.initData();
},
initData: function() {
this.m_nodeCache = {};
this.m_cacheOriginDatas = {};
this.m_node = new cc.Node("");
cc.game.addPersistRootNode(this.m_node);
},
popPrefab: function(e, t, i) {
if (this.m_nodeCache[e]) {
var s = this.m_nodeCache[e].nodePool.get();
if (s) return s;
t && this._createOnePrefab(this.m_cacheOriginDatas[e], i);
}
},
pushPrefab: function(e, t) {
t && e ? this._cacheOnePrefabReal(e, t) : logger.warn("node == null");
},
cachePrefab: function(e) {
this.m_cacheOriginDatas[e.name] = this.m_cacheOriginDatas[e.name] || e;
this.m_nodeCache[e.name] = this.m_nodeCache[e.name] || {
nodePool: new cc.NodePool(e.name)
};
for (var t = 0; t < e.cacheNum; t++) this._cacheOnePrefab({
name: e.name,
prefabPath: e.prefabPath,
componentPath: e.componentPath
});
},
_cacheOnePrefab: function(e) {
if (e.name) {
var t = this;
PrefabUtils.load(e.prefabPath, function(i) {
i.parent = t.m_node;
if (e.componentPath) {
var s = i.addComponent(e.componentPath);
s.setCacheComponentFinishiCallback(function() {
t._cacheOnePrefabFinishi(e.name, i, s);
});
} else t._cacheOnePrefabFinishi(e.name, i);
});
} else logger.error("缓存节点的name == null");
},
_createOnePrefab: function(e, t) {
var i = this;
PrefabUtils.load(e.prefabPath, function(s) {
s.parent = i.m_node;
var n;
e.componentPath && (n = s.addComponent(e.componentPath));
t && t(s, n);
});
},
_cacheOnePrefabFinishi: function(e, t, i) {
if (e) {
this._cacheOnePrefabReal(e, t, i);
this.m_nodeCache[e].nodePool.size() === this.m_cacheOriginDatas[e].cacheNum && this.m_cacheOriginDatas[e].finishCallback && this.m_cacheOriginDatas[e].finishCallback();
} else logger.warn("缓存失败 name === null");
},
_cacheOnePrefabReal: function(e, t, i) {
this.m_nodeCache[e] ? this.m_nodeCache[e].nodePool.put(t) : logger.error("this.m_nodeCache[", e, "] == null");
}
});
i.default = s;
t.exports = i.default;
cc._RF.pop();
}, {} ],
NodeUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "e8320HaGfxAqK9TMG6gkPjg", "NodeUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
enableBtn: function(e, t) {
if (t) {
e.getComponent(cc.Button).enabled = !0;
e.opacity = 255;
} else {
e.getComponent(cc.Button).enabled = !1;
e.opacity = 150;
}
},
clone: function(e) {
return cc.instantiate(e);
},
getBoundingBox: function(e) {
return e.getBoundingBoxToWorld();
},
seekC: function(e, t) {
if (e) {
if (e.name === t) return e;
for (var i = e.children, s = 0; s < i.length; ++s) {
var n = this.seekC(i[s], t);
if (n) return n;
}
}
},
setNodeTouch: function(e, t, i, s) {
s = 1 != s;
e.on(cc.Node.EventType.TOUCH_START, t, i);
e.on(cc.Node.EventType.TOUCH_MOVE, t, i);
e.on(cc.Node.EventType.TOUCH_END, t, i);
e.on(cc.Node.EventType.TOUCH_CANCEL, t, i);
e._touchListener.setSwallowTouches(s);
},
setOffNodeTouch: function(e, t, i) {
e.off(cc.Node.EventType.TOUCH_START, t, i);
e.off(cc.Node.EventType.TOUCH_MOVE, t, i);
e.off(cc.Node.EventType.TOUCH_END, t, i);
e.off(cc.Node.EventType.TOUCH_CANCEL, t, i);
}
}, n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
NumberUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "e3d96O42zNJTJn4FYRfrRsz", "NumberUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
toStdEString: function(e, t) {
if (TypeUtils.isNumber(e)) {
t = t || 2;
var i = Math.pow(10, t), s = e.toString(), n = "";
if (e >= Math.pow(10, 12)) {
s = Math.floor(e / Math.pow(10, 12 - t)) / i;
n = "T";
} else if (e >= Math.pow(10, 9)) {
s = Math.floor(e / Math.pow(10, 9 - t)) / i;
n = "G";
} else if (e >= Math.pow(10, 6)) {
s = Math.floor(e / Math.pow(10, 6 - t)) / i;
n = "M";
} else if (e >= Math.pow(10, 3)) {
s = Math.floor(e / Math.pow(10, 3 - t)) / i;
n = "K";
}
return s + n;
}
logger.error("number 不是数字:", e);
},
toString: function(e, t) {
if (TypeUtils.isNumber(e)) {
t = t || 2;
var i = Math.pow(10, t), s = e.toString(), n = "";
if (e >= Math.pow(10, 8)) {
s = Math.floor(e / Math.pow(10, 8 - t)) / i;
n = "亿";
} else if (e >= Math.pow(10, 4)) {
s = Math.floor(e / Math.pow(10, 4 - t)) / i;
n = "万";
}
return s + n;
}
logger.error("number 不是数字:", e);
},
addNumAction: function(e, t, i, n, o, a, r) {
var l = e;
e.getComponent(cc.Label) && (l = e.getComponent(cc.Label));
o = o || .05;
var c = 0;
if (r) {
l.string = t.toString();
c = i.sub(t);
} else {
c = i - t;
l.string = t;
}
var h = Math.ceil(n / o) + 1, u = 0;
l.schedule(function() {
u++;
if (r) {
var e = t.add(c.mul(u / h));
l.string = e.toString();
u >= h && (l.string = i.toString());
} else {
var n = t + Math.floor(c * u / h);
l.string = a ? s.toStdEString(n) : n;
u >= h && (l.string = a ? s.toStdEString(i) : i);
}
}, o, h - 1, 0);
}
}, n = [ "零", "一", "二", "三", "四", "五", "六", "七", "八", "九", "十" ];
s.toCapitalChinese = function(e) {
return n[e] ? n[e] : e;
};
s.FixLengthIntStr = function(e, t) {
for (var i = 0, s = e = this.FixInt(e); s > 0; ) {
s = Math.floor(s / 10);
i++;
}
if (i > t) return "" + e;
for (var n = t - i, o = "", a = 0; a < n; a++) o += "0";
return o + e;
};
s.FixInt = function(e) {
return Math.floor(e + .1);
};
s.getUnitAndDivider = function(e) {
var t = "", i = 1;
if ((e = Math.abs(e)) >= 10 ^ 8) {
i = 2;
t = "亿";
} else if (e >= 10 ^ 4) {
i = 14;
t = "万";
}
return {
unit: t,
divider: i
};
};
s.toStringWithFloor = function(e, t) {
var i = Number(i);
if (isNaN(i)) return e;
t = t || 2;
var s = this.getUnitAndDivider(i), n = Math.pow(10, t);
return Math.floor(i * n / s.divider) / n + s.unit;
};
var o = s;
i.default = o;
t.exports = i.default;
cc._RF.pop();
}, {} ],
PartLocker: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "24ec4DJFMJPTJXGdHKYwhqh", "PartLocker");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = e("BasePart"), n = cc.Class({
extends: s,
init: function() {
s.prototype.init.call(this);
return this;
}
});
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {
BasePart: "BasePart"
} ],
PartTimeBreaker: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "1e9c76wNvJERafHH8xwli+G", "PartTimeBreaker");
var s = e("BasePart");
cc.Class({
extends: s,
init: function(e, t) {
s.prototype.init.call(this);
this.m_curBreakTimestamp = e;
this.m_timeBreakSpace = t;
return this;
},
reset: function() {
this.m_curBreakTimestamp = TimeUtils.getNextTimestamp(this.m_timeBreakSpace);
},
isTimeBreak: function() {
return TimeUtils.isTimestampOver(this.m_curBreakTimestamp);
}
});
cc._RF.pop();
}, {
BasePart: "BasePart"
} ],
PlistTextureManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "f4a2eQF5cZLZr+G4e4MR1zB", "PlistTextureManager");
cc.Class({
extends: BaseAssetManager,
properties: {
_name: {
default: "PlistTextureManager",
override: !0
}
},
getSpriteFrame: function(e, t) {
return TextureUtils.getSpriteFrame(this.getResource(e), t);
},
getSpriteFrameByShortUrl: function(e, t) {
return TextureUtils.getSpriteFrame(this.getResourceByShortUrl(e), t);
},
isResourceLoad: function(e) {
return 0 === this.getUsingTimes(e);
},
loadResourceReal: function(e, t) {
SpriteUtils.loadPlistTexture(e, function(i) {
t(e, i);
});
}
});
cc._RF.pop();
}, {} ],
PointUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "b8060WC6gdEP5d/AHKHkDW7", "PointUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
win2OpenGlCoordinateSystem: function(e, t, i) {
return new cc.Vec2(e, i - t);
},
add: function(e, t) {
return new cc.Vec2(e.x + t.x, e.y + t.y);
},
sub: function(e, t) {
e && t || logger.warn("p1,p2 = ", e, t);
return new cc.Vec2(e.x - t.x, e.y - t.y);
},
mul: function(e, t) {
return new cc.Vec2(e.x * t, p2.y * t);
},
mid: function(e, t) {
return cc.v2((e.x + t.x) / 2, (e.y + t.y) / 2);
},
pointDistance: function(e, t) {
var i = this.sub(e, t);
return this.getVectorDistance(i);
},
getVectorDistance: function(e) {
return Math.sqrt(e.x * e.x + e.y * e.y);
}
}, n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
PopViewManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "67140W30FBMOILe9eLQnY/6", "PopViewManager");
cc.Class({
ctor: function() {
this.reset();
EventManager.on(AppEvent.GameRemoveView, this.onGameRemoveView, this);
},
reset: function() {
this.refreshPopQueue();
for (var e in ManagerEnum.QueueType) {
this._popQueue[ManagerEnum.QueueType[e]] = [];
this._isPoping[ManagerEnum.QueueType[e]] = !1;
}
},
refreshPopQueue: function() {
this._popQueue = {};
this._isPoping = {};
this._popQueueIndex = 1;
},
initPopQueue: function() {
this._isPoping = {};
this._popQueue = {};
},
addPopQueue: function(e, t) {
(t = t || {}).zOrder = t.zOrder || 0;
t.viewArg = t.viewArg || {};
t.newArg = t.newArg || {};
t.viewType = t.viewType || ManagerEnum.QueueType.Common;
t.showViewCallBack = t.showViewCallBack || function() {};
this._popQueue[t.viewType] = this._popQueue[t.viewType] || [];
this._isPoping[t.viewType] = this._isPoping[t.viewType] || !1;
var i = [ {
viewName: e,
config: t,
state: ManagerEnum.QueueState.UnOpen
} ];
t.insertTop && this._popQueue[t.viewType].length > 1 ? ArrayUtils.insert(this._popQueue[t.viewType], 1, i) : this._popQueue[t.viewType].push(i);
this._isPoping[t.viewType] || this.checkPopQueue(t.viewType);
},
addMulPopQueue: function(e, t) {
e = e || [];
for (var i = {}, s = ManagerEnum.QueueType.Common, n = 0; n < e.length; n++) {
e[n];
i[n] = {};
i[n].viewName = v.viewName;
i[n].state = ManagerEnum.QueueState.UnOpen;
i[n].config = {};
v.config = v.config || {};
i[n].config.zOrder = v.config.zOrder || 0;
i[n].config.viewArg = v.config.viewArg || {};
i[n].config.newArg = v.config.newArg || {};
s = v.config.viewType || ManagerEnum.QueueType.Common;
i[n].config.showViewCallBack = v.config.showViewCallBack || function() {};
}
this._popQueue[s] = this._popQueue[s] || [];
this._isPoping[s] = this._isPoping[s] || !1;
t && this._popQueue[s].length > 1 ? ArrayUtils.insert(this._popQueue[s], 1, i) : this._popQueue[s].push(i);
this._isPoping[s] || this.checkPopQueue(s);
},
checkPopQueue: function(e) {
this._isPoping[e] || this._popQueue[e].length <= 0 || this.runPopQueue(e);
},
runPopQueue: function(e) {
var t = this, i = this._popQueue[e][0];
this._isPoping[e] = !0;
for (var s = function(s) {
var n = i[s], o = n.viewName, a = n.config;
if (ViewManager.isViewExist(o)) {
t._popQueue[e][0][s].state = ManagerEnum.QueueState.Zusei;
return "break";
}
t._popQueue[e][0][s].state = ManagerEnum.QueueState.Open;
if (a.isFunc) if (TypeUtils.isFunction(a.func)) a.func(); else {
t._popQueue[e][0][s].state = ManagerEnum.QueueState.Open;
t.endPopQueue(e);
} else {
var r = function(e, t) {
var i = ViewConfig[t];
if (e && i.scriptName) {
var s = e.getComponent(i.scriptName);
s && TypeUtils.isFunction(s.setArgs) && !TypeUtils.isRealNull(a.newArg) && s.setArgs(a.newArg);
}
a.showViewCallBack(e);
};
if (TypeUtils.isFunction(a.doShowViewFunc)) {
a.doShowViewFunc(o, a.viewArg);
var l = ViewManager.getView(o);
r(l, o);
} else ViewManager.showView(o, null, a.viewArg, function(e) {
r(e, o);
});
}
}, n = 0; n < i.length; n++) {
if ("break" === s(n)) break;
}
},
endPopQueue: function(e) {
this._isPoping[e] = !1;
this.checkPopQueue(e);
this.checkIsChoke();
},
checkIsChoke: function() {
for (var e in this._popQueue) for (var t = (this._popQueue[e] || [])[0] || [], i = 0; i < t.length; i++) {
var s = t[i], n = s.viewName;
if (s.state == ManagerEnum.QueueState.Zusei && !ViewManager.isViewExist(n)) {
this._popQueue[e][1][i].state = ManagerEnum.QueueState.UnOpen;
this.runPopQueue(e);
}
}
},
cleanPopQueue: function() {
for (var e in this._popQueue) this._popQueue[e] = {};
for (var t in this._isPoping) this._isPoping[t] = !1;
},
onGameRemoveView: function(e) {
if (!TypeUtils.isRealNull(e) && !TypeUtils.isRealNull(e.name)) {
var t = e.name, i = ManagerEnum.QueueType.Common, s = !1;
for (var n in this._popQueue) for (var o = this._popQueue[n][0] || [], a = 0; a < o.length; a++) {
var r = o[a];
if (r.viewName == t && r.state == ManagerEnum.QueueState.Open) {
i = n;
s = !0;
break;
}
if (s) break;
}
var l = this._popQueue[i][0];
if (!TypeUtils.isRealNull(l)) {
for (var c = 0; c < l.length; c++) {
var h = l[c];
if (h.viewName == t && h.state == ManagerEnum.QueueState.Open) {
ArrayUtils.remove(this._popQueue[i][0], c);
break;
}
}
if (TypeUtils.isRealNull(this._popQueue[i][0]) || this._popQueue[i][0].length <= 0) {
ArrayUtils.remove(this._popQueue[i], 0);
this.endPopQueue(i);
}
}
}
}
});
cc._RF.pop();
}, {} ],
PrefabUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "91103ztmHtN14xLWJuQOQG1", "PrefabUtils");
cc.Class({
name: "PrefabUtils",
ctor: function() {},
load: function(e, t) {
LoadUtils.loadRes(e, function(i, s) {
if (i) console.warn(e, "  ====>Prefab error:", i); else if (s instanceof cc.Prefab) {
var n = cc.instantiate(s);
t(n);
} else console.warn("Prefab error", s);
});
},
loadWithOrigin: function(e, t) {
LoadUtils.loadRes(e, function(e, i) {
t && t(e, i);
});
},
loadModulePrefab: function(e, t, i) {
this.load("module/" + e + "/" + t, i);
}
});
cc._RF.pop();
}, {} ],
QQPlatfrom: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "99d15c4JK5G1LGn3WRJRxoM", "QQPlatfrom");
var s = e("BasePlatfrom"), n = e("TowerShareEnum");
cc.Class({
extends: s,
ctor: function() {
this.m_sysVersion = qq.getSystemInfoSync();
},
init: function() {
s.prototype.init.call(this, "QQPlatfrom");
this.initAd();
this.initEnv();
return this;
},
initAd: function() {
this.RewardedVideoAd = qq.createRewardedVideoAd({
adUnitId: "b7891dae1db6fa3831003ca481678518"
});
this.handlerOnCloseAd = function(e) {
this.onCloseAd(e);
}.bind(this);
this.handlerOnErrorAd = function(e) {
this.onErrorAd(e);
}.bind(this);
this.handlerOnLoadAd = function(e) {
this.onLoadAd(e);
}.bind(this);
this.RewardedVideoAd.onClose(this.handlerOnCloseAd);
this.RewardedVideoAd.onError(this.handlerOnErrorAd);
this.RewardedVideoAd.onLoad(this.handlerOnLoadAd);
this.RewardedVideoAd.load();
},
onExit: function() {
s.prototype.onExit.call(this);
},
initEnv: function() {
if ("ios" === this.m_sysVersion.platform) {
UserDataManager.getUserFrameRateStatus() === ManagerEnum.UserDataManager.UserKey.HightFrameRate.LowFrameRate ? GlobalUtils.setFrameRate(30) : GlobalUtils.setFrameRate(60);
} else if (DicUtils.has(this.m_sysVersion, "benchmarkLevel")) {
var e = UserDataManager.getUserFrameRateStatus();
e === ManagerEnum.UserDataManager.UserKey.HightFrameRate.Undefined ? this.m_sysVersion.benchmarkLevel <= 30 ? GlobalUtils.setFrameRate(30) : GlobalUtils.setFrameRate(60) : e === ManagerEnum.UserDataManager.UserKey.HightFrameRate.LowFrameRate ? GlobalUtils.setFrameRate(30) : e === ManagerEnum.UserDataManager.UserKey.HightFrameRate.HightFrameRate && GlobalUtils.setFrameRate(60);
} else GlobalUtils.setFrameRate(30);
},
getSdkVersion: function() {
return this.m_sysVersion.version;
},
seeAd: function(e) {
if (this.isSupportAdReward()) {
console.warn("TTPlatform seeAd 1");
if (s.prototype.seeAd.call(this)) {
this.seeAdReal(e);
console.warn("TTPlatform seeAd 2");
} else console.warn("TTPlatform seeAd 12");
} else console.warn("不支持激励视频");
},
seeAdReal: function(e) {
s.prototype.seeAdReal.call(this, e);
var t = this;
this._bonusType = e.bonusType;
this._loadCallback = e.loadCallback;
this._closeCallback = e.closeCallback;
this._errorCallback = e.errorCallback;
this.RewardedVideoAd.load().then(function(e) {
t.onShowAd();
t.RewardedVideoAd.show();
});
},
onCloseAd: function(e) {
s.prototype.onCloseAd.call(this);
console.warn("onCloseAd res = ", e);
if (this._loadCallback) if (e && e.isEnded) {
this.didRewardAd();
this._closeCallback({
isEnable: e.isEnded
});
} else {
this.didCloseAd();
this._closeCallback({
isEnable: !1
});
}
},
onErrorAd: function(e) {
s.prototype.onErrorAd.call(this);
this.didErrorAd();
var t = ConfigMgr.getConfig("lb_aderror_config").findFirst(function(t) {
return "qq" == t.platform && t.errorCode == e.errCode;
});
t && TipsUtils.showTips(t.tipsStr);
this._errorCallback && this._errorCallback();
},
onLoadAd: function(e) {
s.prototype.onLoadAd.call(this);
},
onShowAd: function() {
s.prototype.onShowAd.call(this);
this.didShowAd();
},
login: function(e) {
var t = this;
qq.login({
success: function(i) {
i.code ? HttpMgr.post({
method: "qqLogin",
isIgnoreToken: !0,
data: {
code: i.code
},
callback: function(i) {
t.setUserData(i);
e();
}
}) : console.log("登录失败！" + i.errMsg);
}
});
},
handlerGameEventEnterBackground: function() {
var e = this;
qq.checkSession({
success: function() {
console.log("session_key 未过期，并且在本生命周期一直有效");
},
fail: function() {
console.log("session_key 已经失效，需要重新执行登录流程");
e.login();
}
});
},
checkNetWork: function() {
this.getNetworkType(qq);
},
shareMessage: function(e) {
var t = n.ShareImg.QQ || [], i = {
title: e.title,
query: "enterStyle=share&uid=" + e.uid,
success: function(e) {
console.log("WXPlatform shareMessage 分享成功, 返回信息为:", e);
},
fail: function(e) {
console.log("WXPlatform shareMessage 分享失败, 返回信息为:", e);
},
complete: function(t) {
console.log("WXPlatform shareMessage 分享完成, 返回信息为:", t);
TypeUtils.isFunction(e.callback) && e.callback();
}
};
if (t.length > 0) {
var s = t[RandomUtils.getRandIntInRange(0, t.length - 1)];
i.imageUrl = s.imageUrl;
}
qq.shareAppMessage(i);
},
onGameLaunchInfo: function() {
var e = qq.getLaunchOptionsSync();
console.log("QQPlatform onGameLaunchInfo 获取游戏启动数据", e.query);
},
loadSubPackage: function(e, t, i) {
cc.loader.downloader.loadSubpackage(e, function(e) {
t && t(e);
}, function(t) {
if (t) return console.error("加载子包失败:", t);
i && i(e);
});
}
});
cc._RF.pop();
}, {
BasePlatfrom: "BasePlatfrom",
TowerShareEnum: "TowerShareEnum"
} ],
RandomUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "6b345jZYThLIo0wSK7buJRA", "RandomUtils");
cc.Class({
name: "RandomUtils",
ctor: function() {},
rand: function() {
return Math.random();
},
randInt: function(e, t) {
var i = Math.random(), s = t - e;
return Math.floor(e + s * i);
},
randC3b: function(e, t, i, s) {
return new cc.Color(e || this.randInt(0, 255), t || this.randInt(0, 255), i || this.randInt(0, 255));
},
randSortArray: function(e) {
if (e instanceof Array) for (var t = 0; t < e.length; t++) {
var i = this.randInt(0, e.length - 1), s = e[t];
e[t] = e[i];
e[i] = s;
}
},
randArrayVal: function(e) {
return e[this.randInt(0, e.length)];
},
randDicVal: function(e) {
var t = Object.keys(e).length, i = this.randInt(0, t), s = 0;
for (var n in e) {
if (s == i) return e[n];
s++;
}
},
randomWeight: function(e, t) {
for (var i = [], s = 0; s < e.length; s++) t ? i.push(t(e[s])) : i.push(e[s]);
for (var n = 0, o = 0; o < i.length; o++) n += i[o];
for (var a = this.rand(), r = 0, l = 0; l < i.length; l++) {
if ((r += i[l]) / n > a) return l;
}
logger.error("随机权重出错,不可能随机不到数值:randNum = ", a, ", weightArray = ", i);
},
isHitRandom: function(e) {
return this.rand() <= e;
},
getRandIntInRange: function(e, t) {
var i = t - e + 1;
return Math.floor(this.rand() * i);
},
getRandExclInt: function(e, t, i) {
if (!TypeUtils.isArray(i) || i.length <= 0) return this.getRandIntInRange(e, t);
for (var s = [], n = e; n <= t; n++) {
for (var o = !1, a = 0; a < i.length; a++) if (i[a] == n) {
o = !0;
break;
}
o || s.push(n);
}
if (s.length > 0) {
return s[this.getRandIntInRange(0, s.length - 1)];
}
}
});
cc._RF.pop();
}, {} ],
RankingConst: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "6ad9fjjOd5AS79j9B9uscOh", "RankingConst");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
RankType: {}
};
s.RankType.Coin = 1;
s.RankType.Diamond = 2;
s.RankType.SnatchTreasure = 3;
s.RankType.SnatchTreasureMonth = 4;
s.RankType.WeekRedEnvelopeScore = 5;
s.RankType.RedEnvelopeScore = 6;
s.RankType.FishColorScore = 7;
s.RankType.FishColorWeekScore = 8;
s.RankType.QiangHuaShiScore = 9;
s.RankType.BaiJinDanTouScore = 10;
s.RankType.CheckinGold = 15;
s.RankType.CheckinDiamond = 16;
var n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
RankingCtrl: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "6fde33U2LNOboCTjBEBOWwF", "RankingCtrl");
var s = e("HttpCtrl"), n = e("RankingModel");
cc.Class({
extends: s,
properties: {},
ctor: function() {
var e = new n();
this.init(e);
},
requireAfterEnterGame: function() {},
getRankInfo: function(e, t) {
var i = this, s = RoleUtils.getRoleId(), n = {
method: "getRankInfo",
data: {
rankType: e,
roleId: s
}
};
this.request(n, function(t) {
i.model.setRankInfo(t, e);
}, function(e) {
TypeUtils.isFunction(t) && t(e);
});
},
getDBRankInfo: function(e) {
var t = this, i = {
method: "getTreasureCodeRank",
data: {
roleId: RoleUtils.getRoleId()
}
};
this.request(i, function(e) {
t.model.setDBRankInfo(e);
}, function(t) {
TypeUtils.isFunction(e) && e(t);
});
}
});
cc._RF.pop();
}, {
HttpCtrl: "HttpCtrl",
RankingModel: "RankingModel"
} ],
RankingModel: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "1113cyCg61P1KPQjuuzlv5I", "RankingModel");
var s = e("RankingConst");
cc.Class({
extends: ModelBase,
properties: {
EVENT_GET_RANK_INFO: "EVENT_GET_RANK_INFO"
},
ctor: function() {
this.init();
this.rankInfo = {};
this.ownRankInfo = {};
},
setRankInfo: function(e, t) {
this.rankInfo[t] = {};
this.rankInfo[t] = e;
this.ownRankInfo[t] = {};
this.ownRankInfo[t].score = e.score;
this.ownRankInfo[t].userAllRank = e.userAllRank;
this.ownRankInfo[t].userAreaRank = e.userAreaRank;
this.dispatchEvent(this.EVENT_GET_RANK_INFO, t);
},
setDBRankInfo: function(e) {
this.rankInfo[s.RankType.SnatchTreasure] = {};
this.rankInfo[s.RankType.SnatchTreasure] = e;
this.ownRankInfo[s.RankType.SnatchTreasure] = {};
this.ownRankInfo[s.RankType.SnatchTreasure].weekScore = e.weekRank.score;
this.ownRankInfo[s.RankType.SnatchTreasure].monthScore = e.monthRank.score;
this.ownRankInfo[s.RankType.SnatchTreasure].userAllRank = e.weekRank.rank;
this.ownRankInfo[s.RankType.SnatchTreasure].userAreaRank = e.monthRank.rank;
this.dispatchEvent(this.EVENT_GET_RANK_INFO, s.RankType.SnatchTreasure);
},
getRankInfo: function(e, t) {
return TypeUtils.isRealNull(this.rankInfo[e]) ? [] : t ? e == s.RankType.SnatchTreasure ? this.rankInfo[e].monthRank.info || [] : this.rankInfo[e].areaRankInfo || [] : e == s.RankType.SnatchTreasure ? this.rankInfo[e].weekRank.info || [] : this.rankInfo[e].allRankInfo || [];
},
getOwnRankInfo: function(e) {
return TypeUtils.isRealNull(this.ownRankInfo[e]) ? {} : this.ownRankInfo[e];
}
});
cc._RF.pop();
}, {
RankingConst: "RankingConst"
} ],
RecordDotMgr: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "a99e0Fx4GtNarvSfO3HcPUp", "RecordDotMgr");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
e("PartTimeBreaker");
var s = e("DataHelper"), n = cc.Class({
extends: s,
ctor: function() {
this.initEvent();
},
init: function() {
s.prototype.init.call(this, "RecordDotMgr");
this.initData();
return this;
},
initData: function() {},
initEvent: function() {}
});
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {
DataHelper: "DataHelper",
PartTimeBreaker: "PartTimeBreaker"
} ],
RectUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "35aedWykhtKHJlkY+isU5RF", "RectUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
isRectContainPoint: function(e, t) {
var i = !1;
t.x >= e.x && t.x <= e.x + e.width && t.y >= e.y && t.y <= e.y + e.height && (i = !0);
return i;
},
rectIntersectsRect: function(e, t) {
return !(e.x > t.x + t.width || e.x + e.width < t.x || e.y > t.y + t.height || e.y + e.height < t.y);
}
}, n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
RedRemindManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "1950eE9XRJHc6WtYTXn00gg", "RedRemindManager");
cc.Class({
ctor: function() {
this.initData();
},
initData: function() {
this.checkRemindFunc = {};
this.nodesRemind = {};
this.notReminds = {};
this.remindOfNode = {};
this.remindList = {};
},
registerCheckRemind: function(e, t, i) {
this.checkRemindFunc[e] = {};
this.checkRemindFunc[e].func = t;
this.checkRemindFunc[e].target = i;
this.remindList[e] = t.call(i);
},
checkRemind: function(e) {
return this.checkRemindFunc[e];
},
getRemind: function(e) {
return !TypeUtils.isRealNull(this.remindList[e]) && this.remindList[e];
},
doRemind: function(e) {
if (this.checkRemindFunc[e]) {
if (!0 === this.notReminds[e]) {
this.remindList[e] = !1;
EventManager.emit(AppEvent.RemindsChange, {
name: e
});
return;
}
var t = this.checkRemindFunc[e].func.call(this.checkRemindFunc[e].target);
if (t != this.getRemind(e)) {
this.remindList[e] = t;
EventManager.emit(AppEvent.RemindsChange, {
name: e
});
}
} else logger.error("RemindManager 没有注册该红点事件:" + e);
},
doAllRemind: function() {
for (var e in this.checkRemindFunc) this.checkRemindFunc.hasOwnProperty(e) && this.doRemind(e);
},
canRemindName: function(e, t) {
t ? this.notReminds[e] && delete this.notReminds[e] : this.notReminds[e] = !0;
this.doRemind(e);
}
});
cc._RF.pop();
}, {} ],
RemindEnum: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "f3cbdSsKX5BiaBr6/sBt+Vm", "RemindEnum");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s;
function n(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}
var o = {};
o.RedPointEnum = cc.Enum({
SEVEN_DAY: 1,
SIGN_UP: 2,
DAILY_TASK: 3,
ONLINE_AWARD: 4,
ONLINE_SIGN: 5,
CLUB_DEPOT: 6,
MAIL: 7
});
o.RedPointToRemindEnum = (n(s = {}, o.RedPointEnum.SEVEN_DAY, AppEvent.RedPointFishSevenDayTask), 
n(s, o.RedPointEnum.SIGN_UP, AppEvent.RedPointFishSignUp), n(s, o.RedPointEnum.DAILY_TASK, AppEvent.RedPointFishDailyTask), 
n(s, o.RedPointEnum.ONLINE_AWARD, AppEvent.RedPointOnlineAward), n(s, o.RedPointEnum.ONLINE_SIGN, AppEvent.RedPointOnlineSign), 
n(s, o.RedPointEnum.CLUB_DEPOT, AppEvent.RedPointClubDepot), n(s, o.RedPointEnum.CLUB_DEPOT, AppEvent.RedPointClubDepot), 
n(s, o.RedPointEnum.MAIL, AppEvent.RedPointMail), s);
var a = o;
i.default = a;
t.exports = i.default;
cc._RF.pop();
}, {} ],
ResConst: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "b53d18nr2JNEZhALMPk5Dmc", "ResConst");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
sprite: {
roomBgPicture1: "module/fish/texture/picture/fish/bg_01",
roomBgPicture2: "module/fish/texture/picture/fish/bg_02",
roomBgPicture3: "module/fish/texture/picture/fish/bg_03",
roomBgPicture4: "module/fish/texture/picture/fish/bg_04",
roomBgPicture5: "module/fish/texture/picture/fish/bg_05",
roomBgPicture6: "module/fish/texture/picture/fish/bg_06",
roomBgPicture7: "module/fish/texture/picture/fish/bg_07",
najiaAnimBg: "module/fish/texture/picture/bg_pic_19",
caiquanActBg: "module/fish/texture/picture/cq_bg_01",
hallBackground: "module/fish/texture/picture/hall_background",
monsterBattleBg: "module/fish/texture/picture/js_bg_01",
loadingBg: "module/fish/texture/picture/loading2",
dragonBg: "module/fish/texture/picture/lwbz_all_bg",
panelPicture: "module/fish/texture/picture/panel",
fishRoomBg: "module/fish/texture/picture/xg_bg_01",
welfareBg: "module/fish/texture/picture/hd_bg_01",
signUpBg: "module/fish/texture/picture/fl_bg_03",
taskBg: "module/fish/texture/picture/fl_bg_04",
onlineBg: "module/fish/texture/picture/fl_bg_05",
shareBossBg: "module/fish/texture/picture/fx_bg"
},
spine: {
background: ""
},
json: {
disclaimerJson: "disclaimer_config"
},
audio: {
background: "module/fish/sound/bgm/FishHallBGM",
fishBossBGM1: "module/fish/sound/bgm/FishBossBGM1",
fishBossBGM2: "module/fish/sound/bgm/FishBossBGM2",
fishBossBGM3: "module/fish/sound/bgm/FishBossBGM3",
roomBgm1: "module/fish/sound/bgm/bgm_room_1",
roomBgm2: "module/fish/sound/bgm/bgm_room_2",
roomBgm3: "module/fish/sound/bgm/bgm_room_3",
roomBgm4: "module/fish/sound/bgm/bgm_room_4",
roomBgm5: "module/fish/sound/bgm/bgm_room_5",
roomBgm6: "module/fish/sound/bgm/bgm_room_6"
},
prefab: {
requestView: "common/requestView/requestViewP",
comBasePopView: "module/component/comBasePopViewP",
comBaseView: "module/component/comBaseViewP",
comfirmBox: "module/fish/view/comfirmBoxP",
splashView: "module/fish/view/splashViewP",
loginView: "module/fish/view/loginViewP",
disclaimerView: "module/fish/view/disclaimerViewP",
createView: "module/fish/view/createViewP",
loadingView: "module/fish/view/loadingViewP",
fishHallView: "module/fish/view/fishHallViewP",
fishLoadingView: "module/fish/view/fishLoadingViewP",
catchFishView: "module/fish/view/catchFishViewP",
catchFishUI: "module/fish/view/catchFishUIP",
awardsView: "module/fish/view/awardsViewP",
marqueeView: "module/fish/view/marqueeViewP",
fishRoomView: "module/fish/view/roomViewP",
bossComingView: "module/fish/view/bossComingViewP",
gunSwitchView: "fish/view/gunSwitchViewP",
shopView: "fish/view/shopViewP",
newerTaskView: "fish/view/newerTaskViewP",
goldFishView: "fish/view/goldFishViewP",
playGuideView: "fish/view/playGuideViewP",
sevenDayView: "fish/view/sevenDayViewP",
pokerColorView: "fish/view/pokerColorsViewP",
introduceView: "fish/view/introduceViewP",
gunForgeView: "fish/view/gunForgeViewP",
gunForgeResultView: "fish/view/gunForgeResultViewP",
gunUpSuccAnim: "fish/view/gunUpSuccAnimP",
roomSeatView: "fish/view/roomSeatViewP",
roomIntroduceView: "fish/view/roomIntroduceViewP",
jadeExchangeView: "fish/view/jadeExchangeViewP",
najiaPlayView: "fish/view/najiaPlayViewP",
dragonTreasureView: "fish/view/dragonTreasureViewP",
monsterBattleView: "fish/view/monsterBattleViewP",
monsterBattleResultView: "fish/view/monsterBattleResultP",
goldDragonView: "fish/view/goldDragonViewP",
fingerPlayView: "fish/view/fingerPlayViewP",
fingerPlayResultView: "fish/view/fingerPlayResultViewP",
roleView: "fish/view/roleViewP",
bagView: "fish/view/bagViewP",
mailView: "fish/view/mailViewP",
rankingView: "fish/view/rankingViewP",
noticeView: "fish/view/noticeViewP",
settingView: "fish/view/settingViewP",
modifyView: "fish/view/modifyViewP",
welfareView: "fish/view/welfareViewP",
signUpView: "fish/view/signUpViewP",
taskView: "fish/view/taskViewP",
selectPayView: "fish/view/selectPayViewP",
shareView: "fish/view/shareViewP",
shareHitBoss: "fish/view/shareHitBossP",
vipView: "fish/view/vipViewP",
clubApplyView: "fish/view/clubApplyViewP",
clubInviteView: "fish/view/clubInviteViewP",
clubCreateView: "fish/view/clubCreateViewP",
clubInfoView: "fish/view/clubInfoViewP",
clubHallView: "fish/view/clubHallViewP",
clubHallManager: "fish/view/clubHallManagerP",
clubApplyInfo: "fish/view/clubApplyInfoP",
clubHallBuild: "fish/view/clubHallBuildP",
clubHallWelfare: "fish/view/clubHallWelfareP",
clubHallRoom: "fish/view/clubHallRoomP",
clubHallRank: "fish/view/clubHallRankP",
clubScoreDetail: "fish/view/clubScoreDetailP",
clubRoleInfoView: "fish/view/clubRoleInfoViewP",
cardGiftView: "fish/view/cardGiftViewP",
safeCenterView: "fish/view/safeCenterViewP",
checkPwdView: "fish/view/checkPwdViewP",
acceptAwardView: "fish/view/acceptAwardViewP",
playerInfoView: "fish/view/playerInfoViewP",
myRewardView: "fish/view/myRewardViewP",
chargeCarnivalView: "fish/view/chargeCarnivalViewP",
vipTurntableView: "fish/view/vipTurntableViewP",
bagSendView: "fish/view/bagSendViewP",
sendRecordView: "fish/view/sendRecordViewP",
clubDepotView: "fish/view/clubDepotViewP",
clubDepotAccess: "fish/view/clubDepotAccessP",
clubDepotRecord: "fish/view/clubDepotRecordP",
clubModifyNotice: "fish/view/clubDepotRecordP",
comAwardItem: "module/fish/fishComponent/comAwardItemP",
comBtnList: "module/fish/fishComponent/comBtnListP",
comBtn: "module/fish/fishComponent/comBtnP",
comCurrency: "module/fish/fishComponent/comCurrencyP",
comHead: "module/fish/fishComponent/comHeadP",
comHeadRailing: "module/fish/fishComponent/comHeadRailingP",
roomItem: "module/fish/fishComponent/roomItemP",
goodsItem: "module/fish/fishComponent/goodsItem",
tabItemP: "module/fish/fishComponent/tabItemP",
mailItem: "module/fish/fishComponent/mailItem",
nodeTitleSp: "module/fish/fishComponent/nodeTitleSp",
rankItem: "module/fish/fishComponent/rankItem",
seatItem: "module/fish/fishComponent/seatItem",
signDayItem: "module/fish/fishComponent/signDayItem",
signMonthItem: "module/fish/fishComponent/signMonthItem",
taskItem: "module/fish/fishComponent/taskItem",
tipsScroll: "module/fish/fishComponent/tipsScrollView",
clubListItem: "module/fish/fishComponent/clubListItemP",
clubApplyItem: "module/fish/fishComponent/clubApplyItemP",
clubMemberItem: "module/fish/fishComponent/clubMemberItemP",
clubTaskItem: "module/fish/fishComponent/clubTaskItemP",
clubWelfareItem: "module/fish/fishComponent/clubWelfareItemP",
clubRankItem: "module/fish/fishComponent/clubRankItemP",
comInputItem: "module/fish/fishComponent/comInputItemP",
itemScrollView: "module/fish/fishComponent/itemScrollViewP",
clubScoreItem: "module/fish/fishComponent/clubScoreItemP",
acceptItem: "module/fish/fishComponent/acceptItemP",
awardZhuanPan: "module/fish/fishComponent/awardZhuanPanP",
comFishObject: "module/fish/fishComponent/comFishObjectP",
comBulletObject: "module/fish/fishComponent/comBulletObjectP",
comDropAward: "module/fish/fishComponent/comDropAwardP",
comDropItem: "module/fish/fishComponent/comDropItemP",
comFishItem: "module/fish/fishComponent/comFishItemP",
crazyOperate: "module/fish/fishComponent/crazyOperateP",
gunUpgrade: "module/fish/fishComponent/gunUpgradeP",
hitAwardNum: "module/fish/fishComponent/hitAwardNumP",
drawItem: "module/fish/fishComponent/drawItem",
dropAwardItem: "module/fish/fishComponent/dropAwardItem",
dynjDieEffect: "module/fish/fishComponent/dynjDieEffect",
fishTypeItemP: "module/fish/fishComponent/fishTypeItemP",
goldFishP: "module/fish/fishComponent/goldFishP",
goldPillarP: "module/fish/fishComponent/goldPillarP",
greatAnimP: "module/fish/fishComponent/greatAnimP",
gunSwichItem: "module/fish/fishComponent/gunSwichItem",
introItem: "module/fish/fishComponent/introItem",
jadeExchangeItem: "module/fish/fishComponent/jadeExchangeItem",
newerTaskItem: "module/fish/fishComponent/newerTaskItem",
nodeAwardBmf: "module/fish/fishComponent/nodeAwardBmf",
nodeBscDj: "module/fish/fishComponent/nodeBscDj",
nodeCompetition: "module/fish/fishComponent/nodeCompetition",
nodeCountDown: "module/fish/fishComponent/nodeCountDown",
nodeOpenSp: "module/fish/fishComponent/nodeOpenSp",
nodePokerColors: "module/fish/fishComponent/nodePokerColors",
nodePokerExchange: "module/fish/fishComponent/nodePokerExchange",
nodePokerRank: "module/fish/fishComponent/nodePokerRank",
nodeSeamanReward: "module/fish/fishComponent/nodeSeamanReward",
nodeTaskInfo: "module/fish/fishComponent/nodeTaskInfo",
nodeWarheadBomb: "module/fish/fishComponent/nodeWarheadBomb",
operatingLayer: "module/fish/fishComponent/operatingLayer",
playerInfoP: "module/fish/fishComponent/playerInfoP",
pokerChangertem: "module/fish/fishComponent/pokerChangertem",
pokerRankItem: "module/fish/fishComponent/pokerRankItem",
roleInfoTips: "module/fish/fishComponent/roleInfoTips",
seamanRollItem: "module/fish/fishComponent/seamanRollItemP",
sevenDayItem: "module/fish/fishComponent/sevenDayItem",
upGunTips: "module/fish/fishComponent/upGunTipsP"
}
};
s.resload = {
preload1: [ {
url: s.sprite.loadingBg,
type: cc.SpriteFrame
}, {
url: s.prefab.requestView,
type: cc.Prefab
}, {
url: s.prefab.tabItemP,
type: cc.Prefab
}, {
url: s.prefab.comBasePopView,
type: cc.Prefab
}, {
url: s.prefab.comBaseView,
type: cc.Prefab
}, {
url: s.prefab.loginView,
type: cc.Prefab
}, {
url: s.prefab.comfirmBox,
type: cc.Prefab
}, {
url: s.prefab.createView,
type: cc.Prefab
}, {
url: s.prefab.loadingView,
type: cc.Prefab
}, {
url: s.prefab.disclaimerView,
type: cc.Prefab
}, {
url: s.json.disclaimerJson,
type: cc.JsonAsset
} ],
preload2: [ {
url: s.prefab.fishHallView,
type: cc.Prefab
}, {
url: s.prefab.fishLoadingView,
type: cc.Prefab
}, {
url: s.prefab.marqueeView,
type: cc.Prefab
}, {
url: s.prefab.comAwardItem,
type: cc.Prefab
}, {
url: s.prefab.comBtnList,
type: cc.Prefab
}, {
url: s.prefab.comBtn,
type: cc.Prefab
}, {
url: s.prefab.comCurrency,
type: cc.Prefab
}, {
url: s.prefab.comHead,
type: cc.Prefab
}, {
url: s.prefab.comHeadRailing,
type: cc.Prefab
} ],
preload3: [ {
url: s.sprite.welfareBg,
type: cc.SpriteFrame
}, {
url: s.sprite.signUpBg,
type: cc.SpriteFrame
}, {
url: s.sprite.taskBg,
type: cc.SpriteFrame
}, {
url: s.sprite.onlineBg,
type: cc.SpriteFrame
}, {
url: s.prefab.roomItem,
type: cc.Prefab
}, {
url: s.prefab.goodsItem,
type: cc.Prefab
}, {
url: s.prefab.mailItem,
type: cc.Prefab
}, {
url: s.prefab.nodeTitleSp,
type: cc.Prefab
}, {
url: s.prefab.rankItem,
type: cc.Prefab
}, {
url: s.prefab.signDayItem,
type: cc.Prefab
}, {
url: s.prefab.signMonthItem,
type: cc.Prefab
}, {
url: s.prefab.taskItem,
type: cc.Prefab
}, {
url: s.prefab.tipsScroll,
type: cc.Prefab
}, {
url: s.prefab.clubApplyItem,
type: cc.Prefab
}, {
url: s.prefab.clubMemberItem,
type: cc.Prefab
}, {
url: s.prefab.clubListItem,
type: cc.Prefab
}, {
url: s.prefab.clubTaskItem,
type: cc.Prefab
}, {
url: s.prefab.clubWelfareItem,
type: cc.Prefab
}, {
url: s.prefab.clubRankItem,
type: cc.Prefab
}, {
url: s.prefab.comInputItem,
type: cc.Prefab
}, {
url: s.prefab.itemScrollView,
type: cc.Prefab
}, {
url: s.prefab.clubScoreItem,
type: cc.Prefab
}, {
url: s.prefab.acceptItem,
type: cc.Prefab
}, {
url: s.prefab.fishRoomView,
type: cc.Prefab
}, {
url: s.prefab.awardsView,
type: cc.Prefab
}, {
url: s.prefab.shopView,
type: cc.Prefab
}, {
url: s.prefab.roleView,
type: cc.Prefab
}, {
url: s.prefab.bagView,
type: cc.Prefab
}, {
url: s.prefab.mailView,
type: cc.Prefab
}, {
url: s.prefab.rankingView,
type: cc.Prefab
}, {
url: s.prefab.noticeView,
type: cc.Prefab
}, {
url: s.prefab.settingView,
type: cc.Prefab
}, {
url: s.prefab.modifyView,
type: cc.Prefab
}, {
url: s.prefab.welfareView,
type: cc.Prefab
}, {
url: s.prefab.signUpView,
type: cc.Prefab
}, {
url: s.prefab.taskView,
type: cc.Prefab
}, {
url: s.prefab.selectPayView,
type: cc.Prefab
}, {
url: s.prefab.shareView,
type: cc.Prefab
}, {
url: s.prefab.vipView,
type: cc.Prefab
}, {
url: s.prefab.clubApplyView,
type: cc.Prefab
}, {
url: s.prefab.clubInviteView,
type: cc.Prefab
}, {
url: s.prefab.clubCreateView,
type: cc.Prefab
}, {
url: s.prefab.clubInfoView,
type: cc.Prefab
}, {
url: s.prefab.clubHallView,
type: cc.Prefab
}, {
url: s.prefab.clubHallManager,
type: cc.Prefab
}, {
url: s.prefab.clubApplyInfo,
type: cc.Prefab
}, {
url: s.prefab.clubHallBuild,
type: cc.Prefab
}, {
url: s.prefab.clubHallWelfare,
type: cc.Prefab
}, {
url: s.prefab.clubHallRoom,
type: cc.Prefab
}, {
url: s.prefab.clubHallRank,
type: cc.Prefab
}, {
url: s.prefab.clubScoreDetail,
type: cc.Prefab
}, {
url: s.prefab.clubRoleInfoView,
type: cc.Prefab
}, {
url: s.prefab.cardGiftView,
type: cc.Prefab
}, {
url: s.prefab.safeCenterView,
type: cc.Prefab
}, {
url: s.prefab.checkPwdView,
type: cc.Prefab
}, {
url: s.prefab.acceptAwardView,
type: cc.Prefab
}, {
url: s.prefab.playerInfoView,
type: cc.Prefab
}, {
url: s.prefab.myRewardView,
type: cc.Prefab
}, {
url: s.prefab.chargeCarnivalView,
type: cc.Prefab
}, {
url: s.prefab.vipTurntableView,
type: cc.Prefab
}, {
url: s.prefab.bagSendView,
type: cc.Prefab
}, {
url: s.prefab.sendRecordView,
type: cc.Prefab
}, {
url: s.prefab.clubDepotView,
type: cc.Prefab
}, {
url: s.prefab.clubDepotAccess,
type: cc.Prefab
}, {
url: s.prefab.clubDepotRecord,
type: cc.Prefab
}, {
url: s.prefab.clubModifyNotice,
type: cc.Prefab
} ],
preload4: [ {
url: s.audio.fishBossBGM1,
type: cc.AudioClip
}, {
url: s.audio.fishBossBGM2,
type: cc.AudioClip
}, {
url: s.audio.fishBossBGM3,
type: cc.AudioClip
}, {
url: s.audio.roomBgm1,
type: cc.AudioClip
}, {
url: s.audio.roomBgm2,
type: cc.AudioClip
}, {
url: s.audio.roomBgm3,
type: cc.AudioClip
}, {
url: s.audio.roomBgm4,
type: cc.AudioClip
}, {
url: s.audio.roomBgm5,
type: cc.AudioClip
}, {
url: s.audio.roomBgm6,
type: cc.AudioClip
}, {
url: s.sprite.roomBgPicture1,
type: cc.SpriteFrame
}, {
url: s.sprite.roomBgPicture2,
type: cc.SpriteFrame
}, {
url: s.sprite.roomBgPicture3,
type: cc.SpriteFrame
}, {
url: s.sprite.roomBgPicture4,
type: cc.SpriteFrame
}, {
url: s.sprite.roomBgPicture5,
type: cc.SpriteFrame
}, {
url: s.sprite.roomBgPicture6,
type: cc.SpriteFrame
}, {
url: s.sprite.roomBgPicture7,
type: cc.SpriteFrame
}, {
url: s.prefab.comFishObject,
type: cc.Prefab
}, {
url: s.prefab.awardZhuanPan,
type: cc.Prefab
}, {
url: s.prefab.comBulletObject,
type: cc.Prefab
}, {
url: s.prefab.comDropAward,
type: cc.Prefab
}, {
url: s.prefab.comDropItem,
type: cc.Prefab
}, {
url: s.prefab.comFishItem,
type: cc.Prefab
}, {
url: s.prefab.crazyOperate,
type: cc.Prefab
}, {
url: s.prefab.goldFishP,
type: cc.Prefab
}, {
url: s.prefab.gunUpgrade,
type: cc.Prefab
}, {
url: s.prefab.hitAwardNum,
type: cc.Prefab
}, {
url: s.prefab.operatingLayer,
type: cc.Prefab
}, {
url: s.prefab.playerInfoP,
type: cc.Prefab
}, {
url: s.prefab.upGunTips,
type: cc.Prefab
}, {
url: s.prefab.catchFishView,
type: cc.Prefab
}, {
url: s.prefab.catchFishUI,
type: cc.Prefab
}, {
url: s.prefab.bossComingView,
type: cc.Prefab
} ],
preload5: [ {
url: s.sprite.najiaAnimBg,
type: cc.SpriteFrame
}, {
url: s.sprite.caiquanActBg,
type: cc.SpriteFrame
}, {
url: s.sprite.monsterBattleBg,
type: cc.SpriteFrame
}, {
url: s.sprite.dragonBg,
type: cc.SpriteFrame
}, {
url: s.sprite.shareBossBg,
type: cc.SpriteFrame
}, {
url: s.prefab.drawItem,
type: cc.Prefab
}, {
url: s.prefab.dropAwardItem,
type: cc.Prefab
}, {
url: s.prefab.dynjDieEffect,
type: cc.Prefab
}, {
url: s.prefab.fishTypeItemP,
type: cc.Prefab
}, {
url: s.prefab.goldPillarP,
type: cc.Prefab
}, {
url: s.prefab.greatAnimP,
type: cc.Prefab
}, {
url: s.prefab.gunSwichItem,
type: cc.Prefab
}, {
url: s.prefab.introItem,
type: cc.Prefab
}, {
url: s.prefab.jadeExchangeItem,
type: cc.Prefab
}, {
url: s.prefab.newerTaskItem,
type: cc.Prefab
}, {
url: s.prefab.nodeAwardBmf,
type: cc.Prefab
}, {
url: s.prefab.nodeBscDj,
type: cc.Prefab
}, {
url: s.prefab.nodeCompetition,
type: cc.Prefab
}, {
url: s.prefab.nodeCountDown,
type: cc.Prefab
}, {
url: s.prefab.nodeOpenSp,
type: cc.Prefab
}, {
url: s.prefab.nodePokerColors,
type: cc.Prefab
}, {
url: s.prefab.nodePokerExchange,
type: cc.Prefab
}, {
url: s.prefab.nodePokerRank,
type: cc.Prefab
}, {
url: s.prefab.nodeSeamanReward,
type: cc.Prefab
}, {
url: s.prefab.nodeTaskInfo,
type: cc.Prefab
}, {
url: s.prefab.pokerChangertem,
type: cc.Prefab
}, {
url: s.prefab.pokerRankItem,
type: cc.Prefab
}, {
url: s.prefab.roleInfoTips,
type: cc.Prefab
}, {
url: s.prefab.seamanRollItem,
type: cc.Prefab
}, {
url: s.prefab.sevenDayItem,
type: cc.Prefab
}, {
url: s.prefab.gunSwitchView,
type: cc.Prefab
}, {
url: s.prefab.newerTaskView,
type: cc.Prefab
}, {
url: s.prefab.goldFishView,
type: cc.Prefab
}, {
url: s.prefab.playGuideView,
type: cc.Prefab
}, {
url: s.prefab.sevenDayView,
type: cc.Prefab
}, {
url: s.prefab.pokerColorView,
type: cc.Prefab
}, {
url: s.prefab.introduceView,
type: cc.Prefab
}, {
url: s.prefab.gunForgeView,
type: cc.Prefab
}, {
url: s.prefab.gunForgeResultView,
type: cc.Prefab
}, {
url: s.prefab.gunUpSuccAnim,
type: cc.Prefab
}, {
url: s.prefab.roomSeatView,
type: cc.Prefab
}, {
url: s.prefab.roomIntroduceView,
type: cc.Prefab
}, {
url: s.prefab.jadeExchangeView,
type: cc.Prefab
}, {
url: s.prefab.najiaPlayView,
type: cc.Prefab
}, {
url: s.prefab.dragonTreasureView,
type: cc.Prefab
}, {
url: s.prefab.monsterBattleView,
type: cc.Prefab
}, {
url: s.prefab.monsterBattleResultView,
type: cc.Prefab
}, {
url: s.prefab.goldDragonView,
type: cc.Prefab
}, {
url: s.prefab.fingerPlayView,
type: cc.Prefab
}, {
url: s.prefab.fingerPlayResultView,
type: cc.Prefab
}, {
url: s.prefab.shareHitBoss,
type: cc.Prefab
} ]
};
var n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
RoleConst: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "ff2eaD8CmhKBqBJiEIGZBWe", "RoleConst");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
ITEM_TYPE: {
gold: 1,
treasure: 2,
bullet: 3,
food: 4,
goldCard: 101,
silverCard: 102,
platinum_warhead: 103,
gold_warhead: 104,
silver_warhead: 105,
bronze_warhead: 106,
laba: 110
},
RoleSex: {}
};
s.RoleSex.Boy = 1;
s.RoleSex.Girl = 2;
s.RoleSexName = {};
s.RoleSexName[s.RoleSex.Boy] = "男";
s.RoleSexName[s.RoleSex.Girl] = "女";
s.RoleSetting = {};
s.RoleSetting.isAgreeClubAgreement = "isAgreeClubAgreement";
var n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
RoleCtrl: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "0a634KY4sdLl5YG9jFToGBv", "RoleCtrl");
var s = e("HttpCtrl"), n = e("RoleModel");
cc.Class({
extends: s,
properties: {},
ctor: function() {
var e = new n();
this.init(e);
},
requireAfterEnterGame: function() {
this.addEvent(M_Role.updateRoleInfo, this.handleUpdateRoleInfo.bind(this));
this.addEvent(M_Role.syncShareAward, this.handleShareAward.bind(this));
this.requireGetSetting();
},
handleUpdateRoleInfo: function(e) {
this.model.changeRoleInfo(e.data);
},
handleShareAward: function(e) {
ViewManager.showAwards({
awards: e.data.list
});
},
getRoleInfo: function(e) {
session.request(M_Role.getRoleInfo, e, this.handlerWithError(this, this.handleGetRoleInfo), null, !1);
},
getAddressByRoleId: function(e) {
var t = this, i = {
method: "getAddressByRoleId",
data: {
roleId: e
}
};
this.request(i, function(e) {
t.model.setAddressByRoleId(e);
});
},
getFaceById: function(e, t) {
var i = {
method: "getFace",
data: {
roleId: e
}
};
this.request(i, function(e) {
TypeUtils.isFunction(t) && t(e);
}, !1, function(e) {
TypeUtils.isFunction(t) && t(e);
});
},
handleGetRoleInfo: function(e) {
this.model.setRoleInfo(e.data);
var t = app.ctrls.login.getModel();
if (t.isNewRole()) {
var i = {
dataType: 2,
createTime: new Date().getTime() - t.getDiffTimeToServer()
};
this.submitExtraData(i);
}
this.emit(AppEvent.TryEnterGame);
},
submitExtraData: function(e) {},
requireGetSetting: function() {
var e = this;
session.request(M_Role.getSeting, null, function(t) {
e.getModel().handleGetRoleSeting(t);
});
},
getOtherInfo: function(e, t) {
TypeUtils.isRealNull(e) || session.request(M_Role.getOtherRoleBaseInfo, e, this.handlerWithError(this, this.handleGetOtherRoleInfo), t, !1);
},
handleGetOtherRoleInfo: function(e) {
this.model.handleGetOtherInfoSuccess(e.data, e.param);
},
changeRoleInfo: function(e, t) {
session.request(M_Role.changeRoleInfo, e, this.handleChangeRoleInfo.bind(this), t);
},
handleChangeRoleInfo: function(e) {
if (e.errorCode == SystemError.success) {
this.model.changeRoleInfo(e.data);
TipsUtils.showTips(_LANG("SETTING_CHANGE_SUCCESS"));
} else {
ViewManager.showErrorMsg(e.errorCode);
TypeUtils.isFunction(e.param.errorCb) && e.param.errorCb();
}
},
getBindAward: function(e, t) {
session.request(M_Role.getBindAward, e, this.handlerWithError(this, this.handleGetBindAward), t, !1);
},
handleGetBindAward: function(e) {
ViewManager.showAwards({
awards: e.param
});
this.model.getBindAward(e);
},
shareToFriend: function(e) {
session.request(M_Role.shareToFriend, e, this.handlerWithError(this, this.handeleShareSuccess));
},
handeleShareSuccess: function(e) {},
getValidateCode: function(e, t) {
var i = this, s = {
method: "getValidateCode",
data: {
roleId: this.model.getRoleId(),
type: e,
phoneNum: t
}
};
this.request(s, function(e) {
TipsUtils.showTips("请求验证码成功");
i.model.ObtainValidateCode(e);
});
},
bindPersonalInfo: function(e, t, i, s) {
var n = this, o = {
method: "bindPersonalInformation",
data: {
roleId: this.model.getRoleId(),
code: e,
phoneNum: t,
realName: i,
cardNumber: s
}
};
this.request(o, function(e) {
n.model.bindPersonalInfo(param.data);
});
},
checkPersonalInfo: function(e, t, i) {
var s = this, n = {
method: "changePersonalInformation",
data: {
roleId: this.model.getRoleId(),
code: e,
phoneNum: t,
cardNumber: i
}
};
this.request(n, function(e) {
s.model.checkPersonalInfo(e);
});
},
changeLoginPwd: function(e, t, i) {
var s = this, n = {
method: "changeLoginPwd",
data: {
roleId: this.model.getRoleId(),
code: e,
phoneNum: t,
pwd: i
}
};
this.request(n, function(e) {
s.model.changeLoginPwd(e);
});
},
setSecondPwd: function(e, t, i) {
var s = this, n = {
method: "setSecondPwd",
data: {
roleId: this.model.getRoleId(),
code: e,
phoneNum: t,
secondPwd: i
}
};
this.request(n, function(e) {
s.model.setSecondPwd(e);
});
},
checkSecondPwd: function(e) {
session.request(M_Role.secondPwdAuth, e, this.handlerWithError(this.model, this.model.checkSecondPwd));
},
getCommShare: function(e) {
this.request({
method: "getCommShare"
}, function(t) {
AppUtils.download(t.url, t.md5, function(t) {
TypeUtils.isFunction(e) && e(t);
});
});
},
freezeEvents: function() {
session.freezeEvent(M_Currency.updateCurrencyList);
this.freezing = !0;
},
unfreezeEvents: function() {
session.unfreezeEvent(M_Currency.updateCurrencyList);
this.freezing = !1;
}
});
cc._RF.pop();
}, {
HttpCtrl: "HttpCtrl",
RoleModel: "RoleModel"
} ],
RoleModel: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "163baz/UE5O6I98qkjG4pDW", "RoleModel");
var s = e("RoleConst"), n = e("CountingConst");
cc.Class({
extends: ModelBase,
properties: {
EVENT_GET_ROLE_INFO: "EVENT_GET_ROLE_INFO",
EVENT_UPDATE_ROLEINFO: "EVENT_UPDATE_ROLEINFO",
EVENT_EQUIP_GUN: "EVENT_EQUIP_GUN",
EVENT_UPDATE_GAME_ONLINE_COUNTS: "EVENT_UPDATE_GAME_ONLINE_COUNTS",
EVENT_BG_MUSIC: "EVENT_BG_MUSIC",
EVENT_SEND_VERIFY_CODE_SUCCESS: "EVENT_SEND_VERIFY_CODE_SUCCESS",
EVENT_BIND_PHONE_SUCCESS: "EVENT_BIND_PHONE_SUCCESS",
EVENT_BIND_CERTIFICATION_SUCCESS: "EVENT_BIND_CERTIFICATION_SUCCESS",
EVENT_BIND_WEICHAT_SUCCESS: "EVENT_BIND_WEICHAT_SUCCESS",
EVENT_GET_BIND_AWARD_STATUS: "EVENT_GET_BIND_AWARD_STATUS",
EVENT_PLAYER_VIPINFO_CHANGE: "EVENT_PLAYER_VIPINFO_CHANGE",
EVENT_OBTAIN_GAMES_RECORD: "EVENT_OBTAIN_GAMES_RECORD",
EVENT_OBTAIN_ROLE_ADDRESS: "EVENT_OBTAIN_ROLE_ADDRESS",
EVENT_OBTAIN_DDZ_GAME_RECORD: "EVENT_OBTAIN_DDZ_GAME_RECORD",
EVENT_FISH_BIND_INFO_SUCCESS: "EVENT_FISH_BIND_INFO_SUCCESS",
EVENT_FISH_CHECK_INFO_SUCCESS: "EVENT_FISH_CHECK_INFO_SUCCESS",
EVENT_FISH_CHANGE_PWD_SUCCESS: "EVENT_FISH_CHANGE_PWD_SUCCESS",
EVENT_FISH_SET_SECOND_PWD_SUCCESS: "EVENT_FISH_SET_SECOND_PWD_SUCCESS",
EVENT_CHECK_SECOND_PWD_SUCCESS: "EVENT_CHECK_SECOND_PWD_SUCCESS",
EVENT_CHANGE_HEAD_SUCCESS: "EVENT_CHANGE_HEAD_SUCCESS"
},
ctor: function() {
this.init();
this._roleInfo = {};
this._gameInfo = {};
this.m_roleSetting = null;
this.m_roleVipInfo = null;
},
setRoleInfo: function(e) {
this._roleInfo = DicUtils.copy(e);
logger.info("修改人物信息", e);
this.dispatchEvent(this.EVENT_GET_ROLE_INFO);
},
getRoleInfo: function() {
return this._roleInfo;
},
setAddressByRoleId: function(e) {
e.role_id == this._roleId && (this.roleAddr = e);
this.dispatchEvent(this.EVENT_OBTAIN_ROLE_ADDRESS, e);
},
getAddress: function() {
return this.roleAddr || {};
},
getNickName: function() {
return this._roleInfo.nickname.substring(0, 6);
},
getSignature: function() {
return this._roleInfo.signature || "";
},
getAvatar: function() {
return this._roleInfo.avatar;
},
getAvatarBox: function() {
return this._roleInfo.avatarBox || 1;
},
getRoleGender: function() {
return this._roleInfo.gender || s.RoleSex.Boy;
},
setRoleId: function(e) {
this._roleId = e;
},
getAccountId: function() {
return this._roleInfo.uid || 0;
},
getRoleId: function() {
return this._roleId;
},
getShipLevel: function() {
return this._roleInfo.membershipLevel || 99;
},
getUnionId: function() {
return this._roleInfo.unionId || 0;
},
getRolePhone: function() {
return this._roleInfo.mobileNum;
},
sendVerifyCode: function() {
this.dispatchEvent(this.EVENT_SEND_VERIFY_CODE_SUCCESS);
},
setBindPhone: function(e) {
this._roleInfo.mobileNum = e;
this.dispatchEvent(this.EVENT_BIND_PHONE_SUCCESS);
},
getRoleWechat: function() {
return this._roleInfo.wechatNum;
},
setCertificSuccess: function(e) {
e.certificationNum && (this._roleInfo.certificationNum = e.certificationNum);
e.realName && (this._roleInfo.realName = e.realName);
this.dispatchEvent(this.EVENT_BIND_CERTIFICATION_SUCCESS, e);
},
getRoleRealName: function() {
return this._roleInfo.realName;
},
getRoleCertification: function() {
return this._roleInfo.certificationNum;
},
getBindAward: function(e) {
this.dispatchEvent(this.EVENT_GET_BIND_AWARD_STATUS);
},
checkPhoneBindAward: function() {
return !!(this._roleInfo.mobileNum && "" != this._roleInfo.mobileNum && CountingUtils.getRemainUsingCount(n.CountingType.BindMobileNum) > 0);
},
checkIdentificationAward: function() {
return !!(this._roleInfo.certificationNum && "" != this._roleInfo.certificationNum && CountingUtils.getRemainUsingCount(n.CountingType.Certification) > 0);
},
setGun: function(e) {
this._roleInfo.gun = e;
this.dispatchEvent(this.EVENT_EQUIP_GUN, {
id: e
});
},
getGun: function() {
return this._roleInfo.gun || 1;
},
setGunLevel: function(e) {
this._roleInfo.gunLevel = e;
},
getGunLevel: function() {
return this._roleInfo.gunLevel;
},
setInCatchFishStatus: function(e) {
this.isInCatchView = e;
},
getIsInCatchView: function() {
return this.isInCatchView;
},
changeRoleInfo: function(e) {
var t = this.getAvatar() != e.avatar;
for (var i in e) e.hasOwnProperty(i) && (this._roleInfo[i] = e[i]);
this.dispatchEvent(this.EVENT_UPDATE_ROLEINFO);
t && this.dispatchEvent(this.EVENT_CHANGE_HEAD_SUCCESS);
},
setLobbyInfo: function(e) {
this._gameInfo = DicUtils.copy(e.onlineList.list);
},
setOnLineInfo: function(e) {
if (this._gameInfo) {
var t = e.list || {};
for (var i in t) if (t.hasOwnProperty(i)) {
var s = t[i];
this._gameInfo[s.roomType] && (this._gameInfo[s.roomType].num = s.num || 0);
}
this.dispatchEvent(this.EVENT_UPDATE_GAME_ONLINE_COUNTS);
}
},
getRoomCountByRoomType: function(e) {
return this._gameInfo[e] && this._gameInfo[e].num || 0;
},
getRoomOnLineDayCountByRoomType: function(e) {
return this._gameInfo[e] && this._gameInfo[e].onlineDay || 0;
},
getSex: function(e) {
return s.RoleSex.Boy;
},
getCanUseGunLevels: function(e) {
var t = [];
ConfigMgr.getConfig("room_gun_level_config").forEach(function(i) {
i.roomType == e && t.push(i.level);
});
ArrayUtils.sort(t, function(e, t) {
return e - t;
});
return t;
},
sendBgMusicState: function(e) {
this.dispatchEvent(this.EVENT_BG_MUSIC, e);
},
handleGetOtherInfoSuccess: function(e, t) {
!TypeUtils.isRealNull(t) && TypeUtils.isFunction(t.callback) && t.callback(e, t.data);
},
handleGetRoleSeting: function(e) {
this.m_roleSetting = JSON.parse(e.data.data);
},
getRoleSetting: function() {
return this.m_roleSetting;
},
getRoleSettingByKey: function(e) {
TypeUtils.isRealNull(this.m_roleSetting) && (this.m_roleSetting = {});
return this.m_roleSetting[e];
},
requireSaveSetting: function(e, t) {
TypeUtils.isRealNull(this.m_roleSetting) && (this.m_roleSetting = {});
this.m_roleSetting[e] = t;
session.request(M_Role.saveSeting, {
data: JSON.stringify(this.m_roleSetting)
}, function(e) {}, null, !1);
},
setRoleVipInfo: function(e) {
this.m_roleVipInfo = e;
},
getVipInfo: function() {
return this.m_roleVipInfo;
},
setSecondPwdStatue: function(e) {
this._roleInfo.haveSecondPwd = e;
},
getSecondPwd: function() {
return this._roleInfo.haveSecondPwd;
},
setCheckPwdStatue: function(e) {
this.hasCheck = e;
},
hasCheckPwd: function() {
return this.hasCheck;
},
handleOnVipChange: function(e) {
this.setRoleVipInfo(e.data);
this.dispatchEvent(this.EVENT_PLAYER_VIPINFO_CHANGE, e.data);
},
setDDZGameRecordInfo: function(e) {
this.ddzGameRecord = e;
this.dispatchEvent(this.EVENT_OBTAIN_DDZ_GAME_RECORD);
},
getDDZGameRecordInfo: function() {
return this.ddzGameRecord || {};
},
setStatisticsInfo: function(e) {
this.gamesRecord = e.data;
if (this.gamesRecord.gameRoomList && this.gamesRecord.gameRoomList[1]) {
var t = this.gamesRecord.gameRoomList[1];
t.farmerWinCount && t.beFarmerCount && this.insetRecordTab(this.gamesRecord.gameRoomList[1].roomList, t.beFarmerCount, t.farmerWinCount, 5);
t.bankerWinCount && t.beBankerCount && this.insetRecordTab(this.gamesRecord.gameRoomList[1].roomList, t.beBankerCount, t.bankerWinCount, 6);
t.totalGameCount && t.bankerWinCount && t.farmerWinCount && this.insetRecordTab(this.gamesRecord.gameRoomList[1].roomList, t.totalGameCount, t.bankerWinCount + t.farmerWinCount, 7);
}
this.dispatchEvent(this.EVENT_OBTAIN_GAMES_RECORD, this.gamesRecord);
},
insetRecordTab: function(e, t, i, s) {
var n = {};
n.roomType = s;
n.totalNums = t;
n.winNums = i;
e.push(n);
},
ObtainValidateCode: function(e) {
this.dispatchEvent(this.EVENT_SEND_VERIFY_CODE_SUCCESS);
},
bindPersonalInfo: function(e) {
this._roleInfo.mobileNum = e.phoneNum;
this._roleInfo.realName = e.realName;
this.dispatchEvent(this.EVENT_FISH_BIND_INFO_SUCCESS);
this._roleInfo.certificationNum = e.cardNumber;
},
checkBindInfoAward: function() {
return this.checkPhoneBindAward() && this.checkIdentificationAward();
},
checkPersonalInfo: function(e) {
this.dispatchEvent(this.EVENT_FISH_CHECK_INFO_SUCCESS);
},
bindMobileNum: function(e) {
this._roleInfo.mobileNum = e.phoneNum;
this.dispatchEvent(this.EVENT_FISH_BIND_INFO_SUCCESS);
},
checkMobileNum: function(e) {
this.dispatchEvent(this.EVENT_FISH_CHECK_INFO_SUCCESS);
},
changeLoginPwd: function(e) {
this.dispatchEvent(this.EVENT_FISH_CHANGE_PWD_SUCCESS);
},
setSecondPwd: function(e) {
this.setSecondPwdStatue(!0);
this.dispatchEvent(this.EVENT_FISH_SET_SECOND_PWD_SUCCESS);
},
checkSecondPwd: function(e) {
this.dispatchEvent(this.EVENT_CHECK_SECOND_PWD_SUCCESS);
},
setHeadList: function(e) {
this.headList = e;
},
getHeadList: function() {
return this.headList;
}
});
cc._RF.pop();
}, {
CountingConst: "CountingConst",
RoleConst: "RoleConst"
} ],
RoleUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "36ddb8IGx1DPKZHAObP3dvg", "RoleUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
getRoleId: function() {
return s.getModel().getRoleId();
},
getModel: function() {
return app.ctrls.role.getModel();
},
getNickName: function() {
return s.getModel().getNickName();
},
getUnionId: function() {
return s.getModel().getUnionId();
},
checkSecondPwd: function(e) {
TypeUtils.isFunction(e) && (this.getModel().hasCheckPwd() || SystemUtils.checkIsClose(20026) ? e() : this.getModel().getSecondPwd() ? ViewManager.showView("CHECK_PWD_VIEW", null, {
callback: e
}) : TipsUtils.showTipsBox({
title: "设 置",
desc: "你尚未设置二级密码保护，账号被盗道具会面临恶意操作的风险，强烈建议您立即设置二级密码保护",
isHideCloce: !0,
sureCallBack: function() {
ViewManager.showView("SAFE_CENTER_VIEW");
}
}));
}
}, n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
RotationManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "8491eP6cC9H864JStiTCt9P", "RotationManager");
var s = e("GlobalEnum"), n = e("ManagerEnum");
cc.Class({
ctor: function() {},
rotate: function(e) {
if (e === n.Direction.Horizontal) {
console.log("旋转成横版");
cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE);
cc.view.setFrameSize(s.DesignResolutionSizeH.width, s.DesignResolutionSizeH.height);
cc.view.setDesignResolutionSize(s.DesignResolutionSizeH.width, s.DesignResolutionSizeH.height, cc.ResolutionPolicy.FIXED_WIDTH);
} else if (e === n.Direction.Vertical) {
console.log("旋转成竖版");
cc.view.setOrientation(cc.macro.ORIENTATION_PORTRAIT);
cc.view.setFrameSize(s.DesignResolutionSizeV.width, s.DesignResolutionSizeV.height);
cc.view.setDesignResolutionSize(s.DesignResolutionSizeV.width, s.DesignResolutionSizeV.height, cc.ResolutionPolicy.FIXED_WIDTH);
}
}
});
cc._RF.pop();
}, {
GlobalEnum: "GlobalEnum",
ManagerEnum: "ManagerEnum"
} ],
STTList: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "d7b202KlABKN7/wxNyvHSj7", "STTList");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = cc.Class({
cto: function() {
this.m_list = [];
this.m_size = 0;
},
init: function(e) {
this.m_list = e;
this.m_size = e.length;
return this;
},
pushBack: function(e) {
if (e) {
this.m_list.push(e);
this.m_size = this.m_size + 1;
}
},
pushFront: function(e) {
if (e) {
ArrayUtils.insert(this.m_list, 0, e);
this.m_size = this.m_size + 1;
}
},
insert: function(e, t) {
if (t) {
e > this.m_size && (e = this.m_size + 1);
e < 0 && (e = 0);
ArrayUtils.insert(this.m_list, e, t);
this.m_size = this.m_size + 1;
}
},
erase: function(e) {
if (!(e > this.m_size || e <= 0)) {
ArrayUtils.remove(this.m_list, e);
this.m_size = this.m_size - 1;
}
},
at: function(e) {
if (!(e > this.m_size || e < 0)) return this.m_list[e];
},
replace: function(e, t) {
nil != t && (e > this.m_size || e <= 0 || (this.m_list[e] = t));
},
front: function() {
return 0 == this.m_size ? void 0 : this.m_list[0];
},
back: function() {
return 0 == this.m_size ? void 0 : this.m_list[this.m_size - 1];
},
popFront: function() {
if (this.m_size > 0) {
var e = this.m_list[0];
ArrayUtils.remove(this.m_list, 0);
this.m_size = this.m_size - 1;
return e;
}
},
popBack: function() {
if (this.m_size > 0) {
var e = this.m_list[this.m_size - 1];
ArrayUtils.remove(this.m_list, this.m_size - 1);
this.m_size = this.m_size - 1;
return e;
}
},
size: function() {
return this.m_size;
},
sort: function(e) {
this.m_list.sort(e);
},
clear: function() {
if (0 != this.m_size) {
this.m_list = [];
this.m_size = 0;
}
},
merge: function(e, t, i) {
if (e && e.constructor === s) {
for (var n = e.size(), o = e.getList(), a = 0; a < n; a++) this.m_list.push(o[a]);
this.m_size = this.m_size + n;
}
},
mergeArray: function(e, t, i) {
if (objTable) {
for (var s = e.length, n = 0; n < e.length; n++) table.insert(this.m_list, objTable[n]);
this.m_size = this.m_size + s;
}
},
getList: function() {
return this.m_list;
},
isEmpty: function() {
return 0 == this.m_size;
},
reverse: function() {
this.m_list.reverse();
},
getIndex: function(e) {
if (!e) return -1;
this.m_size;
for (var t = 0; t < this.m_size; t++) {
if (this.m_list[t] === e) return t;
}
return -1;
},
remove: function(e) {
if (e) {
var t = this.getIndex(e);
this.erase(t);
}
},
fixIndex: function(e) {
return e < 0 ? this.m_size + e : e;
},
removeMul: function(e, t) {
if (e && t) {
e = this.fixIndex(e);
t = this.fixIndex(t);
} else if (e) {
e = this.fixIndex(e);
t = this.fixIndex(-1);
} else {
if (!t) return;
e = 0;
t = this.fixIndex(t);
}
t > this.m_size - 1 && (t = this.m_size - 1);
var i = t - e + 1;
ArrayUtils.remove(this.m_list, e, i);
this.m_size = this.m_size - i;
},
moveFrontByIndex: function(e) {
if (!(e > this.m_size - 1) && this.m_size > 0) {
var t = this.m_list[e];
ArrayUtils.remove(this.m_list, e);
this.m_size = this.m_size - 1;
this.pushFront(t);
}
},
moveBackByIndex: function(e) {
if (!(e > this.m_size - 1) && this.m_size > 0) {
var t = this.m_list[e];
ArrayUtils.remove(this.m_list, e);
this.m_size = this.m_size - 1;
this.pushBack(t);
}
},
findFirst: function(e) {
for (var t = 0; t < this.m_list; t++) if (e(this.m_list[t], t)) return this.m_list[t];
},
findAll: function(e) {
for (var t = [], i = 0; i < this.m_list; i++) e(this.m_list[i], i) && t.push(this.m_list[i]);
return t;
}
}), n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
Sdk: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "8d275aS6x1JKLJ/p3IkFLgQ", "Sdk");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = cc.Class({
statics: {
_instance: null,
getInstance: function() {
s._instance || (s._instance = new s());
return s._instance;
}
},
ctor: function() {
if (GlobalEnum.Pid === EnvEnum.Channel.YueRen) {
var t = e("YueRenSdk");
this.sdk = new t();
}
},
isEffect: function() {
return this.sdk;
},
login: function(e) {
this.isEffect() && this.sdk.login(e);
}
}), n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {
YueRenSdk: void 0
} ],
ShopConst: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "2e479OKOZZNm7OH5hm5SQGS", "ShopConst");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
PayType: {}
};
s.PayType.AiBei = 1;
s.PayType.InnerAppStore = 2;
s.PayType.QuickSdkPay = 3;
s.PayType.Alipay = 4;
s.TipsType = {};
s.TipsType.NotTips = 0;
s.TipsType.HotSell = 1;
s.TipsType.Discount = 2;
s.TipsType.LimitTime = 3;
s.TipsType.LimitNum = 4;
s.Shop_Gold = 1;
s.Shop_Diamond = 2;
s.Shop_Carnival = 6;
s.Shop_Stone = 10;
s.Shop_FishItem = 11;
s.Shop_Ticket = 12;
s.Shop_Gun = 13;
s.Shop_Jade = 15;
s.Fish_KuanagBaoId = 52e3;
s.Fish_FrozenId = 52001;
s.Fish_HaoJiaoId = 52002;
s.Fish_ShenDengId = 52003;
s.Fish_NBombId = 52006;
s.Fish_CollimationId = 52007;
s.Fish_QuickGift = 3005;
s.Fish_NewerGift = 3006;
s.Fish_FirstCharge = 3007;
s.Fish_MonthCardGift = 1003;
s.Fish_SailingGift = 3008;
s.ShopType = {};
s.ShopType.CoinShop = 1;
s.ShopType.GoldShop = 2;
s.ShopType.ItemShop = 3;
s.ShopType.MonthCardShop = 4;
s.ShopType.VipShop = 5;
s.ShopType.FishDiamondShop = 10;
s.ShopType.FishShop = 11;
s.ShopType.HuaFeiQuanShop = 12;
s.ShopType.PaoTaiShop = 13;
s.ShopType.ClubShop = 14;
var n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
ShopCtrl: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "0625cbgW+dJJY1mTy+7hiaa", "ShopCtrl");
var s = e("HttpCtrl"), n = e("ShopModel"), o = e("ShopConst");
cc.Class({
extends: s,
properties: {},
ctor: function() {
var e = new n();
this.init(e);
},
requireAfterEnterGame: function() {
this.addEvent(M_Shop.onChargeSuccess, this.handleChargeSuccess.bind(this));
this.addEvent(M_Shop.onSale, this.syncOnSale.bind(this));
this.getShopInfo();
this.getGiftInfoList();
},
buyGoods: function(e, t, i) {
var s = {
goodsId: e,
goodsCount: t
};
session.request(M_Shop.buyGoods, s, this.handlerWithError(this, this.handleBuyGoods), i, !0);
},
addOrder: function(e, t) {
var i = this, s = {
method: "getPayType",
data: {
os: GlobalUtils.getDevicePlatform(),
package: 1
}
};
this.request(s, function(s) {
TypeUtils.isArray(s.payList) && s.payList.length > 0 ? s.payList[0] == o.PayType.InnerAppStore ? i.requireServerAddOrder(e, s.payList[0], t || {}) : ViewManager.showView("SELECT_PAY_VIEW", null, {
payList: s.payList,
goodsId: e
}) : i.requireServerAddOrder(e, s.payType, t || {});
}, !0);
},
requireServerAddOrder: function(e, t, i) {
var s = {
goodsId: e,
payType: t,
device: GlobalUtils.getPlatformConst()
};
(i = i || {}).goodsId = e;
i.payType = t;
session.request(M_Shop.addOrder, s, this.handlerWithError(this, this.handleAddOrder), i, !0);
},
appstoreCallback: function(e, t, i) {
var s = {
data: {
itemId: e.itemId,
roleId: e.roleId,
receiptData: e.receiptData,
cpOrderId: e.cpOrderId
},
url: GlobalUtils.getAuthUrl() + "api/pay/callback/apple"
};
this.request(s, function(e) {
if ("success" == e) {
console.log("------------ 发货成功 -----------------");
AppUtils.getPlatform().finishCheckOrderIOSRMI(t);
TypeUtils.isFunction(i) && i();
} else console.log("------------ 发货失败 -----------------");
});
},
getGiftInfoList: function() {
session.request(M_Shop.getGiftInfoList, null, this.handlerWithError(this, this.handleGiftInfoList), null, !0);
},
handleBuyGoods: function(e) {
var t = e.param || {};
TypeUtils.isFunction(t.callBack) && t.callBack();
this.getShopInfo();
this.getGiftInfoList();
},
handleChargeSuccess: function(e) {
this.model.chargeSuccess(e.data);
this.getShopInfo();
this.getGiftInfoList();
this.emit(AppEvent.OnChargeSuccess);
},
handleAddOrder: function(e) {
var t = e.param, i = e.data || {}, s = i.orderNum, n = (i.url, t.payType);
if (n == o.PayType.AiBei || n == o.PayType.Alipay) {
this.model.setBuyGoodsInfo(e);
cc.sys.openURL(i.url);
} else if (n == o.PayType.Alipay) {
this.model.setBuyGoodsInfo(e);
cc.sys.openURL(i.url);
} else n == o.PayType.InnerAppStore ? AppUtils.getPlatform().iosPay(t.goodsId, s, RoleUtils.getRoleId()) : n == o.PayType.miniWechatPay || n == o.PayType.QuickSdkPay || logger.error("未知支付类型:%s", t.payType);
},
handleGiftInfoList: function(e) {
this.model.setGiftInfoList(e);
},
getShopInfo: function() {
session.request(M_Shop.getShopInfo, null, this.handlerWithError(this, this.handleGetShopInfo), null, !0);
},
handleGetShopInfo: function(e) {
this.model.setShopInfo(e.data);
},
syncOnSale: function(e) {
this.getShopInfo();
this.model.handleOnSale(e.data.goodList);
}
});
cc._RF.pop();
}, {
HttpCtrl: "HttpCtrl",
ShopConst: "ShopConst",
ShopModel: "ShopModel"
} ],
ShopModel: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "dbbb7fKGYtK5L1oYCSo3WT5", "ShopModel");
var s = e("ShopConst"), n = e("ItemConst");
cc.Class({
extends: ModelBase,
properties: {
EVENT_GIFT_INFO_UPDATE: "EVENT_GIFT_INFO_UPDATE",
EVENT_BUY_GOODS_SUCCESS: "EVENT_BUY_GOODS_SUCCESS",
EVENT_SHOP_INFO_UPDATE: "EVENT_SHOP_INFO_UPDATE"
},
ctor: function() {
this.init();
this._giftInfoList = {};
this.goodsParam = {};
},
setGiftInfoList: function(e) {
var t = e.data || {};
this._giftInfoList = t.giftInfoList || {};
this.dispatchEvent(this.EVENT_GIFT_INFO_UPDATE);
},
getGiftInfoList: function() {
return this._giftInfoList;
},
getGiftInfoById: function(e) {
for (var t in this._giftInfoList) if (this._giftInfoList.hasOwnProperty(t)) {
var i = this._giftInfoList[t];
if (i.giftId == e) return i.days;
}
return 0;
},
setBuyGoodsInfo: function(e) {
this.goodsParam = {};
TypeUtils.isRealNull(e.param) || (this.goodsParam = e.param);
},
chargeSuccess: function(e) {
var t = e.goodsId, i = e.itemList, s = [];
if (TypeUtils.isNotEmptyArray(i)) {
s = i;
for (var o in e.shopSendList) if (e.shopSendList.hasOwnProperty(o)) {
var a = e.shopSendList[o], r = DicUtils.deepClone(a);
r.obtainType = n.ItemAwardType.FirstCharge;
for (var l in this.goodList) if (this.goodList.hasOwnProperty(l)) {
if (t == this.goodList[l].shopIndex) {
r.obtainType = n.ItemAwardType.ExtraSend;
break;
}
}
s.push(r);
}
for (var c in e.vipSendList) if (e.vipSendList.hasOwnProperty(c)) {
var h = e.vipSendList[c], u = DicUtils.deepClone(h);
u.obtainType = n.ItemAwardType.VIPSend;
s.push(u);
}
} else if (!TypeUtils.isRealNull(this.goodsParam.goodsId) && this.goodsParam.goodsId == t) {
s = this.goodsParam.awards;
TypeUtils.isRealNull(this.goodsParam.awards) && (s = ConfigMgr.getConfig("shop_config").findByIndex(t).goods);
}
if (!TypeUtils.isRealNull(this.goodsParam.goodsId) && this.goodsParam.goodsId == t && TypeUtils.isFunction(this.goodsParam.callBack)) {
this.goodsParam.callBack();
this.goodsParam = {};
}
s = this.checkFishMonthCard(t, s);
if (t >= 8e4 && t <= 80005) {
for (var d = "恭喜获得", p = 0; p < e.itemList.length; p++) {
var f = e.itemList[p];
d = d + ItemUtils.getItemName(f.itemId) + "x" + f.amount;
}
TipsUtils.showTips(d);
} else ViewManager.showAwards({
awards: s
});
this.dispatchEvent(this.EVENT_BUY_GOODS_SUCCESS);
},
checkFishMonthCard: function(e, t) {
if (e != s.Fish_MonthCardGift) return t;
var i = ConfigMgr.getConfig("shop_config").findByIndex(e).gift[1];
if (this.getGiftInfoById(i) <= 0) return t;
for (var n = [], o = 0; o < t.length; o++) {
var a = t[o], r = ConfigMgr.getConfig("item_config").findByIndex(a.itemId);
!TypeUtils.isRealNull(r.gun) && TypeUtils.isRealNull(r.existTime) || n.push(a);
}
return n;
},
setShopInfo: function(e) {
this.goodList = e.goodList;
this.dispatchEvent(this.EVENT_SHOP_INFO_UPDATE);
},
getShopInfo: function() {
return this.goodList || [];
},
getShopGoodInfo: function(e) {
for (var t = null, i = 0; i < this.goodList.length; i++) {
var s = this.goodList[i];
if (s.shopIndex == e) {
t = s;
break;
}
}
return t;
},
isCharge: function() {
for (var e = !1, t = 0; t < this.goodList.length; t++) {
var i = this.goodList[t];
if (i.shopIndex != s.Fish_SailingGift && i.buyNums > 0) {
e = !0;
break;
}
}
return e;
},
getShopInfoBuyCount: function(e) {
var t = this.getShopGoodInfo(e);
return TypeUtils.isRealNull(t) ? 0 : t.buyNums;
},
getShopInfoBuyTime: function(e) {
var t = this.getShopGoodInfo(e);
return TypeUtils.isRealNull(t) ? -1 : t.lastBuyAt;
},
getFishMonthCardDaysRemain: function() {
var e = 0, t = ConfigMgr.getConfig("shop_config").findByIndex(s.Fish_MonthCardGift);
if (TypeUtils.isRealNull(t)) return e;
var i = t.gift[0];
return e = this.getGiftInfoById(i);
},
handleOnSale: function(e) {
for (var t = [], i = 0; i < e.length; i++) {
var n = e[i];
if (ConfigMgr.getConfig("shop_config").findByIndex(n.shopIndex).shopId == s.Shop_Carnival) {
0;
}
}
t.length > 0 && ViewManager.showView("FIRST_CHARGE_CARNIVAL", null, {
goodList: t
});
},
getShopData: function(e) {
TypeUtils.isRealNull(this.shopData) && this.initShopData();
return TypeUtils.isRealNull(e) ? this.shopData : this.shopData[e];
},
initShopData: function() {
var e = {};
ConfigMgr.getConfig("shop_config").forEach(function(t) {
TypeUtils.isRealNull(e[t.shopId]) && (e[t.shopId] = []);
e[t.shopId].push(t);
});
for (var t in e) e.hasOwnProperty(t) && ArrayUtils.sort(e[t], function(e, t) {
return TypeUtils.isRealNull(e.chargePrice) || TypeUtils.isRealNull(t.chargePrice) ? TypeUtils.isRealNull(e.rank) || TypeUtils.isRealNull(t.rank) ? e.id - t.id : e.rank - t.rank : e.chargePrice - t.chargePrice;
});
this.shopData = e;
},
getGoodsLimit: function(e) {
if (!TypeUtils.isRealNull(e)) {
ConfigMgr.getConfig("shop_config").forEach(function(t) {
if (t.id == e && !TypeUtils.isRealNull(t.buyCounting)) {
var i = ConfigMgr.getConfig("counting_config").findByIndex(t.buyCounting);
if (!TypeUtils.isRealNull(i)) {
i;
return;
}
}
});
}
},
canGiveItems: function(e) {
var t = this, i = {};
ConfigMgr.getConfig("shop_give_config").forEach(function(s) {
if (s.id == e) {
if (!TypeUtils.isRealNull(s.count)) {
if (CountingUtils.getRemainUsingCount(s.count) > 0) {
i = {
send: s.send
};
return;
}
return;
}
for (var n = 1, o = 0; o < t.goodList.length; o++) {
var a = t.goodList[o];
if (a.shopIndex == e) {
n = a.buyNums + 1;
break;
}
}
if (s.range[0] <= n && (s.range[1] >= n || -1 == s.range[1])) {
i = {
send: s.send,
times: n
};
return;
}
}
});
return i;
}
});
cc._RF.pop();
}, {
ItemConst: "ItemConst",
ShopConst: "ShopConst"
} ],
SingleTextureManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "1dac4wCfrtECKoG4lB+eNpl", "SingleTextureManager");
cc.Class({
extends: BaseAssetManager,
properties: {
_name: {
default: "SingleTextureManager",
override: !0
}
},
loadResourceReal: function(e, t) {
SpriteUtils.getSpriteFrame(e, function(i) {
t(e, i);
});
}
});
cc._RF.pop();
}, {} ],
SpineUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "f388c3yB4VMtL1QoyTJgLhr", "SpineUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = e("ComSpineBaseData"), n = {
createSpine: function(e, t) {
if (TypeUtils.isType(e, s)) {
var i = new cc.Node("");
i.addComponent("ComSpine").init(e, function() {
TypeUtils.isFunction(t) && t(i);
});
return i;
}
logger.error("_ComSpineBaseData !isType ComSpineBaseData");
},
initSpineSkeleton: function(e) {
e || logger.error("_ComSpineBaseData == null");
},
changeSpine: function(e, t) {
cc.loader.loadRes(e, sp.SkeletonData, function(e, t, i) {}, function(i, s) {
TypeUtils.isRealNull(i) ? TypeUtils.isFunction(t) && t(i, s) : logger.error("SpineUtils.changeSpine error", e, i);
});
},
changeAnimation: function(e, t, i, s, n) {
var o = e;
if (!(e instanceof sp.Skeleton)) {
var a = e.getComponent(sp.Skeleton);
if (null == a) return;
o = a;
}
if (TypeUtils.isRealNull(s)) o.setAnimation(0, t, i); else {
o.setAnimation(0, t, !1);
o.addAnimation(0, s, i, 0);
}
}
}, o = n;
i.default = o;
t.exports = i.default;
cc._RF.pop();
}, {
ComSpineBaseData: "ComSpineBaseData"
} ],
SpriteUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "aea091+FwVJBpiHg6NcR2aO", "SpriteUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
getSpriteFrame: function(e, t, i) {
LoadUtils.loadResWithType(e, cc.SpriteFrame, function(s, n) {
s ? logger.error("加载精灵帧失败:", e, " , ", s) : i && !i.isValid || t(n);
});
},
loadPlistTexture: function(e, t, i) {
LoadUtils.loadResWithType(e, cc.SpriteAtlas, function(e, s) {
e ? logger.error("err = ", e) : i && !i.isValid || t(s);
});
},
setTexture: function(e, t, i, n) {
if (TypeUtils.isRealNull(t)) logger.error("SpriteUtils.setTexture"); else {
var o = function(i) {
t.getComponent(cc.Sprite).spriteFrame = i;
TypeUtils.isFunction(e.callback) && e.callback();
e.isHide && (t.opacity = 255);
};
e.isHide && (t.opacity = 0);
n ? s.loadPlistTexture(e.plist, function(t) {
o(t.getSpriteFrame(e.icon));
}, i) : s.getSpriteFrame(e.path, function(e) {
o(e);
}, i);
}
},
setSpriteGray: function(e, t) {
var i = null;
e instanceof cc.Sprite ? i = e : e instanceof cc.Node && (i = e.getComponent(cc.Sprite));
i ? t ? i.setMaterial(0, cc.MaterialVariant.createWithBuiltin("2d-gray-sprite", i)) : i.setMaterial(0, cc.MaterialVariant.createWithBuiltin("2d-sprite", i)) : logger.warn("SpriteUtils.setSpriteGray node 没有Sprite控件");
},
setSpriteScale: function(e, t, i) {
if (e) {
t = t || 1;
i = i || 1;
e.scaleX = t;
e.scaleY = i;
}
},
setContentScale: function(e, t, i) {
if (e) {
var s = 1;
t && (s = t / e.width);
i && (s = i / e.height);
if (t && i) {
e.scaleX = s;
e.scaleY = 1;
} else t ? e.scale = s : i && (e.scale = 1);
}
},
setAdaptContentSize: function(e, t, i) {
var s = 1;
TypeUtils.isRealNull(t) || TypeUtils.isRealNull(i) ? TypeUtils.isRealNull(t) ? TypeUtils.isRealNull(i) || (s = i / e.height) : s = t / e.width : s = Math.min(t / e.width, i / e.height);
e.scale = s;
},
createSpr: function(e) {
var t = new cc.Node();
t.addComponent(cc.Sprite);
s.setTexture({
path: e
}, t, t);
return t;
},
getScreenPic: function(e, t, i) {
var s = cc.rect(e.x, e.y, e.width, e.height), n = cc.winSize;
s.x = (n.width - s.width) / 2;
s.y = (n.height - s.height) / 2;
s.x = Math.floor(s.x);
s.y = Math.floor(s.y);
s.width = Math.floor(s.width);
s.height = Math.floor(s.height);
var o = cc.game._renderContext, a = e, r = new cc.RenderTexture();
r.initWithSize(n.width, n.height, o.STENCIL_INDEX8);
var l = a.addComponent(cc.Camera);
l.targetTexture = r;
l.render();
a.removeComponent(cc.Camera);
for (var c = r.readPixels(), h = new Uint8ClampedArray(s.width * s.height * 4), u = 0; u < s.height; u++) for (var d = 0; d < s.width; d++) for (var p = (u + s.y) * r.width + (d + s.x), f = 0; f < 4; f++) {
h[4 * (u * s.width + d) + f] = c[4 * p + f];
3 == f && (h[4 * (u * s.width + d) + f] = 255);
}
for (var m = new Uint8ClampedArray(s.width * s.height * 4), g = 4 * s.width, _ = 0; _ < s.height; _++) for (var T = (s.height - 1 - _) * s.width * 4, C = _ * s.width * 4, y = 0; y < g; y++) m[C + y] = h[T + y];
var I = jsb.fileUtils.getWritablePath() + "download/", v = I + t;
jsb.fileUtils.isDirectoryExist(I) || jsb.fileUtils.createDirectory(I);
jsb.saveImageData(m, s.width, s.height, v) ? TypeUtils.isFunction(i) && i(null, v) : i("获取图片失败!");
}
}, n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
StringUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "cdb66ym2apNg7QxSx+x4hCA", "StringUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
stringFormat: function(e) {
for (var t = 0; t < (arguments.length <= 1 ? 0 : arguments.length - 1); t++) {
var i = new RegExp("\\{" + t + "\\}", "gm");
e = e.replace(i, t + 1 < 1 || arguments.length <= t + 1 ? void 0 : arguments[t + 1]);
}
return e;
},
format: function(e) {
for (var t = 0; t < (arguments.length <= 1 ? 0 : arguments.length - 1); t++) e = (e = e.replace("%d", "%s")).replace("%s", t + 1 < 1 || arguments.length <= t + 1 ? void 0 : arguments[t + 1]);
return e;
},
copy: function(e) {
if (cc.sys.OS_ANDROID !== cc.sys.os && cc.sys.OS_IOS !== cc.sys.os) {
var t = e, i = document.createElement("textarea");
i.value = t;
i.setAttribute("readonly", "");
i.style.contain = "strict";
i.style.position = "absolute";
i.style.left = "-9999px";
i.style.fontSize = "12pt";
var s = getSelection(), n = !1;
s.rangeCount > 0 && (n = s.getRangeAt(0));
document.body.appendChild(i);
i.select();
i.selectionStart = 0;
i.selectionEnd = t.length;
var o = !1;
try {
o = document.execCommand("copy");
} catch (e) {}
document.body.removeChild(i);
if (n) {
s.removeAllRanges();
s.addRange(n);
}
return o;
}
},
stringSplit: function(e, t) {
var i = t || ".";
new Array();
return e.split(i);
},
addZero: function(e, t, i) {
var s = e + "";
if (s.length >= t) return s;
for (var n = i || "0", o = t - s.length, a = 0; a < o; a++) s = n + s;
return s;
}
}, n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
s.encodeBase64 = function(e) {
var t, i, o, a, r, l, c, h = "", u = 0;
e = s._utf8_encode(e);
for (;u < e.length; ) {
t = e.charCodeAt(u++);
i = e.charCodeAt(u++);
o = e.charCodeAt(u++);
a = t >> 2;
r = (3 & t) << 4 | i >> 4;
l = (15 & i) << 2 | o >> 6;
c = 63 & o;
isNaN(i) ? l = c = 64 : isNaN(o) && (c = 64);
h = h + n.charAt(a) + n.charAt(r) + n.charAt(l) + n.charAt(c);
}
return h;
};
s.decodeBase64 = function(e) {
var t, i, o, a, r, l, c, h = "", u = 0;
e = e.replace(/[^A-Za-z0-9\+\/\=]/g, "");
for (;u < e.length; ) {
a = n.indexOf(e.charAt(u++));
r = n.indexOf(e.charAt(u++));
l = n.indexOf(e.charAt(u++));
c = n.indexOf(e.charAt(u++));
t = a << 2 | r >> 4;
i = (15 & r) << 4 | l >> 2;
o = (3 & l) << 6 | c;
h += String.fromCharCode(t);
64 != l && (h += String.fromCharCode(i));
64 != c && (h += String.fromCharCode(o));
}
return h = s._utf8_decode(h);
};
s._utf8_encode = function(e) {
e = e.replace(/\r\n/g, "\n");
for (var t = "", i = 0; i < e.length; i++) {
var s = e.charCodeAt(i);
if (s < 128) t += String.fromCharCode(s); else if (s > 127 && s < 2048) {
t += String.fromCharCode(s >> 6 | 192);
t += String.fromCharCode(63 & s | 128);
} else {
t += String.fromCharCode(s >> 12 | 224);
t += String.fromCharCode(s >> 6 & 63 | 128);
t += String.fromCharCode(63 & s | 128);
}
}
return t;
};
s._utf8_decode = function(e) {
for (var t = "", i = 0, s = 0, n = 0, o = 0; i < e.length; ) if ((s = e.charCodeAt(i)) < 128) {
t += String.fromCharCode(s);
i++;
} else if (s > 191 && s < 224) {
o = e.charCodeAt(i + 1);
t += String.fromCharCode((31 & s) << 6 | 63 & o);
i += 2;
} else {
o = e.charCodeAt(i + 1);
n = e.charCodeAt(i + 2);
t += String.fromCharCode((15 & s) << 12 | (63 & o) << 6 | 63 & n);
i += 3;
}
return t;
};
s.formatToHtml = function(e) {
TypeUtils.isAllNull(e) || (e = (e = e.replace("<", "&lt;")).replace(">", "&gt;"));
return e;
};
s.getHtmlStr = function(e) {
for (var t = "", i = 0; i < e.length; i++) {
var s = e[i];
TypeUtils.isRealNull(s.size) || (t = t + "<size=" + s.size + ">");
TypeUtils.isRealNull(s.color) || (t = t + "<color=" + s.color + ">");
TypeUtils.isRealNull(s.outline) || (t = t + "<outline color=" + s.outline + " width=" + (s.lineSize || 1) + ">");
TypeUtils.isRealNull(s.b) || (t += "<b>");
TypeUtils.isRealNull(s.i) || (t += "<i>");
TypeUtils.isRealNull(s.u) || (t += "<u>");
if (!TypeUtils.isRealNull(s.on)) {
t = t + "<on click='" + s.on;
TypeUtils.isRealNull(s.param) || (t = t + "' param='" + (s.param || ""));
t += "'>";
}
TypeUtils.isRealNull(s.str) || (t += s.str);
TypeUtils.isRealNull(s.br) || (t += "<br/>");
if (!TypeUtils.isRealNull(s.img)) {
t = t + "<img src='" + s.img + "'";
TypeUtils.isRealNull(s.handler) || (t = t + " click='" + s.handler + "'");
TypeUtils.isRealNull(s.height) || (t = t + " height=" + s.height);
TypeUtils.isRealNull(s.width) || (t = t + " width=" + s.width);
TypeUtils.isRealNull(s.align) || (t = t + " align=" + s.align);
TypeUtils.isRealNull(s.offset) || (t = t + " offset=" + s.offset);
t += "/>";
}
TypeUtils.isRealNull(s.on) || (t += "</on>");
TypeUtils.isRealNull(s.u) || (t += "</u>");
TypeUtils.isRealNull(s.i) || (t += "</i>");
TypeUtils.isRealNull(s.b) || (t += "</b>");
TypeUtils.isRealNull(s.outline) || (t += "</outline>");
TypeUtils.isRealNull(s.color) || (t += "</color>");
TypeUtils.isRealNull(s.size) || (t += "</size>");
}
return t;
};
var o = s;
i.default = o;
t.exports = i.default;
cc._RF.pop();
}, {} ],
SystemConst: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "2499eykua5Aj5ubAAkVX/i+", "SystemConst");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
SystemStatus: {}
};
s.SystemStatus.Close = 0;
s.SystemStatus.Open = 1;
s.SystemStatus.Lock = 2;
s.ExamStatus = {};
s.ExamStatus.Common = 0;
s.ExamStatus.Exam = 1;
s.SwitchType = {};
s.SwitchType.isAppStorePackageCanUpdate = 1;
s.SwitchType.isExaming = 2;
s.AllPid = 0;
s.AllChannelId = 0;
s.LockType = {};
s.LockType.Channel = 1;
s.LockType.SonChannel = 2;
s.LockType.AllChannel = 3;
s.LockStatus = {};
s.LockStatus.Enable = 1;
s.LockStatus.Disable = 2;
s.SystemId = {};
s.SystemId.ClassicRoom = 10001;
s.SystemId.MagicRoom = 10002;
s.SystemId.Club = 10003;
s.SystemId.Games = 10004;
s.SystemId.Shop = 10005;
s.SystemId.Gift = 10006;
s.SystemId.Welfare = 10007;
s.SystemId.More = 10008;
s.SystemId.Ranking = 10009;
s.SystemId.Forge = 10010;
s.SystemId.Bag = 10011;
s.SystemId.Accept = 10012;
s.SystemId.Mail = 10013;
s.SystemId.Share = 10014;
s.SystemId.RoleInfo = 10015;
s.SystemId.ClubShare = 10016;
s.SystemId.Room1 = 20001;
s.SystemId.Room2 = 20002;
s.SystemId.Room3 = 20003;
s.SystemId.Room4 = 20004;
s.SystemId.Room5 = 20005;
s.SystemId.MagicRoom1 = 20006;
s.SystemId.MagicRoom2 = 20007;
s.SystemId.WarRob = 20008;
s.SystemId.GameWar = 20009;
s.SystemId.GameNN = 20010;
s.SystemId.GameSHZ = 20011;
s.SystemId.GameHYLL = 20012;
s.SystemId.GameBSMC = 20013;
s.SystemId.GameWZZJ = 20014;
s.SystemId.GameLHD = 20015;
s.SystemId.GameMJ = 20016;
s.SystemId.Card = 20017;
s.SystemId.DailyTask = 20018;
s.SystemId.SignUp = 20019;
s.SystemId.Bind = 20020;
s.SystemId.WXAccount = 20021;
s.SystemId.Custom = 20022;
s.SystemId.Setting = 20023;
s.SystemId.Notice = 20024;
s.SystemId.Exchange = 20025;
s.SystemId.Safe = 20026;
s.SystemId.NativeShop = 40001;
var n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
SystemCtrl: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "2666dtbXp1OxpEBEje1KXeh", "SystemCtrl");
var s = e("HttpCtrl"), n = e("SystemModel"), o = e("ChannelConst");
cc.Class({
extends: s,
properties: {},
ctor: function() {
var e = new n();
this.init(e);
},
requireAfterEnterGame: function() {
session.request(M_SystemOpen.getSystemOpenInfo, GlobalUtils.getPid(), this.handlerWithError(this, this.setSystemOpenList));
ChannelUtils.enterChannel(o.Type.SystemOpenInfo);
},
setSystemOpenList: function(e) {
this.emit(AppEvent.ChannelSyncData, {
channelType: o.Type.SystemOpenInfo,
data: {
ID: {
type: o.Type.SystemOpenInfo,
param1: "",
param2: ""
},
systemOpenInfo: e.data
}
});
this.model.SystemOpenList(e);
},
channelSyncDataSystemOpenInfo: function(e) {
var t = e.systemOpenInfo;
TypeUtils.isRealNull(t) || this.model.setSystemList(t.openSystemList);
},
requireExamLock: function() {
var e = this, t = {
method: "getAuditSwitchConf",
data: {
os: GlobalUtils.getPlatformConst()
}
};
this.request(t, function(t) {
var i = t.content;
TypeUtils.isRealNull(i) ? e.model.setExamStatus(GlobalEnum.ExamStatus.Normal) : "true" == i.isExaming ? e.model.setExamStatus(GlobalEnum.ExamStatus.Examing) : e.model.setExamStatus(GlobalEnum.ExamStatus.Normal);
}, null, function() {
console.log("getAuditSwitchConf  false");
});
}
});
cc._RF.pop();
}, {
ChannelConst: "ChannelConst",
HttpCtrl: "HttpCtrl",
SystemModel: "SystemModel"
} ],
SystemModel: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "fb2caMdiBBCdaAyGY3j9rqJ", "SystemModel");
var s = e("SystemConst");
cc.Class({
extends: ModelBase,
properties: {},
ctor: function() {
this.init();
this.m_isExaming = !1;
this.m_openList = {};
for (var e in s.LockType) if (s.LockType.hasOwnProperty(e)) {
var t = s.LockType[e];
this.m_openList[t] = {};
}
},
SystemOpenList: function(e) {
if (!TypeUtils.isRealNull(e.data) && !TypeUtils.isRealNull(e.data.openSystemList)) {
var t = e.data.openSystemList;
for (var i in t) if (t.hasOwnProperty(i)) {
var s = t[i];
this.setSystemStatus(s.numId, s);
}
}
},
setSystemList: function(e) {
if (TypeUtils.isArray(e)) {
for (var t = 0; t < e.length; t++) {
var i = e[t];
this.setSystemStatus(i.numId, i);
}
this.emit(AppEvent.SystemOnOffInfo, e);
} else logger.error("openSystemList ~= table");
},
isExamSystem: function(e) {
return ConfigMgr.getConfig("system_open_config").findByIndex("" + e).examStatus == s.ExamStatus.Exam;
},
setSystemStatus: function(e, t) {
t.pid == GlobalUtils.getPid() && t.channelId == GlobalUtils.getChannelId() ? this.setSystemStatusReal(s.LockType.Channel, t) : t.pid == GlobalUtils.getPid() && t.channelId == s.AllChannelId ? this.setSystemStatusReal(s.LockType.SonChannel, t) : t.pid == s.AllPid && t.channelId == s.AllChannelId && this.setSystemStatusReal(s.LockType.AllChannel, t);
},
setSystemStatusReal: function(e, t) {
this.m_openList[e][t.numId] = t;
},
getSystemStatus: function(e) {
if (TypeUtils.isRealNull(e)) return null;
if (this.isExaming() && this.isExamSystem(e)) return s.SystemStatus.Close;
for (var t in this.m_openList) if (this.m_openList.hasOwnProperty(t)) {
var i = this.m_openList[t];
if (!TypeUtils.isRealNull(i[e])) return this.getSystemStatusFromLockType(t, e);
}
},
getSystemStatusFromLockType: function(e, t) {
var i = this.m_openList[e][t];
if (TypeUtils.isRealNull(i)) return s.SystemStatus.Open;
var n = i.upperLevelID, o = this.getSystemStatusFromLockType(e, n);
return TypeUtils.isRealNull(o) ? i.switchType : o == s.SystemStatus.Open ? i.switchType : o == s.SystemStatus.Close ? s.SystemStatus.Close : i.switchType;
},
isSystemOpen: function(e) {
return this.getSystemStatus(e) == s.SystemStatus.Open;
},
isSystemClose: function(e) {
return this.getSystemStatus(e) == s.SystemStatus.Close;
},
isSystemLock: function(e) {
return this.getSystemStatus(e) == s.SystemStatus.Lock;
},
isExaming: function() {
return this.m_isExaming;
},
setExamStatus: function(e) {
this.m_isExaming = GlobalConst.ExamStatus.Examing == e;
}
});
cc._RF.pop();
}, {
SystemConst: "SystemConst"
} ],
SystemUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "9ff5dUqn3RA9Lq9ewklSXi+", "SystemUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = e("SystemConst"), n = {
checkFishSystemStatus: function(e, t, i, n) {
var o = this.getModel().getSystemStatus(e);
o == s.SystemStatus.Open ? TypeUtils.isFunction(i) && i() : o == s.SystemStatus.Close ? TypeUtils.isFunction(t) && t() : o == s.SystemStatus.Lock && TypeUtils.isFunction(n) && n();
},
getStateById: function(e) {
return this.getModel().getSystemStatus(e);
},
checkIsClose: function(e) {
var t = this.getModel(), i = t.getSystemStatus(e);
e == s.SystemId.Shop && cc.sys.isNative && (i = t.getSystemStatus(s.SystemId.NativeShop));
return i == s.SystemStatus.Close;
},
checkSystemStatus: function(e, t, i, s) {
TypeUtils.isFunction(i) && i();
},
checkIsOpen: function(e) {
return this.getStateById(e) == s.SystemStatus.Open;
},
checkIsWait: function(e) {
return this.getStateById(e) == s.SystemStatus.Lock;
},
isExaming: function() {
return !1;
},
getCtrl: function() {
return app.ctrls.system;
},
getModel: function() {
return this.getCtrl().getModel();
}
}, o = n;
i.default = o;
t.exports = i.default;
cc._RF.pop();
}, {
SystemConst: "SystemConst"
} ],
TTPlatform: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "54c34HjBT5LHpjog4nLnOFs", "TTPlatform");
var s = e("BasePlatfrom");
e("TowerShareEnum");
cc.Class({
extends: s,
ctor: function() {
this.m_isSupportAdReward = !0;
},
init: function() {
s.prototype.init.call(this, "TTPlatform");
this.setValue("platfromName", "TT");
this.initEnv();
this.initAd();
this.initRecorder();
return this;
},
initEnv: function() {
GlobalUtils.setFrameRate(30);
},
isSupportAdReward: function() {
return this.m_isSupportAdReward;
},
initAd: function() {
if (void 0 !== tt.createRewardedVideoAd) {
this.RewardedVideoAd = tt.createRewardedVideoAd({
adUnitId: "1nllhig3468j7emjk4"
});
this.handlerOnCloseAd = function(e) {
this.onCloseAd(e);
}.bind(this);
this.handlerOnErrorAd = function(e) {
this.onErrorAd(e);
}.bind(this);
this.handlerOnLoadAd = function(e) {
this.onLoadAd(e);
}.bind(this);
this.RewardedVideoAd.onClose(this.handlerOnCloseAd);
this.RewardedVideoAd.onError(this.handlerOnErrorAd);
this.RewardedVideoAd.onLoad(this.handlerOnLoadAd);
this.RewardedVideoAd.load();
} else this.m_isSupportAdReward = !1;
},
seeAd: function(e) {
if (this.isSupportAdReward()) {
console.warn("TTPlatform seeAd 1");
if (s.prototype.seeAd.call(this)) {
this.seeAdReal(e);
console.warn("TTPlatform seeAd 2");
} else console.warn("TTPlatform seeAd 12");
} else console.warn("不支持激励视频");
},
seeAdReal: function(e) {
if (this.isSupportAdReward()) {
s.prototype.seeAdReal.call(this, e);
console.warn("TTPlatform seeAdReal 1");
var t = this;
this._bonusType = e.bonusType;
this._loadCallback = e.loadCallback;
this._closeCallback = e.closeCallback;
this._errorCallback = e.errorCallback;
console.warn("TTPlatform seeAdReal 2");
this.RewardedVideoAd.show().then(function() {
console.warn("广告显示成功");
}).catch(function(e) {
console.warn("广告组件出现问题", e);
t.RewardedVideoAd.load().then(function() {
console.warn("手动加载成功");
EventManager.emit(AppEvent.PlayerSeedAdEnd, {});
return t.RewardedVideoAd.show();
});
});
console.warn("TTPlatform seeAdReal 3");
} else console.warn("不支持激励视频");
},
onCloseAd: function(e) {
s.prototype.onCloseAd.call(this);
console.warn("onCloseAd res = ", e);
if (this._loadCallback) if (e && e.isEnded) {
this.didRewardAd();
this._closeCallback({
isEnable: e.isEnded
});
} else {
this.didCloseAd();
this._closeCallback({
isEnable: !1
});
}
},
onErrorAd: function(e) {
if (this.isSupportAdReward()) {
s.prototype.onErrorAd.call(this);
this.didErrorAd();
var t = ConfigMgr.getConfig("lb_aderror_config").findFirst(function(t) {
return "tt" == t.platform && t.errorCode == e.errCode;
});
t && TipsUtils.showTips(t.tipsStr);
this._errorCallback && this._errorCallback();
} else console.warn("不支持激励视频");
},
onLoadAd: function(e) {
this.isSupportAdReward() ? s.prototype.onLoadAd.call(this) : console.warn("不支持激励视频");
},
login: function(e) {
var t = this;
tt.login({
success: function(i) {
console.warn("res = ", i);
HttpMgr.post({
method: "toutiaoLogin",
isIgnoreToken: !0,
data: {
code: i.code,
anonymousCode: i.anonymousCode
},
callback: function(i) {
t.setUserData(i);
e();
}
});
},
fail: function(i) {
console.warn("login调用失败");
t.loginDefault(e);
}
});
},
getSdkVersion: function() {
return tt.getSystemInfoSync().SDKVersion;
},
isSupportRecorder: function() {
return !!this.isVersonBiggerThan("1.4.1");
},
initRecorder: function() {
if (this.isSupportRecorder()) {
var e = this;
this.recordData = {
state: "init",
sTime: 0,
pTime: 0,
rTime: 0,
eTime: 0,
timer: 0
};
this.recorder = tt.getGameRecorderManager();
console.warn("this.recorder = ", this.recorder);
console.warn("支持录屏");
this.recorder.onStart(function(t) {
console.warn("录屏开始");
e.changeRecordData("start");
});
this.recorder.onPause(function(t) {
console.warn("录屏暂停");
e.changeRecordData("pause");
});
this.recorder.onResume(function(t) {
console.warn("录屏唤醒");
e.changeRecordData("resume");
});
this.recorder.onStop(function(t) {
console.warn("录屏停止");
e.changeRecordData("stop");
console.warn("合并vedio", e.recordData);
e.recorder.clipVideo({
path: t.videoPath,
timeRange: [ Math.floor(e.recordData.timer / 1e3), 0 ],
success: function(t) {
console.warn("合并vedio  : ", t.videoPath);
console.warn(t.videoPath);
e.videoPath = t.videoPath;
e.changeRecordData("finish", !0);
},
fail: function(t) {
e.videoPath = null;
e.changeRecordData("finish", !1);
console.error(t);
}
});
});
this.recorder.onError(function(e) {
console.warn("录屏错误");
});
this.recorder.onInterruptionBegin(function(e) {
console.warn("监听录屏中断开始。");
});
this.recorder.onInterruptionEnd(function(e) {
console.warn("监听录屏中断结束。");
});
}
},
startRecord: function(e) {
if (this.isSupportRecorder()) {
this.clipIndexList = [];
this.recorder.start({
duration: e
});
} else logger.error("不支持录屏");
},
stopRecord: function() {
this.isSupportRecorder() ? this.recorder.stop() : logger.error("不支持录屏");
},
pauseRecord: function() {
this.isSupportRecorder() ? this.recorder.pause() : logger.error("不支持录屏");
},
resumeRecord: function() {
this.isSupportRecorder() ? this.recorder.resume() : logger.error("不支持录屏");
},
recordClip: function(e) {
if (this.isSupportRecorder()) {
var t = this;
this.recorder.recordClip({
timeRange: e,
success: function(e) {
console.warn("recordClip 索引:", e.index);
t.clipIndexList.push(e.index);
},
fail: function(e) {
console.warn("recordClip fail r:", e);
}
});
} else logger.error("不支持录屏");
},
changeRecordData: function(e, t) {
this.recordData.state = e;
this.isSuccess = t;
if ("start" == e) {
this.recordData.sTime = new Date().getTime();
this.recordData.pTime = 0;
this.recordData.rTime = 0;
this.recordData.eTime = 0;
this.recordData.timer = 0;
} else if ("pause" == e) {
this.recordData.pTime = new Date().getTime();
this.recordData.rTime > this.recordData.sTime ? this.recordData.timer += this.recordData.pTime - this.recordData.rTime : this.recordData.timer += this.recordData.pTime - this.recordData.sTime;
} else if ("resume" == e) this.recordData.rTime = new Date().getTime(); else if ("stop" == e) {
this.recordData.eTime = new Date().getTime();
this.recordData.rTime > this.recordData.sTime ? this.recordData.timer += this.recordData.eTime - this.recordData.rTime : this.recordData.timer += this.recordData.eTime - this.recordData.sTime;
} else {
this.recordData.sTime = 0;
this.recordData.pTime = 0;
this.recordData.rTime = 0;
this.recordData.eTime = 0;
this.recordData.timer = 0;
}
EventManager.emit(AppEvent.ChangeRecordState, {
data: this.recordData,
state: t
});
},
getRecordData: function() {
return this.recordData;
},
shareVideoMessage: function(e) {
if (this.isSupportRecorder()) {
console.warn("shareVideoMessage  :", e);
tt.shareAppMessage({
channel: "video",
title: e.title,
desc: e.desc,
templateId: "8n09slolujf6h12c4e",
query: "",
extra: {
videoPath: this.videoPath,
videoTopics: e.videoTopics
},
success: function(t) {
console.warn("shareVideoMessage  :1");
console.log("分享视频成功");
TypeUtils.isFunction(e.callback) && e.callback(!0);
},
fail: function(t) {
console.log("分享视频失败");
TypeUtils.isFunction(e.callback) && e.callback(!1);
}
});
} else logger.error("不支持录屏");
},
skipToVideoView: function(e) {
console.warn("shareVideoMessage  :1");
tt.navigateToVideoView({
videoId: e.videoId,
success: function(e) {
console.warn("shareVideoMessage  :2");
console.log("分享视频成功");
},
fail: function(e) {
console.warn("shareVideoMessage  :3");
1006 === e.errCode && tt.showToast({
title: "分享网络异常"
});
}
});
},
checkNetWork: function() {
this.getNetworkType(tt);
}
});
cc._RF.pop();
}, {
BasePlatfrom: "BasePlatfrom",
TowerShareEnum: "TowerShareEnum"
} ],
TableUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "ad164N/21hNl7Nu7D2q/QNO", "TableUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
keyOf: function(e, t) {
for (var i in e) if (t === e[i]) return i;
logger.error("找不到对象");
},
toRankTable: function(e) {
var t = [];
for (var i in e) e.hasOwnProperty(i) && t.push(e[i]);
return t;
},
filter: function(e, t) {
for (var i = [], s = 0; s < e.length; s++) {
var n = e[s];
t(s, n) && i.push(n);
}
return i;
},
filterObj: function(e, t) {
var i = {};
for (var s in e) {
var n = e[s];
t(s, n) && (i[s] = n);
}
return i;
},
getMax: function(e, t) {
var i = null;
for (var s in e) if (e.hasOwnProperty(s)) {
var n = e[s];
TypeUtils.isRealNull(i) ? i = n : t(n, i) && (i = n);
}
return i;
},
switch: function(e, t, i) {
var s = e[t];
e[t] = e[i];
e[i] = s;
}
}, n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
TaskConst: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "ef06d/H5hRMHqFHLjigJ53M", "TaskConst");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
FinishStatus: {}
};
s.FinishStatus.Invalid = 0;
s.FinishStatus.NotFinish = 1;
s.FinishStatus.Finish = 2;
s.FinishStatus.HasReceive = 3;
s.FinishStatus.StaleDated = 4;
s.TaskType = {};
s.TaskType.Daily = 1;
s.TaskType.Week = 2;
s.TaskType.FishNewer = 3;
s.TaskType.Ddz = 4;
s.TaskType.RedEnvelope = 5;
s.TaskType.UpVipExp = 6;
s.TaskType.RobIXS = 7;
s.TaskType.FishSevenDay = 8;
s.TaskType.FishGunUnlock = 9;
s.TaskType.FishDaily = 10;
s.TaskType.FishClub = 11;
s.TaskType.FishRoomTask = 12;
s.TaskType.FishTask = 13;
var n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
TaskCtrl: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "da2d7gWr1xE55nKm36mX/Ag", "TaskCtrl");
var s = e("HttpCtrl"), n = e("TaskModel");
cc.Class({
extends: s,
properties: {},
ctor: function() {
var e = new n();
this.init(e);
},
requireAfterEnterGame: function() {
this.addEvent(M_Task.handleTaskUpdate, this.handleTaskUpdate.bind(this));
this.addEvent(M_Task.handleClassUpdate, this.handleClassUpdate.bind(this));
this.getTaskInfo();
this.getClassList();
},
getTaskInfo: function() {
session.request(M_Task.getTaskList, null, this.handlerWithError(this, this.handleGetTaskInfo), null, !1);
},
handleGetTaskInfo: function(e) {
this.model.setTaskInfo(e.data);
},
getTaskAward: function(e, t) {
session.request(M_Task.receiveAward, e, this.handlerWithError(this, this.handleGetTaskAward), t, !1);
},
handleGetTaskAward: function(e) {
TypeUtils.isRealNull(e.param) || ViewManager.showAwards({
awards: e.param
});
this.model.getTaskAward(e.data);
},
handleTaskUpdate: function(e) {
this.model.updateTaskInfo(e.data);
},
getClassList: function() {
session.request(M_Task.getClassList, null, this.handlerWithError(this, this.handleGetClassList), null, !1);
},
handleGetClassList: function(e) {
this.model.setClassListInfo(e.data);
},
receiveClassAward: function(e, t) {
session.request(M_Task.receiveClassAward, e, this.handlerWithError(this, this.handleGetClassAward), t, !1);
},
handleGetClassAward: function(e) {
TypeUtils.isRealNull(e.param) || ViewManager.showAwards({
awards: e.param
});
this.model.updateClassList(e.data);
},
handleClassUpdate: function(e) {
for (var t = e.data.list || [], i = 0; i < t.length; i++) {
var s = t[i];
this.model.updateClassList(s);
}
},
OBRedPointTaskData: function() {
this.getTaskInfo();
}
});
cc._RF.pop();
}, {
HttpCtrl: "HttpCtrl",
TaskModel: "TaskModel"
} ],
TaskModel: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "5b65aEtWkZPSoPmdCi8LAYd", "TaskModel");
var s = e("TaskConst");
cc.Class({
extends: ModelBase,
properties: {
EVENT_GET_TASK_AWARD: "EVENT_GET_TASK_AWARD",
EVENT_UPDATE_TASK_INFO: "EVENT_UPDATE_TASK_INFO",
EVENT_UPDATE_TASK_CLASS: "EVENT_UPDATE_TASK_CLASS"
},
ctor: function() {
this.init();
this.initData();
RedRemindManager.registerCheckRemind(AppEvent.RedPointFishDailyTask, this.checkFishDailyTask, this);
RedRemindManager.registerCheckRemind(AppEvent.RedPointFishSevenDayTask, this.checkFishSevenDayTask, this);
},
initData: function() {
this.m_taskList = {};
},
setTaskInfo: function(e) {
if (!TypeUtils.isRealNull(e) && !TypeUtils.isRealNull(e.list)) {
this.refreshTaskInfo(e.list);
this.dispatchEvent(this.EVENT_UPDATE_TASK_INFO);
RedRemindManager.doRemind(AppEvent.RedPointFishDailyTask);
RedRemindManager.doRemind(AppEvent.RedPointFishSevenDayTask);
}
},
refreshTaskInfo: function(e) {
var t = this, i = [];
for (var n in e) e.hasOwnProperty(n) && function() {
var t = e[n], o = ConfigMgr.getConfig("task_config").findFirst(function(e) {
return e.id == t.taskId && t.status != s.FinishStatus.Invalid;
}) || {}, a = DicUtils.copy(o) || {};
a.taskId = t.taskId;
a.status = t.status;
a.progress = t.progress;
i.push(a);
}();
var o = s.TaskType || {};
for (var a in o) o.hasOwnProperty(a) && function() {
var e = o[a];
t.m_taskList[e] = {};
t.m_taskList[e] = TableUtils.filter(i, function(t, i) {
if (Number(i.type) == e) return !0;
});
ArrayUtils.sort(t.m_taskList[e], function(e, t) {
return TypeUtils.isRealNull(e.rank) || TypeUtils.isRealNull(t.rank) || e.rank == t.rank ? e.id - t.id : e.rank - t.rank;
});
}();
},
getFishTaskInfo: function(e) {
for (var t = this.getTaskByType(s.TaskType.FishRoomTask), i = [], n = 0; n < t.length; n++) {
var o = t[n];
o.classId == e && i.push(o);
}
return i;
},
getDailyTaskInfo: function() {
return this.getTaskByType(s.TaskType.Daily);
},
getWeekTaskInfo: function() {
return this.getTaskByType(s.TaskType.Week);
},
getRedEnvelopeTaskInfo: function() {
return this.getTaskByType(s.TaskType.RedEnvelope);
},
getVipTaskInfo: function() {
return this.getTaskByType(s.TaskType.UpVipExp);
},
getFishClubInfo: function() {
return this.getTaskByType(s.TaskType.FishClub);
},
getSevenDayTaskInfo: function() {
var e = this, t = DicUtils.copy(this.m_taskList[s.TaskType.RobIXS]);
ConfigMgr.getConfig("task_config").forEach(function(i) {
if (i.type == s.TaskType.RobIXS) {
for (var n = !1, o = 0; o < t.length; o++) {
if (t[o].id == i.id) {
n = !0;
break;
}
}
n || e.m_taskList[s.TaskType.RobIXS].push(DicUtils.copy(i));
}
});
ArrayUtils.sort(this.m_taskList[s.TaskType.RobIXS], function(e, t) {
return TypeUtils.isRealNull(e.rank) || TypeUtils.isRealNull(t.rank) || e.rank == t.rank ? e.id - t.id : e.rank - t.rank;
});
return this.m_taskList[s.TaskType.RobIXS];
},
getFishSevenDayTask: function() {
var e = this, t = DicUtils.copy(this.m_taskList[s.TaskType.FishSevenDay]);
ConfigMgr.getConfig("task_config").forEach(function(i) {
if (i.type == s.TaskType.FishSevenDay) {
for (var n = !1, o = 0; o < t.length; o++) {
if (t[o].id == i.id) {
n = !0;
break;
}
}
n || e.m_taskList[s.TaskType.FishSevenDay].push(DicUtils.copy(i));
}
});
ArrayUtils.sort(this.m_taskList[s.TaskType.FishSevenDay], function(e, t) {
return TypeUtils.isRealNull(e.rank) || TypeUtils.isRealNull(t.rank) || e.rank == t.rank ? e.id - t.id : e.rank - t.rank;
});
return this.m_taskList[s.TaskType.FishSevenDay];
},
getTaskByType: function(e) {
return this.m_taskList[e] || [];
},
getTaskAward: function(e) {
var t = {};
t.list = [ e ];
this.updateTaskInfo(t);
this.dispatchEvent(this.EVENT_GET_TASK_AWARD);
RedRemindManager.doRemind(AppEvent.RedPointFishDailyTask);
RedRemindManager.doRemind(AppEvent.RedPointFishSevenDayTask);
},
checkDayTask: function() {
return this.checkTaskStatue(this.getTaskByType(s.TaskType.Daily));
},
checkWeekTask: function() {
return this.checkTaskStatue(this.getTaskByType(s.TaskType.Week));
},
checkRedEnvelopekTask: function() {
return this.checkTaskStatue(this.getTaskByType(s.TaskType.RedEnvelope));
},
checkAchieveTask: function() {
return !1;
},
checkNewPeopleTask: function() {
return this.checkTaskStatue(this.getTaskByType(s.TaskType.Ddz));
},
checkVipTask: function() {
var e = app.ctrls.vip.getModel().getVipLevel(), t = TableUtils.filter(this.getTaskByType(s.TaskType.UpVipExp), function(t, i) {
if (i.vipLevel && e >= i.vipLevel[0] && e <= i.vipLevel[1]) return !0;
});
return this.checkTaskStatue(t);
},
checkSevenDayTask: function() {
return this.checkTaskStatue(this.getTaskByType(s.TaskType.RobIXS));
},
checkTaskStatue: function(e) {
for (var t = 0; t < e.length; t++) {
if (e[t].status == s.FinishStatus.Finish) return !0;
}
return !1;
},
checkFishDailyTask: function() {
return this.checkTaskStatue(this.getTaskByType(s.TaskType.FishDaily));
},
checkFishSevenDayTask: function() {
return this.checkTaskStatue(this.getTaskByType(s.TaskType.FishSevenDay));
},
updateTaskInfo: function(e) {
var t = this;
if (!TypeUtils.isRealNull(e)) {
for (var i = e.list || [], n = function(e) {
var n = i[e], o = null, a = {}, r = ConfigMgr.getConfig("task_config").findFirst(function(e) {
return e.id == n.taskId;
}) || {};
o = r.type;
(a = DicUtils.copy(r) || {}).taskId = n.taskId;
a.status = n.status;
a.progress = n.progress;
if (!TypeUtils.isRealNull(o)) {
var l = 0;
if (!TypeUtils.isRealNull(t.m_taskList[o])) for (var c = 0; c < t.m_taskList[o].length; c++) {
if (t.m_taskList[o][c].taskId == n.taskId) {
t.m_taskList[o][c] = DicUtils.copy(a);
l = e;
a = null;
break;
}
}
n.status == s.FinishStatus.Invalid ? ArrayUtils.remove(t.m_taskList[o], l, 1) : TypeUtils.isRealNull(a) || t.m_taskList[o].push(a);
}
o = null;
}, o = 0; o < i.length; o++) n(o);
this.dispatchEvent(this.EVENT_UPDATE_TASK_INFO);
}
},
resetTaskInfo: function(e) {
this.setTaskInfo(e);
},
getTaskStatus: function(e) {
var t = null, i = TaskConfig.findByIndex(e);
if (!TypeUtils.isRealNull(i)) for (var s = this.m_taskList[i.type] || [], n = 0; n < s.length; n++) {
var o = s[n];
o.taskId == e && (t = o.status);
}
return t;
},
getClassInfo: function(e) {
return TypeUtils.isRealNull(e) ? this.classList : this.classList[e];
},
setClassListInfo: function(e) {
this.classList = {};
for (var t = e.list || [], i = 0; i < t.length; i++) {
var s = t[i];
this.classList[s.classId] = s.status;
}
},
updateClassList: function(e) {
this.classList[e.classId] = e.status;
this.dispatchEvent(this.EVENT_UPDATE_TASK_CLASS);
}
});
cc._RF.pop();
}, {
TaskConst: "TaskConst"
} ],
TaskSchManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "b4ff7vTdkBAmJBRspQaBfhc", "TaskSchManager");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = .6 * cc.game.getFrameRate(), n = cc.Class({
ctor: function() {
this.isRunHand = !1;
this.taskHandle = 0;
this.tasks = [];
this.running = !1;
this.adds = [];
this.removes = [];
},
runTask: function(e) {
if (new Date().getTime() - e.lastRunTime >= e.delay && e.evaluateTime <= s) {
e.callback(e.params[0]);
e.params.splice(0, 1);
e.lastRunTime = new Date().getTime();
return !0;
}
return !1;
},
run: function(e) {
this.running = !0;
for (var t = [], i = 0; i < this.tasks.length; i++) {
var s = this.tasks[i];
TypeUtils.isRealNull(s.lastRunTime) && (s.lastRunTime = new Date().getTime());
for (;TypeUtils.isNotEmptyArray(s.params) && this.isRunHand && this.runTask(s); ) ;
if (TypeUtils.isEmptyArray(s.params)) {
t.push(s.handle);
TypeUtils.isFunction(s.onComplete) && s.onComplete(!0);
}
}
this.running = !1;
for (var n = 0; n < t.length; n++) {
var o = t[n];
this.removeTask(o);
}
if (TypeUtils.isNotEmptyArray(this.adds)) {
for (var a = 0; a < this.adds.length; a++) {
var r = this.adds[a];
this.tasks.push(r);
}
this.adds = [];
}
if (TypeUtils.isNotEmptyArray(this.removes)) {
for (var l = 0; l < this.removes.length; l++) this.removeTask(this.removes[l]);
this.removes = [];
}
if (TypeUtils.isEmptyArray(this.tasks) && this.isRunHand) {
this.isRunHand = !1;
TimeMgr.off(this.updateTime);
}
},
addTask: function(e, t, i, n, o) {
TypeUtils.isRealNull(i) && (i = 0);
i > s && (i = s);
TypeUtils.isRealNull(n) && (n = 0);
var a = {
params: e,
callback: t,
evaluateTime: i,
delay: n,
onComplete: o
};
this.taskHandle = this.taskHandle + 1;
a.handle = this.taskHandle;
this.running ? this.adds.push(a) : this.tasks.push(a);
return this.taskHandle;
},
removeTask: function(e) {
if (this.running) this.removes.push(e); else for (var t = 0; t < this.tasks.length; t++) {
if (this.tasks[t].handle == e) {
this.tasks.splice(t, 1);
break;
}
}
},
start: function() {
if (!this.isRunHand && TypeUtils.isNotEmptyArray(this.tasks)) {
this.isRunHand = !0;
TimeMgr.on(this.run, this, 1 / 60);
}
},
stop: function() {
for (var e = 0; e < this.tasks.length; e++) {
var t = this.tasks[e];
TypeUtils.isFunction(t.onComplete) && t.onComplete(!1);
}
this.tasks = [];
if (this.isRunHand) {
this.isRunHand = !1;
TimeMgr.off(this.updateTime);
}
},
getTasks: function() {
return this.tasks;
},
isRunning: function() {
return this.isRunHand;
}
});
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
TextFilterConfig: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "b2658n0wkpA5LNQrRjFqhHS", "TextFilterConfig");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s, n, o, a, r, l, c, h, u, d, p, f, m, g, _, T, C, y, I, v, E, S, b, R, N, w;
function U(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}
var A = (U(w = {}, 1, (U(s = {}, "干牠", 1), U(s, "耶蘇", 1), U(s, "你姥", 1), U(s, "賀龍", 1), 
U(s, "民阵", 1), U(s, "禁书", 1), U(s, "吸精", 1), U(s, "淫逼", 1), U(s, "下體", 1), U(s, "蘇拉", 1), 
U(s, "奸她", 1), U(s, "ml", 1), U(s, "温逼", 1), U(s, "傻鳥", 1), U(s, "屌鸠", 1), U(s, "現金", 1), 
U(s, "骚屄", 1), U(s, "草妈", 1), U(s, "放荡", 1), U(s, "搞基", 1), U(s, "夜情", 1), U(s, "絲襪", 1), 
U(s, "東亞", 1), U(s, "鶏女", 1), U(s, "龜投", 1), U(s, "鲍彤", 1), U(s, "乳晕", 1), U(s, "东升", 1), 
U(s, "東突", 1), U(s, "巨屌", 1), U(s, "冈峦", 1), U(s, "秘唇", 1), U(s, "迷藥", 1), U(s, "絲誘", 1), 
U(s, "官方", 1), U(s, "發楞", 1), U(s, "学运", 1), U(s, "稅力", 1), U(s, "鸡歪", 1), U(s, "奶子", 1), 
U(s, "綿恒", 1), U(s, "國賊", 1), U(s, "浪叫", 1), U(s, "白粉", 1), U(s, "博訊", 1), U(s, "日屄", 1), 
U(s, "粉穴", 1), U(s, "布希", 1), U(s, "拔屄", 1), U(s, "舔脚", 1), U(s, "賤貨", 1), U(s, "痴乳", 1), 
U(s, "宾周", 1), U(s, "去死", 1), U(s, "群奸", 1), U(s, "佛祖", 1), U(s, "陽精", 1), U(s, "刪號", 1), 
U(s, "文殊", 1), U(s, "幹妳", 1), U(s, "亲美", 1), U(s, "皇軍", 1), U(s, "赵南", 1), U(s, "共党", 1), 
U(s, "賭球", 1), U(s, "谋杀", 1), U(s, "豬操", 1), U(s, "烂逼", 1), U(s, "東條", 1), U(s, "騷b", 1), 
U(s, "老母", 1), U(s, "品穴", 1), U(s, "總理", 1), U(s, "耶穌", 1), U(s, "阴茎", 1), U(s, "偷窥", 1), 
U(s, "口射", 1), U(s, "圆满", 1), U(s, "姦淫", 1), U(s, "屌七", 1), U(s, "肉壁", 1), U(s, "嫩b", 1), 
U(s, "貞操", 1), U(s, "統獨", 1), U(s, "邪教", 1), U(s, "中央", 1), U(s, "高俊", 1), U(s, "俄国", 1), 
U(s, "常勁", 1), U(s, "温馨", 1), U(s, "丫的", 1), U(s, "自焚", 1), U(s, "港獨", 1), U(s, "鸟你", 1), 
U(s, "雞Ｙ", 1), U(s, "修炼", 1), U(s, "超妳", 1), U(s, "斯诺", 1), U(s, "乳頭", 1), U(s, "干x", 1), 
U(s, "骚妹", 1), U(s, "學聯", 1), U(s, "亂輪", 1), U(s, "暴幹", 1), U(s, "虎骑", 1), U(s, "傻b", 1), 
U(s, "李禄", 1), U(s, "g八", 1), U(s, "阎王", 1), U(s, "陰道", 1), U(s, "午夜", 1), U(s, "操爽", 1), 
U(s, "政变", 1), U(s, "民國", 1), U(s, "強衛", 1), U(s, "操烂", 1), U(s, "管裡", 1), U(s, "露点", 1), 
U(s, "騎你", 1), U(s, "赌博", 1), U(s, "梦遗", 1), U(s, "再奸", 1), U(s, "导师", 1), U(s, "靠腰", 1), 
U(s, "抡功", 1), U(s, "護法", 1), U(s, "奸他", 1), U(s, "肉體", 1), U(s, "鶏八", 1), U(s, "陰阜", 1), 
U(s, "陳雲", 1), U(s, "人民", 1), U(s, "吃精", 1), U(s, "嫖客", 1), U(s, "独裁", 1), U(s, "国军", 1), 
U(s, "卵子", 1), U(s, "烂b", 1), U(s, "小泉", 1), U(s, "程凱", 1), U(s, "虐待", 1), U(s, "干林", 1), 
U(s, "乳房", 1), U(s, "嫩模", 1), U(s, "格鲁", 1), U(s, "买春", 1), U(s, "a片", 1), U(s, "苯比", 1), 
U(s, "滥b", 1), U(s, "痴鳩", 1), U(s, "法谪", 1), U(s, "Ｇ掰", 1), U(s, "阉狗", 1), U(s, "错比", 1), 
U(s, "戈扬", 1), U(s, "狗干", 1), U(s, "藏独", 1), U(s, "政權", 1), U(s, "骚乳", 1), U(s, "嫩縫", 1), 
U(s, "三陪", 1), U(s, "獨夫", 1), U(s, "淫贱", 1), U(s, "吃屎", 1), U(s, "东社", 1), U(s, "野鶏", 1), 
U(s, "月经", 1), U(s, "圓滿", 1), U(s, "毛鲍", 1), U(s, "偷欢", 1), U(s, "法淪", 1), U(s, "穴海", 1), 
U(s, "顔射", 1), U(s, "凸你", 1), U(s, "發倫", 1), U(s, "女干", 1), U(s, "狗養", 1), U(s, "穷逼", 1), 
U(s, "臭你", 1), U(s, "陽物", 1), U(s, "聖戰", 1), U(s, "太監", 1), U(s, "破坏", 1), U(s, "玉穴", 1), 
U(s, "鶏鶏", 1), U(s, "口淫", 1), U(s, "干您", 1), U(s, "挨球", 1), U(s, "屄屄", 1), U(s, "相奸", 1), 
U(s, "幹死", 1), U(s, "耶苏", 1), U(s, "舔b", 1), U(s, "酥痒", 1), U(s, "遺精", 1), U(s, "地藏", 1), 
U(s, "陳功", 1), U(s, "洪傳", 1), U(s, "鸡Ｙ", 1), U(s, "幹穴", 1), U(s, "賣逼", 1), U(s, "陈功", 1), 
U(s, "彭真", 1), U(s, "王剛", 1), U(s, "吴仪", 1), U(s, "奧倫", 1), U(s, "赤裸", 1), U(s, "操她", 1), 
U(s, "换妻", 1), U(s, "插陰", 1), U(s, "售枪", 1), U(s, "爆草", 1), U(s, "杀人", 1), U(s, "机芭", 1), 
U(s, "美国", 1), U(s, "泽东", 1), U(s, "禁書", 1), U(s, "操你", 1), U(s, "双飞", 1), U(s, "淫样", 1), 
U(s, "张健", 1), U(s, "二逼", 1), U(s, "粉屄", 1), U(s, "肉溝", 1), U(s, "监狱", 1), U(s, "動亂", 1), 
U(s, "押注", 1), U(s, "楊周", 1), U(s, "阴唇", 1), U(s, "小穴", 1), U(s, "倫功", 1), U(s, "罂粟", 1), 
U(s, "大比", 1), U(s, "密洞", 1), U(s, "李鹏", 1), U(s, "宗教", 1), U(s, "嫩穴", 1), U(s, "浪妇", 1), 
U(s, "干到", 1), U(s, "乔石", 1), U(s, "伪男", 1), U(s, "牛b", 1), U(s, "癡鳩", 1), U(s, "登輝", 1), 
U(s, "口活", 1), U(s, "人權", 1), U(s, "私處", 1), U(s, "抽头", 1), U(s, "流淫", 1), U(s, "cs", 1), 
U(s, "淫浪", 1), U(s, "学潮", 1), U(s, "弓雖", 1), U(s, "密穴", 1), U(s, "陈毅", 1), U(s, "龙虎", 1), 
U(s, "艾滋", 1), U(s, "下身", 1), U(s, "伱媽", 1), U(s, "k粉", 1), U(s, "中国", 1), U(s, "值勤", 1), 
U(s, "抗日", 1), U(s, "淫叫", 1), U(s, "插我", 1), U(s, "傻逼", 1), U(s, "退党", 1), U(s, "糞便", 1), 
U(s, "招鶏", 1), U(s, "诺姆", 1), U(s, "嫩奶", 1), U(s, "濫逼", 1), U(s, "她娘", 1), U(s, "卖比", 1), 
U(s, "嫩屄", 1), U(s, "蘚鮑", 1), U(s, "爛比", 1), U(s, "能樣", 1), U(s, "硬挺", 1), U(s, "張磊", 1), 
U(s, "齐诺", 1), U(s, "狗诚", 1), U(s, "無碼", 1), U(s, "虐奴", 1), U(s, "你妈", 1), U(s, "暴乳", 1), 
U(s, "淫货", 1), U(s, "淫妇", 1), U(s, "伪娘", 1), U(s, "陈菊", 1), U(s, "鸡巴", 1), U(s, "赤匪", 1), 
U(s, "荡妹", 1), U(s, "廁奴", 1), U(s, "警奴", 1), U(s, "轮奸", 1), U(s, "滥比", 1), U(s, "釋欲", 1), 
U(s, "精液", 1), U(s, "劉剛", 1), U(s, "干尼", 1), U(s, "骚棍", 1), U(s, "小3", 1), U(s, "轮功", 1), 
U(s, "览叫", 1), U(s, "插阴", 1), U(s, "狗养", 1), U(s, "操逼", 1), U(s, "鲍伊", 1), U(s, "淫书", 1), 
U(s, "淫亂", 1), U(s, "超你", 1), U(s, "色欲", 1), U(s, "护法", 1), U(s, "廣聞", 1), U(s, "他干", 1), 
U(s, "大麻", 1), U(s, "黄菊", 1), U(s, "美腿", 1), U(s, "操比", 1), U(s, "马的", 1), U(s, "冰後", 1), 
U(s, "石进", 1), U(s, "肉洞", 1), U(s, "烂屄", 1), U(s, "脚交", 1), U(s, "万税", 1), U(s, "臭机", 1), 
U(s, "性交", 1), U(s, "独立", 1), U(s, "湿了", 1), U(s, "新党", 1), U(s, "保釣", 1), U(s, "運營", 1), 
U(s, "应召", 1), U(s, "騷女", 1), U(s, "他媽", 1), U(s, "老土", 1), U(s, "乳头", 1), U(s, "色诱", 1), 
U(s, "喷你", 1), U(s, "礼品", 1), U(s, "黃網", 1), U(s, "道教", 1), U(s, "猥亵", 1), U(s, "二货", 1), 
U(s, "淫貨", 1), U(s, "发浪", 1), U(s, "笨屄", 1), U(s, "普贤", 1), U(s, "盧卡", 1), U(s, "口交", 1), 
U(s, "骑他", 1), U(s, "布什", 1), U(s, "法掄", 1), U(s, "洪志", 1), U(s, "狼友", 1), U(s, "賬號", 1), 
U(s, "烂屌", 1), U(s, "骚妻", 1), U(s, "僵賊", 1), U(s, "導師", 1), U(s, "颜射", 1), U(s, "作爱", 1), 
U(s, "豔乳", 1), U(s, "發浪", 1), U(s, "达赖", 1), U(s, "性爱", 1), U(s, "陽痿", 1), U(s, "淫湿", 1), 
U(s, "哭母", 1), U(s, "造爱", 1), U(s, "插她", 1), U(s, "屠杀", 1), U(s, "濫比", 1), U(s, "濕穴", 1), 
U(s, "引导", 1), U(s, "顏騎", 1), U(s, "贱逼", 1), U(s, "骚洞", 1), U(s, "吗的", 1), U(s, "伦功", 1), 
U(s, "痴鸠", 1), U(s, "作秀", 1), U(s, "放尿", 1), U(s, "熟妇", 1), U(s, "sm", 1), U(s, "毛鮑", 1), 
U(s, "萝太", 1), U(s, "机巴", 1), U(s, "骡干", 1), U(s, "阴道", 1), U(s, "嫖娼", 1), U(s, "齊諾", 1), 
U(s, "东突", 1), U(s, "澤夫", 1), U(s, "管理", 1), U(s, "吗啡", 1), U(s, "坐台", 1), U(s, "民运", 1), 
U(s, "賣卡", 1), U(s, "上你", 1), U(s, "蕩婦", 1), U(s, "食精", 1), U(s, "装屄", 1), U(s, "洗腦", 1), 
U(s, "姚羅", 1), U(s, "性侵", 1), U(s, "车臣", 1), U(s, "总局", 1), U(s, "阴户", 1), U(s, "淫癡", 1), 
U(s, "春药", 1), U(s, "學潮", 1), U(s, "绵恒", 1), U(s, "江罗", 1), U(s, "阴精", 1), U(s, "傻比", 1), 
U(s, "汪洋", 1), U(s, "插妳", 1), U(s, "里根", 1), U(s, "鲍戈", 1), U(s, "賤種", 1), U(s, "肛門", 1), 
U(s, "倭寇", 1), U(s, "狂操", 1), U(s, "贩毒", 1), U(s, "奸情", 1), U(s, "鸡８", 1), U(s, "傻畢", 1), 
U(s, "干她", 1), U(s, "强奸", 1), U(s, "肉棍", 1), U(s, "東社", 1), U(s, "江八", 1), U(s, "软妹", 1), 
U(s, "彈劾", 1), U(s, "神汉", 1), U(s, "性虐", 1), U(s, "聯總", 1), U(s, "毛片", 1), U(s, "真主", 1), 
U(s, "騷妹", 1), U(s, "經文", 1), U(s, "赌球", 1), U(s, "乳贴", 1), U(s, "群交", 1), U(s, "b样", 1), 
U(s, "bc", 1), U(s, "趙南", 1), U(s, "江羅", 1), U(s, "毛贼", 1), U(s, "戰牌", 1), U(s, "聖母", 1), 
U(s, "客服", 1), U(s, "骚棒", 1), U(s, "虎門", 1), U(s, "高潮", 1), U(s, "欠骑", 1), U(s, "龍虎", 1), 
U(s, "操屄", 1), U(s, "總局", 1), U(s, "裝屄", 1), U(s, "机八", 1), U(s, "我幹", 1), U(s, "倭國", 1), 
U(s, "溫馨", 1), U(s, "一鲜", 1), U(s, "迷奸", 1), U(s, "劫持", 1), U(s, "神漢", 1), U(s, "舔西", 1), 
U(s, "被操", 1), U(s, "乳射", 1), U(s, "售號", 1), U(s, "是雞", 1), U(s, "幼男", 1), U(s, "聯易", 1), 
U(s, "僕街", 1), U(s, "睾丸", 1), U(s, "奶頭", 1), U(s, "破壞", 1), U(s, "皮條", 1), U(s, "鳥你", 1), 
U(s, "車侖", 1), U(s, "賣b", 1), U(s, "氫彈", 1), U(s, "账号", 1), U(s, "粪便", 1), U(s, "傅鵬", 1), 
U(s, "黃菊", 1), U(s, "共狗", 1), U(s, "騷浪", 1), U(s, "濫交", 1), U(s, "爷爷", 1), U(s, "叫鸡", 1), 
U(s, "淫虫", 1), U(s, "审查", 1), U(s, "僑辦", 1), U(s, "闹事", 1), U(s, "神婆", 1), U(s, "爛屄", 1), 
U(s, "淫靡", 1), U(s, "噴你", 1), U(s, "多维", 1), U(s, "龜頭", 1), U(s, "錯b", 1), U(s, "鳩屎", 1), 
U(s, "靜坐", 1), U(s, "诡村", 1), U(s, "穴爽", 1), U(s, "江豬", 1), U(s, "屌她", 1), U(s, "戈揚", 1), 
U(s, "昏藥", 1), U(s, "东条", 1), U(s, "媽祖", 1), U(s, "逼毛", 1), U(s, "達賴", 1), U(s, "老子", 1), 
U(s, "貝肉", 1), U(s, "反華", 1), U(s, "大波", 1), U(s, "臭鸡", 1), U(s, "操他", 1), U(s, "蠢豬", 1), 
U(s, "肉壺", 1), U(s, "淫流", 1), U(s, "妈批", 1), U(s, "乳沟", 1), U(s, "万钢", 1), U(s, "生殖", 1), 
U(s, "轮大", 1), U(s, "陰核", 1), U(s, "獨立", 1), U(s, "共産", 1), U(s, "薛偉", 1), U(s, "肉簫", 1), 
U(s, "性奴", 1), U(s, "車臣", 1), U(s, "ＵＲ", 1), U(s, "切七", 1), U(s, "草媽", 1), U(s, "鸡鸡", 1), 
U(s, "暴動", 1), U(s, "黃色", 1), U(s, "玩逼", 1), U(s, "賣號", 1), U(s, "共產", 1), U(s, "露逼", 1), 
U(s, "李录", 1), U(s, "共黨", 1), U(s, "猪猡", 1), U(s, "爱液", 1), U(s, "癡拈", 1), U(s, "乳爆", 1), 
U(s, "外掛", 1), U(s, "二b", 1), U(s, "監管", 1), U(s, "監督", 1), U(s, "网管", 1), U(s, "胡瘟", 1), 
U(s, "審查", 1), U(s, "炮友", 1), U(s, "走私", 1), U(s, "淫女", 1), U(s, "湿穴", 1), U(s, "wg", 1), 
U(s, "騷棍", 1), U(s, "裝b", 1), U(s, "屌鳩", 1), U(s, "机掰", 1), U(s, "兒子", 1), U(s, "媽逼", 1), 
U(s, "癟三", 1), U(s, "傻卵", 1), U(s, "瘋狗", 1), U(s, "雞吧", 1), U(s, "滅族", 1), U(s, "如来", 1), 
U(s, "猥瑣", 1), U(s, "刘淇", 1), U(s, "乱伦", 1), U(s, "爺爺", 1), U(s, "鸽派", 1), U(s, "鬧事", 1), 
U(s, "雞芭", 1), U(s, "欠幹", 1), U(s, "淫b", 1), U(s, "狗操", 1), U(s, "淫妹", 1), U(s, "臭妳", 1), 
U(s, "8仙", 1), U(s, "武藤", 1), U(s, "賭博", 1), U(s, "朱德", 1), U(s, "爽你", 1), U(s, "黃翔", 1), 
U(s, "淫樣", 1), U(s, "龟投", 1), U(s, "癡乳", 1), U(s, "墮淫", 1), U(s, "萊特", 1), U(s, "鶏吧", 1), 
U(s, "经血", 1), U(s, "騷洞", 1), U(s, "肉縫", 1), U(s, "浪婦", 1), U(s, "酥癢", 1), U(s, "押小", 1), 
U(s, "林肯", 1), U(s, "偷歡", 1), U(s, "做愛", 1), U(s, "淩辱", 1), U(s, "強暴", 1), U(s, "淫欲", 1), 
U(s, "玩穴", 1), U(s, "舔腳", 1), U(s, "肉穴", 1), U(s, "鑽插", 1), U(s, "操我", 1), U(s, "曹政", 1), 
U(s, "穴圖", 1), U(s, "车仑", 1), U(s, "穴淫", 1), U(s, "黃禍", 1), U(s, "發論", 1), U(s, "导弹", 1), 
U(s, "蕩女", 1), U(s, "捏弄", 1), U(s, "愛液", 1), U(s, "露點", 1), U(s, "緊穴", 1), U(s, "幹逼", 1), 
U(s, "豔照", 1), U(s, "擇民", 1), U(s, "騷屄", 1), U(s, "凸我", 1), U(s, "插他", 1), U(s, "肉缝", 1), 
U(s, "巨騷", 1), U(s, "豪乳", 1), U(s, "操腫", 1), U(s, "則民", 1), U(s, "六四", 1), U(s, "達癩", 1), 
U(s, "輪操", 1), U(s, "寫真", 1), U(s, "肉具", 1), U(s, "台联", 1), U(s, "新黨", 1), U(s, "蠼毿", 1), 
U(s, "王昊", 1), U(s, "拐卖", 1), U(s, "熟婦", 1), U(s, "內射", 1), U(s, "陰締", 1), U(s, "幹炮", 1), 
U(s, "姦情", 1), U(s, "発妻", 1), U(s, "吹箫", 1), U(s, "伱妈", 1), U(s, "乳溝", 1), U(s, "淫婦", 1), 
U(s, "操妳", 1), U(s, "溫逼", 1), U(s, "美乳", 1), U(s, "情婦", 1), U(s, "笨逼", 1), U(s, "陰莖", 1), 
U(s, "莱特", 1), U(s, "色誘", 1), U(s, "北韓", 1), U(s, "騷穴", 1), U(s, "射爽", 1), U(s, "張林", 1), 
U(s, "风水", 1), U(s, "騷水", 1), U(s, "工力", 1), U(s, "全裸", 1), U(s, "烂鸟", 1), U(s, "比樣", 1), 
U(s, "兽奸", 1), U(s, "尼瑪", 1), U(s, "藥水", 1), U(s, "張健", 1), U(s, "台独", 1), U(s, "干穴", 1), 
U(s, "撒尿", 1), U(s, "禽兽", 1), U(s, "阴部", 1), U(s, "淫圖", 1), U(s, "孙文", 1), U(s, "媽的", 1), 
U(s, "射顏", 1), U(s, "h站", 1), U(s, "交媾", 1), U(s, "色區", 1), U(s, "陰戶", 1), U(s, "女優", 1), 
U(s, "阴囊", 1), U(s, "嫩逼", 1), U(s, "褲襪", 1), U(s, "混沌", 1), U(s, "g點", 1), U(s, "北韩", 1), 
U(s, "欠干", 1), U(s, "嫩鮑", 1), U(s, "薄碼", 1), U(s, "盜撮", 1), U(s, "體奸", 1), U(s, "专政", 1), 
U(s, "淫秽", 1), U(s, "动乱", 1), U(s, "体奸", 1), U(s, "破處", 1), U(s, "性傭", 1), U(s, "操尼", 1), 
U(s, "騷乳", 1), U(s, "堕淫", 1), U(s, "騾幹", 1), U(s, "射奶", 1), U(s, "淫漿", 1), U(s, "政协", 1), 
U(s, "腳交", 1), U(s, "幼妓", 1), U(s, "冰毒", 1), U(s, "大師", 1), U(s, "顏射", 1), U(s, "摳穴", 1), 
U(s, "阴毛", 1), U(s, "色界", 1), U(s, "侧那", 1), U(s, "机y", 1), U(s, "侨办", 1), U(s, "强暴", 1), 
U(s, "淫毛", 1), U(s, "肉莖", 1), U(s, "暴徒", 1), U(s, "瞞報", 1), U(s, "血逼", 1), U(s, "江賊", 1), 
U(s, "鄭義", 1), U(s, "操爛", 1), U(s, "遊行", 1), U(s, "鲜族", 1), U(s, "獸奸", 1), U(s, "联总", 1), 
U(s, "應召", 1), U(s, "內衣", 1), U(s, "獸欲", 1), U(s, "Ｇ叭", 1), U(s, "联易", 1), U(s, "春藥", 1), 
U(s, "溫比", 1), U(s, "洪興", 1), U(s, "她媽", 1), U(s, "炸药", 1), U(s, "錢達", 1), U(s, "火棒", 1), 
U(s, "逼癢", 1), U(s, "被幹", 1), U(s, "幼圖", 1), U(s, "亞情", 1), U(s, "外挂", 1), U(s, "色貓", 1), 
U(s, "卖国", 1), U(s, "干汝", 1), U(s, "賤比", 1), U(s, "陳菊", 1), U(s, "輪暴", 1), U(s, "色情", 1), 
U(s, "殺人", 1), U(s, "色色", 1), U(s, "調教", 1), U(s, "淫妞", 1), U(s, "乳交", 1), U(s, "藓鲍", 1), 
U(s, "淫汁", 1), U(s, "淫蕩", 1), U(s, "开苞", 1), U(s, "插進", 1), U(s, "上访", 1), U(s, "厕奴", 1), 
U(s, "豬毛", 1), U(s, "賤b", 1), U(s, "王刚", 1), U(s, "嗑藥", 1), U(s, "窮逼", 1), U(s, "懶教", 1), 
U(s, "懶叫", 1), U(s, "萌娘", 1), U(s, "镇压", 1), U(s, "溫b", 1), U(s, "早泄", 1), U(s, "帳號", 1), 
U(s, "機8", 1), U(s, "屌你", 1), U(s, "奸幼", 1), U(s, "月經", 1), U(s, "兩會", 1), U(s, "雞y", 1), 
U(s, "塔內", 1), U(s, "機y", 1), U(s, "雞掰", 1), U(s, "女幹", 1), U(s, "嗑药", 1), U(s, "李祿", 1), 
U(s, "肉沟", 1), U(s, "汉奸", 1), U(s, "笨蛋", 1), U(s, "叫雞", 1), U(s, "滥交", 1), U(s, "機芭", 1), 
U(s, "雞叭", 1), U(s, "機叭", 1), U(s, "雞巴", 1), U(s, "幼齿", 1), U(s, "機巴", 1), U(s, "民陣", 1), 
U(s, "妓院", 1), U(s, "法侖", 1), U(s, "裸陪", 1), U(s, "馬的", 1), U(s, "讲法", 1), U(s, "骚b", 1), 
U(s, "民主", 1), U(s, "骚妈", 1), U(s, "情獸", 1), U(s, "懒叫", 1), U(s, "强卫", 1), U(s, "偷窺", 1), 
U(s, "陰毛", 1), U(s, "裝逼", 1), U(s, "屌毛", 1), U(s, "淫色", 1), U(s, "小便", 1), U(s, "罌粟", 1), 
U(s, "黄祸", 1), U(s, "蘭迪", 1), U(s, "黑逼", 1), U(s, "籌碼", 1), U(s, "阴门", 1), U(s, "賭馬", 1), 
U(s, "坐莊", 1), U(s, "雜種", 1), U(s, "親美", 1), U(s, "台獨", 1), U(s, "抽頭", 1), U(s, "引導", 1), 
U(s, "遗精", 1), U(s, "搶劫", 1), U(s, "肉欲", 1), U(s, "強姦", 1), U(s, "監獄", 1), U(s, "拐賣", 1), 
U(s, "販毒", 1), U(s, "謀殺", 1), U(s, "基督", 1), U(s, "閻王", 1), U(s, "網管", 1), U(s, "筹码", 1), 
U(s, "風水", 1), U(s, "Ｇ巴", 1), U(s, "暴动", 1), U(s, "法輪", 1), U(s, "陰囊", 1), U(s, "普賢", 1), 
U(s, "如來", 1), U(s, "獨裁", 1), U(s, "逼样", 1), U(s, "賣槍", 1), U(s, "導彈", 1), U(s, "反黨", 1), 
U(s, "奸你", 1), U(s, "政變", 1), U(s, "藏獨", 1), U(s, "疆獨", 1), U(s, "台聯", 1), U(s, "猪操", 1), 
U(s, "骚包", 1), U(s, "淫水", 1), U(s, "南蠻", 1), U(s, "河殇", 1), U(s, "骚女", 1), U(s, "蛤蟆", 1), 
U(s, "蘿拉", 1), U(s, "圣战", 1), U(s, "舔逼", 1), U(s, "列寧", 1), U(s, "雷根", 1), U(s, "馬凱", 1), 
U(s, "干它", 1), U(s, "示威", 1), U(s, "鸡掰", 1), U(s, "吳儀", 1), U(s, "登辉", 1), U(s, "李鵬", 1), 
U(s, "红5", 1), U(s, "孫文", 1), U(s, "網特", 1), U(s, "陳毅", 1), U(s, "江猪", 1), U(s, "白痴", 1), 
U(s, "傅鹏", 1), U(s, "妈逼", 1), U(s, "干炮", 1), U(s, "药水", 1), U(s, "戳你", 1), U(s, "g巴", 1), 
U(s, "发伦", 1), U(s, "郑源", 1), U(s, "露b", 1), U(s, "多維", 1), U(s, "淫母", 1), U(s, "贞操", 1), 
U(s, "泽民", 1), U(s, "张钢", 1), U(s, "屌妳", 1), U(s, "张林", 1), U(s, "超她", 1), U(s, "公安", 1), 
U(s, "择民", 1), U(s, "制毒", 1), U(s, "看下", 1), U(s, "卖号", 1), U(s, "发论", 1), U(s, "疆独", 1), 
U(s, "释欲", 1), U(s, "则民", 1), U(s, "幼龙", 1), U(s, "買春", 1), U(s, "主义", 1), U(s, "暴淫", 1), 
U(s, "坑爹", 1), U(s, "姚罗", 1), U(s, "昆圖", 1), U(s, "杨周", 1), U(s, "毛賊", 1), U(s, "杨巍", 1), 
U(s, "安南", 1), U(s, "吸毒", 1), U(s, "氢弹", 1), U(s, "薛伟", 1), U(s, "邢铮", 1), U(s, "现金", 1), 
U(s, "下体", 1), U(s, "洗脑", 1), U(s, "温比", 1), U(s, "爆乳", 1), U(s, "sf", 1), U(s, "耶稣", 1), 
U(s, "奶娘", 1), U(s, "陰唇", 1), U(s, "卖b", 1), U(s, "陈云", 1), U(s, "骚逼", 1), U(s, "專政", 1), 
U(s, "龜公", 1), U(s, "劉青", 1), U(s, "上妳", 1), U(s, "插穴", 1), U(s, "骚穴", 1), U(s, "管里", 1), 
U(s, "万里", 1), U(s, "八九", 1), U(s, "反共", 1), U(s, "Ｇ八", 1), U(s, "喷精", 1), U(s, "氵去", 1), 
U(s, "统独", 1), U(s, "輪奸", 1), U(s, "洪兴", 1), U(s, "天阉", 1), U(s, "阴蒂", 1), U(s, "支那", 1), 
U(s, "塔乌", 1), U(s, "浪女", 1), U(s, "苏拉", 1), U(s, "濫b", 1), U(s, "梅毒", 1), U(s, "連戰", 1), 
U(s, "艳乳", 1), U(s, "税力", 1), U(s, "傻子", 1), U(s, "獸交", 1), U(s, "傻鸟", 1), U(s, "諾姆", 1), 
U(s, "草你", 1), U(s, "母奸", 1), U(s, "起義", 1), U(s, "痴拈", 1), U(s, "民国", 1), U(s, "人权", 1), 
U(s, "慶紅", 1), U(s, "阳痿", 1), U(s, "情兽", 1), U(s, "干入", 1), U(s, "網禪", 1), U(s, "普京", 1), 
U(s, "我干", 1), U(s, "情妇", 1), U(s, "亲日", 1), U(s, "露屄", 1), U(s, "钱达", 1), U(s, "齐墨", 1), 
U(s, "泼妇", 1), U(s, "大便", 1), U(s, "逼奸", 1), U(s, "儿子", 1), U(s, "你爷", 1), U(s, "陈军", 1), 
U(s, "能样", 1), U(s, "聯大", 1), U(s, "奶头", 1), U(s, "纳粹", 1), U(s, "靠北", 1), U(s, "屌他", 1), 
U(s, "内裤", 1), U(s, "賤人", 1), U(s, "民联", 1), U(s, "瞒报", 1), U(s, "卖骚", 1), U(s, "偷拍", 1), 
U(s, "錯比", 1), U(s, "陽具", 1), U(s, "掄功", 1), U(s, "推油", 1), U(s, "日軍", 1), U(s, "卢卡", 1), 
U(s, "写真", 1), U(s, "賣比", 1), U(s, "裹本", 1), U(s, "活动", 1), U(s, "回回", 1), U(s, "伊朗", 1), 
U(s, "蠢猪", 1), U(s, "轮暴", 1), U(s, "凌锋", 1), U(s, "玉乳", 1), U(s, "蜜洞", 1), U(s, "炼功", 1), 
U(s, "包皮", 1), U(s, "後庭", 1), U(s, "劳教", 1), U(s, "劳改", 1), U(s, "淫姐", 1), U(s, "冰粉", 1), 
U(s, "肏屄", 1), U(s, "姫辱", 1), U(s, "烂袋", 1), U(s, "陰門", 1), U(s, "兰迪", 1), U(s, "变态", 1), 
U(s, "昆图", 1), U(s, "陰屄", 1), U(s, "经文", 1), U(s, "輿論", 1), U(s, "机叭", 1), U(s, "羅幹", 1), 
U(s, "老逼", 1), U(s, "灭族", 1), U(s, "主席", 1), U(s, "卖淫", 1), U(s, "廖晖", 1), U(s, "白梦", 1), 
U(s, "升天", 1), U(s, "gm", 1), U(s, "贱种", 1), U(s, "革命", 1), U(s, "贱比", 1), U(s, "性息", 1), 
U(s, "烂货", 1), U(s, "刘青", 1), U(s, "黄翔", 1), U(s, "輪功", 1), U(s, "皇军", 1), U(s, "鸡吧", 1), 
U(s, "兽交", 1), U(s, "乱交", 1), U(s, "亚情", 1), U(s, "兽欲", 1), U(s, "怀特", 1), U(s, "洪传", 1), 
U(s, "国贼", 1), U(s, "广闻", 1), U(s, "幹比", 1), U(s, "共军", 1), U(s, "特码", 1), U(s, "共产", 1), 
U(s, "淫浆", 1), U(s, "弓虽", 1), U(s, "刚比", 1), U(s, "干比", 1), U(s, "干逼", 1), U(s, "嘸 ", 1), 
U(s, "操鶏", 1), U(s, "法沦", 1), U(s, "奸淫", 1), U(s, "幹他", 1), U(s, "猥褻", 1), U(s, "他娘", 1), 
U(s, "发楞", 1), U(s, "独夫", 1), U(s, "东亚", 1), U(s, "換妻", 1), U(s, "发抡", 1), U(s, "曰你", 1), 
U(s, "蒂顺", 1), U(s, "达癞", 1), U(s, "嫐屄", 1), U(s, "错逼", 1), U(s, "韩正", 1), U(s, "騷包", 1), 
U(s, "干你", 1), U(s, "澤民", 1), U(s, "错b", 1), U(s, "维护", 1), U(s, "扒穴", 1), U(s, "运营", 1), 
U(s, "常劲", 1), U(s, "机8", 1), U(s, "冰后", 1), U(s, "妈祖", 1), U(s, "你爸", 1), U(s, "鸠屎", 1), 
U(s, "比样", 1), U(s, "操妻", 1), U(s, "奥伦", 1), U(s, "朱骏", 1), U(s, "蠼毵", 1), U(s, "內褲", 1), 
U(s, "巨乳", 1), U(s, "奸暴", 1), U(s, "庆红", 1), U(s, "淘寶", 1), U(s, "陈蒙", 1), U(s, "杂种", 1), 
U(s, "测试", 1), U(s, "港独", 1), U(s, "列宁", 1), U(s, "爛貨", 1), U(s, "伟哥", 1), U(s, "监管", 1), 
U(s, "被干", 1), U(s, "巡查", 1), U(s, "劉軍", 1), U(s, "网禅", 1), U(s, "歇逼", 1), U(s, "他爹", 1), 
U(s, "开房", 1), U(s, "占中", 1), U(s, "尼玛", 1), U(s, "瘪三", 1), U(s, "朝鲜", 1), U(s, "封殺", 1), 
U(s, "疯狗", 1), U(s, "勞教", 1), U(s, "臭她", 1), U(s, "骑你", 1), U(s, "戴紅", 1), U(s, "乔伊", 1), 
U(s, "愛滋", 1), U(s, "手淫", 1), U(s, "法抡", 1), U(s, "激插", 1), U(s, "二貨", 1), U(s, "安拉", 1), 
U(s, "操射", 1), U(s, "嫩缝", 1), U(s, "滥逼", 1), U(s, "亂交", 1), U(s, "肥逼", 1), U(s, "鶏院", 1), 
U(s, "淫蟲", 1), U(s, "绯闻", 1), U(s, "肉壶", 1), U(s, "造愛", 1), U(s, "虎騎", 1), U(s, "騷逼", 1), 
U(s, "淫乱", 1), U(s, "扒屄", 1), U(s, "鴉片", 1), U(s, "狂插", 1), U(s, "黑屄", 1), U(s, "淫洞", 1), 
U(s, "阝月", 1), U(s, "互淫", 1), U(s, "鮑彤", 1), U(s, "艳照", 1), U(s, "舔屄", 1), U(s, "猪毛", 1), 
U(s, "潮喷", 1), U(s, "淋病", 1), U(s, "乳霸", 1), U(s, "淫穢", 1), U(s, "露穴", 1), U(s, "維護", 1), 
U(s, "博讯", 1), U(s, "迫奸", 1), U(s, "拳交", 1), U(s, "鶏巴", 1), U(s, "阳具", 1), U(s, "玛雅", 1), 
U(s, "新疆", 1), U(s, "大乳", 1), U(s, "程凯", 1), U(s, "親日", 1), U(s, "阴屄", 1), U(s, "阴阜", 1), 
U(s, "巨奶", 1), U(s, "叼你", 1), U(s, "萬稅", 1), U(s, "小逼", 1), U(s, "招妓", 1), U(s, "逼痒", 1), 
U(s, "凌辱", 1), U(s, "美國", 1), U(s, "逼樣", 1), U(s, "喬石", 1), U(s, "操死", 1), U(s, "内射", 1), 
U(s, "坐庄", 1), U(s, "辱骂", 1), U(s, "罗干", 1), U(s, "干我", 1), U(s, "塔内", 1), U(s, "圮綦", 1), 
U(s, "淫河", 1), U(s, "狗屁", 1), U(s, "丝袜", 1), U(s, "钻插", 1), U(s, "昏药", 1), U(s, "懷特", 1), 
U(s, "格魯", 1), U(s, "淫糜", 1), U(s, "專制", 1), U(s, "滥货", 1), U(s, "淫書", 1), U(s, "穴图", 1), 
U(s, "掰穴", 1), U(s, "幼女", 1), U(s, "贱b", 1), U(s, "賤逼", 1), U(s, "鶏8", 1), U(s, "无码", 1), 
U(s, "猛插", 1), U(s, "美穴", 1), U(s, "贺龙", 1), U(s, "瑪雅", 1), U(s, "淫腔", 1), U(s, "浪穴", 1), 
U(s, "荡女", 1), U(s, "领取", 1), U(s, "插b", 1), U(s, "g片", 1), U(s, "日死", 1), U(s, "紧穴", 1), 
U(s, "幼交", 1), U(s, "露毛", 1), U(s, "牛比", 1), U(s, "三p", 1), U(s, "齊墨", 1), U(s, "贱人", 1), 
U(s, "傻吊", 1), U(s, "蒙獨", 1), U(s, "bt", 1), U(s, "肛屄", 1), U(s, "操b", 1), U(s, "煞笔", 1), 
U(s, "騷媽", 1), U(s, "裤袜", 1), U(s, "女屄", 1), U(s, "操黑", 1), U(s, "政府", 1), U(s, "台辦", 1), 
U(s, "欠日", 1), U(s, "奸染", 1), U(s, "漏逼", 1), U(s, "太监", 1), U(s, "战牌", 1), U(s, "陳蒙", 1), 
U(s, "民運", 1), U(s, "肉唇", 1), U(s, "人彈", 1), U(s, "亮穴", 1), U(s, "機Ｙ", 1), U(s, "幹她", 1), 
U(s, "騷棒", 1), U(s, "乳暈", 1), U(s, "3p", 1), U(s, "花柳", 1), U(s, "黄网", 1), U(s, "操肿", 1), 
U(s, "阿扁", 1), U(s, "河殤", 1), U(s, "妓女", 1), U(s, "暴奸", 1), U(s, "淫店", 1), U(s, "轮操", 1), 
U(s, "凸她", 1), U(s, "发轮", 1), U(s, "子宮", 1), U(s, "屌我", 1), U(s, "龟头", 1), U(s, "幼逼", 1), 
U(s, "機八", 1), U(s, "熟母", 1), U(s, "口爆", 1), U(s, "淫妻", 1), U(s, "岡巒", 1), U(s, "人弹", 1), 
U(s, "性佣", 1), U(s, "缔顺", 1), U(s, "佛教", 1), U(s, "吞精", 1), U(s, "舆论", 1), U(s, "嫩鲍", 1), 
U(s, "賣國", 1), U(s, "女尻", 1), U(s, "∪r", 1), U(s, "婊子", 1), U(s, "插暴", 1), U(s, "精子", 1), 
U(s, "阴缔", 1), U(s, "日逼", 1), U(s, "监督", 1), U(s, "閹狗", 1), U(s, "機掰", 1), U(s, "熟女", 1), 
U(s, "干勒", 1), U(s, "含屌", 1), U(s, "阳物", 1), U(s, "性欲", 1), U(s, "美幼", 1), U(s, "盗撮", 1), 
U(s, "噴精", 1), U(s, "發票", 1), U(s, "発射", 1), U(s, "网特", 1), U(s, "經血", 1), U(s, "何勇", 1), 
U(s, "納粹", 1), U(s, "群p", 1), U(s, "巨骚", 1), U(s, "操穴", 1), U(s, "肉箫", 1), U(s, "嫩女", 1), 
U(s, "私服", 1), U(s, "g叭", 1), U(s, "欲火", 1), U(s, "ri", 1), U(s, "淫图", 1), U(s, "刘刚", 1), 
U(s, "射颜", 1), U(s, "鸦片", 1), U(s, "韓正", 1), U(s, "女优", 1), U(s, "轉化", 1), U(s, "g点", 1), 
U(s, "薄码", 1), U(s, "酥穴", 1), U(s, "騷母", 1), U(s, "鮮族", 1), U(s, "騷妻", 1), U(s, "蹣 ", 1), 
U(s, "静坐", 1), U(s, "发票", 1), U(s, "黃片", 1), U(s, "好嫩", 1), U(s, "勞改", 1), U(s, "破处", 1), 
U(s, "煉功", 1), U(s, "下賤", 1), U(s, "法仑", 1), U(s, "骚鶏", 1), U(s, "肉逼", 1), U(s, "爆操", 1), 
U(s, "妈b", 1), U(s, "刘军", 1), U(s, "幼图", 1), U(s, "售号", 1), U(s, "鶏奸", 1), U(s, "淫穴", 1), 
U(s, "插逼", 1), U(s, "靠母", 1), U(s, "骚浪", 1), U(s, "抠穴", 1), U(s, "肉茎", 1), U(s, "妈比", 1), 
U(s, "懒教", 1), U(s, "法轮", 1), U(s, "插比", 1), U(s, "鸡y", 1), U(s, "干爽", 1), U(s, "阳精", 1), 
U(s, "哭爸", 1), U(s, "塔烏", 1), U(s, "講法", 1), U(s, "乳峰", 1), U(s, "淩鋒", 1), U(s, "抢劫", 1), 
U(s, "暴亂", 1), U(s, "专制", 1), U(s, "裸聊", 1), U(s, "g芭", 1), U(s, "喊派", 1), U(s, "爱滋", 1), 
U(s, "鸡奸", 1), U(s, "起义", 1), U(s, "干妳", 1), U(s, "马凯", 1), U(s, "处女", 1), U(s, "骚水", 1), 
U(s, "法纶", 1), U(s, "濫貨", 1), U(s, "柴玲", 1), U(s, "漢奸", 1), U(s, "傻屄", 1), U(s, "軍妓", 1), 
U(s, "私处", 1), U(s, "反党", 1), U(s, "阿拉", 1), U(s, "骨狮", 1), U(s, "民聯", 1), U(s, "上訪", 1), 
U(s, "赌马", 1), U(s, "屌7", 1), U(s, "卖枪", 1), U(s, "爛袋", 1), U(s, "騷鶏", 1), U(s, "南蛮", 1), 
U(s, "总理", 1), U(s, "剛比", 1), U(s, "性虎", 1), U(s, "修煉", 1), U(s, "鯫 ", 1), U(s, "放蕩", 1), 
U(s, "学联", 1), U(s, "統戰", 1), U(s, "色区", 1), U(s, "帝顺", 1), U(s, "乱轮", 1), U(s, "發掄", 1), 
U(s, "阴核", 1), U(s, "東升", 1), U(s, "比毛", 1), U(s, "姣西", 1), U(s, "王震", 1), U(s, "反動", 1), 
U(s, "烂比", 1), U(s, "凸妳", 1), U(s, "肛交", 1), U(s, "调教", 1), U(s, "鮑伊", 1), U(s, "班禅", 1), 
U(s, "房事", 1), U(s, "干干", 1), U(s, "臭西", 1), U(s, "卖卡", 1), U(s, "军妓", 1), U(s, "反动", 1), 
U(s, "王丹", 1), U(s, "干爆", 1), U(s, "大师", 1), U(s, "骑她", 1), U(s, "贝肉", 1), U(s, "是鸡", 1), 
U(s, "猖妓", 1), U(s, "助理", 1), U(s, "中共", 1), U(s, "叫床", 1), U(s, "颜骑", 1), U(s, "蛩鼽", 1), 
U(s, "淫液", 1), U(s, "骚货", 1), U(s, "淫虐", 1), U(s, "劉淇", 1), U(s, "操林", 1), U(s, "作愛", 1), 
U(s, "乳尻", 1), U(s, "靠爸", 1), U(s, "狗b", 1), U(s, "淫情", 1), U(s, "内衣", 1), U(s, "废物", 1), 
U(s, "法愣", 1), U(s, "性事", 1), U(s, "鸡八", 1), U(s, "抽插", 1), U(s, "法功", 1), U(s, "測試", 1), 
U(s, "装b", 1), U(s, "亮屄", 1), U(s, "测拿", 1), U(s, "幹你", 1), U(s, "戴红", 1), U(s, "大法", 1), 
U(s, "賊民", 1), U(s, "ur", 1), U(s, "阴水", 1), U(s, "波霸", 1), U(s, "秘裂", 1), U(s, "军委", 1), 
U(s, "班禪", 1), U(s, "鄭源", 1), U(s, "開苞", 1), U(s, "邢錚", 1), U(s, "排泄", 1), U(s, "肉体", 1), 
U(s, "j8", 1), U(s, "破鞋", 1), U(s, "轮干", 1), U(s, "密宗", 1), U(s, "机Ｙ", 1), U(s, "主義", 1), 
U(s, "共軍", 1), U(s, "輪大", 1), U(s, "學運", 1), U(s, "喬伊", 1), U(s, "日你", 1), U(s, "臭他", 1), 
U(s, "天皇", 1), U(s, "浴尿", 1), U(s, "天閹", 1), U(s, "我日", 1), U(s, "李錄", 1), U(s, "卖逼", 1), 
U(s, "狗娘", 1), U(s, "毒品", 1), U(s, "情色", 1), U(s, "法謫", 1), U(s, "肉棒", 1), U(s, "猥琐", 1), 
U(s, "蕩妹", 1), U(s, "淫魔", 1), U(s, "你娘", 1), U(s, "贼东", 1), U(s, "干机", 1), U(s, "騷貨", 1), 
U(s, "狗屎", 1), U(s, "潮噴", 1), U(s, "妈的", 1), U(s, "雞奸", 1), U(s, "劳拉", 1), U(s, "烂人", 1), 
U(s, "大b", 1), U(s, "荡妇", 1), U(s, "錯逼", 1), U(s, "装逼", 1), U(s, "册那", 1), U(s, "白夢", 1), 
U(s, "人妻", 1), U(s, "亂倫", 1), U(s, "连战", 1), U(s, "台盟", 1), U(s, "自慰", 1), U(s, "大傻", 1), 
U(s, "淫蜜", 1), U(s, "封杀", 1), U(s, "押大", 1), U(s, "煞筆", 1), U(s, "淫痴", 1), U(s, "賣淫", 1), 
U(s, "臺盟", 1), U(s, "萬里", 1), U(s, "狗誠", 1), U(s, "反华", 1), U(s, "蜜穴", 1), U(s, "系統", 1), 
U(s, "性愛", 1), U(s, "操蛋", 1), U(s, "屠殺", 1), U(s, "骨獅", 1), U(s, "賓周", 1), U(s, "干啦", 1), 
U(s, "鸡叭", 1), U(s, "造反", 1), U(s, "肛门", 1), U(s, "淫賤", 1), U(s, "子宫", 1), U(s, "張鋼", 1), 
U(s, "嗎啡", 1), U(s, "林彪", 1), U(s, "發騷", 1), U(s, "色猫", 1), U(s, "发骚", 1), U(s, "鴿派", 1), 
U(s, "做爱", 1), U(s, "欢城", 1), U(s, "暴干", 1), U(s, "僵贼", 1), U(s, "淫奴", 1), U(s, "嗎的", 1), 
U(s, "插你", 1), U(s, "sb", 1), U(s, "牛逼", 1), U(s, "傻毕", 1), U(s, "二屄", 1), U(s, "jb", 1), 
U(s, "我奸", 1), U(s, "狗日", 1), U(s, "插进", 1), U(s, "發輪", 1), U(s, "屄毛", 1), U(s, "郑义", 1), 
U(s, "政权", 1), U(s, "皮条", 1), U(s, "陰精", 1), U(s, "煞逼", 1), U(s, "打炮", 1), U(s, "路易", 1), 
U(s, "政治", 1), U(s, "陰部", 1), U(s, "转化", 1), U(s, "贼民", 1), U(s, "屌西", 1), U(s, "来干", 1), 
U(s, "下注", 1), U(s, "凸他", 1), U(s, "删号", 1), U(s, "你媽", 1), U(s, "陳軍", 1), U(s, "丝诱", 1), 
U(s, "江青", 1), U(s, "泽夫", 1), U(s, "鸡芭", 1), U(s, "保钓", 1), U(s, "弹劾", 1), U(s, "龟公", 1), 
U(s, "鬼村", 1), U(s, "鮑戈", 1), U(s, "爛b", 1), U(s, "回教", 1), U(s, "干鸡", 1), U(s, "秃驴", 1), 
U(s, "狗卵", 1), U(s, "雞八", 1), U(s, "共匪", 1), U(s, "游行", 1), U(s, "虎门", 1), U(s, "干死", 1), 
U(s, "拉登", 1), U(s, "干他", 1), U(s, "贱货", 1), U(s, "出轨", 1), U(s, "温b", 1), U(s, "娘的", 1), 
U(s, "幼龍", 1), U(s, "骚卵", 1), U(s, "流氓", 1), U(s, "两会", 1), U(s, "蒙独", 1), U(s, "仆街", 1), 
U(s, "援交", 1), U(s, "圣母", 1), U(s, "禽獸", 1), U(s, "八仙", 1), U(s, "迷药", 1), U(s, "骚母", 1), 
U(s, "日军", 1), U(s, "塞白", 1), U(s, "下贱", 1), U(s, "大逼", 1), U(s, "Ｇ芭", 1), U(s, "爛屌", 1), 
U(s, "食屎", 1), U(s, "统战", 1), U(s, "交配", 1), U(s, "他妈", 1), U(s, "爽穴", 1), U(s, "黄色", 1), 
U(s, "台办", 1), U(s, "菜逼", 1), U(s, "爛逼", 1), U(s, "斯諾", 1), U(s, "系统", 1), U(s, "反日", 1), 
U(s, "錦濤", 1), U(s, "楊巍", 1), U(s, "淫荡", 1), U(s, "碡 ", 1), U(s, "被插", 1), U(s, "小b", 1), 
U(s, "賣騷", 1), U(s, "屁眼", 1), U(s, "张磊", 1), U(s, "射精", 1), U(s, "淘宝", 1), U(s, "超他", 1), 
U(s, "她妈", 1), U(s, "欠操", 1), U(s, "后庭", 1), U(s, "幼齒", 1), U(s, "约炮", 1), U(s, "開房", 1), 
U(s, "哈批", 1), U(s, "國軍", 1), U(s, "倭国", 1), U(s, "吹簫", 1), U(s, "法綸", 1), U(s, "李山", 1), 
U(s, "江贼", 1), U(s, "陰水", 1), U(s, "媽比", 1), U(s, "信息", 1), U(s, "xx", 1), U(s, "厕洞", 1), 
U(s, "媽b", 1), U(s, "小三", 1), U(s, "鎮壓", 1), U(s, "雞８", 1), U(s, "我操", 1), U(s, "陰蒂", 1), 
U(s, "锦涛", 1), U(s, "黄片", 1), U(s, "戴晶", 1), U(s, "联大", 1), U(s, "g掰", 1), U(s, "人大", 1), 
U(s, "媽批", 1), U(s, "玉杵", 1), U(s, "呆卵", 1), U(s, "朝鮮", 1), U(s, "暴乱", 1), U(s, "淫娃", 1), 
s)), U(w, 2, (U(n = {}, "迷幻药", 1), U(n, "李鹏*", 1), U(n, "民主党", 1), U(n, "邓小平", 1), 
U(n, "灵灵派", 1), U(n, "中宣部", 1), U(n, "陈奎元", 1), U(n, "薑春雲", 1), U(n, "菊花蕾", 1), 
U(n, "周鋒鎖", 1), U(n, "塞你母", 1), U(n, "吴弘达", 1), U(n, "sex", 1), U(n, "教養院", 1), 
U(n, "杜青林", 1), U(n, "曹長青", 1), U(n, "幹人也", 1), U(n, "一陀糞", 1), U(n, "吴方城", 1), 
U(n, "刘宾雁", 1), U(n, "賴昌星", 1), U(n, "僵贼民", 1), U(n, "你媽比", 1), U(n, "狗男女", 1), 
U(n, "拉皮条", 1), U(n, "揭批書", 1), U(n, "希拉克", 1), U(n, "金日成", 1), U(n, "蔡英文", 1), 
U(n, "发抡功", 1), U(n, "奧魯奇", 1), U(n, "中组部", 1), U(n, "梁光烈", 1), U(n, "莫伟强", 1), 
U(n, "幹的你", 1), U(n, "吴志芳", 1), U(n, "法克鱿", 1), U(n, "吳弘達", 1), U(n, "羅榮桓", 1), 
U(n, "陈希同", 1), U(n, "郭岩華", 1), U(n, "社科院", 1), U(n, "女马ㄉ", 1), U(n, "塞你娘", 1), 
U(n, "民主墙", 1), U(n, "徐國舅", 1), U(n, "發論公", 1), U(n, "親民黨", 1), U(n, "江贼民", 1), 
U(n, "两国论", 1), U(n, "許財利", 1), U(n, "林佳龍", 1), U(n, "许其亮", 1), U(n, "高丽朴", 1), 
U(n, "正見網", 1), U(n, "法轮功", 1), U(n, "草你妈", 1), U(n, "国研室", 1), U(n, "賈廷安", 1), 
U(n, "封從德", 1), U(n, "唐柏桥", 1), U(n, "吴官正", 1), U(n, "襲近平", 1), U(n, "胡紧套", 1), 
U(n, "王滬寧", 1), U(n, "塞你爸", 1), U(n, "可待因", 1), U(n, "新语丝", 1), U(n, "李建國", 1), 
U(n, "臭gy", 1), U(n, "共青團", 1), U(n, "小嫩鸡", 1), U(n, "劉曉竹", 1), U(n, "熱比婭", 1), 
U(n, "干你娘", 1), U(n, "董建華", 1), U(n, "江八點", 1), U(n, "白立忱", 1), U(n, "港澳辦", 1), 
U(n, "胡緊掏", 1), U(n, "張伯笠", 1), U(n, "全能神", 1), U(n, "黄慈萍", 1), U(n, "牛b靠", 1), 
U(n, "華國鋒", 1), U(n, "皮條客", 1), U(n, "法西斯", 1), U(n, "胡紧涛", 1), U(n, "大波波", 1), 
U(n, "性饥渴", 1), U(n, "陈博志", 1), U(n, "巴倫坦", 1), U(n, "娘餓比", 1), U(n, "郭羅基", 1), 
U(n, "胡锦涛", 1), U(n, "吃鸡巴", 1), U(n, "艾丽丝", 1), U(n, "郭罗基", 1), U(n, "狗卵子", 1), 
U(n, "圣女峰", 1), U(n, "新義安", 1), U(n, "辛灏年", 1), U(n, "愛滋病", 1), U(n, "超ＧＹ", 1), 
U(n, "麦角酸", 1), U(n, "赶你娘", 1), U(n, "冯素英", 1), U(n, "黑社會", 1), U(n, "吉跋猫", 1), 
U(n, "發論功", 1), U(n, "曹刚川", 1), U(n, "李克强", 1), U(n, "多维网", 1), U(n, "摸阴蒂", 1), 
U(n, "温假饱", 1), U(n, "韩联潮", 1), U(n, "奧特蘭", 1), U(n, "ur靠", 1), U(n, "女馬ㄉ", 1), 
U(n, "去妳妈", 1), U(n, "靈靈教", 1), U(n, "迷魂藥", 1), U(n, "習主席", 1), U(n, "駱海堅", 1), 
U(n, "聂荣臻", 1), U(n, "孙中山", 1), U(n, "雙十節", 1), U(n, "璩美鳳", 1), U(n, "海洛因", 1), 
U(n, "司馬璐", 1), U(n, "二百五", 1), U(n, "商务部", 1), U(n, "馮東海", 1), U(n, "脫內褲", 1), 
U(n, "臭人也", 1), U(n, "林重谟", 1), U(n, "江戏子", 1), U(n, "徐向前", 1), U(n, "马英九", 1), 
U(n, "一貫道", 1), U(n, "南蠻子", 1), U(n, "陳水扁", 1), U(n, "連方瑀", 1), U(n, "奸一奸", 1), 
U(n, "杨思敏", 1), U(n, "陈水扁", 1), U(n, "摩洛客", 1), U(n, "邓朴方", 1), U(n, "中國豬", 1), 
U(n, "干的爽", 1), U(n, "毛泽东", 1), U(n, "万润南", 1), U(n, "npc", 1), U(n, "王太華", 1), 
U(n, "胡紧掏", 1), U(n, "一夜情", 1), U(n, "张伟国", 1), U(n, "大参考", 1), U(n, "梅花网", 1), 
U(n, "强奸犯", 1), U(n, "李慶華", 1), U(n, "戴維教", 1), U(n, "龜孫子", 1), U(n, "插深些", 1), 
U(n, "性无能", 1), U(n, "謝中之", 1), U(n, "赛他娘", 1), U(n, "黄仲生", 1), U(n, "nmd", 1), 
U(n, "郭岩华", 1), U(n, "李红痔", 1), U(n, "卖.国", 1), U(n, "巴伦坦", 1), U(n, "臺灣狗", 1), 
U(n, "精液浴", 1), U(n, "尼奥夫", 1), U(n, "刘奇葆", 1), U(n, "监察部", 1), U(n, "默克尔", 1), 
U(n, "小參考", 1), U(n, "劉文雄", 1), U(n, "热那亚", 1), U(n, "混沌靠", 1), U(n, "臭鸡巴", 1), 
U(n, "李源潮", 1), U(n, "羅禮詩", 1), U(n, "钱其琛", 1), U(n, "马加爵", 1), U(n, "凸女也", 1), 
U(n, "娘饿比", 1), U(n, "宋书元", 1), U(n, "簡肇棟", 1), U(n, "操你媽", 1), U(n, "杜魯門", 1), 
U(n, "老虎機", 1), U(n, "骆海坚", 1), U(n, "宇明網", 1), U(n, "转法轮", 1), U(n, "伊拉克", 1), 
U(n, "李鵬*", 1), U(n, "中纪委", 1), U(n, "趙建銘", 1), U(n, "蔡崇國", 1), U(n, "高文謙", 1), 
U(n, "媽白勺", 1), U(n, "白皮書", 1), U(n, "王润生", 1), U(n, "小嫩雞", 1), U(n, "猪聾畸", 1), 
U(n, "7gg", 1), U(n, "曾庆红", 1), U(n, "彭德懷", 1), U(n, "四川独", 1), U(n, "售软件", 1), 
U(n, "rfa", 1), U(n, "厉无畏", 1), U(n, "王輔臣", 1), U(n, "猪容基", 1), U(n, "ji女", 1), 
U(n, "尉健行", 1), U(n, "gcd", 1), U(n, "干妳娘", 1), U(n, "大血b", 1), U(n, "大亂交", 1), 
U(n, "淫驴屯", 1), U(n, "肉棍子", 1), U(n, "狗雜種", 1), U(n, "李志綏", 1), U(n, "戴相龙", 1), 
U(n, "fa轮", 1), U(n, "超女也", 1), U(n, "幹一家", 1), U(n, "蘇曉康", 1), U(n, "指导员", 1), 
U(n, "dpp", 1), U(n, "cnd", 1), U(n, "反革命", 1), U(n, "bi样", 1), U(n, "璩美凤", 1), 
U(n, "无帮国", 1), U(n, "白立樸", 1), U(n, "要色色", 1), U(n, "釣魚島", 1), U(n, "聖女峰", 1), 
U(n, "爛遊戲", 1), U(n, "张梅颖", 1), U(n, "刘国凯", 1), U(n, "豬容基", 1), U(n, "小肉粒", 1), 
U(n, "屌女也", 1), U(n, "朱容雞", 1), U(n, "周總理", 1), U(n, "小乳头", 1), U(n, "李老师", 1), 
U(n, "張小平", 1), U(n, "高自聯", 1), U(n, "大卫教", 1), U(n, "陳良宇", 1), U(n, "張立昌", 1), 
U(n, "林重謨", 1), U(n, "張潮陽", 1), U(n, "張朝陽", 1), U(n, "肉便器", 1), U(n, "谢中之", 1), 
U(n, "郵政局", 1), U(n, "真理教", 1), U(n, "文化部", 1), U(n, "郑余镇", 1), U(n, "劉奇葆", 1), 
U(n, "搖頭玩", 1), U(n, "嚴方軍", 1), U(n, "胡锦淘", 1), U(n, "毛澤東", 1), U(n, "女馬的", 1), 
U(n, "朱立倫", 1), U(n, "四人幫", 1), U(n, "參事室", 1), U(n, "煙草局", 1), U(n, "吕秀莲", 1), 
U(n, "鴉片渣", 1), U(n, "鴉片液", 1), U(n, "张立昌", 1), U(n, "興奮劑", 1), U(n, "溫家寶", 1), 
U(n, "苏特勤", 1), U(n, "黎阳评", 1), U(n, "鄉巴佬", 1), U(n, "文物局", 1), U(n, "一本道", 1), 
U(n, "潘国平", 1), U(n, "吳　儀", 1), U(n, "溫總理", 1), U(n, "牛逼靠", 1), U(n, "臭女也", 1), 
U(n, "洪哲勝", 1), U(n, "一夜歡", 1), U(n, "羅文嘉", 1), U(n, "鸦片渣", 1), U(n, "蒋树声", 1), 
U(n, "李總理", 1), U(n, "新义安", 1), U(n, "李大師", 1), U(n, "质检局", 1), U(n, "汪東風", 1), 
U(n, "衛生部", 1), U(n, "自民黨", 1), U(n, "西藏独", 1), U(n, "威而鋼", 1), U(n, "盛華仁", 1), 
U(n, "大东亚", 1), U(n, "售id", 1), U(n, "吴敦义", 1), U(n, "贾廷安", 1), U(n, "爱女人", 1), 
U(n, "產權局", 1), U(n, "赵紫阳", 1), U(n, "小比樣", 1), U(n, "張春賢", 1), U(n, "張高麗", 1), 
U(n, "俞正聲", 1), U(n, "王寶森", 1), U(n, "劉士賢", 1), U(n, "外/掛", 1), U(n, "观世音", 1), 
U(n, "www", 1), U(n, "許其亮", 1), U(n, "布雷爾", 1), U(n, "劉雲山", 1), U(n, "黄　菊", 1), 
U(n, "我日靠", 1), U(n, "江擇民", 1), U(n, "热比娅", 1), U(n, "售軟體", 1), U(n, "于幼军", 1), 
U(n, "莫偉強", 1), U(n, "日gm", 1), U(n, "幹七八", 1), U(n, "大東亞", 1), U(n, "駛你娘", 1), 
U(n, "美国佬", 1), U(n, "離長春", 1), U(n, "遲浩田", 1), U(n, "羅志明", 1), U(n, "烟草局", 1), 
U(n, "东京热", 1), U(n, "駛你母", 1), U(n, "色迷城", 1), U(n, "香港國", 1), U(n, "駛你爸", 1), 
U(n, "馬時敏", 1), U(n, "劉千石", 1), U(n, "食撚屎", 1), U(n, "农业部", 1), U(n, "mm屄", 1), 
U(n, "生鴉片", 1), U(n, "胡惊涛", 1), U(n, "陳定南", 1), U(n, "皮条客", 1), U(n, "基督教", 1), 
U(n, "商務部", 1), U(n, "干７８", 1), U(n, "南联盟", 1), U(n, "卖财富", 1), U(n, "明慧網", 1), 
U(n, "尼奧夫", 1), U(n, "克劳森", 1), U(n, "乡巴佬", 1), U(n, "李淑嫻", 1), U(n, "性饑渴", 1), 
U(n, "人代會", 1), U(n, "他妈的", 1), U(n, "倪育賢", 1), U(n, "竊聽器", 1), U(n, "懂文华", 1), 
U(n, "強姦犯", 1), U(n, "干他妈", 1), U(n, "催情药", 1), U(n, "司法部", 1), U(n, "婊子靠", 1), 
U(n, "農業部", 1), U(n, "塔利班", 1), U(n, "刘千石", 1), U(n, "南聯盟", 1), U(n, "你爺 ", 1), 
U(n, "项小吉", 1), U(n, "張偉國", 1), U(n, "慰安婦", 1), U(n, "他马的", 1), U(n, "刘云山", 1), 
U(n, "迷殲藥", 1), U(n, "馬白勺", 1), U(n, "蒙塵藥", 1), U(n, "美利堅", 1), U(n, "操你妈", 1), 
U(n, "大紀園", 1), U(n, "邝锦文", 1), U(n, "殺人犯", 1), U(n, "孙春兰", 1), U(n, "梅花網", 1), 
U(n, "郑运鹏", 1), U(n, "轮流干", 1), U(n, "毛一鮮", 1), U(n, "賣軟體", 1), U(n, "鄧笑貧", 1), 
U(n, "賣財富", 1), U(n, "由喜贵", 1), U(n, "李磕墙", 1), U(n, "賣id", 1), U(n, "發倫功", 1), 
U(n, "东正教", 1), U(n, "吳敦義", 1), U(n, "幼香阁", 1), U(n, "凸人也", 1), U(n, "大史記", 1), 
U(n, "買財富", 1), U(n, "顏慶章", 1), U(n, "民航局", 1), U(n, "打野炮", 1), U(n, "嗎啡片", 1), 
U(n, "嗎啡堿", 1), U(n, "韓東方", 1), U(n, "积克馆", 1), U(n, "麻醉藥", 1), U(n, "採花堂", 1), 
U(n, "政法委", 1), U(n, "鬱慕明", 1), U(n, "性高潮", 1), U(n, "東正教", 1), U(n, "史莱姆", 1), 
U(n, "王超华", 1), U(n, "蘇家屯", 1), U(n, "抑制劑", 1), U(n, "吳仁華", 1), U(n, "爱幼阁", 1), 
U(n, "高治聯", 1), U(n, "劉　淇", 1), U(n, "王岐山", 1), U(n, "林業局", 1), U(n, "六?四", 1), 
U(n, "李瑞環", 1), U(n, "欠人骑", 1), U(n, "慰安妇", 1), U(n, "聯合國", 1), U(n, "李紅志", 1), 
U(n, "國台辦", 1), U(n, "建國黨", 1), U(n, "杨月清", 1), U(n, "林保華", 1), U(n, "瘸腿幫", 1), 
U(n, "罗　干", 1), U(n, "电监会", 1), U(n, "唐家璇", 1), U(n, "求包养", 1), U(n, "東京熱", 1), 
U(n, "無毛穴", 1), U(n, "2逼靠", 1), U(n, "红卫兵", 1), U(n, "黄伯源", 1), U(n, "民政部", 1), 
U(n, "布莱尔", 1), U(n, "大乳頭", 1), U(n, "大纪元", 1), U(n, "項小吉", 1), U(n, "張博雅", 1), 
U(n, "計生委", 1), U(n, "令計畫", 1), U(n, "黃　菊", 1), U(n, "胡緊套", 1), U(n, "淫东方", 1), 
U(n, "司马晋", 1), U(n, "七灵派", 1), U(n, "可卡葉", 1), U(n, "紅衛兵", 1), U(n, "窃听器", 1), 
U(n, "蔡崇国", 1), U(n, "鮑嶽橋", 1), U(n, "馮素英", 1), U(n, "摇头丸", 1), U(n, "何候華", 1), 
U(n, "你大爺", 1), U(n, "國管局", 1), U(n, "國防部", 1), U(n, "郑万通", 1), U(n, "苏南成", 1), 
U(n, "马白勺", 1), U(n, "草泥马", 1), U(n, "華建敏", 1), U(n, "发论公", 1), U(n, "干七八", 1), 
U(n, "党中央", 1), U(n, "高文谦", 1), U(n, "幹妳娘", 1), U(n, "菊花蚕", 1), U(n, "幹妳媽", 1), 
U(n, "叼你媽", 1), U(n, "外汇局", 1), U(n, "去你的", 1), U(n, "吗啡碱", 1), U(n, "地震局", 1), 
U(n, "小弟弟", 1), U(n, "蔣介石", 1), U(n, "布萊爾", 1), U(n, "幹gm", 1), U(n, "卖毒品", 1), 
U(n, "董文華", 1), U(n, "李金华", 1), U(n, "法制辦", 1), U(n, "摸陰蒂", 1), U(n, "看牌器", 1), 
U(n, "陳小同", 1), U(n, "啊無卵", 1), U(n, "電監會", 1), U(n, "吴淑珍", 1), U(n, "拔出来", 1), 
U(n, "运营人", 1), U(n, "臺灣獨", 1), U(n, "戴海靜", 1), U(n, "煞笔靠", 1), U(n, "刘山青", 1), 
U(n, "吗的靠", 1), U(n, "姜春云", 1), U(n, "大紀元", 1), U(n, "周恩來", 1), U(n, "温家保", 1), 
U(n, "口交靠", 1), U(n, "小鸡鸡", 1), U(n, "神经病", 1), U(n, "萬曉東", 1), U(n, "測繪局", 1), 
U(n, "张小平", 1), U(n, "王超華", 1), U(n, "財政部", 1), U(n, "佈雷爾", 1), U(n, "盧西德", 1), 
U(n, "保監會", 1), U(n, "伊斯蘭", 1), U(n, "刪 號", 1), U(n, "三级片", 1), U(n, "張筱雨", 1), 
U(n, "鄭余鎮", 1), U(n, "日你媽", 1), U(n, "刘伯承", 1), U(n, "坐台的", 1), U(n, "美騷婦", 1), 
U(n, "颜庆章", 1), U(n, "正清网", 1), U(n, "王世勳", 1), U(n, "档案局", 1), U(n, "思柯洛", 1), 
U(n, "陈昌智", 1), U(n, "陳景俊", 1), U(n, "参事室", 1), U(n, "劉少奇", 1), U(n, "罗文嘉", 1), 
U(n, "王胜俊", 1), U(n, "里菲斯", 1), U(n, "司馬晉", 1), U(n, "民进党", 1), U(n, "钱运录", 1), 
U(n, "水利部", 1), U(n, "气象局", 1), U(n, "唐家璿", 1), U(n, "民主牆", 1), U(n, "脱内裤", 1), 
U(n, "吴　仪", 1), U(n, "董贱华", 1), U(n, "远志明", 1), U(n, "裡菲斯", 1), U(n, "李宏旨", 1), 
U(n, "俞正声", 1), U(n, "白皮书", 1), U(n, "科賴爾", 1), U(n, "张德江", 1), U(n, "醬豬媳", 1), 
U(n, "姚文元", 1), U(n, "楊思敏", 1), U(n, "马大维", 1), U(n, "豬聾畸", 1), U(n, "和鍋槍", 1), 
U(n, "看中国", 1), U(n, "来爽我", 1), U(n, "傅作义", 1), U(n, "一夜欢", 1), U(n, "將則民", 1), 
U(n, "溫加寶", 1), U(n, "你媽逼", 1), U(n, "李興平", 1), U(n, "插gm", 1), U(n, "蔡文勝", 1), 
U(n, "運營人", 1), U(n, "女马的", 1), U(n, "王沪宁", 1), U(n, "運營官", 1), U(n, "運營長", 1), 
U(n, "发改委", 1), U(n, "黃劍輝", 1), U(n, "门徒会", 1), U(n, "on9", 1), U(n, "卖id", 1), 
U(n, "你大爷", 1), U(n, "鬼轮奸", 1), U(n, "鸡巴靠", 1), U(n, "超７８", 1), U(n, "三唑仑", 1), 
U(n, "程铁军", 1), U(n, "香港国", 1), U(n, "運營者", 1), U(n, "fu(", 1), U(n, "共榮圈", 1), 
U(n, "髑屙民", 1), U(n, "冬季熱", 1), U(n, "瘟家寶", 1), U(n, "核潜艇", 1), U(n, "管理員", 1), 
U(n, "h動漫", 1), U(n, "小雞雞", 1), U(n, "胡緊濤", 1), U(n, "色书库", 1), U(n, "大雞巴", 1), 
U(n, "朱溶劑", 1), U(n, "食捻屎", 1), U(n, "美利坚", 1), U(n, "原子弹", 1), U(n, "中聯部", 1), 
U(n, "柔陰術", 1), U(n, "监听王", 1), U(n, "田纪云", 1), U(n, "足腳交", 1), U(n, "温加宝", 1), 
U(n, "李繼耐", 1), U(n, "李慶安", 1), U(n, "毛主席", 1), U(n, "柯建銘", 1), U(n, "操ＧＹ", 1), 
U(n, "鬼輪奸", 1), U(n, "外交部", 1), U(n, "李继耐", 1), U(n, "董建华", 1), U(n, "淫東方", 1), 
U(n, "司马璐", 1), U(n, "游錫坤", 1), U(n, "高級逼", 1), U(n, "於幼軍", 1), U(n, "吳幫國", 1), 
U(n, "法~纶", 1), U(n, "突尼斯", 1), U(n, "张春桥", 1), U(n, "瑪雅網", 1), U(n, "色窩窩", 1), 
U(n, "獸獸門", 1), U(n, "外_挂", 1), U(n, "粉紅穴", 1), U(n, "扎卡维", 1), U(n, "习远平", 1), 
U(n, "陈宣良", 1), U(n, "李蘭菊", 1), U(n, "联合国", 1), U(n, "黃義交", 1), U(n, "混沌决", 1), 
U(n, "風豔閣", 1), U(n, "江綿恒", 1), U(n, "尤比亞", 1), U(n, "公媳亂", 1), U(n, "曹剛川", 1), 
U(n, "性奴會", 1), U(n, "小灵通", 1), U(n, "張溫鷹", 1), U(n, "無修正", 1), U(n, "安全局", 1), 
U(n, "烂游戏", 1), U(n, "舔雞巴", 1), U(n, "扉之陰", 1), U(n, "饅頭屄", 1), U(n, "騷妹妹", 1), 
U(n, "朱狨基", 1), U(n, "杜冷丁", 1), U(n, "耶和華", 1), U(n, "你色嗎", 1), U(n, "苏菲尔", 1), 
U(n, "丁子霖", 1), U(n, "麥克斯", 1), U(n, "致幻劑", 1), U(n, "麻醉槍", 1), U(n, "小乳頭", 1), 
U(n, "騷姐姐", 1), U(n, "吃雞巴", 1), U(n, "民主潮", 1), U(n, "淫告白", 1), U(n, "吴仁华", 1), 
U(n, "看中國", 1), U(n, "大參考", 1), U(n, "华盛顿", 1), U(n, "嫩bb", 1), U(n, "舌頭穴", 1), 
U(n, "江主席", 1), U(n, "集體淫", 1), U(n, "妳娘的", 1), U(n, "群陰會", 1), U(n, "罗志明", 1), 
U(n, "fku", 1), U(n, "宋書元", 1), U(n, "孫逸仙", 1), U(n, "灵灵教", 1), U(n, "方勵之", 1), 
U(n, "蔡啟芳", 1), U(n, "美少婦", 1), U(n, "李兰菊", 1), U(n, "茉莉花", 1), U(n, "臭机八", 1), 
U(n, "亞洲色", 1), U(n, "劉賓雁", 1), U(n, "曾培炎", 1), U(n, "克莱恩", 1), U(n, "窩窩客", 1), 
U(n, "葉菊蘭", 1), U(n, "朱熔基", 1), U(n, "中南海", 1), U(n, "纯一郎", 1), U(n, "麗春苑", 1), 
U(n, "奧巴馬", 1), U(n, "嫩鮑魚", 1), U(n, "法爾卡", 1), U(n, "露陰照", 1), U(n, "積克館", 1), 
U(n, "隱窩窩", 1), U(n, "李大师", 1), U(n, "駛你公", 1), U(n, "郭俊銘", 1), U(n, "完蛋操", 1), 
U(n, "希特勒", 1), U(n, "费鸿泰", 1), U(n, "金澤辰", 1), U(n, "赖士葆", 1), U(n, "王立軍", 1), 
U(n, "劉華清", 1), U(n, "鄭寶清", 1), U(n, "張志清", 1), U(n, "糾察員", 1), U(n, "王涵萬", 1), 
U(n, "給你爽", 1), U(n, "銷魂洞", 1), U(n, "常受教", 1), U(n, "胡春華", 1), U(n, "肉蒲團", 1), 
U(n, "幹的爽", 1), U(n, "巡查员", 1), U(n, "蓮花逼", 1), U(n, "处女膜", 1), U(n, "生春袋", 1), 
U(n, "蘇盈貴", 1), U(n, "曰gm", 1), U(n, "陸委會", 1), U(n, "懂文華", 1), U(n, "學生妹", 1), 
U(n, "操逼毛", 1), U(n, "愛女人", 1), U(n, "江豬媳", 1), U(n, "國民黨", 1), U(n, "苏贞昌", 1), 
U(n, "私-服", 1), U(n, "林保华", 1), U(n, "台湾国", 1), U(n, "幹78", 1), U(n, "叶菊兰", 1), 
U(n, "錢其琛", 1), U(n, "幹gy", 1), U(n, "操78", 1), U(n, "揭批书", 1), U(n, "h站靠", 1), 
U(n, "迷奸藥", 1), U(n, "買春堂", 1), U(n, "處女膜", 1), U(n, "吳淑珍", 1), U(n, "奧拉德", 1), 
U(n, "趙海青", 1), U(n, "徐才厚", 1), U(n, "李總統", 1), U(n, "胡景濤", 1), U(n, "四人帮", 1), 
U(n, "迷幻藥", 1), U(n, "毛厕洞", 1), U(n, "輪盤賭", 1), U(n, "刘　淇", 1), U(n, "性交靠", 1), 
U(n, "白蓮教", 1), U(n, "吳宏達", 1), U(n, "愛幼閣", 1), U(n, "林长盛", 1), U(n, "党主席", 1), 
U(n, "奥巴马", 1), U(n, "宋祖英", 1), U(n, "馬克思", 1), U(n, "亲民党", 1), U(n, "新疆獨", 1), 
U(n, "潘國平", 1), U(n, "觀世音", 1), U(n, "龙虎靠", 1), U(n, "李兆焯", 1), U(n, "兩國論", 1), 
U(n, "鄭餘鎮", 1), U(n, "新生網", 1), U(n, "孙家正", 1), U(n, "運營組", 1), U(n, "外　挂", 1), 
U(n, "轉法輪", 1), U(n, "民主黨", 1), U(n, "藏婦會", 1), U(n, "藏青會", 1), U(n, "西藏國", 1), 
U(n, "新疆國", 1), U(n, "蒋经国", 1), U(n, "粥健康", 1), U(n, "马特斯", 1), U(n, "臺灣國", 1), 
U(n, "操xx", 1), U(n, "臭秃尼", 1), U(n, "摩門教", 1), U(n, "中紀委", 1), U(n, "av片", 1), 
U(n, "發改委", 1), U(n, "公安局", 1), U(n, "五月天", 1), U(n, "性虐待", 1), U(n, "白立朴", 1), 
U(n, "幹全家", 1), U(n, "項懷誠", 1), U(n, "屎你娘", 1), U(n, "吟稻雁", 1), U(n, "罗富和", 1), 
U(n, "胡景涛", 1), U(n, "阿羅約", 1), U(n, "黎陽評", 1), U(n, "統戰部", 1), U(n, "超人也", 1), 
U(n, "中組部", 1), U(n, "李旺陽", 1), U(n, "共產黨", 1), U(n, "ass", 1), U(n, "蔣經國", 1), 
U(n, "吸血兽", 1), U(n, "羅　幹", 1), U(n, "李登輝", 1), U(n, "骚姨妈", 1), U(n, "柔阴术", 1), 
U(n, "膏药旗", 1), U(n, "奶奶的", 1), U(n, "陳至立", 1), U(n, "德维尔", 1), U(n, "买毒品", 1), 
U(n, "洗脑班", 1), U(n, "王軍濤", 1), U(n, "牛比靠", 1), U(n, "刘文雄", 1), U(n, "熱那亞", 1), 
U(n, "搞栗棒", 1), U(n, "馬加爵", 1), U(n, "假庆林", 1), U(n, "法~論", 1), U(n, "马良骏", 1), 
U(n, "史萊姆", 1), U(n, "奧馬爾", 1), U(n, "費良勇", 1), U(n, "郁慕明", 1), U(n, "鮑威爾", 1), 
U(n, "趕你娘", 1), U(n, "让你操", 1), U(n, "马时敏", 1), U(n, "超七八", 1), U(n, "華盛頓", 1), 
U(n, "陈小同", 1), U(n, "轴永康", 1), U(n, "实际神", 1), U(n, "连方瑀", 1), U(n, "发正念", 1), 
U(n, "柴契爾", 1), U(n, "操gy", 1), U(n, "李总统", 1), U(n, "杀人犯", 1), U(n, "史達林", 1), 
U(n, "fuc", 1), U(n, "尼克森", 1), U(n, "新闻办", 1), U(n, "克林頓", 1), U(n, "张潮阳", 1), 
U(n, "默克爾", 1), U(n, "嫩鲍鱼", 1), U(n, "操她妈", 1), U(n, "王太华", 1), U(n, "黑毛屄", 1), 
U(n, "玛丽亚", 1), U(n, "郭金龍", 1), U(n, "干gm", 1), U(n, "趙樂際", 1), U(n, "范長龍", 1), 
U(n, "龙新民", 1), U(n, "小b樣", 1), U(n, "蝴蝶逼", 1), U(n, "孫春蘭", 1), U(n, "臺灣黨", 1), 
U(n, "馬大維", 1), U(n, "吹喇叭", 1), U(n, "干干干", 1), U(n, "賀過牆", 1), U(n, "h动漫", 1), 
U(n, "抑制剂", 1), U(n, "葉劍英", 1), U(n, "賣.國", 1), U(n, "國務院", 1), U(n, "甲慶林", 1), 
U(n, "吴帮国", 1), U(n, "j8靠", 1), U(n, "周铁农", 1), U(n, "假慶林", 1), U(n, "伺服器", 1), 
U(n, "凱爾本", 1), U(n, "易丹轩", 1), U(n, "無幫過", 1), U(n, "林正勝", 1), U(n, "反封锁", 1), 
U(n, "費鴻泰", 1), U(n, "缘圈圈", 1), U(n, "那嗎逼", 1), U(n, "山口組", 1), U(n, "曼德拉", 1), 
U(n, "萬淫堂", 1), U(n, "恩格斯", 1), U(n, "陳宣良", 1), U(n, "張昭富", 1), U(n, "费良勇", 1), 
U(n, "王立军", 1), U(n, "马三家", 1), U(n, "劉延東", 1), U(n, "你老母", 1), U(n, "老ＧＹ", 1), 
U(n, "外-掛", 1), U(n, "正见网", 1), U(n, "釣魚臺", 1), U(n, "你祖宗", 1), U(n, "習近平", 1), 
U(n, "賀國強", 1), U(n, "外_掛", 1), U(n, "大血逼", 1), U(n, "袭近平", 1), U(n, "撒切尔", 1), 
U(n, "来插我", 1), U(n, "張德江", 1), U(n, "国台办", 1), U(n, "軸永康", 1), U(n, "台湾党", 1), 
U(n, "吳官正", 1), U(n, "劉國凱", 1), U(n, "曾慶紅", 1), U(n, "卖qq", 1), U(n, "中國猪", 1), 
U(n, "黑木耳", 1), U(n, "錢國梁", 1), U(n, "胡錦濤", 1), U(n, "张春贤", 1), U(n, "李嵐清", 1), 
U(n, "糧食局", 1), U(n, "操七八", 1), U(n, "奧克拉", 1), U(n, "朱鎔基", 1), U(n, "江澤民", 1), 
U(n, "插你媽", 1), U(n, "鄧小平", 1), U(n, "毛主度", 1), U(n, "李大釗", 1), U(n, "刘文胜", 1), 
U(n, "政治犯", 1), U(n, "蒙古獨", 1), U(n, "制服狩", 1), U(n, "他祖宗", 1), U(n, "思科羅", 1), 
U(n, "无邦国", 1), U(n, "克莱特", 1), U(n, "劉伯承", 1), U(n, "李紅痔", 1), U(n, "大奶头", 1), 
U(n, "羞恥母", 1), U(n, "反社會", 1), U(n, "朱立伦", 1), U(n, "操女也", 1), U(n, "姚月謙", 1), 
U(n, "呂京花", 1), U(n, "藏妇会", 1), U(n, "周守训", 1), U(n, "周锋锁", 1), U(n, "龍新民", 1), 
U(n, "ＵＲ靠", 1), U(n, "郑宝清", 1), U(n, "voa", 1), U(n, "蒋中正", 1), U(n, "赵品潞", 1), 
U(n, "江則民", 1), U(n, "赵建铭", 1), U(n, "私—服", 1), U(n, "臭７８", 1), U(n, "胡錦滔", 1), 
U(n, "赵海青", 1), U(n, "劉山青", 1), U(n, "民進黨", 1), U(n, "章孝严", 1), U(n, "李长春", 1), 
U(n, "张昭富", 1), U(n, "李志绥", 1), U(n, "生鸦片", 1), U(n, "fuk", 1), U(n, "陈一咨", 1), 
U(n, "纠察员", 1), U(n, "毛贼东", 1), U(n, "尾申鲸", 1), U(n, "张温鹰", 1), U(n, "旅游局", 1), 
U(n, "审计署", 1), U(n, "戴海静", 1), U(n, "张伯笠", 1), U(n, "毛廁洞", 1), U(n, "看棋器", 1), 
U(n, "無邦國", 1), U(n, "插你妈", 1), U(n, "余英时", 1), U(n, "多维社", 1), U(n, "由喜貴", 1), 
U(n, "天主教", 1), U(n, "王兆國", 1), U(n, "賣qq", 1), U(n, "卓伯源", 1), U(n, "尹庆民", 1), 
U(n, "一陀粪", 1), U(n, "連勝德", 1), U(n, "幹ＧＹ", 1), U(n, "姚月谦", 1), U(n, "寇曉偉", 1), 
U(n, "催情藥", 1), U(n, "杨怀安", 1), U(n, "汪东风", 1), U(n, "顏清標", 1), U(n, "颜清标", 1), 
U(n, "刘士贤", 1), U(n, "温家饱", 1), U(n, "外—挂", 1), U(n, "严家祺", 1), U(n, "严家其", 1), 
U(n, "学自联", 1), U(n, "许信良", 1), U(n, "李淑娴", 1), U(n, "许家屯", 1), U(n, "就去日", 1), 
U(n, "塞你公", 1), U(n, "许财利", 1), U(n, "貝尤爾", 1), U(n, "徐国舅", 1), U(n, "小比样", 1), 
U(n, "新疆独", 1), U(n, "科萊爾", 1), U(n, "林長盛", 1), U(n, "龙虎豹", 1), U(n, "余英時", 1), 
U(n, "紮卡維", 1), U(n, "馬特斯", 1), U(n, "谢选骏", 1), U(n, "那吗逼", 1), U(n, "谢长廷", 1), 
U(n, "耶和华", 1), U(n, "小b样", 1), U(n, "妳馬的", 1), U(n, "项怀诚", 1), U(n, "干拎娘", 1), 
U(n, "中国猪", 1), U(n, "草尼玛", 1), U(n, "阿罗约", 1), U(n, "蔣中正", 1), U(n, "吴学璨", 1), 
U(n, "干一干", 1), U(n, "拉皮條", 1), U(n, "胡主席", 1), U(n, "檔案局", 1), U(n, "插陰莖", 1), 
U(n, "金堯如", 1), U(n, "吴宏达", 1), U(n, "外匯局", 1), U(n, "亚洲色", 1), U(n, "8仙靠", 1), 
U(n, "陳破空", 1), U(n, "八仙靠", 1), U(n, "温元凯", 1), U(n, "猪毛1", 1), U(n, "舔鸡巴", 1), 
U(n, "法~輪", 1), U(n, "王秀丽", 1), U(n, "王世勋", 1), U(n, "王世坚", 1), U(n, "王军涛", 1), 
U(n, "胡xx", 1), U(n, "妓女靠", 1), U(n, "丁关根", 1), U(n, "王涵万", 1), U(n, "拿破仑", 1), 
U(n, "老毛子", 1), U(n, "干78", 1), U(n, "王辅臣", 1), U(n, "华国锋", 1), U(n, "致幻剂", 1), 
U(n, "汤光中", 1), U(n, "台湾独", 1), U(n, "幹你娘", 1), U(n, "他吗的", 1), U(n, "龍虎豹", 1), 
U(n, "习仲勋", 1), U(n, "孙大千", 1), U(n, "苏盈贵", 1), U(n, "苏晓康", 1), U(n, "管理员", 1), 
U(n, "色書庫", 1), U(n, "日朱駿", 1), U(n, "李红志", 1), U(n, "司馬晋", 1), U(n, "苏绍智", 1), 
U(n, "受虐狂", 1), U(n, "采花堂", 1), U(n, "屎妳娘", 1), U(n, "外　掛", 1), U(n, "思科罗", 1), 
U(n, "反人类", 1), U(n, "薄一波", 1), U(n, "司徒华", 1), U(n, "大衛教", 1), U(n, "江戲子", 1), 
U(n, "吸血獸", 1), U(n, "外/挂", 1), U(n, "陈晓宁", 1), U(n, "旅遊局", 1), U(n, "盛华仁", 1), 
U(n, "章孝嚴", 1), U(n, "圣射手", 1), U(n, "薄熙来", 1), U(n, "山口组", 1), U(n, "周永康", 1), 
U(n, "王世勛", 1), U(n, "日朱骏", 1), U(n, "拿破崙", 1), U(n, "丘垂贞", 1), U(n, "cnm", 1), 
U(n, "钦本立", 1), U(n, "許信良", 1), U(n, "操妳妈", 1), U(n, "王志珍", 1), U(n, "轮盘赌", 1), 
U(n, "钱国梁", 1), U(n, "庞建国", 1), U(n, "洗腦班", 1), U(n, "你妈比", 1), U(n, "蔡启芳", 1), 
U(n, "无帮过", 1), U(n, "莲花逼", 1), U(n, "大血比", 1), U(n, "倪育贤", 1), U(n, "大麻油", 1), 
U(n, "赛妳娘", 1), U(n, "冬季热", 1), U(n, "谢深山", 1), U(n, "那吗b", 1), U(n, "金正日", 1), 
U(n, "蒙古独", 1), U(n, "麦克斯", 1), U(n, "吕京花", 1), U(n, "奥利弗", 1), U(n, "讓你操", 1), 
U(n, "活動 ", 1), U(n, "張春橋", 1), U(n, "豬毛1", 1), U(n, "三k党", 1), U(n, "妈的靠", 1), 
U(n, "马永成", 1), U(n, "陆委会", 1), U(n, "死gm", 1), U(n, "关卓中", 1), U(n, "张榕明", 1), 
U(n, "溫元凱", 1), U(n, "黃仲生", 1), U(n, "法尔卡", 1), U(n, "刘永川", 1), U(n, "刘晓竹", 1), 
U(n, "刘晓波", 1), U(n, "tmd", 1), U(n, "阎明复", 1), U(n, "法~淪", 1), U(n, "干她妈", 1), 
U(n, "鳥gm", 1), U(n, "你奶奶", 1), U(n, "∪r靠", 1), U(n, "毛厠洞", 1), U(n, "刘俊国", 1), 
U(n, "雷尼亞", 1), U(n, "无修正", 1), U(n, "艾滋病", 1), U(n, "林正胜", 1), U(n, "美少妇", 1), 
U(n, "群阴会", 1), U(n, "太子党", 1), U(n, "老gy", 1), U(n, "林佳龙", 1), U(n, "幹７８", 1), 
U(n, "廖锡龙", 1), U(n, "连胜文", 1), U(n, "连胜德", 1), U(n, "他妈靠", 1), U(n, "金瓶梅", 1), 
U(n, "品香堂", 1), U(n, "连惠心", 1), U(n, "卡斯楚", 1), U(n, "李总理", 1), U(n, "李小鹏", 1), 
U(n, "陳一諮", 1), U(n, "李庆华", 1), U(n, "李庆安", 1), U(n, "黑社会", 1), U(n, "騷姨媽", 1), 
U(n, "金尧如", 1), U(n, "學自聯", 1), U(n, "李洪宽", 1), U(n, "王八蛋", 1), U(n, "干人也", 1), 
U(n, "雷尼亚", 1), U(n, "聶榮臻", 1), U(n, "傻b靠", 1), U(n, "科莱尔", 1), U(n, "穆斯林", 1), 
U(n, "统战部", 1), U(n, "反政府", 1), U(n, "韩东方", 1), U(n, "寇晓伟", 1), U(n, "胡錦淘", 1), 
U(n, "赛你娘", 1), U(n, "柯赐海", 1), U(n, "白莲教", 1), U(n, "凯尔本", 1), U(n, "李瑞环", 1), 
U(n, "卖软件", 1), U(n, "将则民", 1), U(n, "被立王", 1), U(n, "吳育升", 1), U(n, "插后庭", 1), 
U(n, "杨建利", 1), U(n, "江泽慧", 1), U(n, "他嗎的", 1), U(n, "跳大神", 1), U(n, "吴学灿", 1), 
U(n, "江绵恒", 1), U(n, "你妈的", 1), U(n, "李鐵映", 1), U(n, "工自联", 1), U(n, "李洪寬", 1), 
U(n, "尹慶民", 1), U(n, "卢西德", 1), U(n, "丘垂貞", 1), U(n, "监视塔", 1), U(n, "干一家", 1), 
U(n, "赛她娘", 1), U(n, "尼克松", 1), U(n, "贾育台", 1), U(n, "朱凤芝", 1), U(n, "中科院", 1), 
U(n, "曹长青", 1), U(n, "黄义交", 1), U(n, "达菲鸡", 1), U(n, "黄剑辉", 1), U(n, "胡锦滔", 1), 
U(n, "徐光春", 1), U(n, "赵乐际", 1), U(n, "林文漪", 1), U(n, "郭俊铭", 1), U(n, "滚那吗", 1), 
U(n, "粥永康", 1), U(n, "明慧网", 1), U(n, "狗杂种", 1), U(n, "奥鲁奇", 1), U(n, "建国党", 1), 
U(n, "操人也", 1), U(n, "干全家", 1), U(n, "王滬甯", 1), U(n, "嚴家其", 1), U(n, "于幼軍", 1), 
U(n, "援交妹", 1), U(n, "刘少奇", 1), U(n, "藏独靠", 1), U(n, "监管局", 1), U(n, "干的你", 1), 
U(n, "刘延东", 1), U(n, "干bi", 1), U(n, "王世堅", 1), U(n, "nnd", 1), U(n, "性交課", 1), 
U(n, "上海幫", 1), U(n, "彭麗媛", 1), U(n, "董賤華", 1), U(n, "反社会", 1), U(n, "俄國 ", 1), 
U(n, "法谪功", 1), U(n, "fvc", 1), U(n, "發掄功", 1), U(n, "靠你媽", 1), U(n, "日死你", 1), 
U(n, "法~沦", 1), U(n, "叫小姐", 1), U(n, "法~伦", 1), U(n, "孙政才", 1), U(n, "大鶏巴", 1), 
U(n, "薄熙來", 1), U(n, "品色堂", 1), U(n, "新华社", 1), U(n, "港澳办", 1), U(n, "斯大林", 1), 
U(n, "大奶妈", 1), U(n, "大纪园", 1), U(n, "苏家屯", 1), U(n, "我咧干", 1), U(n, "陈总统", 1), 
U(n, "劉賓深", 1), U(n, "严方军", 1), U(n, "陈学圣", 1), U(n, "迟浩田", 1), U(n, "兽兽门", 1), 
U(n, "刻假章", 1), U(n, "贾庆林", 1), U(n, "張清芳", 1), U(n, "性交圖", 1), U(n, "卖。国", 1), 
U(n, "陈破空", 1), U(n, "陈景俊", 1), U(n, "法制办", 1), U(n, "傻逼靠", 1), U(n, "陈建铭", 1), 
U(n, "陈定南", 1), U(n, "陈炳基", 1), U(n, "西藏獨", 1), U(n, "奥特兰", 1), U(n, "共荣圈", 1), 
U(n, "奥拉德", 1), U(n, "奥克拉", 1), U(n, "胡春华", 1), U(n, "周恩来", 1), U(n, "他媽的", 1), 
U(n, "潜烈蟹", 1), U(n, "宋楚瑜", 1), U(n, "蘇特勤", 1), U(n, "郑丽文", 1), U(n, "你色吗", 1), 
U(n, "潑婦 ", 1), U(n, "张志清", 1), U(n, "唐柏橋", 1), U(n, "你妈靠", 1), U(n, "刘宾深", 1), 
U(n, "运营官", 1), U(n, "k 粉", 1), U(n, "妳马的", 1), U(n, "周健康", 1), U(n, "运营组", 1), 
U(n, "骚妹妹", 1), U(n, "运营者", 1), U(n, "卫生部", 1), U(n, "服务器", 1), U(n, "xtl", 1), 
U(n, "蔡文胜", 1), U(n, "舔屁眼", 1), U(n, "打飞机", 1), U(n, "人民报", 1), U(n, "大鸡巴", 1), 
U(n, "三八淫", 1), U(n, "赖昌星", 1), U(n, "我日你", 1), U(n, "姬勝德", 1), U(n, "梅花屄", 1), 
U(n, "奴畜抄", 1), U(n, "奥马尔", 1), U(n, "老虎机", 1), U(n, "足脚交", 1), U(n, "原子彈", 1), 
U(n, "六合彩", 1), U(n, "多人轮", 1), U(n, "高级逼", 1), U(n, "信访局", 1), U(n, "保密局", 1), 
U(n, "流蜜汁", 1), U(n, "小日本", 1), U(n, "法輪功", 1), U(n, "法~綸", 1), U(n, "美骚妇", 1), 
U(n, "幹幹幹", 1), U(n, "粉红穴", 1), U(n, "素人娘", 1), U(n, "驶你公", 1), U(n, "日x妈", 1), 
U(n, "驶你母", 1), U(n, "鸟gm", 1), U(n, "无毛穴", 1), U(n, "操母狗", 1), U(n, "窝窝客", 1), 
U(n, "法~倫", 1), U(n, "緣圈圈", 1), U(n, "大花b", 1), U(n, "去他妈", 1), U(n, "毛賊東", 1), 
U(n, "發正念", 1), U(n, "栗戰書", 1), U(n, "西藏国", 1), U(n, "大史纪", 1), U(n, "幼香閣", 1), 
U(n, "要射了", 1), U(n, "菊花洞", 1), U(n, "万淫堂", 1), U(n, "外专局", 1), U(n, "迷魂药", 1), 
U(n, "裏菲斯", 1), U(n, "李小鵬", 1), U(n, "遠志明", 1), U(n, "戴秉国", 1), U(n, "萬潤南", 1), 
U(n, "工商局", 1), U(n, "羞耻母", 1), U(n, "慰春情", 1), U(n, "監視塔", 1), U(n, "a4y", 1), 
U(n, "集体淫", 1), U(n, "公媳乱", 1), U(n, "朝天穴", 1), U(n, "性奴会", 1), U(n, "刘华清", 1), 
U(n, "美國佬", 1), U(n, "扉之阴", 1), U(n, "天安門", 1), U(n, "馬良駿", 1), U(n, "我就色", 1), 
U(n, "性之站", 1), U(n, "买春堂", 1), U(n, "按摩棒", 1), U(n, "他母亲", 1), U(n, "骚姐姐", 1), 
U(n, "少修正", 1), U(n, "打飛機", 1), U(n, "金毛穴", 1), U(n, "純一郎", 1), U(n, "插阴茎", 1), 
U(n, "韓聯潮", 1), U(n, "新語絲", 1), U(n, "舌头穴", 1), U(n, "想上你", 1), U(n, "正悟网", 1), 
U(n, "謝深山", 1), U(n, "林信义", 1), U(n, "大乱交", 1), U(n, "克萊恩", 1), U(n, "东洋屄", 1), 
U(n, "宇明网", 1), U(n, "混沌決", 1), U(n, "桑国卫", 1), U(n, "幹死你", 1), U(n, "迷歼药", 1), 
U(n, "王兆国", 1), U(n, "共産黨", 1), U(n, "吴百益", 1), U(n, "陳建銘", 1), U(n, "银民吧", 1), 
U(n, "毛xx", 1), U(n, "台湾狗", 1), U(n, "丽春苑", 1), U(n, "露阴照", 1), U(n, "欽本立", 1), 
U(n, "隐窝窝", 1), U(n, "新疆国", 1), U(n, "李磕牆", 1), U(n, "给你爽", 1), U(n, "销魂洞", 1), 
U(n, "肉蒲团", 1), U(n, "本拉登", 1), U(n, "风艳阁", 1), U(n, "包二奶", 1), U(n, "温家宝", 1), 
U(n, "田紀雲", 1), U(n, "学生妹", 1), U(n, "外—掛", 1), U(n, "蒙尘药", 1), U(n, "大花逼", 1), 
U(n, "湯光中", 1), U(n, "装b靠", 1), U(n, "法~轮", 1), U(n, "臭78", 1), U(n, "王乐泉", 1), 
U(n, "陈至立", 1), U(n, "臭七八", 1), U(n, "鸦片液", 1), U(n, "马万祺", 1), U(n, "操７８", 1), 
U(n, "陳炳基", 1), U(n, "胡耀邦", 1), U(n, "幹女也", 1), U(n, "三唑侖", 1), U(n, "臭ＧＹ", 1), 
U(n, "超gy", 1), U(n, "吗啡片", 1), U(n, "干ＧＹ", 1), U(n, "干gy", 1), U(n, "賤bi", 1), 
U(n, "习主席", 1), U(n, "麥角酸", 1), U(n, "朱總理", 1), U(n, "江八点", 1), U(n, "驶你爸", 1), 
U(n, "孫中山", 1), U(n, "屌人也", 1), U(n, "干女也", 1), U(n, "国管局", 1), U(n, "郭金龙", 1), 
U(n, "龐建國", 1), U(n, "許家屯", 1), U(n, "神經病", 1), U(n, "埃斯万", 1), U(n, "洪哲胜", 1), 
U(n, "江賊民", 1), U(n, "flg", 1), U(n, "蔡啓芳", 1), U(n, "范长龙", 1), U(n, "邓笑贫", 1), 
U(n, "陳獨秀", 1), U(n, "克勞森", 1), U(n, "习大大", 1), U(n, "驶你娘", 1), U(n, "运营商", 1), 
U(n, "赫蒂彻", 1), U(n, "法图麦", 1), U(n, "啪啪啪", 1), U(n, "封从德", 1), U(n, "莫偉强", 1), 
U(n, "賈慶林", 1), U(n, "鄭麗文", 1), U(n, "吳邦國", 1), U(n, "共青团", 1), U(n, "黄岩岛", 1), 
U(n, "买财富", 1), U(n, "a 片", 1), U(n, "上海帮", 1), U(n, "运营长", 1), U(n, "麻黄碱", 1), 
U(n, "日本狗", 1), U(n, "中联部", 1), U(n, "柯建铭", 1), U(n, "薩達姆", 1), U(n, "str", 1), 
U(n, "摩门教", 1), U(n, "习进平", 1), U(n, "台独靠", 1), U(n, "财政部", 1), U(n, "啊无卵", 1), 
U(n, "战牌靠", 1), U(n, "草拟妈", 1), U(n, "虎门靠", 1), U(n, "私?服", 1), U(n, "马克思", 1), 
U(n, "小参考", 1), U(n, "习近平", 1), U(n, "叶剑英", 1), U(n, "狗日靠", 1), U(n, "馬英九", 1), 
U(n, "黑手黨", 1), U(n, "高自联", 1), U(n, "南蛮子", 1), U(n, "jb靠", 1), U(n, "妈逼靠", 1), 
U(n, "离长春", 1), U(n, "罗福助", 1), U(n, "卖号靠", 1), U(n, "八 仙", 1), U(n, "日他娘", 1), 
U(n, "私/服", 1), U(n, "不玩了", 1), U(n, "装逼靠", 1), U(n, "李登辉", 1), U(n, "李兴平", 1), 
U(n, "反人類", 1), U(n, "馬永成", 1), U(n, "陈唐山", 1), U(n, "李先念", 1), U(n, "埃斯萬", 1), 
U(n, "混沌诀", 1), U(n, "羅福助", 1), U(n, "運營商", 1), U(n, "路甬祥", 1), U(n, "楊月清", 1), 
U(n, "無幫國", 1), U(n, "劉俊國", 1), U(n, "何候华", 1), U(n, "中央社", 1), U(n, "你媽的", 1), 
U(n, "撸管子", 1), U(n, "她妈靠", 1), U(n, "干死你", 1), U(n, "找小姐", 1), U(n, "拔出來", 1), 
U(n, "趙紫陽", 1), U(n, "他馬的", 1), U(n, "呂秀蓮", 1), U(n, "聖射手", 1), U(n, "陳曉甯", 1), 
U(n, "周总理", 1), U(n, "金正恩", 1), U(n, "淘宝靠", 1), U(n, "連勝文", 1), U(n, "四川獨", 1), 
U(n, "僵賊民", 1), U(n, "江澤慧", 1), U(n, "膏藥旗", 1), U(n, "顔慶章", 1), U(n, "賈育台", 1), 
U(n, "鄺錦文", 1), U(n, "王秀麗", 1), U(n, "妳媽的", 1), U(n, "插後庭", 1), U(n, "紅燈區", 1), 
U(n, "草擬媽", 1), U(n, "k他命", 1), U(n, "工自聯", 1), U(n, "发论功", 1), U(n, "u-r", 1), 
U(n, "日你娘", 1), U(n, "贱bi", 1), U(n, "呼喊派", 1), U(n, "周小康", 1), U(n, "習遠平", 1), 
U(n, "罗荣桓", 1), U(n, "迷奸药", 1), U(n, "銀民吧", 1), U(n, "三k黨", 1), U(n, "反封鎖", 1), 
U(n, "瘸腿帮", 1), U(n, "万晓东", 1), U(n, "陳學聖", 1), U(n, "李克強", 1), U(n, "郭伯雄", 1), 
U(n, "法掄功", 1), U(n, "严隽琪", 1), U(n, "大奶媽", 1), U(n, "a4u", 1), U(n, "检察院", 1), 
U(n, "六。四", 1), U(n, "尤比亚", 1), U(n, "顔清標", 1), U(n, "程鐵軍", 1), U(n, "黑手党", 1), 
U(n, "那嗎b", 1), U(n, "陳博志", 1), U(n, "江獨裁", 1), U(n, "蘇紹智", 1), U(n, "自民党", 1), 
U(n, "教育部", 1), U(n, "李洪志", 1), U(n, "陈独秀", 1), U(n, "新唐人", 1), U(n, "孙逸仙", 1), 
U(n, "奧利弗", 1), U(n, "摸咪咪", 1), U(n, "我操靠", 1), U(n, "李大钊", 1), U(n, "江则民", 1), 
U(n, "性交课", 1), U(n, "新光明", 1), U(n, "性交图", 1), U(n, "妈白勺", 1), U(n, "你老味", 1), 
U(n, "三陪女", 1), U(n, "龜兒子", 1), U(n, "克林顿", 1), U(n, "核武器", 1), U(n, "cao", 1), 
U(n, "杜鲁门", 1), U(n, "丁關根", 1), U(n, "滾那嗎", 1), U(n, "吃大便", 1), U(n, "干妳妈", 1), 
U(n, "吴邦国", 1), U(n, "國安局", 1), U(n, "kao", 1), U(n, "古柯碱", 1), U(n, "核潛艇", 1), 
U(n, "张博雅", 1), U(n, "甲庆林", 1), U(n, "一贯道", 1), U(n, "王洪文", 1), U(n, "蘇貞昌", 1), 
U(n, "栗战书", 1), U(n, "你妈逼", 1), U(n, "萨达姆", 1), U(n, "国资委", 1), U(n, "盗窃犯", 1), 
U(n, "国安局", 1), U(n, "渣波波", 1), U(n, "孟建柱", 1), U(n, "钓鱼岛", 1), U(n, "可卡因", 1), 
U(n, "叼你妈", 1), U(n, "和锅枪", 1), U(n, "馬三家", 1), U(n, "習大大", 1), U(n, "吳志芳", 1), 
U(n, "劉永川", 1), U(n, "李铁映", 1), U(n, "法~论", 1), U(n, "人民報", 1), U(n, "我操你", 1), 
U(n, "朱镕基", 1), U(n, "华建敏", 1), U(n, "摇头玩", 1), U(n, "性無能", 1), U(n, "小靈通", 1), 
U(n, "朱容鸡", 1), U(n, "彭德怀", 1), U(n, "妳妈的", 1), U(n, "李宏志", 1), U(n, "胡乔木", 1), 
U(n, "吴育升", 1), U(n, "天安门", 1), U(n, "陳唐山", 1), U(n, "黃伯源", 1), U(n, "公安部", 1), 
U(n, "全能教", 1), U(n, "证监会", 1), U(n, "十八摸", 1), U(n, "朱溶剂", 1), U(n, "贺国强", 1), 
U(n, "贝尤尔", 1), U(n, "凸肉优", 1), U(n, "吳百益", 1), U(n, "简肇栋", 1), U(n, "张高丽", 1), 
U(n, "冯东海", 1), U(n, "黨主席", 1), U(n, "陈宗兴", 1), U(n, "广电局", 1), U(n, "他母親", 1), 
U(n, "蘇南成", 1), U(n, "陳總統", 1), U(n, "三級片", 1), U(n, "朱总理", 1), U(n, "黄色靠", 1), 
U(n, "雅蠛蝶", 1), U(n, "騷卵 ", 1), U(n, "阿萊娜", 1), U(n, "去她妈", 1), U(n, "操gm", 1), 
U(n, "江泽民", 1), U(n, "陳希同", 1), U(n, "賀國强", 1), U(n, "東洋屄", 1), U(n, "人代会", 1), 
U(n, "劉文勝", 1), U(n, "黄大仙", 1), U(n, "胡喬木", 1), U(n, "国务院", 1), U(n, "賴士葆", 1), 
U(n, "王樂泉", 1), U(n, "連惠心", 1), U(n, "德維爾", 1), U(n, "游锡坤", 1), U(n, "草你媽", 1), 
U(n, "黄孟复", 1), U(n, "毛一鲜", 1), U(n, "日x媽", 1), U(n, "民主墻", 1), U(n, "孫政才", 1), 
U(n, "删 号", 1), U(n, "謝選駿", 1), U(n, "李岚清", 1), U(n, "辛灝年", 1), U(n, "新生网", 1), 
U(n, "爆乳娘", 1), U(n, "干你妈", 1), U(n, "测绘局", 1), U(n, "閻明複", 1), U(n, "张筱雨", 1), 
U(n, "楊懷安", 1), U(n, "傅作義", 1), U(n, "色情靠", 1), U(n, "搖頭丸", 1), U(n, "幹你媽", 1), 
U(n, "江独裁", 1), U(n, "fv(", 1), U(n, "高麗朴", 1), U(n, "计生委", 1), U(n, "趙品潞", 1), 
U(n, "鄭運鵬", 1), U(n, "朱鳳芝", 1), U(n, "楊建利", 1), U(n, "法謫功", 1), U(n, "操他妈", 1), 
U(n, "日你妈", 1), U(n, "瘟家宝", 1), U(n, "鲍岳桥", 1), U(n, "劉凱中", 1), U(n, "易丹軒", 1), 
U(n, "金泽辰", 1), U(n, "双十节", 1), U(n, "韩启德", 1), U(n, "瑪麗亞", 1), U(n, "罗礼诗", 1), 
U(n, "戴维教", 1), U(n, "18禁", 1), U(n, "戴相龍", 1), U(n, "ai滋", 1), U(n, "保监会", 1), 
U(n, "令计划", 1), U(n, "方励之", 1), U(n, "钓鱼台", 1), U(n, "刘凯中", 1), U(n, "多人輪", 1), 
U(n, "伊斯兰", 1), U(n, "发伦功", 1), U(n, "玛雅网", 1), U(n, "ice", 1), U(n, "她妈的", 1), 
U(n, "产权局", 1), U(n, "王潤生", 1), U(n, "贺过墙", 1), U(n, "威而柔", 1), U(n, "幹bi", 1), 
U(n, "藏青会", 1), U(n, "外專局", 1), U(n, "龟儿子", 1), U(n, "海洋局", 1), U(n, "淫驢屯", 1), 
U(n, "8 仙", 1), U(n, "国防部", 1), U(n, "孫大千", 1), U(n, "假青林", 1), U(n, "江折民", 1), 
U(n, "馒头屄", 1), U(n, "大史紀", 1), U(n, "溫家保", 1), U(n, "共产党", 1), U(n, "艾麗絲", 1), 
U(n, "江核心", 1), U(n, "江择民", 1), U(n, "江猪媳", 1), U(n, "酱猪媳", 1), U(n, "蒋介石", 1), 
U(n, "臭化西", 1), U(n, "可卡叶", 1), U(n, "李弘旨", 1), U(n, "胡志明", 1), U(n, "小鶏鶏", 1), 
U(n, "朱駿 ", 1), U(n, "黃大仙", 1), U(n, "六.四", 1), U(n, "謝長廷", 1), U(n, "曹建明", 1), 
U(n, "李旺阳", 1), U(n, "靠你妈", 1), U(n, "高治联", 1), U(n, "六-四", 1), U(n, "林信義", 1), 
U(n, "交通部", 1), U(n, "麻醉枪", 1), U(n, "阿莱娜", 1), U(n, "凸肉優", 1), U(n, "鲍威尔", 1), 
U(n, "趙曉微", 1), U(n, "教养院", 1), U(n, "威而钢", 1), U(n, "色窝窝", 1), U(n, "朱容基", 1), 
U(n, "李建国", 1), U(n, "劉曉波", 1), U(n, "彭丽媛", 1), U(n, "嚴家祺", 1), U(n, "王宝森", 1), 
U(n, "兴奋剂", 1), U(n, "吳學燦", 1), U(n, "铁道部", 1), U(n, "大史记", 1), U(n, "龟孙子", 1), 
U(n, "幹拎娘", 1), U(n, "去妳的", 1), U(n, "统计局", 1), U(n, "赵晓微", 1), U(n, "萌大奶", 1), 
U(n, "氣象局", 1), U(n, "醬猪媳", 1), U(n, "删号靠", 1), U(n, "死gd", 1), U(n, "去你妈", 1), 
U(n, "死全家", 1), U(n, "吳學璨", 1), U(n, "温总理", 1), U(n, "李長春", 1), U(n, "關卓中", 1), 
U(n, "外-挂", 1), U(n, "盜竊犯", 1), U(n, "粮食局", 1), U(n, "吳方城", 1), U(n, "国民党", 1), 
U(n, "李老師", 1), U(n, "姬胜德", 1), U(n, "黃慈萍", 1), U(n, "猪聋畸", 1), U(n, "真善忍", 1), 
U(n, "司徒華", 1), U(n, "布雷尔", 1), U(n, "邮政局", 1), U(n, "碧香亭", 1), U(n, "回良玉", 1), 
U(n, "狗日的", 1), U(n, "成人片", 1), U(n, "克萊特", 1), U(n, "蘇菲爾", 1), U(n, "麻醉药", 1), 
U(n, "陈良宇", 1), U(n, "林业局", 1), U(n, "何厚铧", 1), U(n, "董文华", 1), U(n, "法抡功", 1), 
U(n, "大会堂", 1), U(n, "张朝阳", 1), U(n, "u/r", 1), U(n, "肘永康", 1), U(n, "建设部", 1), 
U(n, "红灯区", 1), U(n, "超78", 1), U(n, "柯賜海", 1), U(n, "张清芳", 1), U(n, "u r", 1), 
n)), U(w, 3, (U(o = {}, "性爱擂台", 1), U(o, "激情貼圖", 1), U(o, "龍火之心", 1), U(o, "誘色uu", 1), 
U(o, "cao你", 1), U(o, "遠程偷拍", 1), U(o, "時代論壇", 1), U(o, "那娘錯比", 1), U(o, "媚藥少年", 1), 
U(o, "黄色电影", 1), U(o, "出售手枪", 1), U(o, "美腿絲足", 1), U(o, "免費a片", 1), U(o, "色狼論壇", 1), 
U(o, "洗肠射尿", 1), U(o, "達賴喇嘛", 1), U(o, "淫語連連", 1), U(o, "橋侵襲兵", 1), U(o, "日你妈靠", 1), 
U(o, "妩媚挑逗", 1), U(o, "两个中国", 1), U(o, "滾那嗎b", 1), U(o, "西藏独立", 1), U(o, "口交放尿", 1), 
U(o, "阴小撕大", 1), U(o, "鹿城娛樂", 1), U(o, "生奸内射", 1), U(o, "陰部特寫", 1), U(o, "新闻管制", 1), 
U(o, "无码精选", 1), U(o, "裸體少婦", 1), U(o, "西哈努克", 1), U(o, "擊倒圖騰", 1), U(o, "激情裸体", 1), 
U(o, "游蕩爪牙", 1), U(o, "亚历山大", 1), U(o, "sm女王", 1), U(o, "分裂祖国", 1), U(o, "骚妇露逼", 1), 
U(o, "血腥圖片", 1), U(o, "插那嗎b", 1), U(o, "口爆吞精", 1), U(o, "先奸后杀", 1), U(o, "淫水愛液", 1), 
U(o, "口内爆射", 1), U(o, "就去诱惑", 1), U(o, "激情裸體", 1), U(o, "夫妻亂交", 1), U(o, "江泽民靠", 1), 
U(o, "日本骚货", 1), U(o, "欲仙欲浪", 1), U(o, "操穴噴水", 1), U(o, "生奸內射", 1), U(o, "乳此豐滿", 1), 
U(o, "勾魂少妇", 1), U(o, "槍決女犯", 1), U(o, "透视眼镜", 1), U(o, "下流地帶", 1), U(o, "三去车仑", 1), 
U(o, "新华举报", 1), U(o, "時事論壇", 1), U(o, "插入内射", 1), U(o, "奶挺臀翹", 1), U(o, "精液榨取", 1), 
U(o, "水去車侖", 1), U(o, "高薪養廉", 1), U(o, "魅惑巨乳", 1), U(o, "李巨集志", 1), U(o, "集體性愛", 1), 
U(o, "删 号靠", 1), U(o, "mm美圖", 1), U(o, "交換夫妻", 1), U(o, "清晰內射", 1), U(o, "安非他命", 1), 
U(o, "嘻遊中國", 1), U(o, "一黨專政", 1), U(o, "虚弱图腾", 1), U(o, "紅炎猛獸", 1), U(o, "八九風波", 1), 
U(o, "淫戰群p", 1), U(o, "激情小说", 1), U(o, "男女交歡", 1), U(o, "默罕默德", 1), U(o, "人妻交換", 1), 
U(o, "台湾民国", 1), U(o, "摸你鶏巴", 1), U(o, "东突独立", 1), U(o, "輕舟快訊", 1), U(o, "辦理證件", 1), 
U(o, "共青团员", 1), U(o, "昏迷圖騰", 1), U(o, "中華大衆", 1), U(o, "大法弟子", 1), U(o, "透视软件", 1), 
U(o, "色情电影", 1), U(o, "毒龙舔脚", 1), U(o, "六四真相", 1), U(o, "奶挺臀翘", 1), U(o, "插那吗逼", 1), 
U(o, "國家民委", 1), U(o, "西藏獨立", 1), U(o, "妈卖妈屁", 1), U(o, "操你妈屄", 1), U(o, "援交薄碼", 1), 
U(o, "肛门喷水", 1), U(o, "一党专政", 1), U(o, "异议人士", 1), U(o, "無碼絲襪", 1), U(o, "极品奶妹", 1), 
U(o, "萨马兰奇", 1), U(o, "一黨專制", 1), U(o, "莫索里尼", 1), U(o, "色色成人", 1), U(o, "环保总局", 1), 
U(o, "根正苗红", 1), U(o, "激情電影", 1), U(o, "宝石商人", 1), U(o, "輿論反制", 1), U(o, "剛比樣子", 1), 
U(o, "法輪大法", 1), U(o, "东条英机", 1), U(o, "damm", 1), U(o, "全国两会", 1), U(o, "官商勾結", 1), 
U(o, "黑白無常", 1), U(o, "两岸关系", 1), U(o, "妹妹阴毛", 1), U(o, "出售假币", 1), U(o, "熟女亂倫", 1), 
U(o, "做爱电影", 1), U(o, "帝国主义", 1), U(o, "色97愛", 1), U(o, "粉飾太平", 1), U(o, "淫师荡母", 1), 
U(o, "女马白勺", 1), U(o, "毒龍舔腳", 1), U(o, "針孔偷拍", 1), U(o, "连続失禁", 1), U(o, "深爱色色", 1), 
U(o, "戳那吗逼", 1), U(o, "騷浪美女", 1), U(o, "一邊一國", 1), U(o, "巨炮兵团", 1), U(o, "干你老比", 1), 
U(o, "dick", 1), U(o, "奸夫淫妇", 1), U(o, "伊莎贝尔", 1), U(o, "大力抽送", 1), U(o, "現金交易", 1), 
U(o, "四川独立", 1), U(o, "淫亂潮吹", 1), U(o, "操那嗎比", 1), U(o, "中毒圖騰", 1), U(o, "色情论坛", 1), 
U(o, "高清性爱", 1), U(o, "暗黑法師", 1), U(o, "巨炮兵團", 1), U(o, "系统讯息", 1), U(o, "你二大爷", 1), 
U(o, "歌功頌德", 1), U(o, "史萊姆王", 1), U(o, "硬直图腾", 1), U(o, "人體攝影", 1), U(o, "丝袜写真", 1), 
U(o, "乳波臀浪", 1), U(o, "臺灣帝國", 1), U(o, "密穴贴图", 1), U(o, "奴隸調教", 1), U(o, "裸露自拍", 1), 
U(o, "人民银行", 1), U(o, "杀你一家", 1), U(o, "the9", 1), U(o, "jinv", 1), U(o, "靖国神社", 1), 
U(o, "東北獨立", 1), U(o, "无码炮图", 1), U(o, "蒙古達子", 1), U(o, "国家主席", 1), U(o, "代表大会", 1), 
U(o, "紧缚凌辱", 1), U(o, "春光外瀉", 1), U(o, "骚b熟女", 1), U(o, "姦淫電車", 1), U(o, "一夜性网", 1), 
U(o, "异见人士", 1), U(o, "成人小說", 1), U(o, "日你爷爷", 1), U(o, "骚浪美女", 1), U(o, "色情工廠", 1), 
U(o, "國家機密", 1), U(o, "自殺指南", 1), U(o, "aids", 1), U(o, "日本帝国", 1), U(o, "全國人大", 1), 
U(o, "全国人大", 1), U(o, "做爱自拍", 1), U(o, "以莖至洞", 1), U(o, "窃听器材", 1), U(o, "双峰微颤", 1), 
U(o, "團長戈登", 1), U(o, "少妇偷情", 1), U(o, "共產主義", 1), U(o, "东院看守", 1), U(o, "猛操狂射", 1), 
U(o, "骚穴怒放", 1), U(o, "電視流氓", 1), U(o, "激情交友", 1), U(o, "事实独立", 1), U(o, "淫聲浪語", 1), 
U(o, "击倒图腾", 1), U(o, "赤裸天使", 1), U(o, "成人a片", 1), U(o, "新聞管制", 1), U(o, "幹你媽b", 1), 
U(o, "信用危机", 1), U(o, "嫩穴肉缝", 1), U(o, "酒店援交", 1), U(o, "毀滅步兵", 1), U(o, "雙龍入洞", 1), 
U(o, "基地組織", 1), U(o, "沉睡圖騰", 1), U(o, "街头扒衣", 1), U(o, "插那吗b", 1), U(o, "枪决女犯", 1), 
U(o, "新疆獨立", 1), U(o, "內射美婦", 1), U(o, "毀滅射手", 1), U(o, "乳此丰满", 1), U(o, "法轮大法", 1), 
U(o, "舆论钳制", 1), U(o, "天皇陛下", 1), U(o, "青天白日", 1), U(o, "wuyi", 1), U(o, "交换夫妻", 1), 
U(o, "獨裁政治", 1), U(o, "淫絲蕩襪", 1), U(o, "計牌軟體", 1), U(o, "戳那吗b", 1), U(o, "诱惑视频", 1), 
U(o, "极品波神", 1), U(o, "sm調教", 1), U(o, "欧美无套", 1), U(o, "肉感炮友", 1), U(o, "传染性病", 1), 
U(o, "生徒胸觸", 1), U(o, "爽死我了", 1), U(o, "cc小雪", 1), U(o, "泡沫经济", 1), U(o, "騷女叫春", 1), 
U(o, "赤色骑士", 1), U(o, "互舔淫穴", 1), U(o, "伊莎貝爾", 1), U(o, "空氣精靈", 1), U(o, "三民主义", 1), 
U(o, "明星淫图", 1), U(o, "洗腸射尿", 1), U(o, "错那吗比", 1), U(o, "寶石商人", 1), U(o, "办理文凭", 1), 
U(o, "中俄边界", 1), U(o, "李肇星务", 1), U(o, "少女被插", 1), U(o, "美乳美穴", 1), U(o, "奇淫寶鑒", 1), 
U(o, "争鸣论坛", 1), U(o, "中共中央", 1), U(o, "天鹅之旅", 1), U(o, "草你妈靠", 1), U(o, "shit", 1), 
U(o, "桃园蜜洞", 1), U(o, "幹妳老母", 1), U(o, "熟女顏射", 1), U(o, "骚女叫春", 1), U(o, "美国参考", 1), 
U(o, "白嫩骚妇", 1), U(o, "錯那嗎比", 1), U(o, "舆论反制", 1), U(o, "放蕩少婦", 1), U(o, "東條英機", 1), 
U(o, "中華時事", 1), U(o, "淫声浪语", 1), U(o, "性交吞精", 1), U(o, "奴隶调教", 1), U(o, "惹火身材", 1), 
U(o, "鬼畜轮奸", 1), U(o, "淫女炮圖", 1), U(o, "日本熟母", 1), U(o, "無碼電影", 1), U(o, "乳此丝袜", 1), 
U(o, "巧淫奸戏", 1), U(o, "管理人员", 1), U(o, "经典炮图", 1), U(o, "無碼精選", 1), U(o, "台湾独立", 1), 
U(o, "操b指南", 1), U(o, "臺灣島國", 1), U(o, "人妻做爱", 1), U(o, "自杀手册", 1), U(o, "自由之门", 1), 
U(o, "女馬白勺", 1), U(o, "卖号  ", 1), U(o, "时事论坛", 1), U(o, "槍支彈藥", 1), U(o, "台獨分子", 1), 
U(o, "女基督派", 1), U(o, "诱色uu", 1), U(o, "誘惑視頻", 1), U(o, "中年美妇", 1), U(o, "天天情色", 1), 
U(o, "泡沫經濟", 1), U(o, "人民真實", 1), U(o, "黑白无常", 1), U(o, "凱爾雷斯", 1), U(o, "日本騷貨", 1), 
U(o, "歌功颂德", 1), U(o, "国家安全", 1), U(o, "13点靠", 1), U(o, "轻舟快讯", 1), U(o, "东突组织", 1), 
U(o, "三个代婊", 1), U(o, "无套自拍", 1), U(o, "斯皮尔德", 1), U(o, "异見人士", 1), U(o, "我妳老爸", 1), 
U(o, "群交乱舞", 1), U(o, "偷窥视频", 1), U(o, "西洋美女", 1), U(o, "回民暴動", 1), U(o, "鹿城娱乐", 1), 
U(o, "國產騷貨", 1), U(o, "冈村秀树", 1), U(o, "game", 1), U(o, "美體豔姿", 1), U(o, "廁所偷拍", 1), 
U(o, "大膽出位", 1), U(o, "干你妈逼", 1), U(o, "极品波霸", 1), U(o, "风骚欲女", 1), U(o, "中华讲清", 1), 
U(o, "巨槌騎兵", 1), U(o, "人民廣場", 1), U(o, "毁灭骑士", 1), U(o, "shyt", 1), U(o, "三去車侖", 1), 
U(o, "強制浣腸", 1), U(o, "淫女炮图", 1), U(o, "自慰抠穴", 1), U(o, "希望之聲", 1), U(o, "美国之音", 1), 
U(o, "插那吗比", 1), U(o, "婊子养的", 1), U(o, "母女双飞", 1), U(o, "安倍晋三", 1), U(o, "前凸后翘", 1), 
U(o, "裸体少妇", 1), U(o, "莖候佳陰", 1), U(o, "台湾政府", 1), U(o, "sh!t", 1), U(o, "新疆恐怖", 1), 
U(o, "成人电影", 1), U(o, "西藏天葬", 1), U(o, "抽你丫的", 1), U(o, "軍長髮威", 1), U(o, "無碼長片", 1), 
U(o, "自杀指南", 1), U(o, "国产嫖娼", 1), U(o, "湿身诱惑", 1), U(o, "美女走光", 1), U(o, "淫水漣漣", 1), 
U(o, "人大代表", 1), U(o, "白虎阴穴", 1), U(o, "東突獨立", 1), U(o, "瘋狂抽送", 1), U(o, "巨槌骑兵", 1), 
U(o, "爱色cc", 1), U(o, "中國論壇", 1), U(o, "新华内情", 1), U(o, "双龙入洞", 1), U(o, "u-r靠", 1), 
U(o, "顏射自拍", 1), U(o, "性愛圖庫", 1), U(o, "入穴一游", 1), U(o, "一边一国", 1), U(o, "极品黑丝", 1), 
U(o, "东方时空", 1), U(o, "换妻杂交", 1), U(o, "中華講清", 1), U(o, "透視軟體", 1), U(o, "無碼做愛", 1), 
U(o, "错那吗b", 1), U(o, "浴室自拍", 1), U(o, "妹妹騷圖", 1), U(o, "帶套肛交", 1), U(o, "監禁陵辱", 1), 
U(o, "人妻熟女", 1), U(o, "狗操卖逼", 1), U(o, "遊蕩爪牙", 1), U(o, "白浆四溅", 1), U(o, "大麻樹脂", 1), 
U(o, "三个代表", 1), U(o, "爭鳴論壇", 1), U(o, "新闻出版", 1), U(o, "麻醉鋼槍", 1), U(o, "淫欲日本", 1), 
U(o, "奸淫电车", 1), U(o, "男女交欢", 1), U(o, "尖阁列岛", 1), U(o, "淫色贴图", 1), U(o, "崗哨士兵", 1), 
U(o, "木子论坛", 1), U(o, "发奖使者", 1), U(o, "屄屄特寫", 1), U(o, "愛妻淫穴", 1), U(o, "国产偷拍", 1), 
U(o, "民意论坛", 1), U(o, "男女蒲典", 1), U(o, "u r靠", 1), U(o, "新疆独立", 1), U(o, "暴风亡灵", 1), 
U(o, "大家論壇", 1), U(o, "就去色色", 1), U(o, "美乳斗艳", 1), U(o, "性感乳娘", 1), U(o, "人妻自拍", 1), 
U(o, "日本有码", 1), U(o, "外交論壇", 1), U(o, "资本主义", 1), U(o, "多维新闻", 1), U(o, "超毛大鮑", 1), 
U(o, "人妻做愛", 1), U(o, "集体性爱", 1), U(o, "无码h漫", 1), U(o, "官商勾结", 1), U(o, "东热空姐", 1), 
U(o, "damn", 1), U(o, "人民日报", 1), U(o, "拍肩神药", 1), U(o, "成人社区", 1), U(o, "那吗老比", 1), 
U(o, "美乳鬥豔", 1), U(o, "數據中國", 1), U(o, "牛头马面", 1), U(o, "強硬發言", 1), U(o, "輿論鉗制", 1), 
U(o, "硬直圖騰", 1), U(o, "厕所盗摄", 1), U(o, "isis", 1), U(o, "無套自拍", 1), U(o, "薩馬蘭奇", 1), 
U(o, "東亞病夫", 1), U(o, "性感妖娆", 1), U(o, "迷奸系列", 1), U(o, "嘻游中国", 1), U(o, "数据中国", 1), 
U(o, "侬着冈峦", 1), U(o, "淫丝荡袜", 1), U(o, "bao皮", 1), U(o, "達夫侍從", 1), U(o, "南華早報", 1), 
U(o, "月经不调", 1), U(o, "阿拉法特", 1), U(o, "色情電影", 1), U(o, "捏你鶏巴", 1), U(o, "免费a片", 1), 
U(o, "戳那吗比", 1), U(o, "卖国求荣", 1), U(o, "白液四溅", 1), U(o, "極品波霸", 1), U(o, "工作人员", 1), 
U(o, "偷窺視頻", 1), U(o, "豐唇豔姬", 1), U(o, "聖泉學淫", 1), U(o, "厕所偷拍", 1), U(o, "胡總書記", 1), 
U(o, "地下教會", 1), U(o, "无码淫漫", 1), U(o, "小姐兼职", 1), U(o, "出售假幣", 1), U(o, "驶你老师", 1), 
U(o, "紅色恐怖", 1), U(o, "絲襪高跟", 1), U(o, "红色恐怖", 1), U(o, "北京当局", 1), U(o, "白虎嫩b", 1), 
U(o, "色狼小说", 1), U(o, "淫亂診所", 1), U(o, "我要性交", 1), U(o, "兩會報道", 1), U(o, "叔嫂肉欲", 1), 
U(o, "成人文學", 1), U(o, "高潮集锦", 1), U(o, "本土無碼", 1), U(o, "本土无码", 1), U(o, "激情打炮", 1), 
U(o, "海关总署", 1), U(o, "占领中环", 1), U(o, "电视流氓", 1), U(o, "無套內射", 1), U(o, "無碼無套", 1), 
U(o, "淫水涟涟", 1), U(o, "一党专制", 1), U(o, "新華內情", 1), U(o, "台獨萬歲", 1), U(o, "联易互动", 1), 
U(o, "古龍祭壇", 1), U(o, "東院看守", 1), U(o, "马卖马屁", 1), U(o, "大胆少女", 1), U(o, "国务委员", 1), 
U(o, "干妳老母", 1), U(o, "乳此絲襪", 1), U(o, "操你妈靠", 1), U(o, "军长发威", 1), U(o, "李月月鳥", 1), 
U(o, "做愛自拍", 1), U(o, "戈瑞爾德", 1), U(o, "调教虐待", 1), U(o, "异型叛军", 1), U(o, "自治機關", 1), 
U(o, "淫亂熟女", 1), U(o, "制服美婦", 1), U(o, "头领奥马", 1), U(o, "不灭帝王", 1), U(o, "戳那嗎比", 1), 
U(o, "妳老母的", 1), U(o, "東方時空", 1), U(o, "同城约炮", 1), U(o, "毁灭步兵", 1), U(o, "幹你老母", 1), 
U(o, "阿彌陀佛", 1), U(o, "桥侵袭兵", 1), U(o, "成人論壇", 1), U(o, "操那嗎b", 1), U(o, "去你媽的", 1), 
U(o, "插那嗎比", 1), U(o, "美國之音", 1), U(o, "国产骚货", 1), U(o, "恐怖份子", 1), U(o, "日本鬼子", 1), 
U(o, "插你爺爺", 1), U(o, "美國參考", 1), U(o, "插那嗎逼", 1), U(o, "翹臀嫩逼", 1), U(o, "华夏文摘", 1), 
U(o, "sm调教", 1), U(o, "燕玲論壇", 1), U(o, "特别公告", 1), U(o, "民意論壇", 1), U(o, "恶搞晚会", 1), 
U(o, "熟女乱伦", 1), U(o, "阴阜高耸", 1), U(o, "新聞封鎖", 1), U(o, "迪裡夏提", 1), U(o, "賣党求榮", 1), 
U(o, "自慰摳穴", 1), U(o, "風騷欲女", 1), U(o, "台独分子", 1), U(o, "激情贴图", 1), U(o, "母女雙飛", 1), 
U(o, "计牌软件", 1), U(o, "成人社區", 1), U(o, "国产无码", 1), U(o, "黃色電影", 1), U(o, "本?拉登", 1), 
U(o, "你爺爺的", 1), U(o, "恐怖主义", 1), U(o, "兩腿之間", 1), U(o, "軍國主義", 1), U(o, "春光外泻", 1), 
U(o, "共产主义", 1), U(o, "肛門噴水", 1), U(o, "肉丝裤袜", 1), U(o, "艳舞淫业", 1), U(o, "塞你老师", 1), 
U(o, "走光偷拍", 1), U(o, "燕玲论坛", 1), U(o, "成人百强", 1), U(o, "做愛電影", 1), U(o, "弓雖女幹", 1), 
U(o, "童顏巨乳", 1), U(o, "資料中國", 1), U(o, "东北独立", 1), U(o, "值勤账号", 1), U(o, "你二大爺", 1), 
U(o, "辅助程序", 1), U(o, "錯那嗎逼", 1), U(o, "6?4靠", 1), U(o, "自治机关", 1), U(o, "莫索裡尼", 1), 
U(o, "火辣图片", 1), U(o, "北京當局", 1), U(o, "中华时事", 1), U(o, "稅務總局", 1), U(o, "國際法院", 1), 
U(o, "偵探設備", 1), U(o, "殺你一家", 1), U(o, "陰道圖片", 1), U(o, "迪裏夏提", 1), U(o, "情色导航", 1), 
U(o, "黃色網站", 1), U(o, "中国论坛", 1), U(o, "姦夫淫婦", 1), U(o, "濕身誘惑", 1), U(o, "拍肩神藥", 1), 
U(o, "善惡有報", 1), U(o, "色情論壇", 1), U(o, "性感妖嬈", 1), U(o, "暗黑法师", 1), U(o, "掰穴打洞", 1), 
U(o, "sega", 1), U(o, "风骚淫荡", 1), U(o, "观音法门", 1), U(o, "墨索里尼", 1), U(o, "激情聊天", 1), 
U(o, "内射美妇", 1), U(o, "一中一台", 1), U(o, "高麗棒子", 1), U(o, "共产党靠", 1), U(o, "廁所盜攝", 1), 
U(o, "嫵媚挑逗", 1), U(o, "空姐性交", 1), U(o, "八九风波", 1), U(o, "草的你妈", 1), U(o, "中俄邊界", 1), 
U(o, "國家安全", 1), U(o, "服務管理", 1), U(o, "爆乳人妻", 1), U(o, "黄金幼龙", 1), U(o, "恥辱輪奸", 1), 
U(o, "善恶有报", 1), U(o, "好色cc", 1), U(o, "偷窥图片", 1), U(o, "火辣圖片", 1), U(o, "鬥士霍克", 1), 
U(o, "兩會新聞", 1), U(o, "塞你老師", 1), U(o, "www.", 1), U(o, "迪里夏提", 1), U(o, "svdc", 1), 
U(o, "护士诱惑", 1), U(o, "緊縛淩辱", 1), U(o, "額爾德尼", 1), U(o, "轮奸内射", 1), U(o, "nmis", 1), 
U(o, "淫乱军团", 1), U(o, "炮友之家", 1), U(o, "mai骚", 1), U(o, "jiba", 1), U(o, "item", 1), 
U(o, "性戰擂臺", 1), U(o, "gan你", 1), U(o, "日本有碼", 1), U(o, "口內爆射", 1), U(o, "dafa", 1), 
U(o, "cha你", 1), U(o, "陰小撕大", 1), U(o, "昏迷图腾", 1), U(o, "luyi", 1), U(o, "岡村寧次", 1), 
U(o, "街頭對抗", 1), U(o, "新闻封锁", 1), U(o, "强硬发言", 1), U(o, "垃圾遊戲", 1), U(o, "自製手槍", 1), 
U(o, "自殺手冊", 1), U(o, "華夏文摘", 1), U(o, "投毒杀人", 1), U(o, "分裂中国", 1), U(o, "月經不調", 1), 
U(o, "caob", 1), U(o, "一國兩制", 1), U(o, "那嗎瘟比", 1), U(o, "系統訊息", 1), U(o, "五星紅旗", 1), 
U(o, "投毒殺人", 1), U(o, "岗哨士兵", 1), U(o, "扫黄打非", 1), U(o, "雙峰微顫", 1), U(o, "駛你老師", 1), 
U(o, "http", 1), U(o, "色情服務", 1), U(o, "三民主義", 1), U(o, "无码长片", 1), U(o, "巨乳素人", 1), 
U(o, "亞洲淫娃", 1), U(o, "三個代婊", 1), U(o, "警匪一家", 1), U(o, "賣國求榮", 1), U(o, "美体艳姿", 1), 
U(o, "浴室亂倫", 1), U(o, "无码无套", 1), U(o, "人民日報", 1), U(o, "竊聽器材", 1), U(o, "办理证件", 1), 
U(o, "日本灌腸", 1), U(o, "白虎少婦", 1), U(o, "蘋果日報", 1), U(o, "三個呆婊", 1), U(o, "儂著卵拋", 1), 
U(o, "馬賣馬屁", 1), U(o, "媽賣媽屁", 1), U(o, "我就去色", 1), U(o, "李巨集旨", 1), U(o, "高校骚乱", 1), 
U(o, "援交薄码", 1), U(o, "赤色騎士", 1), U(o, "官逼民反", 1), U(o, "亚洲有码", 1), U(o, "高校騷亂", 1), 
U(o, "群奸轮射", 1), U(o, "援交自拍", 1), U(o, "高校暴亂", 1), U(o, "幹你媽逼", 1), U(o, "斧頭鐮刀", 1), 
U(o, "分裂祖國", 1), U(o, "旅馆自拍", 1), U(o, "旅館自拍", 1), U(o, "凯特切尔", 1), U(o, "戳那嗎b", 1), 
U(o, "外交论坛", 1), U(o, "冈村宁次", 1), U(o, "東突組織", 1), U(o, "大學騷亂", 1), U(o, "粗制嗎啡", 1), 
U(o, "前凸後翹", 1), U(o, "购买枪支", 1), U(o, "出售手槍", 1), U(o, "出售槍支", 1), U(o, "成人電影", 1), 
U(o, "草的你媽", 1), U(o, "操你媽屄", 1), U(o, "裙下风光", 1), U(o, "看牌软件", 1), U(o, "辦理文憑", 1), 
U(o, "吞精骚妹", 1), U(o, "出售帳號", 1), U(o, "絕望之地", 1), U(o, "中華大眾", 1), U(o, "fuck", 1), 
U(o, "侦探设备", 1), U(o, "木子論壇", 1), U(o, "異型叛軍", 1), U(o, "极品白虎", 1), U(o, "中华民国", 1), 
U(o, "異見人士", 1), U(o, "風雨神州", 1), U(o, "開放雜誌", 1), U(o, "輔助程式", 1), U(o, "服務天使", 1), 
U(o, "马勒戈壁", 1), U(o, "根正苗紅", 1), U(o, "侬着卵抛", 1), U(o, "狂乳激揺", 1), U(o, "成人图片", 1), 
U(o, "騷浪人妻", 1), U(o, "丰唇艳姬", 1), U(o, "放荡熟女", 1), U(o, "淫師蕩母", 1), U(o, "母子交歡", 1), 
U(o, "凯尔雷斯", 1), U(o, "換妻大會", 1), U(o, "色狼小說", 1), U(o, "安倍晉三", 1), U(o, "圣泉学淫", 1), 
U(o, "胸濤乳浪", 1), U(o, "古方迷香", 1), U(o, "rape", 1), U(o, "吞精騷妹", 1), U(o, "性爱插穴", 1), 
U(o, "白嫩騷婦", 1), U(o, "騷婦掰b", 1), U(o, "嫩穴肉縫", 1), U(o, "新疆分裂", 1), U(o, "國產偷拍", 1), 
U(o, "日本诡子", 1), U(o, "翹臀嫩穴", 1), U(o, "群奸輪射", 1), U(o, "花样性交", 1), U(o, "falu", 1), 
U(o, "凱特切爾", 1), U(o, "性感誘惑", 1), U(o, "經典炮圖", 1), U(o, "胡锦涛靠", 1), U(o, "nacb", 1), 
U(o, "動漫色圖", 1), U(o, "客户服务", 1), U(o, "火辣寫真", 1), U(o, "愛液橫流", 1), U(o, "無碼淫漫", 1), 
U(o, "曲線消魂", 1), U(o, "極品白虎", 1), U(o, "群奸亂交", 1), U(o, "護士誘惑", 1), U(o, "少婦偷情", 1), 
U(o, "性交無碼", 1), U(o, "制服誘惑", 1), U(o, "老少亂倫", 1), U(o, "淫水絲襪", 1), U(o, "性虎色網", 1), 
U(o, "歐美無套", 1), U(o, "歐美大乳", 1), U(o, "你姥姥的", 1), U(o, "高校暴乱", 1), U(o, "性感肉絲", 1), 
U(o, "成人小说", 1), U(o, "原味絲襪", 1), U(o, "亞洲有碼", 1), U(o, "骯髒美學", 1), U(o, "性愛圖片", 1), 
U(o, "絲襪足交", 1), U(o, "裙下風光", 1), U(o, "欲仙欲死", 1), U(o, "丁香社區", 1), U(o, "週六性吧", 1), 
U(o, "跨下呻吟", 1), U(o, "酥胸誘惑", 1), U(o, "客戶服務", 1), U(o, "淫色貼圖", 1), U(o, "u/r靠", 1), 
U(o, "异型叛軍", 1), U(o, "suck", 1), U(o, "極品黑絲", 1), U(o, "六月聯盟", 1), U(o, "密穴貼圖", 1), 
U(o, "成人百強", 1), U(o, "騷婦露逼", 1), U(o, "史莱姆王", 1), U(o, "熟婦騷器", 1), U(o, "多人性愛", 1), 
U(o, "雞巴暴脹", 1), U(o, "黄色网站", 1), U(o, "強姦處女", 1), U(o, "去你妈的", 1), U(o, "台湾帝国", 1), 
U(o, "塞你老母", 1), U(o, "淫亂軍團", 1), U(o, "掃黃打非", 1), U(o, "一夜性網", 1), U(o, "咬著龜頭", 1), 
U(o, "大波騷婦", 1), U(o, "原味丝袜", 1), U(o, "鬼畜輪奸", 1), U(o, "卖党求荣", 1), U(o, "絲襪淫婦", 1), 
U(o, "自拍寫真", 1), U(o, "中年美婦", 1), U(o, "豔情小說", 1), U(o, "东亚病夫", 1), U(o, "淫语连连", 1), 
U(o, "淫水橫溢", 1), U(o, "駛你老母", 1), U(o, "高潮白漿", 1), U(o, "强制浣肠", 1), U(o, "俏臀摄魄", 1), 
U(o, "蒙古獨立", 1), U(o, "無碼淫女", 1), U(o, "性愛擂臺", 1), U(o, "淫水丝袜", 1), U(o, "乳此動人", 1), 
U(o, "做愛圖片", 1), U(o, "走向圓滿", 1), U(o, "丁香社区", 1), U(o, "東熱空姐", 1), U(o, "赫魯雪夫", 1), 
U(o, "插入內射", 1), U(o, "test", 1), U(o, "淫水橫流", 1), U(o, "淫肉誘惑", 1), U(o, "國產av", 1), 
U(o, "陰阜高聳", 1), U(o, "淫水四溅", 1), U(o, "騷b熟女", 1), U(o, "疯狂抽送", 1), U(o, "乳此动人", 1), 
U(o, "輪奸內射", 1), U(o, "你爷爷的", 1), U(o, "北京之春", 1), U(o, "騷穴怒放", 1), U(o, "世界日报", 1), 
U(o, "八 仙靠", 1), U(o, "希望之声", 1), U(o, "激情潮噴", 1), U(o, "快樂av", 1), U(o, "中医药局", 1), 
U(o, "處女開包", 1), U(o, "國產無碼", 1), U(o, "調教虐待", 1), U(o, "淫水四濺", 1), U(o, "两会新闻", 1), 
U(o, "奇淫宝鉴", 1), U(o, "性愛插穴", 1), U(o, "系統公告", 1), U(o, "花樣性交", 1), U(o, "肉絲褲襪", 1), 
U(o, "茎候佳阴", 1), U(o, "sm援交", 1), U(o, "空虚之地", 1), U(o, "深愛色色", 1), U(o, "操那吗比", 1), 
U(o, "咪咪圖片", 1), U(o, "夫妻乱交", 1), U(o, "亞洲性虐", 1), U(o, "大家论坛", 1), U(o, "情色文學", 1), 
U(o, "操你爷爷", 1), U(o, "妹妹陰毛", 1), U(o, "巧淫奸戲", 1), U(o, "豔婦淫女", 1), U(o, "童颜巨乳", 1), 
U(o, "勾魂少婦", 1), U(o, "熟婦人妻", 1), U(o, "插穴止癢", 1), U(o, "人妻色誘", 1), U(o, "8?9靠", 1), 
U(o, "快乐av", 1), U(o, "东方闪电", 1), U(o, "dfdz", 1), U(o, "肛门拳交", 1), U(o, "蒙古独立", 1), 
U(o, "白漿四濺", 1), U(o, "淫亂工作", 1), U(o, "淫荡贵妇", 1), U(o, "生徒胸触", 1), U(o, "成人網站", 1), 
U(o, "淫蕩貴婦", 1), U(o, "3p炮图", 1), U(o, "cao靠", 1), U(o, "極品波神", 1), U(o, "桃園蜜洞", 1), 
U(o, "白液四濺", 1), U(o, "走向圆满", 1), U(o, "儂著岡巒", 1), U(o, "大膽少女", 1), U(o, "人體炸彈", 1), 
U(o, "近親相奸", 1), U(o, "水去车仑", 1), U(o, "东突暴动", 1), U(o, "靖國神社", 1), U(o, "未婚同居", 1), 
U(o, "淫妻交換", 1), U(o, "周六性吧", 1), U(o, "毀滅騎士", 1), U(o, "淫婦自慰", 1), U(o, "哈爾羅尼", 1), 
U(o, "时代论坛", 1), U(o, "3p炮圖", 1), U(o, "台独万岁", 1), U(o, "无码电影", 1), U(o, "淫獸學園", 1), 
U(o, "高潮集錦", 1), U(o, "驶你老母", 1), U(o, "高清性愛", 1), U(o, "明星淫圖", 1), U(o, "風騷淫蕩", 1), 
U(o, "税务总局", 1), U(o, "无码丝袜", 1), U(o, "国家民委", 1), U(o, "頭領奧馬", 1), U(o, "操你爺爺", 1), 
U(o, "狗娘养的", 1), U(o, "社会主义", 1), U(o, "中国之春", 1), U(o, "颜射自拍", 1), U(o, "蒙古韃子", 1), 
U(o, "近亲相奸", 1), U(o, "高薪养廉", 1), U(o, "fofg", 1), U(o, "十年动乱", 1), U(o, "释迦摩尼", 1), 
U(o, "敬国神社", 1), U(o, "中國和平", 1), U(o, "异議人士", 1), U(o, "统独论坛", 1), U(o, "性感肉丝", 1), 
U(o, "杀你全家", 1), U(o, "人民真实", 1), U(o, "他妈的靠", 1), U(o, "人性本色", 1), U(o, "翘臀嫩穴", 1), 
U(o, "空气精灵", 1), U(o, "蒙古鞑子", 1), U(o, "裙內偷拍", 1), U(o, "無碼h漫", 1), U(o, "南海仲裁", 1), 
U(o, "亚洲淫娃", 1), U(o, "服务管理", 1), U(o, "干你老母", 1), U(o, "piss", 1), U(o, "嫖妓指南", 1), 
U(o, "赤色战士", 1), U(o, "欢城互动", 1), U(o, "cunt", 1), U(o, "全國兩會", 1), U(o, "cdjp", 1), 
U(o, "豔舞淫業", 1), U(o, "白虎陰穴", 1), U(o, "石化圖騰", 1), U(o, "妖媚熟母", 1), U(o, "多维周刊", 1), 
U(o, "佔領中環", 1), U(o, "臺灣獨立", 1), U(o, "出售账号", 1), U(o, "滚那吗b", 1), U(o, "戈瑞尔德", 1), 
U(o, "白虎少妇", 1), U(o, "老少乱伦", 1), U(o, "无码做爱", 1), U(o, "人妻色诱", 1), U(o, "穆罕默德", 1), 
U(o, "追查国际", 1), U(o, "风雨神州", 1), U(o, "自拍美穴", 1), U(o, "六四運動", 1), U(o, "吸精少女", 1), 
U(o, "phuc", 1), U(o, "独裁政治", 1), U(o, "異議人士", 1), U(o, "欲火焚身", 1), U(o, "巴伦侍从", 1), 
U(o, "群交亂舞", 1), U(o, "以茎至洞", 1), U(o, "成人文学", 1), U(o, "母子奸情", 1), U(o, "光明日报", 1), 
U(o, "出售此号", 1), U(o, "制服美妇", 1), U(o, "弓虽女干", 1), U(o, "暴風亡靈", 1), U(o, "色情服务", 1), 
U(o, "戳那嗎逼", 1), U(o, "淫战群p", 1), U(o, "无码彩图", 1), U(o, "淫水翻腾", 1), U(o, "媚药少年", 1), 
U(o, "放荡少妇", 1), U(o, "服务天使", 1), U(o, "熟女颜射", 1), U(o, "自制手枪", 1), U(o, "色97爱", 1), 
U(o, "極品奶妹", 1), U(o, "麻醉乙醚", 1), U(o, "麻醉钢枪", 1), U(o, "淫妇自慰", 1), U(o, "東突暴動", 1), 
U(o, "基地组织", 1), U(o, "粉饰太平", 1), U(o, "回民暴动", 1), U(o, "国际法院", 1), U(o, "tmd靠", 1), 
U(o, "母子姦情", 1), U(o, "野外性交", 1), U(o, "連続失禁", 1), U(o, "咪咪图片", 1), U(o, "人妻交换", 1), 
U(o, "大学骚乱", 1), U(o, "游荡爪牙", 1), U(o, "阿扁萬歲", 1), U(o, "激凸走光", 1), U(o, "帝國主義", 1), 
U(o, "日本灌肠", 1), U(o, "爱图公园", 1), U(o, "日本帝國", 1), U(o, "新疆势力", 1), U(o, "操那嗎逼", 1), 
U(o, "性战擂台", 1), U(o, "看棋软件", 1), U(o, "中華大地", 1), U(o, "骚妇掰b", 1), U(o, "熟女护士", 1), 
U(o, "自插小穴", 1), U(o, "淫乱熟女", 1), U(o, "阿弥陀佛", 1), U(o, "淫水翻騰", 1), U(o, "制服诱惑", 1), 
U(o, "那嗎錯比", 1), U(o, "骚浪人妻", 1), U(o, "不滅帝王", 1), U(o, "达赖喇嘛", 1), U(o, "美腿丝足", 1), 
U(o, "沃尔开西", 1), U(o, "欧美大乳", 1), U(o, "激情电影", 1), U(o, "中華民國", 1), U(o, "偷拍美穴", 1), 
U(o, "周守訓 ", 1), U(o, "絲襪寫真", 1), U(o, "國家主席", 1), U(o, "二穴中出", 1), U(o, "岡村秀樹", 1), 
U(o, "惹火自拍", 1), U(o, "宾馆女郎", 1), U(o, "人体炸弹", 1), U(o, "性感诱惑", 1), U(o, "六四运动", 1), 
U(o, "现金交易", 1), U(o, "六四事件", 1), U(o, "成人bt", 1), U(o, "车仑女干", 1), U(o, "兩岸關係", 1), 
U(o, "丝袜足交", 1), U(o, "系统消息", 1), U(o, "亚洲性虐", 1), U(o, "垃圾游戏", 1), U(o, "隐者之路", 1), 
U(o, "追查國際", 1), U(o, "四川獨立", 1), U(o, "群魔色舞", 1), U(o, "强暴幼女", 1), U(o, "三个呆婊", 1), 
U(o, "艳情小说", 1), U(o, "卡斯特罗", 1), U(o, "共産主義", 1), U(o, "胡总书记", 1), U(o, "马拉戈壁", 1), 
U(o, "手机复制", 1), U(o, "粗制吗啡", 1), U(o, "信用危機", 1), U(o, "无码淫女", 1), U(o, "廖錫龍 ", 1), 
U(o, "cctv", 1), U(o, "中央委员", 1), U(o, "兩會報導", 1), U(o, "無碼炮圖", 1), U(o, "大波骚妇", 1), 
U(o, "毛泽东靠", 1), U(o, "奶大屄肥", 1), U(o, "性虎色网", 1), U(o, "那嗎老比", 1), U(o, "激情潮喷", 1), 
U(o, "枪决现场", 1), U(o, "恐怖主義", 1), U(o, "法轮功靠", 1), U(o, "買賣槍支", 1), U(o, "情色導航", 1), 
U(o, "愛圖公園", 1), U(o, "下流地带", 1), U(o, "隱者之路", 1), U(o, "额尔德尼", 1), U(o, "丝袜淫妇", 1), 
U(o, "斯皮爾德", 1), U(o, "夫妻3p", 1), U(o, "新華舉報", 1), U(o, "高丽棒子", 1), U(o, "資本主義", 1), 
U(o, "一国两制", 1), U(o, "街頭扒衣", 1), U(o, "妹妹骚图", 1), U(o, "混沌诀靠", 1), U(o, "古龙祭坛", 1), 
U(o, "赤色戰士", 1), U(o, "丝袜高跟", 1), U(o, "mm美图", 1), U(o, "针孔偷拍", 1), U(o, "殺你全家", 1), 
U(o, "空虛之地", 1), U(o, "赫鲁晓夫", 1), U(o, "裙内偷拍", 1), U(o, "成人网站", 1), U(o, "大奶骚女", 1), 
U(o, "翘臀嫩逼", 1), U(o, "飞扬论坛", 1), U(o, "開放雜志", 1), U(o, "色狼论坛", 1), U(o, "情色天崖", 1), 
U(o, "那吗错比", 1), U(o, "换妻大会", 1), U(o, "龙火之心", 1), U(o, "有容奶大", 1), U(o, "性爱图片", 1), 
U(o, "你妈了妹", 1), U(o, "系统公告", 1), U(o, "統獨論壇", 1), U(o, "灌满精液", 1), U(o, "丫头养的", 1), 
U(o, "淫妻交换", 1), U(o, "白虎小穴", 1), U(o, "多人性爱", 1), U(o, "血腥图片", 1), U(o, "动漫色图", 1), 
U(o, "石牌教会", 1), U(o, "拔屄自拍", 1), U(o, "熟妇人妻", 1), U(o, "肛門拳交", 1), U(o, "人民广场", 1), 
U(o, "幹你老比", 1), U(o, "军国主义", 1), U(o, "西藏分裂", 1), U(o, "台湾岛国", 1), U(o, "夫妻自拍", 1), 
U(o, "熟女護士", 1), U(o, "温家宝靠", 1), U(o, "中国和平", 1), U(o, "porn", 1), U(o, "sm舔穴", 1), 
U(o, "錯那嗎b", 1), U(o, "浴室乱伦", 1), U(o, "大麻树脂", 1), U(o, "巴倫侍從", 1), U(o, "三個代表", 1), 
U(o, "成人导航", 1), U(o, "兩個中國", 1), U(o, "沃爾開西", 1), U(o, "夫妻多p", 1), U(o, "无套内射", 1), 
U(o, "黄金圣水", 1), U(o, "艳妇淫女", 1), U(o, "淫欲世家", 1), U(o, "监禁陵辱", 1), U(o, "無碼彩圖", 1), 
U(o, "买卖枪支", 1), U(o, "無碼體驗", 1), U(o, "大胆出位", 1), U(o, "灌滿精液", 1), U(o, "插穴手淫", 1), 
U(o, "淫肉诱惑", 1), U(o, "激情小說", 1), U(o, "南华早报", 1), U(o, "枪支弹药", 1), U(o, "暴力虐待", 1), 
U(o, "狗娘養的", 1), U(o, "恐怖组织", 1), U(o, "美女高潮", 1), U(o, "操那吗逼", 1), U(o, "肮脏美学", 1), 
U(o, "逼你老母", 1), U(o, "美女成人", 1), U(o, "性爱图库", 1), U(o, "自拍写真", 1), U(o, "母子交欢", 1), 
U(o, "卖毕业证", 1), U(o, "愛色cc", 1), U(o, "爱妻淫穴", 1), U(o, "性交自拍", 1), U(o, "狗狼養的", 1), 
U(o, "熟妇骚器", 1), U(o, "換妻雜交", 1), U(o, "密室淫行", 1), U(o, "情色文学", 1), U(o, "金枪不倒", 1), 
U(o, "飛揚論壇", 1), U(o, "国产av", 1), U(o, "淫水横溢", 1), U(o, "teen", 1), U(o, "俏臀攝魄", 1), 
U(o, "屄屄特写", 1), U(o, "阴部特写", 1), U(o, "援助交易", 1), U(o, "國產嫖娼", 1), U(o, "做爱图片", 1), 
U(o, "强奸处女", 1), U(o, "鸡巴暴胀", 1), U(o, "雪腿玉胯", 1), U(o, "香港建国", 1), U(o, "混 沌决", 1), 
U(o, "大奶美逼", 1), U(o, "曲线消魂", 1), U(o, "开放杂志", 1), U(o, "bjzc", 1), U(o, "先奸後殺", 1), 
U(o, "超毛大鲍", 1), U(o, "車侖女幹", 1), U(o, "酥胸诱惑", 1), U(o, "人体摄影", 1), U(o, "那吗瘟比", 1), 
U(o, "李月月鸟", 1), U(o, "8 仙靠", 1), U(o, "成人自拍", 1), U(o, "新疆万岁", 1), U(o, "寂寞自摸", 1), 
U(o, "弟大物勃", 1), U(o, "火辣写真", 1), U(o, "放蕩熟女", 1), U(o, "出售神符", 1), U(o, "操穴喷水", 1), 
U(o, "大奶騷女", 1), U(o, "无码体验", 1), U(o, "干你妈b", 1), U(o, "npc靠", 1), U(o, "色色婷婷", 1), 
U(o, "kefu", 1), U(o, "苹果日报", 1), U(o, "爱液横流", 1), U(o, "人民銀行", 1), U(o, "中國之春", 1), 
U(o, "槍決現場", 1), U(o, "十五周年", 1), U(o, "敬國神社", 1), U(o, "日本素人", 1), U(o, "群奸乱交", 1), 
U(o, "蒙古达子", 1), U(o, "哈尔罗尼", 1), U(o, "事實獨立", 1), U(o, "你媽了妹", 1), U(o, "释迦牟尼", 1), 
U(o, "出售此號", 1), U(o, "不玩了靠", 1), U(o, "胸涛乳浪", 1), U(o, "傳染性病", 1), U(o, "社會主義", 1), 
U(o, "出售枪支", 1), U(o, "tnnd", 1), U(o, "花花公子", 1), U(o, "大波粉b", 1), U(o, "黃金幼龍", 1), 
U(o, "淫水横流", 1), U(o, "成人導航", 1), U(o, "斧头镰刀", 1), U(o, "插你爷爷", 1), U(o, "釋迦牟尼", 1), 
U(o, "美臀嫰穴", 1), U(o, "性交无码", 1), U(o, "日你爺爺", 1), U(o, "错那吗逼", 1), U(o, "烂游戏靠", 1), 
U(o, "两腿之间", 1), U(o, "taip", 1), U(o, "地下教会", 1), U(o, "聯易互動", 1), U(o, "斗士霍克", 1), 
U(o, "毁灭射手", 1), U(o, "阿扁万岁", 1), U(o, "成人论坛", 1), U(o, "阴道图片", 1), U(o, "刚比样子", 1), 
U(o, "绝望之地", 1), U(o, "色情工厂", 1), U(o, "两会报道", 1), U(o, "咬着龟头", 1), U(o, "狗狼养的", 1), 
U(o, "淫乱潮吹", 1), U(o, "高潮白浆", 1), U(o, "石化图腾", 1), U(o, "远程偷拍", 1), U(o, "国家机密", 1), 
U(o, "清晰内射", 1), U(o, "红炎猛兽", 1), U(o, "黃金聖水", 1), U(o, "人妻榨乳", 1), U(o, "对日强硬", 1), 
U(o, "六月联盟", 1), U(o, "臺灣民國", 1), U(o, "处女开包", 1), U(o, "胯下呻吟", 1), U(o, "带套肛交", 1), 
U(o, "真主安拉", 1), U(o, "中毒图腾", 1), U(o, "那娘错比", 1), U(o, "富兰克林", 1), U(o, "体育总局", 1), 
U(o, "佛蘭克林", 1), U(o, "街头对抗", 1), U(o, "虛弱圖騰", 1), U(o, "淫兽学园", 1), U(o, "就去誘惑", 1), 
U(o, "淫乱工作", 1), U(o, "达夫侍从", 1), U(o, "耻辱轮奸", 1), U(o, "团长戈登", 1), U(o, "淫水爱液", 1), 
U(o, "偷窺圖片", 1), U(o, "中华大众", 1), U(o, "五星红旗", 1), U(o, "亞歷山大", 1), U(o, "操那吗b", 1), 
U(o, "沉睡图腾", 1), U(o, "淫乱诊所", 1), U(o, "中华大地", 1), U(o, "美女吞精", 1), U(o, "賓館女郎", 1), 
U(o, "插穴止痒", 1), U(o, "成人圖片", 1), o)), U(w, 4, (U(a = {}, "大中華論壇", 1), U(a, "中國威脅論", 1), 
U(a, "小姐打飞机", 1), U(a, "快播a片网", 1), U(a, "高仿真脸皮", 1), U(a, "上海孤儿院", 1), U(a, "web战牌", 1), 
U(a, "石拳戰鬥兵", 1), U(a, "冊那娘餓比", 1), U(a, "反封锁技术", 1), U(a, "欢乐性今宵", 1), U(a, "t.m.d", 1), 
U(a, "國民黨萬歲", 1), U(a, "册那娘餓比", 1), U(a, "色色五月天", 1), U(a, "梅德韋傑夫", 1), U(a, "憂鬱的艾拉", 1), 
U(a, "外交與方略", 1), U(a, "獻祭的圖騰", 1), U(a, "夫妻俱乐部", 1), U(a, "打倒共产党", 1), U(a, "游戏发奖员", 1), 
U(a, "法轮大法靠", 1), U(a, "web牌戰", 1), U(a, "黃色小電影", 1), U(a, "监视塔哨兵", 1), U(a, "日內瓦金融", 1), 
U(a, "北京xx网", 1), U(a, "豐饒的果實", 1), U(a, "penis", 1), U(a, "狂操你全家", 1), U(a, "空虛的伊坤", 1), 
U(a, "茉莉花革命", 1), U(a, "鶏毛信文汇", 1), U(a, "湖岸護衛兵", 1), U(a, "反腐敗論壇", 1), U(a, "中国威胁论", 1), 
U(a, "大東亞共榮", 1), U(a, "f。l。g", 1), U(a, "迟钝的图腾", 1), U(a, "吸收的圖騰", 1), U(a, "劳+教+所", 1), 
U(a, "滚那吗老比", 1), U(a, "卖防身武器", 1), U(a, "中毒的圖騰", 1), U(a, "人民大会堂", 1), U(a, "中文搜性網", 1), 
U(a, "游荡的僵尸", 1), U(a, "貫通兩極法", 1), U(a, "pussy", 1), U(a, "遊戲管理員", 1), U(a, "經社理事會", 1), 
U(a, "乌云其木格", 1), U(a, "boxun", 1), U(a, "勞+教+所", 1), U(a, "滾那嗎錯比", 1), U(a, "天安門屠殺", 1), 
U(a, "热站政论网", 1), U(a, "中央政治局", 1), U(a, "升达毕业证", 1), U(a, "梅德韦杰夫", 1), U(a, "忧郁的埃拉", 1), 
U(a, "saobi", 1), U(a, "政治反對派", 1), U(a, "混乱的图腾", 1), U(a, "bitch", 1), U(a, "撅起大白腚", 1), 
U(a, "免费偷窥网", 1), U(a, "砍翻一条街", 1), U(a, "假阳具插穴", 1), U(a, "法*轮*功", 1), U(a, "中國孤兒院", 1), 
U(a, "持不同政见", 1), U(a, "龙 虎 门", 1), U(a, "巨铁角哈克", 1), U(a, "核工业基地", 1), U(a, "托管理事会", 1), 
U(a, "大东亚共荣", 1), U(a, "天安门事件", 1), U(a, "urban", 1), U(a, "废墟守护者", 1), U(a, "垃圾游戏靠", 1), 
U(a, "反腐败论坛", 1), U(a, "Ｘ到喷屎尿", 1), U(a, "佛展千手法", 1), U(a, "新观察论坛", 1), U(a, "勞動教養所", 1), 
U(a, "歡樂性今宵", 1), U(a, "團員馬爾汀", 1), U(a, "击伤的图腾", 1), U(a, "调理劳务系", 1), U(a, "正義黨論壇", 1), 
U(a, "国防科工委", 1), U(a, "激情小电影", 1), U(a, "身份生成器", 1), U(a, "牛b，牛比", 1), U(a, "滚那吗瘟比", 1), 
U(a, "天安门屠杀", 1), U(a, "出售神符靠", 1), U(a, "三班仆人派", 1), U(a, "中國共產黨", 1), U(a, "廢墟守護者", 1), 
U(a, "大中国论坛", 1), U(a, "法*輪*功", 1), U(a, "濕了還說要", 1), U(a, "法(轮)功", 1), U(a, "艾森豪威爾", 1), 
U(a, "ligen", 1), U(a, "無界流覽器", 1), U(a, "滚那吗错比", 1), U(a, "台湾共产党", 1), U(a, "新闻出版署", 1), 
U(a, "巨乳俏女医", 1), U(a, "bushi", 1), U(a, "無界瀏覽器", 1), U(a, "遊蕩的士兵", 1), U(a, "jian你", 1), 
U(a, "金槍不倒 ", 1), U(a, "擊傷的圖騰", 1), U(a, "洛克菲尔特", 1), U(a, "军事委员会", 1), U(a, "乱伦熟女网", 1), 
U(a, "中国共产党", 1), U(a, "回民都是猪", 1), U(a, "人民大會堂", 1), U(a, "滾那嗎老比", 1), U(a, "政治反对派", 1), 
U(a, "阴茎插小穴", 1), U(a, "台湾政论区", 1), U(a, "１８歲淫亂", 1), U(a, "侍從倫斯韋", 1), U(a, "英雄紀念碑", 1), 
U(a, "论坛管理员", 1), U(a, "澳洲光明网", 1), U(a, "强效失意药", 1), U(a, "英雄纪念碑", 1), U(a, "小泉純一郎", 1), 
U(a, "助手威爾特", 1), U(a, "无毛美少女", 1), U(a, "小泉纯一郎", 1), U(a, "不爽不要錢", 1), U(a, "澳洲光明網", 1), 
U(a, "反恐委员会", 1), U(a, "正义党论坛", 1), U(a, "web戰牌", 1), U(a, "经社理事会", 1), U(a, "達夫警衛兵", 1), 
U(a, "丁字褲翹臀", 1), U(a, "雪山狮子旗", 1), U(a, "365gn", 1), U(a, "臺灣政論區", 1), U(a, "ko180", 1), 
U(a, "街头对抗靠", 1), U(a, "晚年周恩來", 1), U(a, "陰穴新玩法", 1), U(a, "naive", 1), U(a, "東方紅時空", 1), 
U(a, "event", 1), U(a, "成人午夜場", 1), U(a, "c a o", 1), U(a, "cao你妈", 1), U(a, "丰饶的果实", 1), 
U(a, "廉政大论坛", 1), U(a, "佳静安定片", 1), U(a, "中央電視臺", 1), U(a, "湿了还说要", 1), U(a, "無毛美少女", 1), 
U(a, "caobi", 1), U(a, "biao子", 1), U(a, "色情小電影", 1), U(a, "色狐狸網址", 1), U(a, "私人服务器", 1), 
U(a, "活动管理员", 1), U(a, "私人伺服器", 1), U(a, "abian", 1), U(a, "助手威尔特", 1), U(a, "砍翻一條街", 1), 
U(a, "独立台湾会", 1), U(a, "暴热的战士", 1), U(a, "神通加持法", 1), U(a, "dalai", 1), U(a, "laola", 1), 
U(a, "annan", 1), U(a, "liuqi", 1), U(a, "天安門事件", 1), U(a, "zhude", 1), U(a, "監視塔哨兵", 1), 
U(a, "漁夫菲斯曼", 1), U(a, "大中國論壇", 1), U(a, " dang", 1), U(a, "蜜桃成熟时", 1), U(a, "liusi", 1), 
U(a, "舊斗篷哨兵", 1), U(a, "信息产业部", 1), U(a, "劳动教养所", 1), U(a, "混 沌决靠", 1), U(a, "原子能機構", 1), 
U(a, "遊戲宮理員", 1), U(a, "遊戲發獎員", 1), U(a, "臺灣共和國", 1), U(a, "庭院警卫兵", 1), U(a, "上海孤兒院", 1), 
U(a, "不爽不要钱", 1), U(a, "baopi", 1), U(a, "中國性愛城", 1), U(a, "強效失意藥", 1), U(a, "原子能机构", 1), 
U(a, "全范围教会", 1), U(a, "二乙基酰胺", 1), U(a, "勞動保障部", 1), U(a, "巨鐵角哈克", 1), U(a, "激情小電影", 1), 
U(a, "國防科工委", 1), U(a, "反恐委員會", 1), U(a, "游戲管理員", 1), U(a, "滾那嗎瘟比", 1), U(a, "御の二代目", 1), 
U(a, "新華通論壇", 1), U(a, "團員瑪律汀", 1), U(a, "打倒共產黨", 1), U(a, "活動管理員", 1), U(a, "假陽具插穴", 1), 
U(a, "黄色小电影", 1), U(a, "亚洲情色网", 1), U(a, "禦の二代目", 1), U(a, "免費偷窺網", 1), U(a, "東北xx網", 1), 
U(a, "天天干貼圖", 1), U(a, "亞洲情色網", 1), U(a, "陰莖插小穴", 1), U(a, "中国孤儿院", 1), U(a, "falun", 1), 
U(a, "旧斗篷哨兵", 1), U(a, "夫妻俱樂部", 1), U(a, "Ｘ到噴屎尿", 1), U(a, "小姐打飛機", 1), U(a, "狡猾的达夫", 1), 
U(a, "新手指导员", 1), U(a, "山本五十六", 1), U(a, "成人午夜场", 1), U(a, "賣槍支彈藥", 1), U(a, "臺灣共産黨", 1), 
U(a, "劳动保障部", 1), U(a, "廉政大論壇", 1), U(a, "达夫警卫兵", 1), U(a, "鶏毛信文匯", 1), U(a, "雪山獅子旗", 1), 
U(a, "核工業基地", 1), U(a, "淫の方程式", 1), U(a, "臺灣共產黨", 1), U(a, "screw", 1), U(a, "web牌战", 1), 
U(a, "天天干贴图", 1), U(a, "中文搜性网", 1), U(a, "巨乳俏女醫", 1), U(a, "防衛指揮官", 1), U(a, "中毒的图腾", 1), 
U(a, "渔夫菲斯曼", 1), U(a, "友好的鲁德", 1), U(a, "湖岸警卫兵", 1), U(a, "外交与方略", 1), U(a, "t。m。d", 1), 
U(a, "鹰眼派氏族", 1), U(a, "夜话紫禁城", 1), U(a, "高清晰假钞", 1), U(a, "肉棍幹騷婦", 1), U(a, "法(輪)功", 1), 
U(a, "暴熱的戰士", 1), U(a, "游荡的士兵", 1), U(a, "团员马尔汀", 1), U(a, "游戏管理员", 1), U(a, "荆棘护卫兵", 1), 
U(a, "天安門一代", 1), U(a, "湖岸护卫兵", 1), U(a, "射了还说要", 1), U(a, "中央电视台", 1), U(a, "遲鈍的圖騰", 1), 
U(a, "献祭的图腾", 1), U(a, "北京xx網", 1), U(a, "长官沙塔特", 1), U(a, "阴穴新玩法", 1), U(a, "贯通两极法", 1), 
U(a, "新华通论坛", 1), U(a, "婊子養的 ", 1), U(a, "夜話紫禁城", 1), U(a, "天安门档案", 1), U(a, "晚年周恩来", 1), 
U(a, "空虚的伊坤", 1), U(a, "射了還說要", 1), U(a, "肉棍干骚妇", 1), U(a, "凯奥勒尼什", 1), U(a, "册那娘饿比", 1), 
U(a, "中國共産黨", 1), U(a, "日内瓦金融", 1), U(a, "友好的魯德", 1), U(a, "联合国大会", 1), U(a, "主攻指挥官", 1), 
U(a, "鷹眼派氏族", 1), U(a, "出售此号靠", 1), U(a, "庭院警衛兵", 1), U(a, "无界浏览器", 1), U(a, "１８岁淫乱", 1), 
U(a, "色狐狸网址", 1), U(a, "法十輪十功", 1), U(a, "洛克菲爾特", 1), U(a, "回民吃豬肉", 1), U(a, "fgmtv", 1), 
U(a, "自已的故事", 1), U(a, "狡猾的達夫", 1), U(a, "东方红时空", 1), U(a, "新手训练营", 1), U(a, "湖岸警衛兵", 1), 
U(a, "熱站政論網", 1), U(a, "卖枪支弹药", 1), U(a, "台湾共和国", 1), U(a, "長官沙塔特", 1), U(a, "反封鎖技術", 1), 
U(a, "77bbb", 1), U(a, "游蕩的士兵", 1), U(a, "短信群发器", 1), U(a, "聯合國大會", 1), U(a, "湿透的内裤", 1), 
U(a, "亂倫熟女網", 1), U(a, "社保基金会", 1), U(a, "新手訓練營", 1), U(a, "日本钓鱼岛", 1), U(a, "侍从伦斯韦", 1), 
U(a, "游戏宫理员", 1), U(a, "fuck靠", 1), U(a, "u  r靠", 1), U(a, "丁字裤翘臀", 1), U(a, "艾森豪威尔", 1), 
U(a, "仿真54式", 1), U(a, "国土资源部", 1), U(a, "法十轮十功", 1), U(a, "獨立臺灣會", 1), U(a, "肉淫器吞精", 1), 
U(a, "出售账号靠", 1), U(a, "吸收的图腾", 1), U(a, "混亂的圖騰", 1), U(a, "国民党万岁", 1), U(a, "回民吃猪肉", 1), 
U(a, "掰穴皮卡丘", 1), U(a, "石拳战斗兵", 1), U(a, "江core", 1), U(a, "gc365", 1), U(a, "中国性爱城", 1), 
U(a, "东北xx网", 1), U(a, "遊蕩的僵屍", 1), U(a, "天安门一代", 1), U(a, "新觀察論壇", 1), U(a, "主攻指揮官", 1), 
U(a, "大中华论坛", 1), U(a, "凱奧勒尼什", 1), U(a, "admin", 1), U(a, "防卫指挥官", 1), U(a, "色情小电影", 1), 
U(a, "游蕩的僵尸", 1), U(a, "論壇管理員", 1), a)), U(w, 5, (U(r = {}, "她妈的金日成", 1), U(r, "暴躁的馬杜克", 1), 
U(r, "发展研究中心", 1), U(r, "埃里克苏特勤", 1), U(r, "中国真实内容", 1), U(r, "linken", 1), U(r, "拉姆斯菲尔德", 1), 
U(r, "中华人民正邪", 1), U(r, "日本ring", 1), U(r, "萬維讀者論壇", 1), U(r, "fosaon", 1), U(r, "人民之声论坛", 1), 
U(r, "华通时事论坛", 1), U(r, "chenyi", 1), U(r, "央视内部晚会", 1), U(r, "yuming", 1), U(r, "snatch", 1), 
U(r, "東西南北論壇", 1), U(r, "濕了還說不要", 1), U(r, "湖岸哨兵队长", 1), U(r, "持不同政見 ", 1), U(r, " taidu", 1), 
U(r, "钟山风雨论坛", 1), U(r, "扎卡維是英雄", 1), U(r, "春夏自由論壇", 1), U(r, "世界经济导报", 1), U(r, "湿了还说不要", 1), 
U(r, " bitch", 1), U(r, "矯健的馬努爾", 1), U(r, "斗士哈夫拉苏", 1), U(r, "紮卡維是英雄", 1), U(r, "eight仙", 1), 
U(r, "風雨神州論壇", 1), U(r, "虛無的飽食者", 1), U(r, "瑞士金融大學", 1), U(r, "東部地下水路", 1), U(r, "中国社会论坛", 1), 
U(r, "日本av女优", 1), U(r, "东土耳其斯坦", 1), U(r, "十年动乱石进", 1), U(r, "蘇特勒守護兵", 1), U(r, "苏特勤魔法师", 1), 
U(r, "指點江山論壇", 1), U(r, "rivals", 1), U(r, "苏特勤护卫兵", 1), U(r, "大衆真人真事", 1), U(r, "system", 1), 
U(r, "人民內情真相", 1), U(r, "释迦摩尼大法", 1), U(r, "大众真人真事", 1), U(r, "鬥士哈夫拉蘇", 1), U(r, "操你八辈祖宗", 1), 
U(r, "華岳時事論壇", 1), U(r, "东部地下水路", 1), U(r, "現代情色小說", 1), U(r, "生孩子没屁眼", 1), U(r, "鋸齒通道骷髏", 1), 
U(r, "湖岸哨兵隊長", 1), U(r, "dl.com", 1), U(r, "分隊長施蒂文", 1), U(r, "华语世界论坛", 1), U(r, "duowan", 1), 
U(r, "baichi", 1), U(r, "子女任職名單", 1), U(r, "放荡少妇宾馆", 1), U(r, "ppt.cc", 1), U(r, "xiao77", 1), 
U(r, "webzen", 1), U(r, "自由亚洲电台", 1), U(r, "分队长施蒂文", 1), U(r, "wangce", 1), U(r, "东南西北论谈", 1), 
U(r, "web战牌靠", 1), U(r, "风雨神州论坛", 1), U(r, "sucker", 1), U(r, "simple", 1), U(r, "master", 1), 
U(r, "扎卡维是英雄", 1), U(r, "北美自由论坛", 1), U(r, "urtnnd", 1), U(r, "making", 1), U(r, "cao你大爷", 1), 
U(r, "incest", 1), U(r, "牛头马面藏独", 1), U(r, "admin靠", 1), U(r, "engesi", 1), U(r, "biaozi", 1), 
U(r, "北美自由論壇", 1), U(r, "中華真實報道", 1), U(r, "weelaa", 1), U(r, "侍從貝赫爾特", 1), U(r, "李*洪*志*", 1), 
U(r, "mokeer", 1), U(r, "國內動態清樣", 1), U(r, "国内动态清样", 1), U(r, "三去車侖工力", 1), U(r, "client", 1), 
U(r, "免費成人網站", 1), U(r, "自由民主论坛", 1), U(r, "情色藝術天空", 1), U(r, "xilake", 1), U(r, "sadamu", 1), 
U(r, "huanet", 1), U(r, "makesi", 1), U(r, "国家主要部委", 1), U(r, "pujing", 1), U(r, "minhui", 1), 
U(r, "中國移動通信", 1), U(r, "蘇特勤魔法師", 1), U(r, "天安門錄影帶", 1), U(r, "春夏自由论坛", 1), U(r, "氵去车仑工力", 1), 
U(r, "luogan", 1), U(r, "两岸三地论坛", 1), U(r, "sunwen", 1), U(r, "客户服务人员", 1), U(r, "97sese", 1), 
U(r, "helong", 1), U(r, "指点江山论坛", 1), U(r, "guojia", 1), U(r, "中國恐怖組織", 1), U(r, "u   r靠", 1), 
U(r, "十年動亂石進", 1), U(r, "她媽的金日成", 1), U(r, "回族人吃豬肉", 1), U(r, "现代情色小说", 1), U(r, "國家主要部委", 1), 
U(r, "大眾真人真事", 1), U(r, "中華真實報導", 1), U(r, "華嶽時事論壇", 1), U(r, "天安门录像带", 1), U(r, "高校群體事件", 1), 
U(r, "埃裡克蘇特勤", 1), U(r, "華語世界論壇", 1), U(r, "放蕩少婦賓館", 1), U(r, "aobama", 1), U(r, "中國成人論壇", 1), 
U(r, "东西南北论坛", 1), U(r, "华岳时事论坛", 1), U(r, "日本av女優", 1), U(r, "牛頭馬面藏獨", 1), U(r, "锯齿通道骷髅", 1), 
U(r, "釋迦摩尼大法", 1), U(r, "t。m。d靠", 1), U(r, "鐘山風雨論壇", 1), U(r, "中华真实报道", 1), U(r, "泰奴桥掠夺者", 1), 
U(r, "中国问题论坛", 1), U(r, "回族人吃猪肉", 1), U(r, "新疆恐怖势力", 1), U(r, "中国复兴论坛", 1), U(r, "人民内情真相", 1), 
U(r, "议长阿茵斯塔", 1), U(r, "南大自由論壇", 1), U(r, "拉姆斯菲爾德", 1), U(r, "万维读者论坛", 1), U(r, "奴隸魔族士兵", 1), 
U(r, "中国移动通信", 1), U(r, "華通時事論壇", 1), U(r, "你說我說論壇", 1), U(r, "国内动态详情", 1), U(r, "泰奴桥警卫兵", 1), 
U(r, "台湾自由联盟", 1), U(r, "苏特勒守护兵", 1), U(r, "侍从贝赫尔特", 1), U(r, "泰奴橋掠奪者", 1), U(r, "免费成人网站", 1), 
U(r, "三去车仑工力", 1), U(r, "央視內部晚會", 1), U(r, "生孩子沒屁眼", 1), U(r, "议员斯格文德", 1), U(r, "999日本妹", 1), 
U(r, "奴隶魔族士兵", 1), U(r, "兩岸三地論壇", 1), U(r, "你说我说论坛", 1), U(r, "情色艺术天空", 1), U(r, "埃裏克蘇特勤", 1), 
U(r, "南大自由论坛", 1), U(r, "矫健的马努尔", 1), U(r, "人民之聲論壇", 1), U(r, "歡歡娛樂時空", 1), U(r, "server", 1), 
U(r, "renaya", 1), U(r, "新聞出版總署", 1), U(r, "東土耳其斯坦", 1), U(r, "大紀元新聞網", 1), U(r, "荊棘護衛兵 ", 1), 
U(r, "新闻出版总署", 1), U(r, "中國社會論壇", 1), U(r, "xitele", 1), U(r, "中國問題論壇", 1), U(r, "urban靠", 1), 
U(r, "自由民主論壇", 1), U(r, "議長阿茵斯塔", 1), U(r, "氵去車侖工力", 1), U(r, "中華人民正邪", 1), U(r, "蘇特勤護衛兵", 1), 
U(r, "欢欢娱乐时空", 1), U(r, "大纪元新闻网", 1), U(r, "子女任职名单", 1), U(r, "泰奴橋警衛兵", 1), U(r, "aomaer", 1), 
U(r, "中国成人论坛", 1), U(r, "瑞士金融大学", 1), U(r, "中国恐怖组织", 1), U(r, "東南西北論談", 1), U(r, "世界經濟導報", 1), 
U(r, "龙 虎 门靠", 1), U(r, "taobao", 1), U(r, "c a o靠", 1), U(r, "中國真實內容", 1), U(r, "web牌戰靠", 1), 
U(r, "議員斯格文德", 1), U(r, "虚无的饱食者", 1), U(r, "中國復興論壇", 1), U(r, "高校群体事件", 1), U(r, "臺灣自由聯盟", 1), 
U(r, "暴躁的马杜克", 1), r)), U(w, 6, (U(l = {}, "大*fa弟*子", 1), U(l, "東突暴動和獨立", 1), U(l, "asshole", 1), 
U(l, "暴躁的城塔野兽", 1), U(l, "圖書管理員卡特", 1), U(l, "as$hole", 1), U(l, "t9wg.cn", 1), 
U(l, "中国社会进步党", 1), U(l, "大众色情成人网", 1), U(l, "bulaier", 1), U(l, "tont.cn", 1), 
U(l, "大眾色情成人網", 1), U(l, "監視塔哨兵隊長", 1), U(l, "c5c8.cn", 1), U(l, "意志不坚的图腾", 1), 
U(l, "*法*轮*功*", 1), U(l, "rivals靠", 1), U(l, "中華大陸執事站", 1), U(l, "xya3.cn", 1), 
U(l, "經濟社會理事會", 1), U(l, "liening", 1), U(l, "16dy-圖庫", 1), U(l, " lipeng", 1), 
U(l, "16dy-图库", 1), U(l, "图书管理员卡特", 1), U(l, "bastard", 1), U(l, "a33.com", 1), 
U(l, "bignews", 1), U(l, "alafate", 1), U(l, "00sm.cn", 1), U(l, "ustibet", 1), 
U(l, "ncyh.cn", 1), U(l, "e7sw.cn", 1), U(l, "二乙基酰胺发抡", 1), U(l, "yz55.cn", 1), 
U(l, "女主人罗姬马莉", 1), U(l, "氵去车仑工力?", 1), U(l, "頭領墳墓管理員", 1), U(l, "氵去車侖工力?", 1), 
U(l, "封印的靈魂騎士", 1), U(l, "头领坟墓管理员", 1), U(l, "taobao靠", 1), U(l, "131.com", 1), 
U(l, "chinamz", 1), U(l, "33bbb走光", 1), U(l, "unixbox", 1), U(l, "saqieer", 1), 
U(l, "tringel", 1), U(l, "playboy", 1), U(l, "safeweb", 1), U(l, "paper64", 1), 
U(l, "xdns.eu", 1), U(l, "hacking", 1), U(l, "艾森豪威尔威尔", 1), U(l, "petgirl", 1), 
U(l, "freenet", 1), U(l, "freedom", 1), U(l, "@sshole", 1), U(l, "wstaiji", 1), 
U(l, "金鳞岂是池中物", 1), U(l, "huangju", 1), U(l, "blowjob", 1), U(l, "aiort墓地", 1), 
U(l, "a$shole", 1), U(l, "南海不属于中国", 1), U(l, "banchan", 1), U(l, "监视塔哨兵队长", 1), 
U(l, "lidashi", 1), U(l, "napolun", 1), U(l, "wangdan", 1), U(l, "222se圖片", 1), 
U(l, "藥材商人蘇耐得", 1), U(l, "*李*洪*志*", 1), U(l, "降低命中的图腾", 1), U(l, "dishun ", 1), 
U(l, "aluoyue", 1), U(l, "bbscity", 1), U(l, "中华人民共和国", 1), U(l, "linbiao", 1), 
U(l, "10mb.cn", 1), U(l, "封印的灵魂骑士", 1), U(l, "dulumen", 1), U(l, "chenyun", 1), 
U(l, "中國社會進步黨", 1), U(l, " huimin", 1), U(l, "boxilai", 1), U(l, "hongzhi", 1), 
U(l, "mandela", 1), U(l, "thec.cn", 1), U(l, "二乙基醯胺發掄", 1), U(l, "eerdeni", 1), 
U(l, "中華養生益智功", 1), U(l, "shengda", 1), U(l, "玉蒲團玉女心經", 1), U(l, "金鱗豈是池中物", 1), 
U(l, "中华养生益智功", 1), U(l, "中华大陆执事站", 1), U(l, "222se图片", 1), U(l, "意志不堅的圖騰", 1), 
U(l, "生命分流的图腾", 1), U(l, "北大三角地论坛", 1), U(l, "fuckyou", 1), U(l, "药材商人苏耐得", 1), 
U(l, "minghui", 1), U(l, "北大三角地論壇", 1), U(l, "*法*輪*功*", 1), U(l, "高清成人电视棒", 1), 
U(l, "经济社会理事会", 1), U(l, "新疆7.5事件", 1), U(l, "降低命中的圖騰", 1), U(l, "西藏314事件", 1), 
U(l, "a$$hole", 1), U(l, "阿沛•阿旺晋美", 1), U(l, "生命分流的圖騰", 1), U(l, "sidalin", 1), 
U(l, "女主人羅姬馬莉", 1), U(l, "eight仙靠", 1), U(l, "610办公室靠", 1), U(l, "gruepin", 1), 
U(l, "东突暴动和独立", 1), U(l, "暴躁的城塔野獸", 1), U(l, "玉蒲团玉女心经", 1), U(l, "世界维吾尔大会", 1), 
l)), U(w, 7, (U(c = {}, "baoweier", 1), U(c, "butthole", 1), U(c, "lianzhan", 1), 
U(c, "gogo.net", 1), U(c, "71ka.com", 1), U(c, "yuanming", 1), U(c, "暴躁的警衛兵靈魂", 1), 
U(c, "qtoy.com", 1), U(c, "orgasmus", 1), U(c, "碎片制造商人苏克", 1), U(c, "碎片製造商人馬克", 1), 
U(c, "majiajue", 1), U(c, "chailing", 1), U(c, "xinsheng", 1), U(c, "士兵管理員瓦爾臣", 1), 
U(c, " dishun ", 1), U(c, " yisilan", 1), U(c, "届中央政治局委員", 1), U(c, "臺灣青年獨立聯盟", 1), 
U(c, "届中央政治局委员", 1), U(c, "atan的移动石", 1), U(c, "屆中央政治局委員", 1), U(c, "伊斯蘭亞格林尼斯", 1), 
U(c, "格鲁(城镇移动)", 1), U(c, "xiaoquan", 1), U(c, "bl62.com", 1), U(c, "7mmo.com", 1), 
U(c, "*李*洪*志*靠", 1), U(c, "xq-wl.cn", 1), U(c, "碎片制造商人马克", 1), U(c, "nbfib.cn", 1), 
U(c, "ul86.com", 1), U(c, "xucaihou", 1), U(c, "发展与改革委员会", 1), U(c, "lidazhao", 1), 
U(c, "qqsg.org", 1), U(c, "hujintao", 1), U(c, "55sss偷拍區", 1), U(c, "hrichina", 1), 
U(c, "99sa.com", 1), U(c, "中華人民實話實說", 1), U(c, "txwswind", 1), U(c, "69nb.com", 1), 
U(c, "haog8.cn", 1), U(c, "ieboy.cn", 1), U(c, "xiuau.cn", 1), U(c, "blowjobs", 1), 
U(c, "creaders", 1), U(c, "中华人民实话实说", 1), U(c, "5d6d.com", 1), U(c, "47513.cn", 1), 
U(c, "osisa.cn", 1), U(c, "13ml.net", 1), U(c, "15wy.com", 1), U(c, "1t1t.com", 1), 
U(c, "nikesong", 1), U(c, "胡總書記，胡景濤", 1), U(c, "格魯(城鎮移動)", 1), U(c, "暴躁的警卫兵灵魂", 1), 
U(c, "台湾青年独立联盟", 1), U(c, "88kx.com", 1), U(c, "d666.com", 1), U(c, "g365.net", 1), 
U(c, "台湾建国运动组织", 1), U(c, "01gh.com", 1), U(c, "jiaochun", 1), U(c, "wy33.com", 1), 
U(c, "yumuming", 1), U(c, "arqus会议场", 1), U(c, "37447.cn", 1), U(c, " xiejiao", 1), 
U(c, "qgqm.org", 1), U(c, "碎片製造商人蘇克", 1), U(c, "tibetalk", 1), U(c, "发展和改革委员会", 1), 
U(c, "帕巴拉•格列朗杰", 1), U(c, "钓鱼岛不属于中国", 1), U(c, "my3q.com", 1), U(c, "伊斯兰亚格林尼斯", 1), 
U(c, "92ey.com", 1), U(c, "臺灣建國運動組織", 1), U(c, "士兵管理员瓦尔臣", 1), U(c, "55sss偷拍区", 1), 
U(c, "*法*轮*功*靠", 1), U(c, "the9city", 1), U(c, "元老蘭提(沃德）", 1), U(c, "胡总书记，胡景涛", 1), 
U(c, "butthead", 1), U(c, "元老兰提(沃德）", 1), U(c, "kartt.cn", 1), U(c, "dajiyuan", 1), 
U(c, "kelindun", 1), U(c, "triangle", 1), U(c, "@sshole靠", 1), U(c, "xihanuke", 1), 
U(c, " zhenzhu", 1), U(c, "wanggang", 1), c)), U(w, 8, (U(h = {}, "whoyo.com", 1), 
U(h, "liruihuan", 1), U(h, "美女裸体视频聊天室", 1), U(h, "chenzhili", 1), U(h, "samalanqi", 1), 
U(h, "jiangqing", 1), U(h, "92klgh.cn", 1), U(h, "91bysd.cn", 1), U(h, "lingjihua", 1), 
U(h, "icpcn.com", 1), U(h, "pkmmo.com", 1), U(h, "ys168.com", 1), U(h, "gamemaste", 1), 
U(h, "likeqiang", 1), U(h, "司马义•铁力瓦尔地", 1), U(h, "bbs.pkmmo", 1), U(h, "mayingjiu", 1), 
U(h, "xijinping", 1), U(h, "carrefour", 1), U(h, "falundafa", 1), U(h, "52ppsa.cn", 1), 
U(h, "sunyixian", 1), U(h, "kissmyass", 1), U(h, "bwowd.com", 1), U(h, "mosuolini", 1), 
U(h, "wgbobo.cn", 1), U(h, "几届中央政治局委员", 1), U(h, "lilanqing", 1), U(h, "l2jsom.cn", 1), 
U(h, "peacehall", 1), U(h, "*李*洪*志*阿扁", 1), U(h, "homexf.cn", 1), U(h, "dalailama", 1), 
U(h, "liushaoqi", 1), U(h, "wg7766.cn", 1), U(h, "jdyou.com", 1), U(h, "ultrasurf", 1), 
U(h, "166578.cn", 1), U(h, "freechina", 1), U(h, "89-64cdjp", 1), U(h, "gaolipiao", 1), 
U(h, "chenduxiu", 1), U(h, "zy666.net", 1), U(h, "narcotics", 1), U(h, "huyaobang", 1), 
U(h, "songchuyu", 1), U(h, "zhengjian", 1), U(h, "xyxgh.com", 1), U(h, "51hdw.com", 1), 
U(h, "szlmgh.cn", 1), U(h, "zaixu.net", 1), U(h, "173at.com", 1), U(h, "xl517.com", 1), 
U(h, "crestbone", 1), U(h, "bobaoping", 1), U(h, "zx002.com", 1), U(h, "lidenghui", 1), 
U(h, "woerkaixi", 1), U(h, "bz176.com", 1), U(h, "benladeng", 1), U(h, "597ft.com", 1), 
U(h, "3kwow.com", 1), U(h, "kod920.cn", 1), U(h, "yeswm.com", 1), U(h, "hexun.com", 1), 
U(h, "1qmsj.com", 1), U(h, "cvceo.com", 1), U(h, "haouse.cn", 1), U(h, "zhengqing", 1), 
U(h, "wanglijun", 1), U(h, "18900.com", 1), U(h, "1100y.com", 1), U(h, "52sxhy.cn", 1), 
U(h, "158le.com", 1), U(h, "wy724.com", 1), U(h, "pk200.com", 1), U(h, "fy371.com", 1), 
U(h, "qiangjian", 1), U(h, "kasiteluo", 1), U(h, "renminbao", 1), U(h, "mohanmode", 1), 
U(h, "jjdlw.com", 1), U(h, "luxiulian", 1), U(h, "中华大陆行政执事站", 1), U(h, " liulijun", 1), 
U(h, "lihongzhi", 1), U(h, "huzhiming", 1), h)), U(w, 9, (U(u = {}, "国家发展和改革委员会", 1), 
U(u, " liruihuan", 1), U(u, "voachinese", 1), U(u, "2feiche.cn", 1), U(u, "bbs.7gg.cn", 1), 
U(u, "jiayyou.cn", 1), U(u, "yuyongkang", 1), U(u, "jinzhengri", 1), U(u, "stlmbbs.cn", 1), 
U(u, "likeko.com", 1), U(u, "wangqishan", 1), U(u, "wy3868.com", 1), U(u, " lingjihua", 1), 
U(u, "锯齿通道被遗弃的骷髅", 1), U(u, "888895.com", 1), U(u, " wenjiabao", 1), U(u, "zzmysf.com", 1), 
U(u, "88mysf.com", 1), U(u, "dadati.com", 1), U(u, "gssmtt.com", 1), U(u, " tiananmen", 1), 
U(u, "vip886.com", 1), U(u, "lybbs.info", 1), U(u, "yalishanda", 1), U(u, "huajianmin", 1), 
U(u, "i9game.com", 1), U(u, "fulankelin", 1), U(u, "鋸齒通道被遺棄的骷髏", 1), U(u, "pengdehuai", 1), 
U(u, "sjlike.com", 1), U(u, "8188mu.com", 1), U(u, "uu1001.com", 1), U(u, "guobaxiong", 1), 
U(u, "54hero.com", 1), U(u, "jiaochuang", 1), U(u, "cdream.com", 1), U(u, " wubangguo", 1), 
U(u, "09city.com", 1), U(u, "jiangzemin", 1), U(u, "bazhuwg.cn", 1), U(u, "xyq2sf.com", 1), 
U(u, " falungong", 1), U(u, "025game.cn", 1), U(u, "zhanggaoli", 1), U(u, "202333.com", 1), 
U(u, "5m5m5m.com", 1), U(u, "hao1788.co", 1), U(u, "liubocheng", 1), U(u, " likeqiang", 1), 
U(u, "社。会。正。义。力。", 1), U(u, "chunyilang", 1), U(u, "epochtimes", 1), U(u, "0571qq.com", 1), 
U(u, "moyi520.cn", 1), U(u, " zhurongji", 1), U(u, "661661.com", 1), U(u, " zhouenlai", 1), 
U(u, "jinricheng", 1), U(u, "heluxiaofu", 1), U(u, " maozedong", 1), U(u, "zhengwunet", 1), 
U(u, "shenycs.co", 1), U(u, "ent365.com", 1), U(u, "yaowenyuan", 1), U(u, "fxjsqc.com", 1), 
U(u, "duowan.com", 1), U(u, "canyaa.com", 1), U(u, "92wydl.com", 1), U(u, "zengpeiyan", 1), 
U(u, "liuyunshan", 1), U(u, "wanglequan", 1), U(u, "bibidu.com", 1), U(u, "mpceggs.cn", 1), 
U(u, "国家发展与改革委员会", 1), U(u, "heguoqiang", 1), U(u, "yejianying", 1), U(u, "gamemaster", 1), 
U(u, "yujiankang", 1), U(u, "鋸齒通道被遺弃的骷髏", 1), U(u, "zhaoziyang", 1), U(u, "renmingbao", 1), 
U(u, "huiliangyu", 1), U(u, "fepochtime", 1), U(u, "jinzhengen", 1), U(u, "dolbbs.com", 1), 
U(u, "zhuanfalun", 1), u)), U(w, 10, (U(d = {}, "luoronghuan", 1), U(d, "luoxialu.cn", 1), 
U(d, "nierongzhen", 1), U(d, "zhenshanren", 1), U(d, "www.xaoh.cn", 1), U(d, "www.766.com", 1), 
U(d, "991game.com", 1), U(d, "lyx-game.cn", 1), U(d, "kkk.xaoh.cn", 1), U(d, "格雷(關卡排名管理者)", 1), 
U(d, " jiaqinglin", 1), U(d, "lordren.com", 1), U(d, "lll.xaoh.cn", 1), U(d, "wangqishan ", 1), 
U(d, "minghuinews", 1), U(d, "zxsj188.com", 1), U(d, "ｇａｍｅ　ｍａｓｔｅｒ", 1), U(d, "ooo.xaoh.cn", 1), 
U(d, "fisonet.com", 1), U(d, "阿不来提•阿不都热西提", 1), U(d, "社。会。正。义。力。量", 1), U(d, "6-4tianwang", 1), 
U(d, "gigabyte.cn", 1), U(d, "chenliangyu", 1), U(d, "wangzhaoguo", 1), U(d, "any2000.com", 1), 
U(d, "anbeijinsan", 1), U(d, "17173dl.net", 1), U(d, "weijianxing", 1), U(d, "13888wg.com", 1), 
U(d, "ｇａｍｅ　ＭＡＳＴＥＲ", 1), U(d, "soundofhope", 1), U(d, "格雷(关卡排名管理者)", 1), U(d, "liuyunshan ", 1), 
U(d, "newsmth.net", 1), U(d, "ＧＡＭＥ　ｍａｓｔｅｒ", 1), U(d, "ising99.com", 1), U(d, "www.bin5.cn", 1), 
U(d, "feelmistone", 1), U(d, "eee.xaoh.cn", 1), U(d, "huashengdun", 1), U(d, "zzz.xaoh.cn", 1), 
U(d, "cikcatv.2om", 1), U(d, "ＧＡＭＥ　ＭＡＳＴＥＲ", 1), U(d, "abianwansui", 1), U(d, "lxsm888.com", 1), 
U(d, "rrr.xaoh.cn", 1), U(d, "host800.com", 1), U(d, "17youle.com", 1), U(d, "haosilu.com", 1), 
U(d, "xuxiangqian", 1), U(d, "wanghongwen", 1), U(d, "jiayyou.com", 1), U(d, " lihongzhi ", 1), 
U(d, "mgjzybj.com", 1), U(d, "567567aa.cn", 1), U(d, "okaygood.cn", 1), U(d, "51jiafen.cn", 1), 
U(d, "showka8.com", 1), U(d, "mingpaonews", 1), U(d, "tangjiaxuan", 1), U(d, "triangleboy", 1), 
U(d, "bulaoge.com", 1), U(d, "bbs.766.com", 1), U(d, "xizangduli ", 1), U(d, "zhongguohun", 1), 
U(d, "jooplay.com", 1), U(d, "lichangchun", 1), U(d, "wuguanzheng", 1), U(d, "secretchina", 1), 
d)), U(w, 11, (U(p = {}, "www.yhzt.org", 1), U(p, "globalrescue", 1), U(p, "wgxiaowu.com", 1), 
U(p, "zhidian8.com", 1), U(p, "www.legu.com", 1), U(p, "chinaliberal", 1), U(p, " taiwanduli ", 1), 
U(p, "caogangchuan", 1), U(p, "langyou.info", 1), U(p, "zhoujiankang", 1), U(p, " pengliyuan ", 1), 
U(p, "www.70yx.com", 1), U(p, " jiangjieshi", 1), U(p, " lichangchun", 1), U(p, "17173yxdl.cn", 1), 
U(p, "neckromancer", 1), U(p, "parke888.com", 1), U(p, "chinavfx.net", 1), U(p, "www.anule.cn", 1), 
U(p, "zhouxiaokang", 1), U(p, "id666.uqc.cn", 1), U(p, " zhongguohun", 1), U(p, "falundafahao", 1), 
U(p, "fawanghuihui", 1), U(p, "www.2q5q.com", 1), U(p, " shijiamouni", 1), U(p, "yuzhengsheng", 1), 
U(p, "xinguangming", 1), U(p, "sunzhongshan", 1), U(p, "zhangdejiang", 1), U(p, "asgardcn.com", 1), 
U(p, "gongchandang", 1), U(p, "yaokong7.com", 1), U(p, "365tttyx.com", 1), U(p, "laichangxing", 1), 
U(p, "58.253.67.74", 1), U(p, "chengmingmag", 1), U(p, "urban-rivals", 1), U(p, "zengqinghong", 1), 
p)), U(w, 12, (U(f = {}, "www.wow366.cn", 1), U(f, "tianlong4f.cn", 1), U(f, "zhangchunqiao", 1), 
U(f, "bbs.butcn.com", 1), U(f, "www.dy6789.cn", 1), U(f, "youxiji888.cn", 1), U(f, "gangcunningci", 1), 
U(f, "www.zxkaku.cn", 1), U(f, "aisenhaoweier", 1), U(f, "www.zy528.com", 1), U(f, "geocities.com", 1), 
U(f, "beijingspring", 1), U(f, "jinpaopao.com", 1), U(f, "pcikchina.com", 1), U(f, "gangcunxiushu", 1), 
U(f, "clockgemstone", 1), U(f, "xinwenguanzhi", 1), U(f, "urban-rivals靠", 1), U(f, "51juezhan.com", 1), 
U(f, "208.43.198.56", 1), U(f, "administrator", 1), U(f, " dengxiaoping", 1), U(f, " jiangjingguo", 1), 
U(f, "lamusifeierde", 1), U(f, " zhouyongkang", 1), U(f, " zengqinghong", 1), U(f, "qixingnet.com", 1), 
U(f, "zhengjianwang", 1), U(f, "www.567yx.com", 1), U(f, "wangyoudl.com", 1), U(f, "feitengdl.com", 1), 
U(f, "www.yxnpc.com", 1), U(f, "jiangdongriji", 1), U(f, "hypermart.net", 1), U(f, "meideweijiefu", 1), 
U(f, "www.365jw.com", 1), U(f, "1000scarf.com", 1), U(f, " chenshuibian", 1), U(f, "www.315ts.net", 1), 
U(f, "www.zsyxhd.cn", 1), U(f, "www.ylteam.cn", 1), f)), U(w, 13, (U(m = {}, "webgame。com。cn", 1), 
U(m, " xinjiangduli ", 1), U(m, "chinesenewsnet", 1), U(m, "chongxianmu.cn", 1), 
U(m, "reddidi.com.cn", 1), U(m, "www.gw17173.cn", 1), U(m, "www.99game.net", 1), 
U(m, "zuanshi1000.cn", 1), U(m, "dongtiaoyingji", 1), U(m, "huihuangtx.com", 1), 
U(m, "www.foyeye.com", 1), U(m, " zhangdejiang ", 1), U(m, "www.978808.com", 1), 
U(m, "www.976543.com", 1), U(m, "www.sexwyt.com", 1), U(m, "webgame.com.cn", 1), 
U(m, "zhonghuaminguo", 1), U(m, " xinguangmingm", 1), U(m, "www.gardcn.com", 1), 
m)), U(w, 14, (U(g = {}, "www.maituan.com", 1), U(g, "www.neicehao.cn", 1), U(g, "prettyirene.net", 1), 
U(g, "jiangzhongzheng", 1), U(g, "zhuanfalunadmin", 1), U(g, "shanbenwushiliu", 1), 
U(g, "blacksee.com.cn", 1), U(g, "webgame。com。cn靠", 1), U(g, "consignment5173", 1), 
U(g, "www.wang567.com", 1), U(g, "chinesenewsweek", 1), U(g, "bcd.s.59764.com", 1), 
g)), U(w, 15, (U(_ = {}, "yuanmingxinsheng", 1), U(_, "yidangzhuanzheng", 1), U(_, "www.sf766.com.cn", 1), 
U(_, " renmindahuitang", 1), U(_, " lianggezhongguo", 1), U(_, "quannengshenjiao", 1), 
U(_, "aaad.s.59764.com", 1), U(_, "11xp.1243.net.cn", 1), U(_, "aaac.s.51524.com", 1), 
_)), U(w, 16, (U(T = {}, "www.91wangyou.com", 1), U(T, "www.23nice.com.cn", 1), 
U(T, "njgamecollege.org", 1), U(T, "xiaoqinzaixian.cn", 1), U(T, "tb.hi.4024.net.cn", 1), 
T)), U(w, 17, (U(C = {}, "xiao77.1243.net.cn", 1), U(C, "dingxiang.1249.net", 1), 
U(C, "baijie.1249.net.cn", 1), C)), U(w, 18, (U(y = {}, "www.gamelifeclub.cn", 1), 
U(y, "digitallongking.com", 1), y)), U(w, 19, {}), U(w, 20, (U(I = {}, "woyinwose.1243.net.cn", 1), 
U(I, "dingxiang.1243.net.cn", 1), U(I, "cnaicheng.1174.net.cn", 1), I)), U(w, 21, (U(v = {}, "niuniujidi.1174.net.cn", 1), 
U(v, "siwameitui.1274.net.cn", 1), v)), U(w, 22, (U(E = {}, "sewuyuetian.1174.net.cn", 1), 
U(E, "sewuyuetian.1274.net.cn", 1), E)), U(w, 23, (U(S = {}, "www.sanjidianying.com.cn", 1), 
U(S, "1234chengren.1249.net.cn", 1), U(S, "xiao77luntan.1249.net.cn", 1), S)), U(w, 24, (U(b = {}, "meiguiqingren.1274.net.cn", 1), 
U(b, "lunlidianying.1274.net.cn", 1), b)), U(w, 25, U({}, "chengrenmanhua.1242.net.cn", 1)), 
U(w, 26, (U(R = {}, "qingsewuyuetian.1174.net.cn", 1), U(R, "chengrenwangzhi.1242.net.cn", 1), 
U(R, "huangsexiaoshuo.1242.net.cn", 1), R)), U(w, 27, (U(N = {}, "aa.yazhousetu.hi.9705.net.cn", 1), 
U(N, "xingqingzhongren.1174.net.cn", 1), N)), U(w, 28, {}), U(w, 29, {}), U(w, 30, U({}, "lunlidianyingxiazai.1174.net.cn", 1)), 
U(w, 31, {}), U(w, 32, U({}, "itnongzhuang.com2y7v.cnhwxvote.cn", 1)), U(w, 33, {}), 
U(w, 34, U({}, "jj.pangfangwuyuetian.hi.9705.net.cn", 1)), U(w, 35, {}), U(w, 36, U({}, "www.50spcombaidu1828adyou97sace.co.cc", 1)), 
U(w, 37, {}), U(w, 38, {}), U(w, 39, {}), w);
i.default = A;
t.exports = i.default;
cc._RF.pop();
}, {} ],
TextManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "f68d0YGC/hFp4YCF/p0sv+x", "TextManager");
cc.Class({
extends: BaseAssetManager,
properties: {
_name: {
default: "TextManager",
override: !0
}
},
loadResourceReal: function(e, t) {
LoadUtils.loadResWithType(e, cc.TextAsset, function(i, s) {
i ? logger.error("加载Texture2D失败:", e) : t(e, s);
});
}
});
cc._RF.pop();
}, {} ],
Texture2DManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "4104eZSDC9GAZDkbPfJN2bY", "Texture2DManager");
cc.Class({
extends: BaseAssetManager,
properties: {
_name: {
default: "Texture2DManager",
override: !0
}
},
loadResourceReal: function(e, t) {
this.loadResourceRealLimit(e, t);
},
loadResourceRealLimit: function(e, t) {
var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 5;
if (i <= 0) logger.error(this._name, ",多次尝试下载资源失败:", e); else {
var s = this;
LoadUtils.loadResWithType(e, cc.Texture2D, function(n, o) {
if (n) {
logger.warn("加载Texture2D失败:", i, ",", e);
i -= 1;
s.loadResourceRealLimit(e, t, i);
} else t(e, o);
});
}
}
});
cc._RF.pop();
}, {} ],
TextureUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "f8af2Zh1ZdKHb0+sj7ruZPy", "TextureUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
getSpriteFrame: function(e, t) {
if (t) {
var i = new RegExp("/", "g"), s = t.replace(i, "-");
return e.getSpriteFrame(s);
}
logger.error("url === null");
}
}, n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
TilemapUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "1d0daiCmw5CToQkT2c9TZo3", "TilemapUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
createTilemapCom: function(e, t, i) {
var s = this;
PrefabUtils.load("module/component/ComTileMapP", function(n) {
var o = NodeUtils.seekC(n, "tmNode");
if (o) {
t ? t(n) : logger.warn(">>>>>>>>>>>>>>>>>>>>>>> TilemapUtils.js  32 callback === null");
s.addTilemapData2Node(o, e, function() {
i(n, o);
});
} else logger.error("tmNode == null");
});
},
createTilemapNode: function(e, t) {
var i = new cc.Node("root");
i.addComponent(cc.TiledMap);
this.addTilemapData2Node(i, e, t);
},
addTilemapData2Node: function(e, t, i) {
LoadUtils.loadRes(t, function(s, n) {
if (s) logger.error("加载tmx失败:" + t); else {
var o = e.getComponent(cc.TiledMap);
if (o) {
o.tmxAsset = n;
i ? i(e) : logger.info(">>>>>>>>>>>>>>>>>>>>>>> TilemapUtils.js  88 callback === null");
} else logger.warn("targetNode 没有附带 组件 cc.TiledMap");
}
});
}
}, n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
TimeManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "39259yWmRxFbqbM4EslnR3d", "TimeManager");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = cc.Class({
ctor: function() {
this.init();
},
init: function() {
this.m_callFuncList = [];
},
getTimestamp: function() {
return new Date().valueOf();
},
on: function(e, t, i) {
this.m_callFuncList.push({
target: t,
callback: e,
dt: i,
curDt: 0
});
},
off: function(e) {
if ("undefined" != typeof this.m_callFuncList) for (var t = 0; t < this.m_callFuncList.length; t++) {
var i = this.m_callFuncList[t];
if (i && i.callback === e) {
this.m_callFuncList.splice(t, 1);
break;
}
}
},
update: function(e) {
if ("undefined" != typeof this.m_callFuncList) for (var t = 0; t < this.m_callFuncList.length; t++) {
var i = this.m_callFuncList[t];
if (i) if (i.dt) {
i.curDt += e;
if (i.curDt >= i.dt) {
i.callback.call(i.target, i.curDt, this.getTimestamp());
i.curDt = 0;
}
} else i.callback.call(i.target, e, this.getTimestamp());
}
},
delayTime: function(e, t) {
setTimeout(function() {
TypeUtils.isFunction(e) && e();
}, 1e3 * t);
}
});
i.default = s;
t.exports = i.default;
cc._RF.pop();
}, {} ],
TimeMgr: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "56238jlNZRAAK21yNOaSCDJ", "TimeMgr");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = cc.Class({
ctor: function() {
this.init();
this.initClientTimestamp();
},
init: function() {
this.m_callFuncList = [];
this.m_count = 0;
this.m_time = TimeUtils.getTimestamp();
this.m_frameRate = 60;
},
__onDestroy__: function() {
this.m_callFuncList = [];
},
initClientTimestamp: function() {
this.m_initClientTimestamp = TimeUtils.getTimestamp();
},
initServerTimestamp: function(e) {
this.m_loginServerTimestamp = e > 1587535826e3 ? e : 1e3 * e;
},
getServerTimestamp: function() {
return this.m_loginServerTimestamp + TimeUtils.getTimestamp() - this.m_initClientTimestamp;
},
getServerTimestampSec: function() {
return Math.floor(this.getServerTimestamp() / 1e3);
},
getTimestamp: function() {
return new Date().valueOf();
},
getRealTimeFrameRate: function() {
return this.m_frameRate;
},
on: function(e, t, i, s) {
this.m_count++;
var n = {
target: t,
callback: e,
eventIdx: this.m_count,
dt: i,
isDelay: s,
isOff: !1,
curDt: 0
};
this.m_callFuncList.push(n);
return n;
},
off: function(e) {
if (!TypeUtils.isRealNull(this.m_callFuncList)) for (var t = 0; t < this.m_callFuncList.length; t++) {
var i = this.m_callFuncList[t];
if (i && i.callback === e) {
this.m_callFuncList.splice(t, 1);
break;
}
}
},
offByIndex: function(e) {
if (!TypeUtils.isRealNull(this.m_callFuncList)) for (var t = 0; t < this.m_callFuncList.length; t++) {
var i = this.m_callFuncList[t];
if (i && i.eventIdx === e.eventIdx) {
i.isOff = !0;
break;
}
}
},
clearOffTimer: function() {
TypeUtils.isRealNull(this.m_callFuncList) || ArrayUtils.safeRemove(this.m_callFuncList, function(e, t) {
if (t && t.isOff) return !0;
});
},
update: function(e) {
this.updateFrameRate(e);
if ("undefined" != typeof this.m_callFuncList) {
for (var t = !1, i = 0; i < this.m_callFuncList.length; i++) {
var s = this.m_callFuncList[i];
if (s && !s.isOff) if (s.dt) {
s.curDt += e;
if (s.curDt >= s.dt) {
TypeUtils.isRealNull(s.target) ? s.callback(s.curDt, this.getTimestamp()) : s.callback.call(s.target, s.curDt, this.getTimestamp());
s.curDt = s.curDt - s.dt;
if (1 == s.isDelay) {
s.isOff = !0;
t = !1;
}
}
} else {
TypeUtils.isRealNull(s.target) ? s.callback(e, this.getTimestamp()) : s.callback.call(s.target, e, this.getTimestamp());
if (1 == s.isDelay) {
s.isOff = !0;
t = !1;
}
}
}
t && this.clearOffTimer();
}
},
delayTime: function(e, t, i) {
setTimeout(function() {
(TypeUtils.isRealNull(i) || cc.isValid(i)) && TypeUtils.isFunction(e) && e();
}, 1e3 * t);
},
updateFrameRate: function(e) {
this.m_frameRate = 1 / ((TimeUtils.getTimestamp() - this.m_time) / 1e3);
this.m_time = TimeUtils.getTimestamp();
}
});
i.default = s;
t.exports = i.default;
cc._RF.pop();
}, {} ],
TimeUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "bb7cahWnbhL+JzFPQb7Tdxk", "TimeUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
getServerTime: function() {
return Math.ceil(new Date().getTime() / 1e3 - s.getModel().getDiffTimeToServer());
},
getCurrTime: function() {
return new Date().getTime() / 1e3;
},
getDiffTime: function(e) {
return Math.floor(e - s.getServerTime());
},
getCtrl: function() {
return app.ctrls.login;
},
getModel: function() {
return s.getCtrl().getModel();
},
isTimestampOver: function(e) {
return this.getTimestamp() - e > 0;
},
getDiffTimestamp: function(e) {
return e - this.getTimestamp();
},
getTimestamp: function() {
return new Date().valueOf();
},
getTimeFormMill: function(e, t) {
return s.getTimeForm(Math.floor(e / 1e3), t);
},
getTimeForm: function(e, t) {
var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0;
e <= 0 && (e = 0);
e = Math.floor(e);
null == t && (t = ":");
var s = "", n = e % 60, o = 0, a = 0;
n < 10 && (n = "0" + n);
1 != i && (s += n);
e = Math.floor(e / 60);
if (2 == i) {
o < 10 && (o = "0" + e);
s = "" === s ? o : o + t + s;
} else {
e > 0 && (o = e % 60);
o < 10 && (o = "0" + o);
s = "" === s ? o : o + t + s;
(e = Math.floor(e / 60)) > 0 && (a = e);
0 === a ? a = "00" : a < 10 && (a = "0" + a.toString());
s = "" === s ? a : a + t + s;
}
return s;
},
getTimeForm2: function(e) {
return e > 3600 && e % 3600 == 0 ? e / 3600 + "小时" : e > 60 && e % 60 == 0 ? e / 60 + "分钟" : e + "秒";
},
getTimeForm3: function(e) {
var t = 0, i = Math.floor(e / 86400);
e %= 86400;
var s = Math.floor(e / 3600);
e %= 3600;
var n = Math.floor(e / 60), o = e % 60, a = "";
if (i > 0) {
a = a + i + "天";
if (2 == (t += 1)) return a;
}
if (s > 0) {
a = a + s + "小时";
if (2 == (t += 1)) return a;
}
if (n >= 0) {
a = a + n + "分钟";
if (2 == (t += 1)) return a;
}
if (o > 0) {
a = a + o + "秒";
if (2 == (t += 1)) return a;
}
return a;
}
};
s.getTimestamp = function() {
return new Date().getTime();
};
s.getNextTimestamp = function(e) {
return this.getTimestamp() + e;
};
s.RecordTimeKey = {};
s.testTime0 = function(e) {
s.RecordTimeKey[e] = this.getTimestamp();
};
s.testTime1 = function(e) {
if (s.RecordTimeKey[e]) {
var t = (this.getTimestamp() - s.RecordTimeKey[e]) / 1e3;
console.log(e, " ## 用时 --\x3e", t);
DicUtils.deleteVal(s.RecordTimeKey, e);
return t;
}
logger.warn("TimeUtils.timeEnd " + e + " 没有设置timeBegin");
};
s.testTime = function(e, t) {
if (0 === e) return this.testTime0(t);
if (1 === e) return this.testTime1(t);
console.warn("非法时间key:", e);
};
s.dateFormat = function(e, t) {
var i, s = new Date(1e3 * t);
s.set;
var n = {
"Y+": s.getFullYear().toString(),
"m+": (s.getMonth() + 1).toString(),
"d+": s.getDate().toString(),
"H+": s.getHours().toString(),
"M+": s.getMinutes().toString(),
"S+": s.getSeconds().toString()
};
for (var o in n) (i = new RegExp("(" + o + ")").exec(e)) && (e = e.replace(i[1], 1 == i[1].length ? n[o] : n[o].padStart(i[1].length, "0")));
return e;
};
var n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
TipsManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "ceb38EGiuFK/Z66TxFSrnm+", "TipsManager");
cc.Class({
ctor: function() {
this.tipsPrefab = null;
},
init: function() {
var e = this;
this.tipsPrefab || LoadUtils.loadRes("tips/Tips", function(t, i) {
e.tipsPrefab = i;
});
},
showTips: function(e) {
var t = cc.instantiate(this.tipsPrefab), i = t.getComponent("TipsCtrl");
e && i.setContent(e);
ViewManager.showTipsView(t);
}
});
cc._RF.pop();
}, {} ],
TipsUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "ae5b7AUYn1Ce7PJSeAuzDz4", "TipsUtils");
cc.Class({
ctor: function() {},
showTipsBox: function(e) {
ViewManager.showView("COMFIRM_BOX_VIEW", "alert", {
title: e.title,
desc: e.desc,
isHideCloce: e.isHideCloce,
signBtn: e.signBtn,
needCheckBox: e.needCheckBox,
desCallBack: e.desCallBack,
sureCallBack: e.sureCallBack,
cancelCallback: e.cancelCallback,
enterDesc: e.enterDesc,
alignType: e.alignType,
fontSize: e.fontSize
});
},
showTips: function(e, t) {
if ("" !== e) {
var i = ViewManager.getView("TIPS_WORD_VIEW");
if (i) {
i.getComponent(ViewConfig.TIPS_WORD_VIEW.scriptName).pushData({
str: e,
showTime: t
});
} else ViewManager.showView("TIPS_WORD_VIEW", "tips", {
str: e,
showTime: t
});
}
}
});
cc._RF.pop();
}, {} ],
TowerShareEnum: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "44f7aspcKZAoYYEz4l43rqz", "TowerShareEnum");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
ShareId: {}
};
s.ShareId.ClearNewLevel = 1, s.ShareId.ClearBossLevel = 2, s.ShareId.TowerAwakeSucc = 3, 
s.ShareId.ObtainNewGeneChip = 4, s.ShareId.AchieveNewAchievements = 5, s.ShareId.UnlockNewMonster = 6, 
s.ShareId.UserFullScreenSkill = 7, s.ShareId.OpenNewChapter = 8, s.ShareId.ObtainRedPacket = 9, 
s.ShareId.RecordVideoShare = 10, s.ShareImg = {
WX: [ {
imageUrlId: "UNW9HzQ0RzWOR6SgAPzBtQ==",
imageUrl: "https://mmocgame.qpic.cn/wechatgame/m9mKebD5AZmnNywXib80QwVWribFbooic0V2G4KQuce3eqNnCyzL0gZvPab9l4ej3h8/0"
}, {
imageUrlId: "IfUYuF4OQBu6V7+3aNaz3A==",
imageUrl: "https://mmocgame.qpic.cn/wechatgame/m9mKebD5AZk11ibK00xUJWZCRHdJVR6ibHHkbic4tiaSBialGF0IAiayyAm6vKeKAYf2Dc/0"
} ],
QQ: [ {
imageUrl: "https://minigamebox.siruigame.com/game/shareImg/fxt_01.jpg"
}, {
imageUrl: "https://minigamebox.siruigame.com/game/shareImg/fxt_02.jpg"
} ],
TT: [ {
templateId: "8n09slolujf6h12c4e"
} ]
};
s.PlatformType = {};
s.PlatformType.WX = 1;
s.PlatformType.QQ = 2;
s.PlatformType.TT = 3;
var n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
TxtFilterUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "43f21cVNnFKSbWBdRlF3lb2", "TxtFilterUtils");
var s = e("TextFilterConfig");
window.TxtFilterUtils = cc.Class({
statics: {
_instance: null,
getInstance: function() {
TxtFilterUtils._instance || (TxtFilterUtils._instance = new TxtFilterUtils());
return TxtFilterUtils._instance;
}
},
ctor: function() {},
isValid: function(e) {
for (var t = function(e, t, i) {
for (var s = 0, n = e.length; i + s <= n; ) {
var o = e.substring(s, s + i);
o = o.toLowerCase();
if (!TypeUtils.isRealNull(t[o])) return !1;
s += 1;
}
return !0;
}, i = 0; i < 38; i++) if (!t(e, s[i + 1], i + 2)) return !1;
return !0;
},
checkIsValid: function(e, t, i) {
var s = this;
ViewManager.showRequest(null, ViewManager.TypeHttps, {
id: 1e6,
name: "检查敏感字"
});
AppUtils.getPlatform().doMsgSecCheck(e, function(n) {
var o = !1;
n && (o = s.isValid(e));
if (o) TypeUtils.isFunction(t) && t(); else {
TipsUtils.showTips("您的输入含有非法字符！");
TypeUtils.isFunction(i) && i();
}
ViewManager.hideRequest(ViewManager.TypeHttps, {
id: 1e6,
name: "检查敏感字"
});
});
},
filter: function(e, t, i) {
var n = function(e, t, i, s, n) {
for (var o = [], a = 0, r = e.length; i + a <= r; ) {
var l = e.substring(a, a + i), c = t[l = l.toLowerCase()];
if (c && c > 0) {
if (c >= s) return;
o.push({
startIdx: a,
len: i
});
a += i;
} else a += 1;
}
if (o.length <= 0) return e;
for (var h = "", u = 0, d = 0; d < o.length; d++) {
var p = o[d].startIdx, f = p + o[d].len;
h = h + e.substring(u, p) + new Array(o[d].len + 1).join(n);
u = f;
}
return h += e.substring(u, r - 1);
};
i = i || "*";
t = t || 3;
for (var o = e, a = e.length, r = 0; r < 38 && !(r + 2 > a); r++) {
o = n(o, s[r + 1], r + 2, t, i);
if (TypeUtils.isAllNull(o)) return e;
}
return o;
}
});
cc._RF.pop();
}, {
TextFilterConfig: "TextFilterConfig"
} ],
TypeUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "10b22jdDR9HI4ptUwGAtXAA", "TypeUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
isRealNull: function(e) {
return null === e || void 0 === e;
},
isAllNull: function(e) {
return null === e || void 0 === e || "" === e;
},
isNumber: function(e) {
return null !== e && void 0 !== e && e.constructor === Number;
},
isString: function(e) {
return null !== e && void 0 !== e && e.constructor === String;
},
isBool: function(e) {
return null !== e && void 0 !== e && e.constructor === Boolean;
},
isFunction: function(e) {
return null !== e && void 0 !== e && e.constructor === Function;
},
isObj: function(e) {
return null !== e && void 0 !== e && e.constructor === Object;
},
isArray: function(e) {
return null !== e && void 0 !== e && e.constructor === Array;
},
isNotEmptyArray: function(e) {
return null !== e && void 0 !== e && (e.constructor === Array && e.length > 0);
},
isEmptyArray: function(e) {
return null === e || void 0 === e || e.constructor === Array && 0 === e.length;
},
isType: function(e, t) {
return null !== e && void 0 !== e && e instanceof t;
}
}, n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
UidMgr: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "e7f8969jOdM5rdGE/s3DphU", "UidMgr");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = cc.Class({
ctor: function() {
this.initData();
},
initData: function() {
this.m_uid = 1;
},
getUid: function() {
var e = this.m_uid;
this.m_uid = (this.m_uid + 1) % 3e5;
return e;
}
});
i.default = s;
t.exports = i.default;
cc._RF.pop();
}, {} ],
UserDataManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "6e6b6jwX3BK5ZI0VxbxYFjg", "UserDataManager");
var s = e("DataHelper"), n = e("ManagerEnum");
cc.Class({
extends: s,
ctor: function() {},
init: function() {
s.prototype.init.call(this, "UserDataManager");
console.log("初始化基本用户数据");
return this;
},
isShowHurtNumber: function() {
return this.getValue(n.UserDataManager.UserKey.isShowHurtNumber, !0);
},
setShowHurtNumber: function(e) {
this.setValue(n.UserDataManager.UserKey.isShowHurtNumber, e);
},
showLoadingCartoon: function(e) {
this.setValue(n.UserDataManager.UserKey.isShowLoadingCartoon, e);
},
isShowLoadingCartoon: function() {
return this.getValue(n.UserDataManager.UserKey.isShowLoadingCartoon, !0);
},
setSetFrameRateStatus: function(e) {
this.setValue(n.UserDataManager.UserKey.isSetHightFrameRate, e);
},
getUserFrameRateStatus: function() {
return this.getValue(n.UserDataManager.UserKey.isSetHightFrameRate, n.UserDataManager.UserKey.HightFrameRate.Undefined);
}
});
cc._RF.pop();
}, {
DataHelper: "DataHelper",
ManagerEnum: "ManagerEnum"
} ],
UserDefaultConst: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "6c414jm6xVCJ7ASkCPxcwpX", "UserDefaultConst");
window.UserDefaultConst = {
DeviceNumber: "DeviceNumber",
AllowUserProtocol: "AllowUserProtocol",
UserAccountData: "UserAccountData",
QuickLoginData: "QuickLoginData",
LastLoginTime: "LastLoginTime",
UserSettingIsShuiBo: "UserSettingIsShuiBo",
UserSettingIsLiuHai: "UserSettingIsLiuHai",
CheckVailHeadImgs: "CheckVailHeadImgs",
MusicVolume: "MusicVolume",
SoundVolume: "SoundVolume",
Shop_isOrderNotFinish: "Shop_isOrderNotFinish",
UserNotFirstTimeClickClub: "UserNotFirstTimeClickClub",
UserInfo: "UserInfo",
UserAccount: "UserAccount"
};
cc._RF.pop();
}, {} ],
UserUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "a3e09S1qTxLZrjwx7YaNEtS", "UserUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = e("TypeUtils"), n = {
UserKeyHistoryTopScore: "HistoryTopScore",
UserData: "UserData",
BagData: "BagData",
setVal: function(e, t) {
return s.isRealNull(t) ? cc.sys.localStorage.removeItem(e) : cc.sys.localStorage.setItem(e, t);
},
getVal: function(e) {
return cc.sys.localStorage.getItem(e);
},
isNull: function(e) {
return void 0 === e || (null === e || "" === e);
},
getFloatVal: function(e, t) {
var i = this.getVal(e);
return s.isAllNull(i) ? t || 0 : Number(i);
},
setFloatVal: function(e, t) {
this.isNull(e) || this.isNull(t) ? logger.warn("key == null or val == null,", e, " ,", t) : this.setVal(e, Number(t));
},
removeVal: function(e) {
return cc.sys.localStorage.removeItem(e);
},
clearAll: function() {
cc.sys.localStorage.clear();
},
setData: function(e, t) {
var i = JSON.stringify(t);
cc.sys.localStorage.setItem(e, i);
},
setDataStr: function(e, t) {
cc.sys.localStorage.setItem(e, t);
},
getDataStr: function(e, t) {
var i = cc.sys.localStorage.getItem(e);
s.isAllNull(i) && !s.isAllNull(t) && (i = t);
return i;
},
getRoleVal: function(e) {
return app.ctrls.role.getModel().getRoleSettingByKey(e);
},
setRoleVal: function(e, t) {
app.ctrls.role.getModel().requireSaveSetting(e, t);
},
getLastChooseRoomType: function(e, t) {
if (!s.isRealNull(t)) {
var i = "Role" + e + "_RoomGroup" + t;
return n.getFloatVal(i);
}
},
setLastChooseRoomType: function(e, t, i) {
var s = "Role" + e + "_RoomGroup" + t;
n.setFloatVal(s, i);
},
getAccountList: function() {
var e = this.getVal(UserDefaultConst.UserAccount);
if (s.isAllNull(e)) return [];
var t = StringUtils.decodeBase64(e);
return JSON.parse(t);
},
saveAccountList: function(e, t) {
var i = this.getAccountList();
ArrayUtils.safeRemove(i, function(t, i) {
if (i.account == e) return !0;
});
ArrayUtils.insert(infos, 0, {
account: e,
password: t,
desc: e,
isShow: !0
});
ArrayUtils.safeRemove(i, function(e, t) {
if (e >= 20) return !0;
});
var s = JSON.stringify(i);
this.setVal(UserDefaultConst.UserAccount, StringUtils.encodeBase64(s));
return i;
},
removeAccountForList: function(e) {
for (var t = this.getAccountList(), i = 0; i < t.length; i++) {
if (t[i].account == e) {
t.splice(i, 1);
break;
}
}
var s = JSON.stringify(t);
this.setVal(UserDefaultConst.UserAccount, StringUtils.encodeBase64(s));
return t;
},
getInfoList: function() {
var e = this.getVal(UserDefaultConst.UserInfo);
return s.isAllNull(e) ? [] : JSON.parse(e);
},
saveInfoList: function(e, t) {
var i = this.getInfoList();
ArrayUtils.safeRemove(i, function(t, i) {
if (i.roleId == e) return !0;
});
ArrayUtils.insert(i, 0, {
roleId: e,
roleName: t,
desc: t + "(ID:" + e + ")",
isShow: !0
});
ArrayUtils.safeRemove(i, function(e, t) {
if (e >= 10) return !0;
});
this.setVal(UserDefaultConst.UserInfo, JSON.stringify(i));
return i;
},
removeInfoForList: function(e) {
for (var t = this.getInfoList(), i = 0; i < t.length; i++) {
if (t[i].roleId == e) {
t.splice(i, 1);
break;
}
}
this.setVal(UserDefaultConst.UserInfo, JSON.stringify(t));
return t;
}
}, o = n;
i.default = o;
t.exports = i.default;
cc._RF.pop();
}, {
TypeUtils: "TypeUtils"
} ],
Utils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "8e56462y+5NZZA4LDqUJvB9", "Utils");
cc.Class({
ctor: function() {},
test: function() {
console.log("utils test ");
}
});
cc._RF.pop();
}, {} ],
ViewBase: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "49960ODGsVNbqEpDBWMBqnN", "ViewBase");
function s(e) {
return r(e) || a(e) || o(e) || n();
}
function n() {
throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function o(e, t) {
if (e) {
if ("string" == typeof e) return l(e, t);
var i = Object.prototype.toString.call(e).slice(8, -1);
"Object" === i && e.constructor && (i = e.constructor.name);
return "Map" === i || "Set" === i ? Array.from(i) : "Arguments" === i || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i) ? l(e, t) : void 0;
}
}
function a(e) {
if ("undefined" != typeof Symbol && Symbol.iterator in Object(e)) return Array.from(e);
}
function r(e) {
if (Array.isArray(e)) return l(e);
}
function l(e, t) {
(null == t || t > e.length) && (t = e.length);
for (var i = 0, s = new Array(t); i < t; i++) s[i] = e[i];
return s;
}
var c = e("BaseComponent");
window.ViewBase = cc.Class({
extends: c,
properties: {},
releaseTextures: function(e) {
PlistTextureManager.deloadResource(e);
},
isTextureLoad: function(e) {
return PlistTextureManager.isResourceLoad(e);
},
_initBgm: function() {},
_setViewName: function(e) {
this.viewName = e;
},
getArgs: function() {
return this._m_args;
},
ctor: function() {},
onLoad: function() {
c.prototype.onLoad.call(this);
this.onAdapt();
this._initBgm();
this._m_args ? this.onCreate.apply(this, s(this._m_args)) : this.onCreate();
this._initEvent();
},
start: function() {
c.prototype.start.call(this);
this.onStart();
},
onDestroy: function() {
c.prototype.onDestroy.call(this);
TypeUtils.isRealNull(this.viewName) || this.emit(AppEvent.GameRemoveView, {
name: this.viewName
});
this.onExit();
},
onEnable: function() {
c.prototype.onEnable.call(this);
},
onDisable: function() {
c.prototype.onDisable.call(this);
},
_onInitArgs: function() {
for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++) t[i] = arguments[i];
this._m_args = t;
},
setArgs: function(e) {},
onCreate: function() {},
_initEvent: function() {
this.eventOn(AppEvent.AdaptLiuHaiUI, this.reOnAdaptUI, this);
},
onAdapt: function() {
AdaptUtils.AdaptNodeToHWAdapt(this.node);
},
reOnAdaptUI: function() {
this.onAdapt();
},
onStart: function() {},
onExit: function() {}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
ViewConfig: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "d13dc0Z7hNFGJptpxiqi+4U", "ViewConfig");
window.ViewConfig = {
Tips_Box: {
viewPath: "tipsBox/TipsBoxP",
scriptName: "TipsBox"
},
TIPS_WORD_VIEW: {
viewPath: "common/tipsWord/tipsWordP",
scriptName: "tipsWord"
},
REQUEST_VIEW: {
viewPath: "common/requestView/requestViewP",
scriptName: "requestView"
},
TEST_VIEW: {
viewPath: "testMudule/testViewP",
scriptName: "testView"
},
COMFIRM_BOX_VIEW: {
viewPath: "fish/view/comfirmBoxP",
scriptName: "comfirmBox",
desc: "通用提示框"
},
FLASH_VIEW: {
viewPath: "fish/view/splashViewP",
scriptName: "splashView",
desc: "闪屏"
},
LOGIN_VIEW: {
viewPath: "fish/view/loginViewP",
scriptName: "loginView",
desc: "登陆界面"
},
DISCLAIMER_VIEW: {
viewPath: "fish/view/disclaimerViewP",
scriptName: "disclaimerView",
desc: "用户协议"
},
CREATE_VIEW: {
viewPath: "fish/view/createViewP",
scriptName: "createView",
desc: "创建角色"
},
LOADING_VIEW: {
viewPath: "fish/view/loadingViewP",
scriptName: "loadingView",
desc: "加载界面"
},
FISH_HALL_VIEW: {
viewPath: "fish/view/fishHallViewP",
scriptName: "fishHallView",
desc: "捕鱼大厅"
},
FISH_LOADING_VIEW: {
viewPath: "fish/view/fishLoadingViewP",
scriptName: "fishLoadingView",
desc: "渔场加载界面"
},
CATCH_FISH_VIEW: {
viewPath: "fish/view/catchFishViewP",
scriptName: "catchFishView",
desc: "渔场界面"
},
CATCH_FISH_UI: {
viewPath: "fish/view/catchFishUIP",
scriptName: "catchFishUI",
desc: "渔场UI"
},
FISH_AWARDS_VIEW: {
viewPath: "fish/view/awardsViewP",
scriptName: "awardsView",
desc: "恭喜获得界面"
},
MARQUEE_VIEW: {
viewPath: "fish/view/marqueeViewP",
scriptName: "marqueeView",
desc: "跑马灯界面"
},
FISH_ROOM_VIEW: {
viewPath: "fish/view/roomViewP",
scriptName: "fishRoomView",
desc: "房间选择界面"
},
FISH_ROOM_MAGIC_VIEW: {
viewPath: "fish/view/roomMagicViewP",
scriptName: "fishRoomMagicView",
desc: "玉石房间选择界面"
},
BOSS_COMING_VIEW: {
viewPath: "fish/view/bossComingViewP",
scriptName: "bossComingView",
desc: "BOSS来袭"
},
GUN_SWITCH_VIEW: {
viewPath: "fish/view/gunSwitchViewP",
scriptName: "gunSwitchView",
desc: "炮台切换"
},
SHOP_VIEW: {
viewPath: "fish/view/shopViewP",
scriptName: "shopView",
desc: "商城"
},
NEWER_TASK_VIEW: {
viewPath: "fish/view/newerTaskViewP",
scriptName: "newerTaskView",
desc: "新手任务"
},
GOLD_FISH_VIEW: {
viewPath: "fish/view/goldFishViewP",
scriptName: "goldFishView",
desc: "黄金鱼抽奖"
},
PLAY_GUIDE_VIEW: {
viewPath: "fish/view/playGuideViewP",
scriptName: "playGuideView",
desc: "花色、水手提示界面"
},
SEVEN_DAY_VIEW: {
viewPath: "fish/view/sevenDayViewP",
scriptName: "sevenDayView",
desc: "七天乐界面"
},
POKER_COLORS_VIEW: {
viewPath: "fish/view/pokerColorsViewP",
scriptName: "pokerColorView",
desc: "花色送礼"
},
FISH_INTRODUCE_VIEW: {
viewPath: "fish/view/introduceViewP",
scriptName: "introduceView",
desc: "鱼种介绍"
},
GUN_FORGE_VIEW: {
viewPath: "fish/view/gunForgeViewP",
scriptName: "gunForgeView",
desc: "锻造界面"
},
GUN_FORGE_RESULT_VIEW: {
viewPath: "fish/view/gunForgeResultViewP",
scriptName: "gunForgeResultView",
desc: "锻造结果界面"
},
GUN_UP_SUCC_ANIM: {
viewPath: "fish/view/gunUpSuccAnimP",
scriptName: "gunUpSuccAnim",
desc: "锻造结果界面"
},
ROOM_SEAT_VIEW: {
viewPath: "fish/view/roomSeatViewP",
scriptName: "roomSeatView",
desc: "选座界面"
},
ROOM_INTRODUCE_VIEW: {
viewPath: "fish/view/roomIntroduceViewP",
scriptName: "roomIntroduceView",
desc: "选房说明界面"
},
JADE_EXCHANGE_VIEW: {
viewPath: "fish/view/jadeExchangeViewP",
scriptName: "jadeExchangeView",
desc: "玉石兑换界面"
},
NAJIA_PLAY_VIEW: {
viewPath: "fish/view/najiaPlayViewP",
scriptName: "najiaPlayView",
desc: "娜迦奖励界面"
},
DRAGON_TREASURE_VIEW: {
viewPath: "fish/view/dragonTreasureViewP",
scriptName: "dragonTreasureView",
desc: "龙王降临"
},
MONSTER_BATTLE_VIEW: {
viewPath: "fish/view/monsterBattleViewP",
scriptName: "monsterBattleView",
desc: "巨兽对决界面"
},
MONSTER_BATTLE_RESULT_VIEW: {
viewPath: "fish/view/monsterBattleResultP",
scriptName: "monsterBattleResultView",
desc: "巨兽对决结果界面"
},
GOLD_DRAGON_VIEW: {
viewPath: "fish/view/goldDragonViewP",
scriptName: "goldDragonView",
desc: "金龙献宝"
},
FINGER_PLAY_VIEW: {
viewPath: "fish/view/fingerPlayViewP",
scriptName: "fingerPlayView",
desc: "欢乐猜拳"
},
FINGER_PLAY_RESULT_VIEW: {
viewPath: "fish/view/fingerPlayResultViewP",
scriptName: "fingerPlayResultView",
desc: "欢乐猜拳结果"
},
ROLE_VIEW: {
viewPath: "fish/view/roleViewP",
scriptName: "roleView",
desc: "个人信息"
},
BAG_VIEW: {
viewPath: "fish/view/bagViewP",
scriptName: "bagView",
desc: "背包"
},
MAIL_VIEW: {
viewPath: "fish/view/mailViewP",
scriptName: "mailView",
desc: "邮件"
},
RANK_VIEW: {
viewPath: "fish/view/rankingViewP",
scriptName: "rankingView",
desc: "排行"
},
NOTICE_VIEW: {
viewPath: "fish/view/noticeViewP",
scriptName: "noticeView",
desc: "公告"
},
SETTING_VIEW: {
viewPath: "fish/view/settingViewP",
scriptName: "settingView",
desc: "设置"
},
MODIFY_VIEW: {
viewPath: "fish/view/modifyViewP",
scriptName: "modifyView",
desc: "昵称修改"
},
WELFARE_VIEW: {
viewPath: "fish/view/welfareViewP",
scriptName: "welfareView",
desc: "福利"
},
SIGN_UP_VIEW: {
viewPath: "fish/view/signUpViewP",
scriptName: "signUpView",
desc: "签到"
},
TASK_VIEW: {
viewPath: "fish/view/taskViewP",
scriptName: "taskView",
desc: "日常任务"
},
ONLINE_VIEW: {
viewPath: "fish/view/onlineViewP",
scriptName: "onlineView",
desc: "在线奖励"
},
SELECT_PAY_VIEW: {
viewPath: "fish/view/selectPayViewP",
scriptName: "selectPayView",
desc: "支付台"
},
ACCOUNT_VIEW: {
viewPath: "fish/view/accountViewP",
scriptName: "accountView",
desc: "账号"
},
SHARE_VIEW: {
viewPath: "fish/view/shareViewP",
scriptName: "shareView",
desc: "分享"
},
SHARE_HIT_BOSS: {
viewPath: "fish/view/shareHitBossP",
scriptName: "shareHitBoss",
desc: "BOSS分享"
},
VIP_VIEW: {
viewPath: "fish/view/vipViewP",
scriptName: "vipView",
desc: "VIP"
},
CLUB_APPLY_VIEW: {
viewPath: "fish/view/clubApplyViewP",
scriptName: "clubApplyView",
desc: "公会列表"
},
CLUB_INVITE_VIEW: {
viewPath: "fish/view/clubInviteViewP",
scriptName: "clubInviteView",
desc: "公会邀请"
},
CLUB_CREATE_VIEW: {
viewPath: "fish/view/clubCreateViewP",
scriptName: "clubCreateView",
desc: "公会创建"
},
CLUB_INFO_VIEW: {
viewPath: "fish/view/clubInfoViewP",
scriptName: "clubInfoView",
desc: "公会信息"
},
CLUB_HALL_VIEW: {
viewPath: "fish/view/clubHallViewP",
scriptName: "clubHallView",
desc: "公会大厅"
},
CLUB_HALL_MANAGER: {
viewPath: "fish/view/clubHallManagerP",
scriptName: "clubHallManager",
desc: "公会大厅管理"
},
CLUB_APPLY_INFO: {
viewPath: "fish/view/clubApplyInfoP",
scriptName: "clubApplyInfo",
desc: "公会申请"
},
CLUB_HALL_BUILD: {
viewPath: "fish/view/clubHallBuildP",
scriptName: "clubHallBuild",
desc: "公会建设"
},
CLUB_HALL_WELFARE: {
viewPath: "fish/view/clubHallWelfareP",
scriptName: "clubHallWelfare",
desc: "公会福利"
},
CLUB_HALL_ROOM: {
viewPath: "fish/view/clubHallRoomP",
scriptName: "clubHallRoom",
desc: "公会房间"
},
CLUB_HALL_RANK: {
viewPath: "fish/view/clubHallRankP",
scriptName: "clubHallRank",
desc: "公会排行"
},
CLUB_SCORE_DETAIL: {
viewPath: "fish/view/clubScoreDetailP",
scriptName: "clubScoreDetail",
desc: "公会积分详情"
},
CLUB_ROLE_INFO_VIEW: {
viewPath: "fish/view/clubRoleInfoViewP",
scriptName: "clubRoleInfoView",
desc: "公会个人信息"
},
CARD_GIFT_VIEW: {
viewPath: "fish/view/cardGiftViewP",
scriptName: "cardGiftView",
desc: "贵族月卡"
},
SAFE_CENTER_VIEW: {
viewPath: "fish/view/safeCenterViewP",
scriptName: "safeCenterView",
desc: "安全中心"
},
CHECK_PWD_VIEW: {
viewPath: "fish/view/checkPwdViewP",
scriptName: "checkPwdView",
desc: "密码检查"
},
ACCEPT_AWARD_VIEW: {
viewPath: "fish/view/acceptAwardViewP",
scriptName: "acceptAwardView",
desc: "领奖"
},
PLAYER_INFO_VIEW: {
viewPath: "fish/view/playerInfoViewP",
scriptName: "playerInfoView",
desc: "个人信息"
},
MY_REWARD_VIEW: {
viewPath: "fish/view/myRewardViewP",
scriptName: "myRewardView",
desc: "我的领奖"
},
CHARGE_CARNIVAL_VIEW: {
viewPath: "fish/view/chargeCarnivalViewP",
scriptName: "chargeCarnivalView",
desc: "充值嘉年华"
},
VIP_TURNTABLE_VIEW: {
viewPath: "fish/view/vipTurntableViewP",
scriptName: "vipTurntableView",
desc: "充值嘉年华"
},
BAG_SEND_VIEW: {
viewPath: "fish/view/bagSendViewP",
scriptName: "bagSendView",
desc: "赠送"
},
SEND_RECORD_VIEW: {
viewPath: "fish/view/sendRecordViewP",
scriptName: "sendRecordView",
desc: "赠送记录"
},
CLUB_DEPOT_VIEW: {
viewPath: "fish/view/clubDepotViewP",
scriptName: "clubDepotView",
desc: "公会仓库"
},
CLUB_DEPOT_ACCESS: {
viewPath: "fish/view/clubDepotAccessP",
scriptName: "clubDepotAccess",
desc: "公会仓库存取"
},
CLUB_DEPOT_RECORD: {
viewPath: "fish/view/clubDepotRecordP",
scriptName: "clubDepotRecord",
desc: "仓库存取记录"
},
CLUB_MODIFY_NOTICE: {
viewPath: "fish/view/clubModifyNoticeP",
scriptName: "clubModifyNotice",
desc: "公会公告修改"
}
};
cc._RF.pop();
}, {} ],
ViewManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "8a660Qbq0dDvoKMJGIqQnSF", "ViewManager");
function s(e) {
"@babel/helpers - typeof";
return (s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
return typeof e;
} : function(e) {
return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
})(e);
}
cc.Class({
properties: {
TypeSocket: 1,
TypeHttps: 2
},
ctor: function() {
this.m_viewZorder = 100;
this.httpRequestNum = 0;
this.viewNameQueue = [];
},
getScene: function() {
return this.layouts.scene;
},
initScene: function(e) {
this.viewQeuent = {};
this.requestTypes = {};
this.layouts = e;
},
getLayout: function(e) {
return e ? this.layouts[e] : this.layouts.cen;
},
showView: function(e, t, i, s) {
var n = this;
if (void 0 != this.viewQeuent[e] && this.viewQeuent[e].isShow) if (void 0 != this.viewQeuent[e].view) {
this.viewQeuent[e].view.zIndex = this.m_viewZorder;
this.viewQeuent[e].zOder = this.m_viewZorder;
this.m_viewZorder++;
logger.warn("已存在界面,直接把层级提高,目前没有直接传参");
} else logger.warn("已存在界面已在加载中,目前没有直接传参"); else {
this.viewQeuent[e] = {
isShow: !0
};
this.viewQeuent[e].zOder = this.m_viewZorder;
var o = t;
if (TypeUtils.isString(t) || TypeUtils.isRealNull(t)) {
if (!(o = this.getLayout(t))) {
logger.error("layout == null");
return;
}
this.viewQeuent[e].layout = t || "cen";
} else this.viewQeuent[e].layout = "node";
var a = ViewConfig[e];
DicUtils.has(a, "module") ? AppUtils.loadSubPackage(a.module, null, function() {
n.showViewReal(e, o, i, a, s);
}) : this.showViewReal(e, o, i, a, s);
}
},
showViewReal: function(e, t, i, s, n) {
var o = this, a = "module/" + s.viewPath;
LoadUtils.loadRes(a, function(a, r) {
if (a) {
console.log("Prefab error:" + a.errorMessage);
delete o.viewQeuent[e];
} else if (r instanceof cc.Prefab) {
var l = cc.instantiate(r);
if (s.scriptName) {
var c = l.getComponent(s.scriptName);
if (c) {
c._onInitArgs && c._onInitArgs(i);
c._setViewName && c._setViewName(e);
} else logger.error("showView ===> ", e + ",comScrip === null", s.scriptName, l);
l.script = c;
}
console.log("显示界面 ========> ", e);
t.addChild(l);
l.setPosition(0, 0);
l.zIndex = o.m_viewZorder;
TypeUtils.isRealNull(o.viewQeuent[e]) && (o.viewQeuent[e] = {
isShow: !0
});
o.viewQeuent[e].zOder = o.m_viewZorder;
o.m_viewZorder++;
o.viewQeuent[e].view = l;
TypeUtils.isFunction(n) && n(l);
for (var h = 0; h < o.viewNameQueue.length; h++) if (o.viewNameQueue[h] == e) return;
o.viewNameQueue.push(e);
EventManager.emit(AppEvent.GameOpenView, {
name: e
});
} else {
console.log("Prefab error", r);
delete o.viewQeuent[e];
}
});
},
getRequestView: function() {
return this.requestView;
},
closeRequestView: function() {
this.closeView("REQUEST_VIEW");
this.requestView = null;
},
showMarqueeView: function() {
return this.showView("MARQUEE_VIEW", "top");
},
showMarqueeLayer: function(e) {
this.getLayout("top").active = e;
},
showAwards: function(e) {
(TypeUtils.isObj(e.awards) || TypeUtils.isArray(e.awards) && e.awards.length > 0) && PopViewManager.addPopQueue("FISH_AWARDS_VIEW", {
viewType: ManagerEnum.QueueType.Common,
viewArg: e
});
},
showRequest: function(e, t, i) {
var s = this;
this.requestTypes[t] = this.requestTypes[t] || [];
if (TypeUtils.isRealNull(this.requestView)) this.showView("REQUEST_VIEW", "tips", null, function(t) {
s.requestView = t;
s.requestView.getComponent("requestView").show(e);
s.getRequestNums() <= 0 && s.requestView.getComponent("requestView").hide();
}); else {
this.requestView.getComponent("requestView").show(e);
this.requestTypes[t].push(i);
}
},
getRequestNums: function() {
var e = 0;
for (var t in this.requestTypes) if (this.requestTypes.hasOwnProperty(t)) {
e += this.requestTypes[t].length;
}
return e;
},
hideRequest: function(e, t, i) {
if (TypeUtils.isRealNull(e)) this.requestTypes = {}; else {
var s = this.requestTypes[e] || [];
if (TypeUtils.isRealNull(t)) this.requestTypes[e] = []; else if (i) ArrayUtils.safeRemove(this.requestTypes[e], function(e, i) {
if (!TypeUtils.isRealNull(t.id) && t.id == info.id || !TypeUtils.isRealNull(t.name) && t.name == info.name) return !0;
}); else for (var n = 0; n < s.length; n++) {
var o = s[n];
if (!TypeUtils.isRealNull(t.id) && t.id == o.id || !TypeUtils.isRealNull(t.name) && t.name == o.name) {
ArrayUtils.remove(this.requestTypes[e], n);
break;
}
}
}
this.requestView && this.getRequestNums() <= 0 && this.requestView.getComponent("requestView").hide();
},
logRequest: function() {
console.log("logRequest: ", this.requestTypes);
},
getHttpReqCount: function() {
return this.httpRequestNum;
},
addHttpReqCount: function() {
this.httpRequestNum += 1;
},
showErrorMsg: function(e) {
TypeUtils.isRealNull(e) || TipsUtils.showTips(errmsg(e));
},
showTipsView: function(e) {
e.parent = this.getLayout("tips");
},
showAlertView: function(e) {
e.parent = this.getLayout("alert");
},
closeView: function(e) {
"string" == typeof e ? this.closeViewByName(e) : "object" == s(e) ? this.closeViewByObj(e) : logger.error("错误对象:", e);
},
isViewExist: function(e) {
return this.viewQeuent[e];
},
getView: function(e) {
if (void 0 != this.viewQeuent[e]) return this.viewQeuent[e].view;
},
getViewQueue: function() {
return this.viewNameQueue;
},
isTopView: function(e) {
if (void 0 != this.viewQeuent[e] && void 0 != this.viewQeuent[e].view) {
var t = this.viewQeuent[e].zOder, i = this.viewQeuent[e].layout;
for (var s in this.viewQeuent) if (i == this.viewQeuent[s].layout && s !== e && this.viewQeuent[s].zOder > t) return !1;
return !0;
}
return !1;
},
getTopView: function() {
var e, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "cen", i = -1;
for (var s in this.viewQeuent) if (t == this.viewQeuent[s].layout && this.viewQeuent[s].zOder > i) {
i = this.viewQeuent[s].zOder;
e = s;
}
return e;
},
clearAllViews: function() {
for (var e in this.viewQeuent) this.closeView(e);
},
removeViewName: function(e) {
for (var t = 0; t < this.viewNameQueue.length; t++) if (this.viewNameQueue[t] == e) {
ArrayUtils.remove(this.viewNameQueue, t);
break;
}
},
closeViewByObj: function(e) {
if (void 0 !== e.node) {
var t;
for (var i in this.viewQeuent) {
this.viewQeuent[i].view === e.node && (t = i);
}
cc.isValid(e.node) && e.node.destroy();
if (t) {
console.log("closeViewByObj 关闭界面:", t);
delete this.viewQeuent[t];
this.removeViewName(t);
}
}
},
closeViewByName: function(e) {
if (DicUtils.has(this.viewQeuent, e)) {
this.removeViewName(e);
var t = this.viewQeuent[e].view;
if (void 0 !== t) {
cc.isValid(t) && t.destroy();
delete this.viewQeuent[e];
console.log("closeViewByName 关闭界面:", e);
}
}
},
reset: function() {
PopViewManager.reset();
for (var e in this.viewQeuent) {
var t = this.viewQeuent[e].view;
cc.isValid(t) && t.destroy();
delete this.viewQeuent[e];
this.removeViewName(e);
}
this.viewQeuent = {};
}
});
cc._RF.pop();
}, {} ],
VipCtrl: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "13a44foFudJM4yk452aBTYM", "VipCtrl");
var s = e("CommonConst"), n = e("HttpCtrl"), o = e("VipModel");
cc.Class({
extends: n,
properties: {},
ctor: function() {
var e = new o();
this.init(e);
},
requireAfterEnterGame: function() {
this.addEvent(M_FishVIP.onVipChange, this.handleVipUpdate.bind(this));
this.addEvent(M_FishVIP.onSupplementGold, this.handleSupplementGold.bind(this));
this.addEvent(M_Disk.syncDiskStatus, this.syncDiskStatus.bind(this));
this.getDiskCount(s.TurntableType.FishVIP);
this.getVipInfo();
},
getVipInfo: function() {
session.request(M_FishVIP.getInfo, null, this.handlerWithError(this, this.handleGetVipInfo), null, !1);
},
handleGetVipInfo: function(e) {
this.model.setVipInfo(e.data);
},
getVipUpLvAward: function(e, t) {
session.request(M_FishVIP.getAward, e, this.handlerWithError(this, this.handleGetVipUpLvAward), t, !1);
},
handleGetVipUpLvAward: function(e) {
this.model.getVipUpLvAward(e.data);
var t = e.param || {};
TypeUtils.isRealNull(t.award) || ViewManager.showAwards({
awards: t.award
});
},
handleVipUpdate: function(e) {
this.model.updateVipInfo(e.data);
app.ctrls.counting.onExchange();
},
handleSupplementGold: function(e) {
var t = e.data;
!TypeUtils.isRealNull(t) && Number(t) > 0 && TipsUtils.showTipsBox({
str: StringUtils.format("尊贵的VIP玩家，您的金币数量过低，已为您补足至%s，快去驰骋渔场吧！", t),
isHideCloce: !0,
signBtn: !0
});
},
unFreezeSupplementGold: function() {},
syncDiskStatus: function(e) {
this.model.syncDiskStatus(e.data);
},
getDiskCount: function(e) {
var t = this;
session.request(M_Disk.getDiskCount, e, function(i) {
t.model.handlergetDiskCount(i.data, e);
});
},
requestToDraw: function(e) {
app.ctrls.role.freezeEvents();
session.request(M_Disk.useDisk, e, this.handleruseDisk.bind(this));
},
handleruseDisk: function(e) {
if (e.errorCode != SystemError.success) {
ViewManager.showErrorMsg(e.errorCode);
app.ctrls.role.unfreezeEvents();
}
this.model.handleruseDisk(e);
}
});
cc._RF.pop();
}, {
CommonConst: "CommonConst",
HttpCtrl: "HttpCtrl",
VipModel: "VipModel"
} ],
VipModel: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "0b725H0qvhOYL+kkaRqCF+y", "VipModel");
cc.Class({
extends: ModelBase,
properties: {
EVENT_UPDATE_VIP_INFO: "EVENT_UPDATE_VIP_INFO",
EVENT_GET_VIP_UP_AWARD_SUCCESS: "EVENT_GET_VIP_UP_AWARD_SUCCESS",
EVENT_GET_VIP_DAILY_AWARD_SUCCESS: "EVENT_GET_VIP_DAILY_AWARD_SUCCESS",
EVENT_DRAW_SUCCESS_RESULT: "EVENT_DRAW_SUCCESS_RESULT",
EVENT_UPDATE_DRAW_COUNT: "EVENT_UPDATE_DRAW_COUNT"
},
ctor: function() {
this.init();
this._vipInfo = {};
this._diskCount = {};
},
setVipInfo: function(e) {
this._vipInfo = e;
this.dispatchEvent(this.EVENT_UPDATE_VIP_INFO, e);
},
getVipInfo: function() {
return this._vipInfo;
},
getVipLevel: function() {
return this._vipInfo.level || 0;
},
getVipExp: function() {
return this._vipInfo.exp || 0;
},
updateVipInfo: function(e) {
this.setVipInfo(e);
},
getVipUpLvAward: function(e) {
this.setVipInfo(e);
this.dispatchEvent(this.EVENT_GET_VIP_UP_AWARD_SUCCESS);
},
isLingquByLevel: function(e) {
var t = this._vipInfo.levelGift || {};
for (var i in t) if (t.hasOwnProperty(i)) {
if (t[i] == e) return !0;
}
return !1;
},
getRemindNum: function() {
var e = this.getVipLevel();
if (e > 0) for (var t = 1; t <= e; t++) if (!this.isLingquByLevel(t)) return !0;
return !1;
},
syncDiskStatus: function(e) {
this._diskCount[e.diskTypeId] = e.diskCount;
this.dispatchEvent(this.EVENT_UPDATE_DRAW_COUNT, e.data);
},
handlergetDiskCount: function(e, t) {
this._diskCount[t] = e;
this.dispatchEvent(this.EVENT_UPDATE_DRAW_COUNT, e);
},
getDiskCount: function(e) {
return this._diskCount[e] || 0;
},
handleruseDisk: function(e) {
this.dispatchEvent(this.EVENT_DRAW_SUCCESS_RESULT, e.data);
}
});
cc._RF.pop();
}, {} ],
VipUtils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "2876cdZDdZLmq6X6ICWrDLT", "VipUtils");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
getFishVipLevel: function() {
return s.getModel().getVipLevel();
},
getModel: function() {
return app.ctrls.vip.getModel();
}
}, n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
WXPlatform: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "57b4ePyo3pEfK08Izdvdkv1", "WXPlatform");
var s = e("BasePlatfrom"), n = e("TowerShareEnum");
cc.Class({
extends: s,
ctor: function() {
this.m_sysVersion = wx.getSystemInfoSync();
},
init: function() {
s.prototype.init.call(this, "WXPlatform");
this.setValue("platfromName", "WX");
this.initData();
this.initWxEnv();
this.initAd();
return this;
},
initData: function() {
this.m_networkType = void 0;
},
getSdkVersion: function() {
return this.m_sysVersion.version;
},
initWxEnv: function() {
wx.showShareMenu();
wx.setKeepScreenOn({
keepScreenOn: !0
});
if ("ios" === this.m_sysVersion.platform) {
UserDataManager.getUserFrameRateStatus() === ManagerEnum.UserDataManager.UserKey.HightFrameRate.LowFrameRate ? GlobalUtils.setFrameRate(30) : GlobalUtils.setFrameRate(60);
} else if (DicUtils.has(this.m_sysVersion, "benchmarkLevel")) {
var e = UserDataManager.getUserFrameRateStatus();
e === ManagerEnum.UserDataManager.UserKey.HightFrameRate.Undefined ? this.m_sysVersion.benchmarkLevel <= 30 ? GlobalUtils.setFrameRate(30) : GlobalUtils.setFrameRate(60) : e === ManagerEnum.UserDataManager.UserKey.HightFrameRate.LowFrameRate ? GlobalUtils.setFrameRate(30) : e === ManagerEnum.UserDataManager.UserKey.HightFrameRate.HightFrameRate && GlobalUtils.setFrameRate(60);
logger.info("benchmarkLevel=", this.m_sysVersion.benchmarkLevel);
} else GlobalUtils.setFrameRate(30);
},
initAd: function() {},
onExit: function() {
s.prototype.onExit.call(this);
},
seeAd: function(e) {
console.log("wxplatform seeAd 1");
if (s.prototype.seeAd.call(this)) {
this.seeAdReal(e);
console.log("wxplatform seeAd 2");
} else console.log("wxplatform seeAd 12");
},
seeAdReal: function(e) {
s.prototype.seeAdReal.call(this, e);
console.log("wxplatform seeAdReal 1");
var t = this;
this._bonusType = e.bonusType;
this._loadCallback = e.loadCallback;
this._closeCallback = e.closeCallback;
this._errorCallback = e.errorCallback;
console.log("wxplatform seeAdReal 2");
this.RewardedVideoAd.load().then(function(e) {
t.didShowAd();
t.RewardedVideoAd.show();
}).catch(function(e) {
console.log("wxplatform seeAdReal 4", e);
t.didErrorAd();
});
console.log("wxplatform seeAdReal 3");
},
onCloseAd: function(e) {
s.prototype.onCloseAd.call(this);
console.warn("onCloseAd res = ", e);
if (this._loadCallback) if (e && e.isEnded) {
this.didRewardAd();
this._closeCallback({
isEnable: e.isEnded
});
} else {
this.didCloseAd();
this._closeCallback({
isEnable: !1
});
}
},
onErrorAd: function(e) {
s.prototype.onErrorAd.call(this);
console.warn("onErrorAd res = ", e);
this.didErrorAd();
if (TypeUtils.isRealNull(ConfigMgr.getConfig("lb_aderror_config"))) ConfigMgr.getLoadCfg("lb_aderror_config", function(t) {
for (var i = 0; i < t.length; i++) {
var s = t[i];
if ("wx" == s[1] && s[2] == e.errCode) {
TipsUtils.showTips(s[3]);
break;
}
}
}); else {
var t = ConfigMgr.getConfig("lb_aderror_config").findFirst(function(t) {
return "wx" == t.platform && t.errorCode == e.errCode;
});
t && TipsUtils.showTips(t.tipsStr);
}
this._errorCallback && this._errorCallback();
},
onLoadAd: function(e) {
s.prototype.onLoadAd.call(this);
},
addOrder: function(e) {},
copy: function(e) {
wx.setClipboardData({
data: e,
success: function(e) {
wx.getClipboardData({
success: function(e) {
console.log("复制成功：", e.data);
}
});
}
});
},
login: function(e) {
logger.info("微信登录~");
var t = this;
wx.login({
success: function(i) {
app.ctrls.login.wxLogin(i.code, function(i) {
t.setUserData(i);
TypeUtils.isFunction(e) && e(i);
});
},
fail: function() {
logger.warn("登录失败,尝试重新登录");
t.login(e);
},
complete: function() {}
});
},
getToken: function() {
if (!this.loginData) {
logger.error("this.loginData == null");
return "";
}
return this.loginData.token;
},
doMsgSecCheck: function(e, t) {
var i = function(e) {
TypeUtils.isFunction(t) && t(e);
};
try {
wx.serviceMarket.invokeService({
service: "wxee446d7507c68b11",
api: "msgSecCheck",
data: {
Action: "TextApproval",
Text: e
}
}).then(function(e) {
for (var t = JSON.parse(e.data || "{}").Response.EvilTokens || [], s = 0; s < t.length; s++) {
var n = t[s];
if (0 != n.EvilFlag || 0 != n.EvilType) {
i(!1);
return;
}
}
i(!0);
});
} catch (e) {
console.error("invokeService fail", e);
TipsUtils.showTips(e);
i(!1);
}
},
doImgSecCheck: function(e, t) {
var i = function(e) {
TypeUtils.isFunction(t) && t(e);
}, s = function(e) {
return !TypeUtils.isRealNull(e) && "BLOCK" == e.Suggestion;
};
try {
wx.serviceMarket.invokeService({
service: "wxee446d7507c68b11",
api: "imgSecCheck",
data: {
Action: "ImageModeration",
Scenes: [ "PORN", "POLITICS", "TERRORISM" ],
ImageUrl: e,
ImageBase64: "",
Config: "",
Extra: ""
}
}).then(function(e) {
var t = JSON.parse(e.data || "{}").Response || {};
s(t) || s(t.PornResult) || s(t.PoliticsResult) || s(t.TerrorismResult) ? i(!1) : i(!0);
});
} catch (e) {
console.error("invokeService fail", e);
TipsUtils.showTips(e);
i(!1);
}
},
checkNetWork: function() {
this.getNetworkType(wx);
},
shareMessage: function(e) {
var t = n.ShareImg.WX || [], i = {
title: e.title,
query: "enterStyle=share&uid=" + e.uid,
success: function(e) {
console.log("WXPlatform shareMessage 分享成功, 返回信息为:", e);
}
};
if (t.length > 0) {
var s = t[RandomUtils.getRandIntInRange(0, t.length - 1)];
i.imageUrlId = s.imageUrlId;
i.imageUrl = s.imageUrl;
} else i.imageUrl = canvas.toTempFilePathSync({
destWidth: 500,
destHeight: 400
});
wx.shareAppMessage(i);
TimeMgr.delayTime(function() {
TypeUtils.isFunction(e.callback) && e.callback();
}, 1, this);
},
onGameLaunchInfo: function() {
var e = wx.getLaunchOptionsSync();
console.log("WXPlatform onGameLaunchInfo 获取游戏启动数据", e.query);
},
loadSubPackage: function(e, t, i) {
cc.loader.downloader.loadSubpackage(e, function(e) {
t && t(e);
}, function(t) {
if (t) return console.error("加载子包失败:", t);
i && i(e);
});
},
loadNetImage: function(e, t, i) {
wx.downloadFile({
url: e,
success: function(e) {
if (200 === e.statusCode) {
console.log("图片下载成功" + e.tempFilePath);
cc.loader.load(e.tempFilePath, function(e, t) {
var s = new cc.SpriteFrame(t);
i(s);
});
wx.getFileSystemManager().saveFile({
tempFilePath: e.tempFilePath,
success: function(e) {
console.log("图片缓存成功", e.savedFilePath);
wx.setStorageSync("image_cache", e.savedFilePath);
}
});
} else console.log("响应失败", e.statusCode);
},
fail: function(e) {
cc.log(e);
},
complete: function() {}
});
var s = wx.getStorageSync("image_cache");
if (null != s) {
console.log("path====", s);
this.setData({
image_filepath: s
});
} else console.log("去缓存图片");
},
download: function(e, t, i) {
wx.downloadFile({
url: e,
success: function(e) {
if (200 === e.statusCode) {
wx.getFileSystemManager().saveFile({
tempFilePath: e.tempFilePath,
success: function(e) {
console.log("图片缓存成功", e.savedFilePath);
i(e.savedFilePath);
wx.setStorageSync("image_cache", e.savedFilePath);
}
});
} else console.log("响应失败", e.statusCode);
},
fail: function(e) {
cc.log(e);
},
complete: function() {}
});
}
});
cc._RF.pop();
}, {
BasePlatfrom: "BasePlatfrom",
TowerShareEnum: "TowerShareEnum"
} ],
WelfareConst: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "c6bdc6Ii8JGubmSsg6sxxeP", "WelfareConst");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s, n;
function o(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}
var a = {
WelfareIds: {
dailySign: 1,
dailyTask: 2,
onLineAward: 3
}
};
a.ComWelfare = [ {
id: a.WelfareIds.dailySign,
systemId: 20019,
appEvent: AppEvent.RedPointFishSignUp
}, {
id: a.WelfareIds.dailyTask,
systemId: 20018,
appEvent: AppEvent.RedPointFishDailyTask
}, {
id: a.WelfareIds.onLineAward,
appEvent: AppEvent.RedPointOnlineAward
} ];
a.WelfareIdOfView = (o(s = {}, a.WelfareIds.dailySign, "SIGN_UP_VIEW"), o(s, a.WelfareIds.dailyTask, "TASK_VIEW"), 
o(s, a.WelfareIds.onLineAward, "ONLINE_VIEW"), s);
a.WelfareIdOfTab = (o(n = {}, a.WelfareIds.dailySign, {
sele: "module/fish/texture/fishWelfare/txt_qd_enable",
enable: "module/fish/texture/fishWelfare/txt_qd_disable"
}), o(n, a.WelfareIds.dailyTask, {
sele: "module/fish/texture/fishWelfare/txt_mrrw_enalbe",
enable: "module/fish/texture/fishWelfare/txt_mrrw_disable"
}), o(n, a.WelfareIds.onLineAward, {
sele: "module/fish/texture/fishWelfare/txt_zxsc_enable",
enable: "module/fish/texture/fishWelfare/txt_zxsc_disable"
}), n);
a.OnLineAwardState = {
NOT_GET: 1,
CAN_GET: 2,
HAS_GET: 3,
MISS: 4
};
a.TypeState = {
Task: 1,
Online: 2
};
a.TurntableType = {};
a.TurntableType.YaoQingFriend = 1;
a.TurntableType.DdzWin = 2;
a.TurntableType.FishVIP = 4;
a.TurntableType.OnLine = 9;
var r = a;
i.default = r;
t.exports = i.default;
cc._RF.pop();
}, {} ],
WelfareCtrl: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "5be39MJLblEfKavMTm/970M", "WelfareCtrl");
var s = e("HttpCtrl"), n = e("WelfareModel");
cc.Class({
extends: s,
properties: {},
ctor: function() {
var e = new n();
this.init(e);
},
requireAfterEnterGame: function() {
this.addEvent(M_OnlineAward.syncOnlineInfo, this.syncOnlineInfo.bind(this));
this.getSignUpInfo();
this.getOnlineInfo();
},
getSignUpInfo: function() {
session.request(M_FishSignIn.getInfo, null, this.handlerWithError(this, this.handleGetSignUpInfo), null, !1);
},
handleGetSignUpInfo: function(e) {
this.model.setSignUpInfo(e);
},
getWeekSignAward: function(e, t) {
session.request(M_FishSignIn.getAward, e, this.handlerWithError(this, this.handleGetWeekSignAward), t, !1);
},
handleGetWeekSignAward: function(e) {
TypeUtils.isRealNull(e.param) || ViewManager.showAwards({
awards: e.param
});
this.model.setWeekSignAward(e);
},
getMonthSignAward: function(e, t) {
session.request(M_FishSignIn.openBox, e, this.handlerWithError(this, this.handleGetMonthSignAward), t, !1);
},
handleGetMonthSignAward: function(e) {
TypeUtils.isRealNull(e.param) || ViewManager.showAwards({
awards: e.param
});
this.model.setMonthSignAward(e);
},
getOnlineInfo: function() {
session.request(M_OnlineAward.getOnlineInfo, null, this.handlerWithError(this, this.handleGetOnlineInfo), null, !1);
},
handleGetOnlineInfo: function(e) {
this.model.setOnLineInfo(e.data);
},
getOnlineAward: function(e) {
session.request(M_OnlineAward.getOnlineAward, e, this.handlerWithError(this, this.handleGetOnlineAward), null, !1);
},
handleGetOnlineAward: function(e) {
TypeUtils.isRealNull(e.data) || ViewManager.showAwards({
awards: e.data.awardList
});
this.model.setOnlineAward(e.data);
},
getOnlineSignAward: function() {
session.request(M_OnlineAward.getOnlineSignAward, null, this.handlerWithError(this, this.handleGetOnlineSignAward), null, !1);
},
handleGetOnlineSignAward: function(e) {
if (!TypeUtils.isRealNull(e.data)) {
ViewManager.showAwards({
awards: e.data.awardList
});
this.getOnlineInfo();
}
},
syncOnlineInfo: function(e) {
this.model.syncOnLineInfo(e.data);
}
});
cc._RF.pop();
}, {
HttpCtrl: "HttpCtrl",
WelfareModel: "WelfareModel"
} ],
WelfareModel: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "e92e13NOpdFoZlv4uXaraH0", "WelfareModel");
var s = e("WelfareConst");
cc.Class({
extends: ModelBase,
properties: {
EVENT_GET_MONTH_AWARD: "EVENT_GET_MONTH_AWARD",
EVENT_GET_WEEK_AWARD: "EVENT_GET_WEEK_AWARD",
EVENT_GET_SIGN_INFO_SUCCESS: "EVENT_GET_SIGN_INFO_SUCCESS",
EVENT_UPDATE_WELFARE_INFO: "EVENT_UPDATE_WELFARE_INFO",
EVENT_UPDATE_ON_LINE_INFO: "EVENT_UPDATE_ON_LINE_INFO",
EVENT_GET_AWRAD_INFO: "EVENT_GET_AWRAD_INFO",
EVENT_UPDATE_SIGN_AWRAD_INFO: "EVENT_UPDATE_SIGN_AWRAD_INFO"
},
ctor: function() {
this.init();
this.tabList = [];
this._signUpInfo = {};
this.onlineInfo = [];
this.onlineSignInfo = [];
this.onlineTime = 0;
this.setTabList();
},
doAfterInit: function() {
RedRemindManager.registerCheckRemind(AppEvent.RedPointFishSignUp, this.getRemindNum, this);
RedRemindManager.registerCheckRemind(AppEvent.RedPointOnlineAward, this.getOnlineRemind, this);
RedRemindManager.registerCheckRemind(AppEvent.RedPointOnlineSign, this.getOnlineSignRemind, this);
},
setTabList: function() {
this.tabList = [];
for (var e = s.ComWelfare || [], t = 0; t < e.length; t++) {
var i = e[t];
!TypeUtils.isRealNull(i.systemId) && SystemUtils.checkIsClose(i.systemId) || this.tabList.push(i);
}
this.dispatchEvent(this.EVENT_UPDATE_WELFARE_INFO);
},
freshSystemInfo: function(e) {
for (var t = {}, i = 0; i < e.length; i++) TypeUtils.isRealNull(e[i].numId) || (t[e[i].numId] = !0);
for (var n = s.ComWelfare || [], o = 0; o < n.length; o++) {
var a = n[o];
if (!TypeUtils.isRealNull(a.systemId) && t[a.systemId]) {
this.setTabList();
return;
}
}
},
getWelfareRemind: function() {
for (var e = {}, t = 0; t < this.tabList.length; t++) {
var i = this.tabList[t], s = RedRemindManager.checkRemind(i.appEvent);
!TypeUtils.isRealNull(s) && TypeUtils.isFunction(s.func) && (e[v.id] = s.func.call(s.target));
}
return e;
},
getTabList: function() {
return this.tabList || [];
},
setSignUpInfo: function(e) {
this._signUpInfo = e.data;
RedRemindManager.doRemind(AppEvent.RedPointFishSignUp);
this.dispatchEvent(this.EVENT_GET_SIGN_INFO_SUCCESS);
},
getRemindNum: function() {
var e = this, t = !1, i = ConfigMgr.getConfig("fish_sign_box_config");
TypeUtils.isRealNull(i) || i.forEach(function(i) {
if (i.day <= e.getSignUpMonthDay()) {
var s = e._signUpInfo.receivedBoxs || [];
t = !0;
for (var n = 0; n < s.length; n++) {
if (s[n] == i.day) {
t = !1;
return;
}
}
}
});
if (t) return t;
var s = ConfigMgr.getConfig("fish_sign_in_config");
TypeUtils.isRealNull(s) || s.forEach(function(i) {
if (i.id <= e.getSignUpWeekDay()) {
t = !0;
for (var s = e._signUpInfo.receivedList || [], n = 0; n < s.length; n++) {
if (s[n] == i.id) {
t = !1;
return;
}
}
}
});
return t;
},
getSignUpWeekDay: function() {
return this._signUpInfo.signNums || 0;
},
isGetWeekSignAward: function(e) {
for (var t = this._signUpInfo.receivedList || [], i = 0; i < t.length; i++) {
if (t[i] == e) return !0;
}
return !1;
},
getSignUpMonthDay: function() {
return this._signUpInfo.signBoxNums || 0;
},
isGetMonthSignAward: function(e) {
for (var t = this._signUpInfo.receivedBoxs || [], i = 0; i < t.length; i++) {
if (t[i] == e) return !0;
}
return !1;
},
setWeekSignAward: function(e) {
this._signUpInfo = e.data;
RedRemindManager.doRemind(AppEvent.RedPointFishSignUp);
this.dispatchEvent(this.EVENT_GET_WEEK_AWARD);
},
setMonthSignAward: function(e) {
this._signUpInfo = e.data;
RedRemindManager.doRemind(AppEvent.RedPointFishSignUp);
this.dispatchEvent(this.EVENT_GET_MONTH_AWARD);
},
setOnLineInfo: function(e) {
if (!TypeUtils.isRealNull(e)) {
this.onlineInfo = e.onlineList || [];
this.onlineSignInfo = e.signList || [];
this.onlineTime = e.onlineTime || 0;
}
RedRemindManager.doRemind(AppEvent.RedPointOnlineAward);
this.dispatchEvent(this.EVENT_UPDATE_SIGN_AWRAD_INFO);
RedRemindManager.doRemind(AppEvent.RedPointOnlineSign);
},
getOnLineInfo: function() {
return this.onlineInfo;
},
getOnLineTime: function() {
return this.onlineTime;
},
getOnlineRemind: function() {
for (var e = 0; e < this.onlineInfo.length; e++) {
if (this.onlineInfo[e].status == s.OnLineAwardState.CAN_GET) return !0;
}
return !1;
},
syncOnLineInfo: function(e) {
this.setOnLineInfo(e);
this.dispatchEvent(this.EVENT_UPDATE_ON_LINE_INFO);
},
setOnlineAward: function(e) {
this.dispatchEvent(this.EVENT_GET_AWRAD_INFO, e);
},
getOnLineSignInfo: function() {
return this.onlineSignInfo;
},
isMissOnLineSign: function(e) {
return this.getOnLineSignInfoById(e) == s.OnLineAwardState.MISS;
},
isGetOnLineSign: function(e) {
return this.getOnLineSignInfoById(e) == s.OnLineAwardState.HAS_GET;
},
getOnLineSignInfoById: function(e) {
if (!TypeUtils.isEmptyArray(this.onlineSignInfo)) for (var t = 0; t < this.onlineSignInfo.length; t++) {
var i = this.onlineSignInfo[t];
if (i.id == e) return i.status;
}
return 1;
},
getOnlineSignRemind: function() {
if (!TypeUtils.isEmptyArray(this.onlineSignInfo)) for (var e = 0; e < this.onlineSignInfo.length; e++) {
if (this.onlineSignInfo[e].status == s.OnLineAwardState.CAN_GET) return !0;
}
return !1;
}
});
cc._RF.pop();
}, {
WelfareConst: "WelfareConst"
} ],
WindowPlatfrom: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "e6671QalB5EA5rEPjEKRBul", "WindowPlatfrom");
var s = e("BasePlatfrom");
cc.Class({
extends: s,
ctor: function() {},
init: function() {
s.prototype.init.call(this, "WindowPlatform");
GlobalUtils.setFrameRate(60);
return this;
},
onExit: function() {
s.prototype.onExit.call(this);
},
seeAd: function(e) {
if (s.prototype.seeAd.call(this, e)) {
this._loadCallback = e.loadCallback;
this._closeCallback = e.closeCallback;
this._errorCallback = e.errorCallback;
this.onCloseAd({
isEnded: !0
});
}
},
onCloseAd: function(e) {
s.prototype.onCloseAd.call(this);
this._closeCallback && (e.isEnded ? this._closeCallback({
isEnable: e.isEnded
}) : this._closeCallback({
isEnable: !1
}));
},
onErrorAd: function() {
s.prototype.onErrorAd.call(this);
this._errorCallback && this._errorCallback();
},
onLoadAd: function() {
s.prototype.onLoadAd.call(this);
this._loadCallback && this._loadCallback();
},
login: function(e) {
this.loginDefault(e);
},
checkNetWork: function() {},
downloadIamge: function(e, t) {
var i = new Image();
i.setAttribute("crossOrigin", "anonymous");
i.onload = function() {
var e = document.createElement("canvas");
e.width = i.width;
e.height = i.height;
e.getContext("2d").drawImage(i, 0, 0, i.width, i.height);
var s = e.toDataURL("image/png"), n = document.createElement("a"), o = new MouseEvent("click");
n.download = t || "photo";
n.href = s;
n.dispatchEvent(o);
};
i.src = e;
}
});
cc._RF.pop();
}, {
BasePlatfrom: "BasePlatfrom"
} ],
YueRenQQPlatfrom: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "5268d/P6MxAYIofH3xm6mB5", "YueRenQQPlatfrom");
var s = e("QQPlatfrom");
cc.Class({
extends: s,
ctor: function() {},
init: function() {
s.prototype.init.call(this, "YueRenQQPlatfrom");
return this;
}
});
cc._RF.pop();
}, {
QQPlatfrom: "QQPlatfrom"
} ],
acceptAwardView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "d9b849Gqs1CLIVqUjDxU6eV", "acceptAwardView");
var s = e("List"), n = e("ItemConst"), o = [ {
paths: {
enable: "module/fish/texture/acceptAwards/lj_txt_02_disable",
sele: "module/fish/texture/acceptAwards/lj_txt_02_enable"
}
} ];
cc.Class({
extends: ViewBase,
properties: {
goodsList: s,
nodeBot: cc.Node,
btnMyAward: cc.Node,
nodeLeft: cc.Node,
btnMyInfo: cc.Node,
sprIcon: cc.Node,
txtMine: cc.Node,
prefabBg: cc.Prefab
},
onCreate: function(e) {
e = e || {};
this.initData();
this.initEvent();
this.initUI(e);
},
initData: function() {
this.ctrl = app.ctrls.betTreasure;
this.model = this.ctrl.getModel();
this.currencyModel = app.ctrls.currency.getModel();
this.ctrl.requestGetExchangeInfo();
},
initEvent: function() {
this.eventOn(this.currencyModel.EVENT_UPDATE_TICKET, this.updateCurrency, this);
this.eventOn(this.model.EVENT_BET_TREASURE_EXCHANGE_INFO, this.onGetExchangeInfo, this);
},
initUI: function(e) {
var t = this;
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBaseView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBaseView").setTitle({
type: 1,
path: "module/fish/texture/acceptAwards/lj_title",
bgType: 1
});
this.comBg.getComponent("comBaseView").showTabStyle({
tabCfg: o,
callFunc: this.seleIndex.bind(this),
defaultIdx: 0
});
this.onClick(this.btnMyAward, function() {
ViewManager.showView("MY_REWARD_VIEW");
});
this.onClick(this.btnMyInfo, function() {
ViewManager.showView("PLAYER_INFO_VIEW");
});
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(n.ResourceType.Ticket),
callback: function() {
SpriteUtils.setAdaptContentSize(t.sprIcon, null, 45);
}
}, this.sprIcon, this);
this.txtMine.getComponent(cc.Label).string = ItemUtils.getItemNum(n.ResourceType.Ticket) + "元";
this.refreshExchange();
},
seleIndex: function(e) {
if (this.tabIndex != e) {
this.canAction = !1;
this.tabIndex = e;
this.refreshExchange();
}
},
refreshExchange: function() {
this.goodsData = this.model.getExchangeData() || [];
this.goodsList.numItems = this.goodsData.length;
this.goodsList.scrollTo(0, .02);
},
onRenderEvent: function(e, t) {
var i = this, s = this.goodsData[t];
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("acceptItem"));
e.script.setData(s);
e.stopAllActions();
e.scale = 1;
if (this.canAction) {
e.scale = 0;
ActionUtils.sequence(e, cc.delayTime(.05 * t), cc.scaleTo(.1, 1.1), cc.scaleTo(.05, 1), cc.callFunc(function() {
i.canAction = !1;
}));
}
},
onGetExchangeInfo: function(e) {
this.refreshExchange();
},
updateCurrency: function() {
this.txtMine.getComponent(cc.Label).string = ItemUtils.getItemNum(n.ResourceType.Ticket) + "元";
}
});
cc._RF.pop();
}, {
ItemConst: "ItemConst",
List: "List"
} ],
acceptItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "50bbdTNwohCmZpvBEowcLS+", "acceptItem");
var s = e("BaseComponent"), n = e("BetTreasureConst");
cc.Class({
extends: s,
properties: {
txtName: cc.Label,
sprGoods: cc.Node,
sprTips: cc.Node,
txtTips: cc.Label,
sprFlag: cc.Node,
txtNum: cc.Label,
btnBuy: cc.Node,
sprTag: cc.Node,
txtPrice: cc.Label
},
onLoad: function() {
this.initData();
},
initUI: function() {},
initData: function() {},
setData: function(e) {
var t = this;
this.data = e;
this.sprTips.active = !1;
if (e.vip_limit_type == n.ExchangeVipLimitType.FishVipLimit) {
this.sprTips.active = !0;
this.txtTips.string = cc.js.formatStr("V%s+\n专享", e.vip_rank[0]);
}
var i = function() {
SpriteUtils.setTexture({
path: "module/fish/texture/icon/icon_a_100",
callback: function() {
SpriteUtils.setAdaptContentSize(t.sprGoods, 150);
}
}, t.sprGoods, t);
};
LoadUtils.loadImg(e.icon, function(s, n) {
if (null == s) try {
t.sprGoods.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(n);
SpriteUtils.setAdaptContentSize(t.sprGoods, 150);
} catch (t) {
logger.error("load url error:", t, e.icon);
i();
} else i();
});
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(e.cost_item),
callback: function() {
SpriteUtils.setAdaptContentSize(t.sprTag, null, 45);
}
}, this.sprTag, this);
this.txtPrice.string = e.cost_num;
this.txtName.string = e.good_name;
this.txtNum.string = e.can_buy_num;
this.onClick(this.btnBuy, function() {
RoleUtils.checkSecondPwd(function() {
t.checkToExchange(e);
});
});
},
checkToExchange: function(e) {
var t = this;
if (e.vip_limit_type == n.ExchangeVipLimitType.FishVipLimit && VipUtils.getFishVipLevel() < e.vip_rank[0]) TipsUtils.showTips("VIP等级不足"); else {
var i = ItemUtils.getItemConfig(e.cost_item);
if (ItemUtils.getItemNum(e.cost_item) < e.cost_num) TipsUtils.showTips(cc.js.formatStr("兑换失败，%s不足", i.name)); else if (e.can_buy_num <= 0) TipsUtils.showTips("该物品兑换光了喔~"); else {
var s = {
icon: e.icon,
md5: e.md5,
name: e.good_name
};
e.mode_type == n.ExchangeSendOutType.EMS || e.mode_type == n.ExchangeSendOutType.Recharge ? app.ctrls.betTreasure.requestGetPlayerAddr(function(i) {
if (TypeUtils.isRealNull(i) || TypeUtils.isAllNull(i.address) || TypeUtils.isAllNull(i.name) || TypeUtils.isAllNull(i.phone_num)) {
TipsUtils.showTips("手机号、收件人、收件地址不能为空！");
ViewManager.showView("PLAYER_INFO_VIEW");
} else t.toBeSureExchange(e, s);
}) : this.toBeSureExchange(e, s);
}
}
},
toBeSureExchange: function(e, t) {
var i = StringUtils.getHtmlStr([ {
str: "确认消耗:",
color: "#1C59B5"
}, {
str: e.cost_num + ItemUtils.getItemName(e.cost_item),
color: "#FFFFFF",
outline: "#91370F",
lineSize: 2
}, {
str: "兑换:",
color: "#1C59B5"
}, {
str: e.good_name,
color: "#FFFFFF",
outline: "#91370F",
lineSize: 2
}, {
str: "?",
color: "#1C59B5"
} ]);
TipsUtils.showTipsBox({
desc: i,
isHideCloce: !0,
alignType: cc.macro.TextAlignment.CENTER,
sureCallBack: function() {
app.ctrls.betTreasure.requestExchangeGoods({
exId: e.id,
gameType: e.exchange_type
}, {
awards: t
});
}
});
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
BetTreasureConst: "BetTreasureConst"
} ],
accountView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "60358xdMbZA/IB9S0rtylZk", "accountView");
e("console").log;
cc.Class({
extends: ViewBase,
properties: {
btnSure: cc.Node,
nodeLogin: cc.Node,
btnRandom: cc.Node,
editLoginAccount: cc.EditBox,
editLoginPwd: cc.EditBox,
nodeRegister: cc.Node,
editRegisterAccount: cc.EditBox,
editRegisterPwd: cc.EditBox,
editRegisterRePwd: cc.EditBox,
toggleLogin: cc.Node,
toggleRegister: cc.Node,
prefabBg: cc.Prefab
},
onCreate: function(e) {
var t = this;
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(640, 550)
});
this.comBg.getComponent("comBasePopView").setTitle("账号");
this.initData();
this.initView();
},
initData: function() {
this.ctrl = app.ctrls.login;
this.model = this.ctrl.getModel();
},
initView: function() {
var e = this;
this.toggleLogin.on("toggle", function() {
e.switchChannel(1);
});
this.toggleRegister.on("toggle", function() {
e.switchChannel(2);
});
this.toggleLogin.getComponent(cc.Toggle).isChecked = !0;
this.onClick(this.btnSure, function() {
1 == e.curIndex ? e.accoutLogin() : e.accoutRegister();
});
this.switchChannel(1);
var t = UserUtils.getDataStr(UserDefaultConst.UserAccountData, "{}"), i = JsonUtils.json2Data(t);
if (!TypeUtils.isAllNull(i.account) && !TypeUtils.isAllNull(i.pwd)) {
this.editLoginAccount.string = i.account;
this.editLoginPwd.string = i.pwd;
}
},
switchChannel: function(e) {
if (this.curIndex != e) {
this.curIndex = e;
this.nodeLogin.active = 1 == e;
this.nodeRegister.active = 1 != e;
}
},
accoutLogin: function() {
var e = this.editLoginAccount.string;
if (TypeUtils.isAllNull(e)) TipsUtils.showTips("请输入账号~"); else {
var t = this.editLoginPwd.string;
TypeUtils.isAllNull(t) ? TipsUtils.showTips("请输入密码~") : this.ctrl.noSdkLogin(e, t);
}
},
accoutRegister: function() {
var e = this.editRegisterAccount.string, t = this.editRegisterPwd.string, i = this.editRegisterRePwd.string;
if (e.length < 6) TipsUtils.showTips(_LANG("ACCOUNT_INVALID")); else if (t.length < 6) TipsUtils.showTips(_LANG("PASSWORD_INVALID")); else if ("" != t && "" != i && "" != e) if (t == i) {
if (e.match(/[a-zA-Z0-9_]+/) == e) {
console.log("这些账号密码为 === ", e, t);
this.ctrl.register(e, t);
} else TipsUtils.showTips("只允许大小写,数字,下划线");
} else TipsUtils.showTips(_LANG("LOGIN_PSW_DIFF")); else TipsUtils.showTips(_LANG("LOGIN_FULL_INFO"));
}
});
cc._RF.pop();
}, {
console: 5
} ],
autoScrollView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "30ec7sxelVAHrLC8wu3Msok", "autoScrollView");
var s = e("BaseComponent"), n = cc.Enum({
NODE: 0,
PREFAB: 1
}), o = cc.Enum({
HORIZONTAL: 0,
VERTICAL: 1
});
cc.Class({
extends: s,
properties: {
_adaptSize: !0,
_type: n.NODE,
itemList: [],
scrollType: {
default: o.HORIZONTAL,
tooltip: !1,
type: o
},
type: {
get: function() {
return this._type;
},
set: function(e) {
this._type !== e && (this._type = e);
},
type: n,
animatable: !1,
tooltip: !1
},
itemNode: {
default: null,
type: cc.Node,
tooltip: !1,
visible: function() {
var e = this._type == n.PREFAB;
e && (this.itemNode = null);
return !e;
}
},
itemPrefab: {
default: null,
type: cc.Prefab,
tooltip: !1,
visible: function() {
var e = this._type == n.NODE;
e && (this.itemPrefab = null);
return !e;
}
},
renderEvent: {
default: null,
type: cc.Component.EventHandler,
tooltip: !1
},
_numItems: {
default: 0,
serializable: !1
},
numItems: {
visible: !1,
get: function() {
return this._numItems;
},
set: function(e) {
this._numItems = e;
this.updateItems();
}
},
adaptSize: {
get: function() {
return this._adaptSize;
},
set: function(e) {
this._adaptSize = e;
},
type: cc.Boolean,
tooltip: !1
},
size: {
default: cc.size(100, 100),
visible: function() {
return !this._adaptSize;
}
}
},
onLoad: function() {
this.initUI();
},
initUI: function() {
var e = cc.instantiate(this.type == n.NODE ? this.itemNode : this.itemPrefab);
this.itemNode.destroy();
this.curIndex = 0;
if (TypeUtils.isRealNull(e)) logger.error("item 模板为空!"); else {
this.adaptSize ? this.itemSize = cc.size(e.width, e.height) : this.itemSize = this.size;
this.itemNum = 3;
this.itemMovePos = cc.v2(0, 0);
if (this.scrollType == o.HORIZONTAL) {
this.itemNum = Math.ceil(this.node.width / this.itemSize.width) + 1;
this.itemMovePos.x = this.itemSize.width;
} else {
this.itemNum = Math.ceil(this.node.height / this.itemSize.height) + 1;
this.itemMovePos.y = this.itemSize.height;
}
for (var t = 0; t < this.itemNum; t++) {
var i = cc.instantiate(e);
i.parent = this.node;
if (this.scrollType == o.HORIZONTAL) {
i.x = (.5 - this.node.anchorX) * this.node.width + (t - Math.floor((this.itemNum - 1) / 2)) * this.itemSize.width;
i.y = (.5 - this.node.anchorY) * this.node.height;
} else {
i.x = (.5 - this.node.anchorX) * this.node.width;
i.y = (.5 - this.node.anchorY) * this.node.height + (t - Math.floor((this.itemNum - 1) / 2)) * this.itemSize.height;
}
i.index = (this.numItems + (t - Math.floor((this.itemNum - 1) / 2))) % this.numItems;
this.itemList.push(i);
}
}
},
startScroll: function(e, t, i) {
this.totalMoveIdx = e * this.numItems + t;
this.totalMovePos = cc.v2(this.itemMovePos.x * this.totalMoveIdx, this.itemMovePos.y * this.totalMoveIdx);
this.moveTime = i;
this.countTime = 0;
this.countMove = 0;
this.speed = cc.v2(this.totalMovePos.x / i * 2, this.totalMovePos.y / i * 2);
this.speedAdd = cc.v2(this.speed.x / i, this.speed.y / i);
},
updateItems: function() {
for (var e = 0; e < this.itemList.length; e++) {
var t = this.itemList[e];
this.callItemBack(t);
}
},
callItemBack: function(e) {
this.renderEvent && cc.Component.EventHandler.emitEvents([ this.renderEvent ], e, e.index);
},
resetItem: function(e, t, i, s) {
if (!TypeUtils.isRealNull(e)) {
if (i) {
var n = s + 1 >= this.itemList.length ? 0 : s + 1;
e.index = this.itemList[n].index + 1 >= this.numItems ? 0 : this.itemList[n].index + 1;
t ? e.x = this.itemList[n].x + this.itemSize.width : e.y = this.itemList[n].y + this.itemSize.height;
} else {
var o = s - 1 < 0 ? this.itemList.length - 1 : s - 1;
e.index = this.itemList[o].index - 1 < 0 ? this.numItems - 1 : this.itemList[o].index - 1;
t ? e.x = this.itemList[o].x - this.itemSize.width : e.y = this.itemList[o].y - this.itemSize.height;
}
this.callItemBack(e);
}
},
update: function(e) {
if (this.moveTime > 0) {
this.moveTime -= e;
for (var t = null, i = null, s = null, n = 0; n < this.itemList.length; n++) {
var a = this.itemList[n];
a.x = a.x - (this.speed.x * e - this.speedAdd.x * (2 * this.countTime + e) * e / 2);
a.y = a.y - (this.speed.y * e - this.speedAdd.y * (2 * this.countTime + e) * e / 2);
if (this.scrollType == o.HORIZONTAL) {
if (a.x < (.5 - this.node.anchorX) * this.node.width + -Math.floor((this.itemNum - 1) / 2) * this.itemSize.width) {
t = a;
i = n;
s = !0;
} else if (a.x > (.5 - this.node.anchorX) * this.node.width + (this.itemNum - 1 - Math.floor((this.itemNum - 1) / 2)) * this.itemSize.width) {
t = a;
i = n;
s = !1;
}
} else if (a.y < (.5 - this.node.anchorY) * this.node.height + -Math.floor((this.itemNum - 1) / 2) * this.itemSize.height) {
t = a;
i = n;
s = !0;
} else if (a.y > (.5 - this.node.anchorY) * this.node.height + (this.itemNum - Math.floor((this.itemNum - 1) / 2)) * this.itemSize.height) {
t = a;
i = n;
s = !1;
}
}
this.resetItem(t, this.scrollType == o.HORIZONTAL, s, i);
this.countTime += e;
}
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
awardZhuanPan: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "c79215OncRM5ZqOzBkga59j", "awardZhuanPan");
var s = e("BaseComponent"), n = e("CatchFishConst"), o = null;
cc.Class({
extends: s,
ctor: function() {},
onLoad: function() {
s.prototype.onLoad.call(this);
this.initData();
this.initUI();
},
initData: function() {
o = ConfigMgr.getConfig("fish");
},
initUI: function() {
this.spineRoll = this.getUIChild("rollSp");
this.spineBossRoll = this.getUIChild("bossRollSp");
this.txtNum = this.getUIChild("txtNum");
this.txtMult = this.getUIChild("txtMult");
this.sprHead = this.getUIChild("sprHead");
this.sprHead.active = !1;
this.sprName = this.getUIChild("sprName");
this.node.opacity = 0;
},
updataData: function(e, t, i) {
var s = this, a = o.findByIndex(e.fishType);
this.node.opacity = 255;
this.node.stopAllActions();
this.spineRoll.active = !1;
this.spineBossRoll.active = !1;
if (a.groupType != n.FishGroupType.BOSS_FISH || TypeUtils.isRealNull(t.rollBossRes)) {
this.spineRoll.active = !0;
if (this.skinId && this.skinId != t.skinId) {
this.skinId = t.skinId;
SpineUtils.changeSpine(t.rollRes.sp, function(e, i) {
var n = s.spineRoll.getComponent(sp.Skeleton);
n.premultipliedAlpha = !1;
n.skeletonData = i;
n.setAnimation(0, t.rollRes.ani, !1);
});
} else {
var r = this.spineRoll.getComponent(sp.Skeleton);
SpineUtils.changeAnimation(r, t.rollRes.ani, !1, null, !0);
}
} else {
this.spineBossRoll.active = !0;
if (this.skinBossId && this.skinBossId != t.skinId) {
this.skinBossId = t.skinId;
SpineUtils.changeSpine(t.rollBossRes.sp, function(e, i) {
var n = s.spineBossRoll.getComponent(sp.Skeleton);
n.premultipliedAlpha = !1;
n.skeletonData = i;
n.setAnimation(0, t.rollBossRes.ani, !1);
});
} else {
var l = this.spineBossRoll.getComponent(sp.Skeleton);
SpineUtils.changeAnimation(l, t.rollBossRes.ani, !1, null, !0);
}
}
this.playSound("zhuanpan");
this.txtNum.stopAllActions();
var c = "";
TypeUtils.isRealNull(e.goldDrop) || (c = e.goldDrop + "倍");
this.txtMult.getComponent(cc.Label).string = c;
this.txtMult.active = !a.hideRollMultiple;
this.txtMult.y = i > 2 ? 95 : -95;
if (TypeUtils.isAllNull(a.bossHeadImg)) {
this.sprHead.active = !1;
this.txtNum.getComponent(cc.Label).string = e.award || 0;
if (TypeUtils.isRealNull(a.fishNameImg)) this.sprName.active = !1; else {
this.sprName.active = !0;
SpriteUtils.setTexture({
path: "module/fish/texture/catchFishUi/name/" + a.fishNameImg
}, this.sprName, this);
}
var h = cc.repeat(cc.sequence(cc.rotateTo(.2, 10), cc.rotateTo(.2, -10)), 5), u = cc.callFunc(function() {
s.node.opacity = 0;
});
this.txtNum.runAction(cc.sequence(h, u));
} else {
this.txtNum.getComponent(cc.Label).string = "";
this.sprHead.active = !0;
SpriteUtils.setTexture({
path: "module/fish/texture/catchFishUi/boss/" + a.bossHeadImg
}, this.sprHead, this);
SpriteUtils.setTexture({
path: "module/fish/texture/catchFishUi/name/" + a.fishNameImg
}, this.sprName, this);
ActionUtils.callOnce(this.node, function() {
s.node.opacity = 0;
}, 2);
}
},
update: function(e) {}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
CatchFishConst: "CatchFishConst"
} ],
awardsView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "0c955NpOoNMj75GsmFdheQ9", "awardsView");
var s = e("ItemConst"), n = cc.size(160, 220);
cc.Class({
extends: ViewBase,
properties: {
titleSp: cc.Prefab,
awardItem: cc.Prefab,
maskBtn: cc.Node,
spTitle: cc.Node,
pnlListItem: cc.Node,
nodeTitle: cc.Node,
btnSure: cc.Node
},
onCreate: function(e) {
ViewBase.prototype.onCreate.call(this, e);
this.awards = e.awards || [];
this._callback = e.callback;
this.fontSize = e.fontSize || 26;
this._showType = e.showType || 1;
this._maxCols = e.maxCols;
this._sound = e.sound;
this.initUI();
this.initConfig();
this.initContent();
this.initAction();
},
initConfig: function() {
ConfigMgr.getConfig("item_config");
},
initUI: function() {
var e = this;
this.onClick(this.btnSure, function() {
e.closeLayer();
});
this.btnSure.active = !1;
},
initContent: function() {
var e = this._maxCols || 5;
this.items = [];
this.scale = 1;
if (!TypeUtils.isArray(this.awards) || this.awards.length <= 1) {
var t = {};
t = this.awards.length <= 1 ? this.awards[0] : this.awards;
var i = cc.instantiate(this.awardItem);
i.active = !0;
i.parent = this.pnlListItem;
i.getComponent("comAwardItem").setData(t);
this.items.push(i);
} else {
var s = this.awards.length;
1 == this._showType && (s = this.addSameItem());
(s > 10 && s < 15 || s > 15) && (e = 7);
var o = Math.ceil(s / e), a = (this.pnlListItem.height + 10) / (o * n.height);
this.scale = a > .8 ? .8 : a;
var r = 0;
for (var l in this.awards) if (this.awards.hasOwnProperty(l)) {
var c = this.awards[l], h = cc.instantiate(this.awardItem);
h.active = !0;
h.scale = this.scale;
h.parent = this.pnlListItem;
var u = e;
Math.ceil((r + 1) / e) == o && (u = s % e == 0 ? e : s % e);
h.setPosition((r % e + 1 - (u + 1) / 2) * n.width * this.scale, -(Math.ceil((r + 1) / e) - (o + 1) / 2) * n.height * this.scale);
r += 1;
h.getComponent("comAwardItem").setData(c);
this.items.push(h);
}
}
},
addSameItem: function() {
for (var e = {}, t = 0; t < this.awards.length; t++) {
var i = this.awards[t];
if (TypeUtils.isRealNull(i.itemId)) return;
var n = i.obtainType || s.ItemAwardType.Default, o = i.itemId + "type" + n;
TypeUtils.isRealNull(e[o]) ? e[o] = i : e[o].amount = Number(e[o].amount) + Number(i.amount);
}
this.awards = [];
for (var a in e) if (e.hasOwnProperty(a)) {
var r = e[a];
this.awards.push(r);
}
return this.awards.length;
},
initAction: function() {
var e = this;
TypeUtils.isRealNull(this._sound);
this.titleSpine = cc.instantiate(this.titleSp);
this.titleSpine.parent = this.spTitle;
this.titleSpine.getComponent("comTitleSp").playSpine(1);
for (var t = function(t) {
var i = e.items[t];
if (!TypeUtils.isRealNull(i)) {
i.scale = 0;
ActionUtils.sequence(i, cc.delayTime(.03 * t), cc.callFunc(function() {
i.active = !0;
}), cc.scaleTo(.1, 1.1 * e.scale), cc.scaleTo(.05, e.scale));
}
}, i = 0; i < this.items.length; i++) t(i);
ActionUtils.sequence(this.node, cc.delayTime(1), cc.callFunc(function() {
e.btnSure.active = !0;
}), cc.delayTime(4), cc.callFunc(function() {
e.closeLayer();
}));
},
closeLayer: function() {
TypeUtils.isFunction(this._callback) && this._callback();
ViewManager.closeView(this);
}
});
cc._RF.pop();
}, {
ItemConst: "ItemConst"
} ],
bagSendView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "28525irkMJHT7Rz19y9aY94", "bagSendView");
cc.Class({
extends: ViewBase,
properties: {
sprItem: cc.Node,
sprIcon: cc.Node,
txtNum: cc.Label,
txtDes: cc.Label,
editRoleId: cc.Node,
btnHistory: cc.Node,
editNum: cc.Node,
btnSub: cc.Node,
btnAdd: cc.Node,
btnMax: cc.Node,
btnSure: cc.Node,
seleScroll: cc.Prefab,
prefabBg: cc.Prefab
},
onCreate: function(e) {
var t = this;
e = e || {};
this.itemData = e.itemData || {};
this.giveCfg = e.giveCfg || {};
this.roleId = e.roleId;
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(630, 450)
});
this.comBg.getComponent("comBasePopView").setTitle("赠 送");
this.initData();
this.initEvent();
this.initUI();
},
initData: function() {
this.unitNum = this.giveCfg.unit || 1;
this.canSendNum = this.giveCfg.canSendNum || -1;
var e = this.itemData.amount || 0;
this.maxNum = Math.floor(e / this.unitNum) * this.unitNum;
this.canSendNum > 0 && this.maxNum > this.canSendNum && (this.maxNum = this.canSendNum);
this.sendNum = this.maxNum > 0 && this.unitNum || 0;
this.bagCtrl = app.ctrls.bag;
this.bagModel = this.bagCtrl.getModel();
this.roleCtrl = app.ctrls.role;
this.roleModel = this.roleCtrl.getModel();
},
initEvent: function() {},
initUI: function() {
var e = this;
this.canSendNum > 0 ? this.txtDes.string = cc.js.formatStr("今日可赠：%s个", this.canSendNum) : this.txtDes.string = cc.js.formatStr("今日可赠：%s个一组", this.giveCfg.unit || 1);
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(this.itemData.itemId),
callback: function() {
SpriteUtils.setAdaptContentSize(e.sprIcon, null, 80);
}
}, this.sprIcon, this);
this.txtNum.string = "X" + (this.itemData.amount || 0);
this.editNum.getComponent(cc.EditBox).string = this.sendNum;
TypeUtils.isRealNull(this.roleId) || (this.editRoleId.getComponent(cc.EditBox).string = this.roleId);
this.onClick(this.btnHistory, this.onClickHistory.bind(this));
this.onClick(this.btnSub, this.onClickSubItem.bind(this));
this.onClick(this.btnAdd, this.onClickAddItem.bind(this));
this.onClick(this.btnMax, this.onClickMaxItem.bind(this));
this.onClick(this.btnSure, this.onClickSendItem.bind(this));
this.filterListView = cc.instantiate(this.seleScroll);
this.filterListView.parent = this.node;
this.filterListView.zIndex = 999;
this.filterListView.script = this.filterListView.getComponent("itemScrollView");
this.filterListView.script.setSize(cc.size(300, 200));
this.updateList();
},
updateList: function() {
var e = this, t = UserUtils.getInfoList();
this.filterListView.script.setData(t);
this.filterListView.script.setSelectCb(function(i) {
e.editRoleId.getComponent(cc.EditBox).string = t[i].roleId;
});
this.filterListView.script.setDeleteCb(function(i) {
UserUtils.removeInfoForList(t[i].roleId);
e.updateList();
});
},
onClickHistory: function() {
var e = this.btnHistory.convertToWorldSpaceAR(cc.v2(-140, -20));
this.filterListView.script.onShowView(e);
},
onClickSubItem: function() {
if (this.sendNum > this.unitNum) {
this.sendNum = this.sendNum - this.unitNum;
this.editNum.getComponent(cc.EditBox).string = this.sendNum;
} else TipsUtils.showTips(cc.js.formatStr("赠送个数不能小于%s！", this.unitNum));
},
onClickAddItem: function() {
this.sendNum = this.sendNum + this.unitNum;
if (this.maxNum < this.sendNum) {
this.sendNum = this.maxNum;
TipsUtils.showTips("已达最大值！");
}
this.editNum.getComponent(cc.EditBox).string = this.sendNum;
},
onClickMaxItem: function() {
this.sendNum = this.maxNum;
this.editNum.getComponent(cc.EditBox).string = this.sendNum;
},
onClickSendItem: function(e) {
var t = this.editRoleId.getComponent(cc.EditBox).string;
TypeUtils.isAllNull(t) ? TipsUtils.showTips("玩家ID不能为空") : Number(t) != Number(RoleUtils.getRoleId()) ? TypeUtils.isAllNull(this.sendNum) ? TipsUtils.showTips("数量不能为空") : 0 != Number(this.sendNum) ? this.roleCtrl.getOtherInfo(t, {
callback: this.handleGetOtherInfoSuccess.bind(this)
}) : TipsUtils.showTips("输入数量有误") : TipsUtils.showTips("不能赠送给自己");
},
onEditEnd: function(e) {
var t = Number(e.string || 0);
t % this.unitNum > 0 && (t -= t % this.unitNum);
this.maxNum < t ? this.sendNum = this.maxNum : this.sendNum = t;
this.editNum.getComponent(cc.EditBox).string = this.sendNum;
},
handleGetOtherInfoSuccess: function(e) {
var t = this;
if (TypeUtils.isRealNull(e) || TypeUtils.isRealNull(e.nickname)) TipsUtils.showTips("未找到该ID的玩家信息"); else {
var i = StringUtils.formatToHtml(e.nickname.substring(0, 6)), s = StringUtils.getHtmlStr([ {
str: "您确定要给[",
color: "#FFFFFF"
}, {
str: i,
color: "#FF0000"
}, {
str: "]ID:",
color: "#FFFFFF"
}, {
str: e.roleId,
color: "#FF0000"
}, {
str: "赠送",
color: "#FFFFFF"
}, {
str: ItemUtils.getItemName(this.itemData.itemId) + "X" + this.sendNum,
color: "#FF0000"
}, {
str: "吗？",
color: "#FFFFFF"
} ]);
TipsUtils.showTipsBox({
desc: s,
isHideCloce: !0,
alignType: cc.macro.TextAlignment.CENTER,
sureCallBack: function() {
UserUtils.saveInfoList(e.roleId, i);
app.ctrls.bag.sendItems(e.roleId, t.itemData.itemId, t.sendNum, {
callBack: t.handleSendSuccess.bind(t)
});
t.updateList();
}
});
}
},
handleSendSuccess: function() {
TipsUtils.showTips("赠送成功！");
ViewManager.closeView(this);
}
});
cc._RF.pop();
}, {} ],
bagView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "b5502hN/kVDM52IGwxJ64as", "bagView");
var s = e("List"), n = e("ShopConst"), o = e("ItemConst");
cc.Class({
extends: ViewBase,
properties: {
listBag: s,
nodeDetail: cc.Node,
sprItem: cc.Node,
sprIcon: cc.Node,
txtNum: cc.Label,
btnBuy: cc.Node,
txtName: cc.Node,
txtNoItem: cc.Node,
txtItemDesc: cc.Node,
prefabBg: cc.Prefab
},
onCreate: function(e) {
e = e || {};
this.initData();
this.initEvent();
this.initUI(e);
},
initData: function() {
this.ctrl = app.ctrls.bag;
this.model = this.ctrl.getModel();
this._shopModel = app.ctrls.shop.getModel();
this._currencyModel = app.ctrls.currency.getModel();
app.ctrls.login.getServerTime();
this.selectItem = {};
this.ctrl.getBagInfo();
this.ctrl.getGiftRecordByRoleId();
},
initEvent: function() {
this.eventOn(this.model.EVENT_UPDATE_BAG_INFO, this.handleUpdateBagInfo.bind(this));
this.eventOn(this.model.EVENT_REQUEST_BAG_INFO, this.handleUpdateBagInfo.bind(this));
this.eventOn(this.model.EVENT_USE_ITEM_SUCCESS, this.handleUseItemSuccess.bind(this));
this.eventOn(this._shopModel.EVENT_GIFT_INFO_UPDATE, this.handleUpdateBagInfo.bind(this));
},
initUI: function(e) {
var t = this;
this.tabIndex = -1;
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBaseView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBaseView").setTitle({
type: 1,
path: "module/fish/texture/fishCommon/title/bb_title",
bgType: 1
});
this.onClick(this.btnBuy, this.onClickBuy.bind(this));
this.canAction = !0;
this.updateBagInfo();
},
updateBagInfo: function() {
var e = this.model.getBagInfo();
this.bagList = ArrayUtils.filter(e, function(e, t) {
return 1 != e.noShow && e.itemId != o.ResourceType.CarnivalConch;
});
var t = 0;
if (!TypeUtils.isRealNull(this.selectItem) && !TypeUtils.isRealNull(this.selectItem.itemId)) for (var i = 0; i < this.bagList.length; i++) if (this.bagList[i].itemId == this.selectItem.itemId && this.bagList[i].soltId == this.selectItem.soltId) {
t = i;
break;
}
this.listBag.numItems = this.bagList.length;
this.listBag.selectedId = t;
},
onListRender: function(e, t) {
var i = this, s = this.bagList[t], n = this.seekC(e, "sprIcon"), o = this.seekC(e, "txtNum");
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(s.itemId),
isHide: !0,
callback: function() {
SpriteUtils.setAdaptContentSize(n, null, 80);
}
}, n, e);
o.getComponent(cc.Label).string = "X" + s.amount;
e.stopAllActions();
e.scale = 1;
if (this.canAction) {
e.scale = 0;
ActionUtils.sequence(e, cc.delayTime(.02 * t), cc.scaleTo(.1, 1.1), cc.scaleTo(.05, 1), cc.callFunc(function() {
i.canAction = !1;
}));
}
},
onListSelected: function(e, t, i, s) {
this.selectItem = this.bagList[t];
this.showItemDetail(this.selectItem);
},
showItemDetail: function(e) {
var t = this, i = !1;
this.btnBuy.active = i;
if (!TypeUtils.isRealNull(e)) {
this.selectItem = e;
i = !0;
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(e.itemId),
callback: function() {
SpriteUtils.setAdaptContentSize(t.sprIcon, null, 80);
}
}, this.sprIcon, this);
this.txtNum.string = "X" + e.amount;
this.txtName.getComponent(cc.Label).string = e.name;
this.txtItemDesc.getComponent(cc.Label).string = e.desc;
this.btnBuy.active = 1 == e.canBuy;
}
this.sprItem.active = i;
this.txtName.active = i;
this.txtNoItem.active = !i;
},
onClickBuy: function() {
var e = this._shopModel.getGoodsLimit(this.selectItem.shopId);
if (!TypeUtils.isRealNull(e) && e.fishVipCeil) {
var t = VipUtils.getFishVipLevel();
if (e.fishVipCeil[t] && e.fishVipCeil[t] > 0 && CountingUtils.getRemainUsingCount(e.type) <= 0) {
TipsUtils.showTips("次数不足");
return;
}
if (!e.fishVipCeil[t] || e.fishVipCeil[t] <= 0) for (var i = t + 1; i < e.fishVipCeil.length; i++) e.fishVipCeil[i] > 0 && TipsUtils.showTips(StringUtils.format("达到VIP%s即可购买%s喔", i, ItemUtils.getItemName(this.selectItem.itemId)));
}
SystemUtils.checkIsClose(20025) ? TipsUtils.showTips("敬请期待") : ViewManager.showView("SHOP_VIEW", null, {
id: n.Shop_FishItem
});
},
onClickSend: function() {
var e = this;
if (VipUtils.getFishVipLevel() < 6) TipsUtils.showTips("达到VIP6才可赠送道具！"); else if (this.selectItem.amount <= 0) TipsUtils.showTips("你没有该物品"); else {
var t = ItemUtils.getItemGiveConfig(this.selectItem.itemId);
this.ctrl.getGiveItemCount(this.selectItem.itemId, {
callback: function(i) {
!isNaN(Number(i)) && Number(i) > 0 ? RoleUtils.checkSecondPwd(function() {
t.canSendNum = Number(i);
e.onClickSendItem(e.selectItem, t);
}) : TipsUtils.showTips("赠送已达上限");
}
});
}
},
onClickUseItem: function(e) {
this.ctrl.useItem(e.itemId, 1);
},
handleUpdateBagInfo: function() {
this.updateBagInfo();
},
handleUseItemSuccess: function() {
this.updateBagInfo();
this.showItemDetail(this.selectItem);
}
});
cc._RF.pop();
}, {
ItemConst: "ItemConst",
List: "List",
ShopConst: "ShopConst"
} ],
bossComingView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "eead3vDCAdFdaoYlp4eB+kH", "bossComingView");
var s = e("CatchFishConst");
cc.Class({
extends: ViewBase,
properties: {
spBoss: cc.Node,
bossSpine: sp.Skeleton,
spMRYBoss: cc.Node,
bossMRYSpine: sp.Skeleton,
spCZBoss: cc.Node,
bossCZSpine: sp.Skeleton,
nodeDes: cc.Node,
txtMult: cc.Node,
txtAwardDes: cc.Node,
txtDropDes: cc.Node,
txtAward: cc.Node,
bigIcon: cc.Node,
smallIcon: cc.Node
},
onAdapt: function() {
AdaptUtils.AdaptNodeToFullAdapt(this.node);
},
onCreate: function(e) {
ViewBase.prototype.onCreate.call(this, e);
this.params = e || {};
this.initData();
this.initUI();
},
initData: function() {
this.model = app.fishCtrls.catchFish.getModel();
},
initUI: function() {
this.spBoss.active = !1;
this.spMRYBoss.active = !1;
this.spCZBoss.active = !1;
this.nodeDes.active = !1;
this.bigIcon.active = !1;
this.smallIcon.active = !1;
this.freshView();
},
freshView: function() {
var e = this;
this.playSound("jingbao");
var t = this.params.conf;
if (this.model.isNaJiaFish(t.type)) {
this.spMRYBoss.active = !0;
this.bossMRYSpine.setCompleteListener(this.spineCompleteHanlde.bind(this));
SpineUtils.changeAnimation(this.bossMRYSpine, "play", !1, null, !0);
} else if (this.model.isChuangZhangFish(t.type)) {
this.spCZBoss.active = !0;
this.bossCZSpine.setCompleteListener(this.spineCompleteHanlde.bind(this));
SpineUtils.changeAnimation(this.bossCZSpine, "1", !1, null, !0);
} else {
this.spBoss.active = !0;
this.bossSpine.setCompleteListener(this.spineCompleteHanlde.bind(this));
SpineUtils.changeAnimation(this.bossSpine, "1", !1, null, !0);
var i = s.BossComingBigIcon[t.type];
if (TypeUtils.isRealNull(i)) {
this.smallIcon.active = !0;
SpriteUtils.setTexture({
path: "module/fish/texture/fishIntroduce/fish/" + t.icon
}, this.smallIcon, this);
} else {
this.bigIcon.active = !0;
this.nodeDes.active = !0;
this.bigIcon.opacity = 0;
this.nodeDes.opacity = 0;
var n = "module/fish/texture/catchFishUi/boss/" + t.type;
TypeUtils.isAllNull(t.bossHeadImg) || (n = "module/fish/texture/catchFishUi/boss/" + t.bossHeadImg);
SpriteUtils.setTexture({
path: n,
callback: function() {
e.bigIcon.opacity = 255;
e.nodeDes.opacity = 255;
}
}, this.bigIcon, this);
var o = "";
TypeUtils.isRealNull(i.times1) || (o = TypeUtils.isRealNull(t.goldRange) ? t.goldDrop + "倍" : StringUtils.format("%s~%s倍", t.goldRange[0], t.goldRange[1]));
this.txtMult.getComponent(cc.Label).string = o;
var a = "";
TypeUtils.isRealNull(i.times2) || (a = i.times2);
this.txtAwardDes.getComponent(cc.Label).string = a;
var r = "";
TypeUtils.isRealNull(i.times3) || (r = i.times3);
this.txtDropDes.getComponent(cc.Label).string = r;
var l = "";
TypeUtils.isRealNull(i.times4) || (l = i.times4);
this.txtAward.getComponent(cc.Label).string = l;
this.txtMult.getComponent(cc.Label)._forceUpdateRenderData();
this.txtDropDes.getComponent(cc.Label)._forceUpdateRenderData();
this.txtAwardDes.x = this.txtMult.width;
this.txtAward.x = this.txtDropDes.width;
}
}
},
spineCompleteHanlde: function() {
ViewManager.closeView("BOSS_COMING_VIEW");
}
});
cc._RF.pop();
}, {
CatchFishConst: "CatchFishConst"
} ],
bubbleItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "90c0fFmC6dCUr69yqkBW0GO", "bubbleItem");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
sprBg: cc.Node,
sprIcon: cc.Node,
sprGou: cc.Node,
txtNum: cc.Node
},
ctor: function() {},
onLoad: function() {
s.prototype.onLoad.call(this);
this.initData();
this.initUI();
},
initData: function() {},
initUI: function() {
this.sprGou.active = !1;
this.sprBg.active = !1;
this.txtNum.getComponent(cc.Label).string = "";
},
setData: function(e) {
var t = this;
this.data = e;
this.sprBg.active = !0;
this.sprGou.active = !1;
this.posY = this.posY || this.node.y;
this.node.stopAllActions();
ActionUtils.repeat(this.node, cc.moveTo(3, cc.v2(this.node.x, this.posY + 10)), cc.moveTo(3, cc.v2(this.node.x, this.posY - 10)));
if (e.isGet) {
this.node.stopAllActions();
this.sprBg.active = !1;
this.sprGou.active = !0;
} else e.isMiss && this.node.stopAllActions();
SpriteUtils.setTexture({
path: ItemUtils.getItemPngByCfg(e.award[0]),
callback: function() {
SpriteUtils.setAdaptContentSize(t.sprIcon, 70);
}
}, this.sprIcon, this);
if (TypeUtils.isAllNull(e.desc)) {
var i = NumberUtils.toString(1 * e.award[0].amount, 2);
this.txtNum.getComponent(cc.Label).string = "X" + i;
} else this.txtNum.getComponent(cc.Label).string = e.desc;
this.onClick(this.node, function() {
TypeUtils.isFunction(t.callback) && t.callback(e);
});
},
setClickCB: function(e) {
this.callback = e;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
bulletObject: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "9491921pzFISZ7Fx1GqFhd5", "bulletObject");
e("CatchFishConst");
var s = e("bullet"), n = null, o = null;
cc.Class({
extends: BaseComponent,
properties: {
sprBullet: cc.Node
},
ctor: function() {},
initConfig: function() {
n = ConfigMgr.getConfig("gun_level");
o = ConfigMgr.getConfig("bullet_config");
},
initData: function(e) {
this.initConfig();
this.bulletInfo = e;
this.roleId = e.roleId;
this.model = e.model;
var t = this.model.getCrazyStatus(this.roleId);
this.isCrazy = t.isCrazy;
this.surviveTime = 0;
this.hitFish = {};
var i = e.curX, a = e.curY, r = n.findFirst(function(t) {
return t.type == e.type && t.level == e.level;
}).bulletRes, l = this.getBulletResId(r);
this.bulletConf = o.findByIndex(l);
this.lifeTime = this.bulletConf.life;
var c = e.fireRadian;
this.bullet = new s({
speed: this.bulletConf.speed,
radian: c,
curX: i,
curY: a
});
this.setBulletSkin();
this.addTail();
this.node.setAnchorPoint(cc.v2(.5, .5));
this.node.setPosition(i - CC_DESIGN_RESOLUTION.width / 2, CC_DESIGN_RESOLUTION.height / 2 - a);
this.node.angle = 90 - DicUtils.deg(c);
},
getBulletResId: function(e) {
var t = this.model.getRoomType();
return this.model.isShowJade(t) ? this.isCrazy ? e.kb_ys : e.zc_ys : this.isCrazy ? e.kb : e.zc;
},
update: function(e) {
this.surviveTime = this.surviveTime + e;
var t = this.bullet.getRadian();
this.bullet.update(e);
this.targetFish && t != this.bullet.getRadian() && this.setTargetFish(null);
var i = DicUtils.deg(this.bullet.getRadian()) - 90;
this.node.angle = i;
this.node.setPosition(this.bullet.getX() - CC_DESIGN_RESOLUTION.width / 2, CC_DESIGN_RESOLUTION.height / 2 - this.bullet.getY());
},
setBulletSkin: function() {
var e = this.bulletConf.res;
if (TypeUtils.isRealNull(e)) {
var t = this.bulletConf.sp;
TypeUtils.isRealNull(t) || FishUtils.playSpine({
ani: t.ani,
zorder: -1,
x: 0,
y: 0,
isLoop: !0,
path: t.sp
}, this.node);
} else SpriteUtils.setTexture({
path: "module/fish/texture/catchFishUi/bullet/" + e
}, this.sprBullet, this);
},
addTail: function() {
var e = this.bulletConf.tail;
TypeUtils.isRealNull(e) || FishUtils.playSpine({
ani: e.ani,
zorder: -1,
x: 55,
y: 40,
isLoop: !0,
scale: this.scaleRadio,
path: e.sp
}, this.node);
},
playHit: function(e) {
var t = this.checkSurviveTime();
this.playNets(t, e);
},
playNets: function(e, t) {
var i = this, s = this.bulletConf;
this.hitFish[t] = !0;
var n = s.netRes, o = this.node.x, a = this.node.y;
if (!TypeUtils.isRealNull(this.targetFish)) {
o = this.targetFish.node.x;
a = this.targetFish.node.y;
}
this.node.stopAllActions();
this.removeSpineNet();
this.spNet = FishUtils.playSpine({
ani: n.ani,
zorder: 30,
x: o,
y: a,
isLoop: !0,
scale: this.scaleRadio,
path: n.sp
}, this.node.parent);
e && (this.node.opacity = 0);
ActionUtils.callOnce(this.node, function() {
i.hitFish[t] = null;
i.removeSpineNet();
e && i.removeSelf();
}, .5);
},
removeSpineNet: function() {
if (!TypeUtils.isRealNull(this.spNet)) {
this.spNet.destroy();
this.spNet = null;
}
},
isHit: function(e) {
return !!this.hitFish[e];
},
setHitFish: function(e) {
this.hitFish[e] = !0;
},
checkTargetAway: function() {
if (!TypeUtils.isRealNull(this.bulletConf.followTarget)) {
this.removeSelf();
return !0;
}
return !1;
},
checkSurviveTime: function() {
return !TypeUtils.isRealNull(this.lifeTime) || this.surviveTime >= this.lifeTime;
},
getRoleId: function() {
return this.bulletInfo.roleId;
},
getBulletId: function() {
return this.bulletInfo.bulletId;
},
getX: function() {
return this.bullet.getX();
},
getY: function() {
return this.bullet.getY();
},
setTargetFish: function(e) {
this.targetFish = e;
},
getTargetFish: function() {
return this.targetFish;
},
isWarheadBullet: function() {
return this.bulletConf.isWarhead;
},
getBulletSize: function() {
TypeUtils.isRealNull(this.size) && (this.size = this.sprBullet.getContentSize());
return this.size;
},
removeSelf: function() {
var e = this;
ActionUtils.callOnce(this.node, function() {
e.node.destroy();
}, .1);
}
});
cc._RF.pop();
}, {
CatchFishConst: "CatchFishConst",
bullet: "bullet"
} ],
bullet: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "8017c3orW1JD44YT3Xvkzvx", "bullet");
var s = e("BaseComponent");
cc.Class({
extends: s,
ctor: function() {
this.initData(arguments[0]);
},
initData: function(e) {
this.bulletSpeed = e.speed;
this.bulletRadian = e.radian;
this.bulletX = e.curX;
this.bulletY = e.curY;
},
update: function(e) {
for (var t = this.bulletSpeed * e; t > 1; ) {
var i = t * Math.cos(this.bulletRadian), s = -t * Math.sin(this.bulletRadian), n = void 0, o = this.bulletX, a = this.bulletY;
if (o + i <= 0) {
i = -o;
n = Math.PI;
} else if (o + i >= CC_DESIGN_RESOLUTION.width) {
i = CC_DESIGN_RESOLUTION.width - o;
n = Math.PI;
}
if (a + s <= 0) {
s = -a;
n = 2 * Math.PI;
} else if (a + s >= CC_DESIGN_RESOLUTION.height) {
s = CC_DESIGN_RESOLUTION.height - a;
n = 2 * Math.PI;
}
t -= Math.sqrt(i * i + s * s);
this.bulletX = o + i;
this.bulletY = a + s;
if (!TypeUtils.isRealNull(n)) {
this.bulletRadian = n - this.bulletRadian;
this.bulletRadian < 0 && (this.bulletRadian = 2 * Math.PI + this.bulletRadian);
}
}
},
getRadian: function() {
return this.bulletRadian;
},
setBulletSpeed: function(e) {
this.bulletSpeed = e;
},
getX: function() {
return this.bulletX;
},
getY: function() {
return this.bulletY;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
cardGiftView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "1c7f7EjcHxKrpC4bj490TAI", "cardGiftView");
var s = e("ShopConst");
cc.Class({
extends: ViewBase,
properties: {
btnClose: cc.Node,
nodeSp: cc.Node,
btnBuy: cc.Node,
txtBuy: cc.Label,
nodeDesc1: cc.Node,
nodeDesc2: cc.Node,
txtDay: cc.Label,
giftItem: cc.Prefab
},
onAdapt: function() {
AdaptUtils.AdaptNodeToHWAdapt(this.node);
},
onCreate: function() {
this.initData();
this.initEvent();
this.initUI();
},
initData: function() {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this._shopCtrl = app.ctrls.shop;
this._shopModel = this._shopCtrl.getModel();
this.shopData = ConfigMgr.getConfig("shop_config").findByIndex(s.Fish_MonthCardGift);
},
initEvent: function() {},
initUI: function() {
var e = this;
SpineUtils.changeAnimation(this.nodeSp, "1", !0, "2");
for (var t = this.shopData.goods.length, i = this.shopData.gift[0], s = ConfigMgr.getConfig("gift").findByIndex(this.shopData.gift[0]).goods, n = s.length, o = 0; o < t + n; o++) {
var a = this.shopData.goods[o];
o >= t && (a = s[o - t]);
var r = cc.instantiate(this.giftItem);
r.parent = this.node;
r.x = 120 * (o - (t + n) / 2 + 1);
r.y = 20;
r.script = r.getComponent("bubbleItem");
var l = {
award: [ a ]
};
if (o >= t) {
var c = NumberUtils.toString(a.amount, 2);
l.desc = "X" + c + "/天";
}
r.script.setData(l);
}
this.onClick(this.btnClose, function() {
ViewManager.closeView(e);
});
this.onClick(this.btnBuy, this.hanldeTouchGet.bind(this));
var h = this._shopModel.getGiftInfoById(i);
if (h > 0) {
this.nodeDesc1.active = !1;
this.nodeDesc2.active = !0;
this.txtDay.string = h;
this.txtBuy.string = "续 费";
} else {
this.nodeDesc1.active = !0;
this.nodeDesc2.active = !1;
this.txtBuy.string = "成为贵族";
}
FishUtils.showOpenSpine(this.node);
},
hanldeTouchGet: function(e) {
var t = this;
TypeUtils.isRealNull(this.shopData) || AppUtils.addOrder(this.shopData.id, function() {
ViewManager.closeView(t);
});
}
});
cc._RF.pop();
}, {
ShopConst: "ShopConst"
} ],
catchAwardDrop: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "9ff6d7ArpdC7aAaYUMaPvdc", "catchAwardDrop");
var s = e("ItemConst");
cc.Class({
extends: ViewBase,
properties: {},
init: function(e) {
var t = this;
this.model = e.model;
this.node.setPosition(e.x - CC_DESIGN_RESOLUTION.width / 2, CC_DESIGN_RESOLUTION.height / 2 - e.y);
var i = this.getC("sprIcon"), n = this.getC("txtDesc");
SpriteUtils.setTexture({
path: e.icon,
callback: function() {
SpriteUtils.setAdaptContentSize(i, e.width || 45);
}
}, i, this);
if (TypeUtils.isRealNull(e.desc)) if (TypeUtils.isAllNull(e.name)) {
var o = "x" + e.amount;
e.itemId == s.ResourceType.Ticket && (o = e.amount + "元");
n.getComponent(cc.Label).string = o;
} else n.getComponent(cc.Label).string = e.name + " x" + e.amount; else n.getComponent(cc.Label).string = e.desc;
var a = e.scale || 1;
this.model && this.model.isRotate() && 1 != e.isIgnore && (a = -a);
if (!TypeUtils.isRealNull(e.pos)) {
this.node.scale = 0;
var r = this.model.GUN_POS[e.pos], l = r[0] - e.x, c = CC_DESIGN_RESOLUTION.height - r[1] - e.y, h = Math.sqrt(Math.pow(l, 2) + Math.pow(c, 2)) / 500;
ActionUtils.sequence(this.node, cc.scaleTo(.2, a).easing(cc.easeBackOut()), cc.delayTime(e.delayTime), cc.spawn(cc.scaleTo(h, .8 * a), cc.moveTo(h, cc.v2(r[0] - CC_DESIGN_RESOLUTION.width / 2, CC_DESIGN_RESOLUTION.height / 2 - r[1])).easing(cc.easeBackIn())), function() {
TypeUtils.isFunction(e.callback) ? e.callback() : t.node.destroy();
});
}
}
});
cc._RF.pop();
}, {
ItemConst: "ItemConst"
} ],
catchFishCtrl: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "dda1aYim55EgZbvjGMyuSnC", "catchFishCtrl");
var s = e("HttpCtrl"), n = e("catchFishModel"), o = e("CatchFishConst");
cc.Class({
extends: s,
properties: {},
ctor: function() {
var e = new n();
this.init(e);
this.addEvent(M_CatchFish.handleFishBorn, this.handleFishBorn.bind(this));
this.addEvent(M_CatchFish.handleFishStrikes, this.handleFishStrikes.bind(this));
this.addEvent(M_CatchFish.handlePlayerEnter, this.handlePlayerEnter.bind(this));
this.addEvent(M_CatchFish.handlePlayerLeave, this.handlePlayerLeave.bind(this));
this.addEvent(M_CatchFish.handlePlayerInfoUpdate, this.handlePlayerInfoUpdate.bind(this));
this.addEvent(M_CatchFish.handlePlayerItemUpdate, this.handlePlayerItemUpdate.bind(this));
this.addEvent(M_CatchFish.handleFire, this.handleFire.bind(this));
this.addEvent(M_CatchFish.handleHit, this.handleHit.bind(this));
this.addEvent(M_CatchFish.handleAim, this.handleAim.bind(this));
this.addEvent(M_CatchFish.handleStopAim, this.handleStopAim.bind(this));
this.addEvent(M_CatchFish.handleUpdateGun, this.handleUpdateGun.bind(this));
this.addEvent(M_CatchFish.syncGoldFishInfo, this.handleGoldFishInfo.bind(this));
this.addEvent(M_CatchFish.handleKickOutPlayer, this.handleKickOutPlayer.bind(this));
this.addEvent(M_CatchFish.handleStartCrazy, this.handleStartCrazy.bind(this));
this.addEvent(M_CatchFish.handleStopCrazy, this.handleStopCrazy.bind(this));
this.addEvent(M_CatchFish.handleFishChange, this.handleFishChange.bind(this));
this.addEvent(M_CatchFish.handleHaoJiao, this.handleHaoJiao.bind(this));
this.addEvent(M_CatchFish.syncTianJiangInfo, this.handleWarheadBombInfo.bind(this));
this.addEvent(M_CatchFish.syncLongWangBoxInfo, this.syncDragonTreasureBoxInfo.bind(this));
this.addEvent(M_CatchFish.syncJuShouDuiJueInfo, this.syncMonsterBattleInfo.bind(this));
this.addEvent(M_CatchFish.syncCaiQuanInfo, this.syncFingerPlayInfo.bind(this));
this.addEvent(M_CatchFish.syncZaJinDanInfo, this.syncCrushEggsInfo.bind(this));
this.addEvent(M_CatchFish.syncSanGuoInfo, this.syncSanGuoWarInfo.bind(this));
this.addEvent(M_CatchFish.syncPangXieInfo, this.syncPangXieInfo.bind(this));
this.addEvent(M_CatchFish.syncCompetitionInfo, this.syncCompetitionInfo.bind(this));
this.addEvent(M_CatchFish.syncCompetitionScore, this.syncCompetitionScore.bind(this));
this.addEvent(M_CatchFish.syncRewardTask, this.syncRewardTaskInfo.bind(this));
this.addEvent(M_CatchFish.syncShanCaiInfo, this.syncShanCaiInfo.bind(this));
this.addEvent(M_CatchFish.syncQiLinBaoDian, this.syncQiLinBaoDian.bind(this));
this.addEvent(M_CatchFish.handleFanBei, this.model.handleFanBei.bind(this.model));
this.addEvent(M_CatchFish.handleFreeze, this.handleFreeze.bind(this));
this.addEvent(M_CatchFish.handleUnfreeze, this.handleUnfreeze.bind(this));
this.eventOn(AppEvent.GameEventEnterBackground, this.handlerGameEventEnterBackground, this);
this.eventOn(AppEvent.GameEventEnterForeground, this.handlerGameEventEnterForeground, this);
this.freezeEvents();
},
freezeEvents: function() {
session.freezeEvent(M_CatchFish.handleFishBorn);
session.freezeEvent(M_CatchFish.handleFishChange);
session.freezeEvent(M_CatchFish.handleFishStrikes);
session.freezeEvent(M_CatchFish.handlePlayerEnter);
session.freezeEvent(M_CatchFish.handlePlayerLeave);
session.freezeEvent(M_CatchFish.handlePlayerInfoUpdate);
session.freezeEvent(M_CatchFish.handleFire);
session.freezeEvent(M_CatchFish.handleHit);
session.freezeEvent(M_CatchFish.handleAim);
session.freezeEvent(M_CatchFish.handleStopAim);
session.freezeEvent(M_CatchFish.handleUpdateGun);
session.freezeEvent(M_CatchFish.handleFreeze);
session.freezeEvent(M_CatchFish.handleUnfreeze);
},
unfreezeEvents: function() {
session.unfreezeEvent(M_CatchFish.handleFishBorn);
session.unfreezeEvent(M_CatchFish.handleFishChange);
session.unfreezeEvent(M_CatchFish.handleFishStrikes);
session.unfreezeEvent(M_CatchFish.handlePlayerEnter);
session.unfreezeEvent(M_CatchFish.handlePlayerLeave);
session.unfreezeEvent(M_CatchFish.handlePlayerInfoUpdate);
session.unfreezeEvent(M_CatchFish.handleFire);
session.unfreezeEvent(M_CatchFish.handleHit);
session.unfreezeEvent(M_CatchFish.handleAim);
session.unfreezeEvent(M_CatchFish.handleStopAim);
session.unfreezeEvent(M_CatchFish.handleUpdateGun);
session.unfreezeEvent(M_CatchFish.handleFreeze);
session.unfreezeEvent(M_CatchFish.handleUnfreeze);
},
getCatchInfo: function() {
session.request(M_CatchFish.getInfo, null, this.handlerWithError(this, this.handleGetCatchInfo));
},
enterRoom: function(e, t, i) {
var s = {
roomType: e = e || 1,
roomId: i
};
session.request(M_CatchFish.enterRoom, s, this.handlerWithError(this, this.handleEnterRoom), {
roomType: e,
roomGroup: t,
roomId: i
});
},
handleEnterRoom: function(e) {
e.data.minGunLevel = Number(e.data.minGunLevel);
for (var t = 0; t < e.data.players.length; t++) {
var i = e.data.players[t];
i.gunLevel = Number(i.gunLevel);
}
this.getModel().setRoomInfo(e.data);
GameManager.setEnterToPlayGame(!0);
ViewManager.showView("FISH_LOADING_VIEW", "award", null, function() {
ViewManager.closeView("FISH_ROOM_VIEW");
ViewManager.closeView("FISH_HALL_VIEW");
ViewManager.closeView("ROOM_SEAT_VIEW");
ViewManager.closeView("FISH_ROOM_MAGIC_VIEW");
ViewManager.closeView("CLUB_HALL_VIEW");
});
},
handlerGameEventEnterBackground: function() {},
handlerGameEventEnterForeground: function() {},
leaveRoom: function(e) {
this.model.setIsLeavingRoom(!0);
session.request(M_CatchFish.leaveRoom, null, this.handlerWithError(this, this.handleLeaveRoom), e);
},
fire: function(e) {
session.request(M_CatchFish.fire, {
fireList: e
}, this._fireResult.bind(this), e, !1);
},
hit: function(e) {
session.request(M_CatchFish.hit, e, this.handlerWithError(this, this._hitResult), null, !1);
},
aim: function(e) {
session.request(M_CatchFish.aim, e, this.handlerWithError(this, this._aimResult), null, !1);
},
stopAim: function() {
session.request(M_CatchFish.stopAim, null, this.handlerWithError(this, this._stopAimResult), null, !1);
},
updateGun: function(e, t) {
this.model.setSwitching(!0);
TypeUtils.isString(e.gunLevel) || (e.gunLevel = e.gunLevel + "");
session.request(M_CatchFish.updateGun, e, this._updateGunResult.bind(this), t, !1);
},
freeze: function() {
session.request(M_CatchFish.freeze, null, this.handlerWithError(this, this._freezeResult), null, !1);
},
handlePlayerInfoUpdate: function(e) {
this.model.handlePlayerInfoUpdate(e.data);
},
handlePlayerItemUpdate: function(e) {
this.model.handlePlayerItemUpdate(e.data);
},
handleGetCatchInfo: function(e) {
this.model.setCatchInfo(e.data);
},
handleLeaveRoom: function(e) {
this.model.handleLeaveRoom(e.data);
TypeUtils.isFunction(e.param) && e.param();
GameManager.setEnterToPlayGame(!1);
},
_fireResult: function(e) {
e.errorCode != SystemError.success && (e.errorCode == SystemError.timeout ? this.model.handleStopFire() : (e.errorCode, 
CatchFishError.fireCding));
},
_hitResult: function(e) {},
_aimResult: function(e) {},
_stopAimResult: function(e) {},
_updateGunResult: function(e) {
this.model.setSwitching(!1);
e.errorCode == SystemError.success ? TypeUtils.isFunction(e.param) && e.param() : ViewManager.showErrorMsg(e.errorCode);
},
_freezeResult: function(e) {},
handlePlayerEnter: function(e) {
this.model.handlePlayerEnter(e.data);
},
handlePlayerLeave: function(e) {
this.model.handlePlayerLeave(e.data);
},
handleFishBorn: function(e) {
TypeUtils.isRealNull(e.data) || this.model.handleFishBorn(e.data.fishes);
},
handleFire: function(e) {
var t = e.data, i = this.model.getPlayerInfo(t.roleId);
if (!TypeUtils.isRealNull(i)) {
t.bulletList && t.bulletList.length > 0 && !this.model.isMe(t.roleId) && this.model.handleFire(t.bulletList, t.roleId);
this.model.updateCurrency(i, t.currencyList);
TypeUtils.isRealNull(t.fishLevel) || TypeUtils.isRealNull(t.fishExp) || this.model.updateCatchInfo(t.fishLevel, t.fishExp, t.roleId);
}
},
handleHit: function(e) {
for (var t in e.data.dropList) if (e.data.dropList.hasOwnProperty(t)) {
var i = e.data.dropList[t], s = .001 * Math.floor(1e3 * Number(i.amount));
i.amount = s;
}
for (var n in e.data.catchList) if (e.data.catchList.hasOwnProperty(n)) {
var o = e.data.catchList[n];
for (var a in o.dropList) if (o.dropList.hasOwnProperty(a)) {
var r = o.dropList[a], l = .001 * Math.floor(1e3 * Number(r.amount));
r.amount = l;
}
}
this.model.handleHit(e.data);
TypeUtils.isRealNull(e.data.fishLevel) || TypeUtils.isRealNull(e.data.fishExp) || this.model.updateCatchInfo(e.data.fishLevel, e.data.fishExp, e.data.roleId);
},
handleAim: function(e) {
this.model.handleAim(e.data);
},
handleStopAim: function(e) {
this.model.handleStopAim(e.data);
},
handleUpdateGun: function(e) {
e.data.gunLevel = Number(e.data.gunLevel);
this.model.handleUpdateGun(e.data);
},
requestGoldFishLottery: function(e, t) {
session.request(M_CatchFish.randomGoldFishAward, e, this.handlerWithError(this, this.handleGoldFishLotteryResult), t, !1);
},
handleGoldFishLotteryResult: function(e) {
this.model.handleGoldFishLotteryResult(e);
},
handleGoldFishInfo: function(e) {
this.model.onUpdateGoldFishInfo(e.data);
},
handleKickOutPlayer: function(e) {
ViewManager.closeView("CATCH_FISH_VIEW");
AudioMusicManager.stopSounds();
AudioMusicManager.playMusic("module/fish/sound/bgm/FishHallBGM");
this.model.handleLeaveRoom();
},
handleFishStrikes: function(e) {
this.model.handleFishStrikes(e.data);
},
handleFreeze: function(e) {
this.model.handleFreeze(e.data);
},
handleUnfreeze: function(e) {
this.model.handleUnfreeze(e.data);
},
crazy: function(e) {
session.request(M_CatchFish.crazy, e, this.handlerWithError(this, this._crazyResult), null, !1);
},
_crazyResult: function(e) {},
handleStartCrazy: function(e) {
this.model.startCrazy(e.data);
},
handleStopCrazy: function(e) {
this.model.stopCrazy(e.data);
},
handleFishChange: function(e) {
this.model.handleFishChange(e);
},
handleHaoJiao: function(e) {
this.model.handleHaoJiao(e.data);
},
summonFish: function() {
session.request(M_CatchFish.shenDeng, null, this.handlerWithError(this, this._summonFishResult), null, !1);
},
_summonFishResult: function(e) {
this.model.handleSummonFishSucc();
},
summonBossFish: function() {
session.request(M_CatchFish.haoJiao, null, this.handlerWithError(this, this._summonBossFishResult), null, !1);
},
_summonBossFishResult: function(e) {
this.model.handleSummonBossSucc();
},
exchangeColor: function(e) {
session.request(M_CatchFish.exchangeColor, e, this.handlerWithError(this, this._exchangeColorResult), null, !1);
},
_exchangeColorResult: function(e) {
ViewManager.showAwards({
awards: e.data.list
});
},
getSevenDayInfo: function() {
session.request(M_FishSevenDayTask.getInfo, null, this.handlerWithError(this, this._sevenDayResult), null, !1);
},
_sevenDayResult: function(e) {
this.model.hanldeFishSevenDay(e.data);
},
getRoomSeatList: function(e) {
session.request(M_CatchFish.getRoomList, e, this.handlerWithError(this, this._roomSeatListResult), null, !1);
},
_roomSeatListResult: function(e) {
this.model.hanldeRoomListUpdate(e.data);
},
handleWarheadBombInfo: function(e) {
this.model.handleWarheadBombInfo(e.data);
},
openDragonTreasureBox: function() {
session.request(M_CatchFish.openLongWangBox, null, this.handlerWithError(this, this._openDragonTreasureBoxResult), null, !1);
},
_openDragonTreasureBoxResult: function(e) {
this.model.handleUpdateDragonTreasure(e.data);
},
takeAwayDragonTreasureBox: function() {
session.request(M_CatchFish.takeAwayLongWangBox, null, this.handlerWithError(this, this._takeAwayDragonTreasureBoxResult), null, !1);
},
_takeAwayDragonTreasureBoxResult: function(e) {
this.model.handleFishPlayReward(e.data);
},
syncDragonTreasureBoxInfo: function(e) {
var t = e.data;
t.stateType = o.FishPlayState.DragonTreasure;
this.model.handleFishPlayState(t);
},
requestStartMonsterBattle: function(e) {
session.request(M_CatchFish.startJuShouDuiJue, e, this.handlerWithError(this.model, this.model.handleUpdateMonsterBattle), null, !1);
},
requestEndMonsterBattle: function() {
session.request(M_CatchFish.endJuShouDuiJue, null, this.handlerWithError(this, this._endMonsterBattleResult), null, !1);
},
_endMonsterBattleResult: function(e) {
this.model.handleFishPlayReward(e.data);
},
syncMonsterBattleInfo: function(e) {
var t = e.data;
t.stateType = o.FishPlayState.MonsterBattle;
this.model.handleFishPlayState(t);
},
startCaiQuan: function(e) {
session.request(M_CatchFish.startCaiQuan, e, this.handlerWithError(this.model, this.model.handleUpdateFingerPlay), null, !1);
},
endCaiQuan: function() {
session.request(M_CatchFish.endCaiQuan, null, this.handlerWithError(this, this._endCaiQuanResult), null, !1);
},
_endCaiQuanResult: function(e) {
this.model.handleFishPlayReward(e.data);
},
syncFingerPlayInfo: function(e) {
var t = e.data;
t.stateType = o.FishPlayState.FingerPlay;
this.model.handleFishPlayState(t);
},
syncSanGuoWarInfo: function(e) {
var t = e.data;
t.stateType = o.FishPlayState.SanGuoWar;
this.model.handleFishPlayState(t);
},
syncCrushEggsInfo: function(e) {
var t = e.data;
t.stateType = o.FishPlayState.CrushEggs;
this.model.handleFishPlayState(t);
},
syncPangXieInfo: function(e) {
var t = e.data;
t.stateType = o.FishPlayState.SeaTreasures;
this.model.handleFishPlayState(t);
},
syncCompetitionInfo: function(e) {
ViewManager.showView("MATCH_RESULT_VIEW", null, e.data);
},
syncCompetitionScore: function(e) {
this.model.handleUpdateMatchScore(e.data);
},
syncRewardTaskInfo: function(e) {
this.model.handleMatchRewardTaskInfo(e.data);
},
syncShanCaiInfo: function(e) {
var t = e.data;
t.stateType = o.FishPlayState.ShanCai;
this.model.handleFishPlayState(t);
},
syncQiLinBaoDian: function(e) {
this.model.handleQiLinBaoDian(e.data);
}
});
cc._RF.pop();
}, {
CatchFishConst: "CatchFishConst",
HttpCtrl: "HttpCtrl",
catchFishModel: "catchFishModel"
} ],
catchFishModel: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "6ca64jC1RBCH6/Uk7vzopCc", "catchFishModel");
var s;
function n(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}
var o = null, a = null, r = null, l = null, c = null, h = null, u = e("CatchFishConst"), d = e("ItemConst"), p = (e("ShopConst"), 
e("TaskConst")), f = u.CurrenyKeys, m = u.FishType, g = u.RoomGroup, _ = (u.MIN_FIRE_INTERVAL, 
u.CRAZY_MULTIPLE), T = u.RoomType, C = (n(s = {}, 1, [ 370, 62.5 ]), n(s, 2, [ 910, 62.5 ]), 
n(s, 3, [ 910, 657.5 ]), n(s, 4, [ 370, 657.5 ]), s);
cc.Class({
extends: ModelBase,
properties: {
EVENT_AUTO_FIRE: "EVENT_AUTO_FIRE",
EVENT_FIRE: "EVENT_FIRE",
EVENT_PLAYER_ENTER: "EVENT_PLAYER_ENTER",
EVENT_FISH_BORN: "EVENT_FISH_BORN",
EVENT_HIT: "EVENT_HIT",
EVENT_DROP_ITEM: "EVENT_DROP_ITEM",
EVENT_DROP_TREASURE: "EVENT_DROP_TREASURE",
EVENT_DROP: "EVENT_DROP",
EVENT_START_AIM: "EVENT_START_AIM",
EVENT_AIM: "EVENT_AIM",
EVENT_STOP_AIM: "EVENT_STOP_AIM",
EVENT_UPDATE_GUN: "EVENT_UPDATE_GUN",
EVENT_FISH_STRIKES: "EVENT_FISH_STRIKES",
EVENT_TOTAL_PLAYER_UPDATE: "EVENT_TOTAL_PLAYER_UPDATE",
EVENT_ENTER_FROZEN: "EVENT_ENTER_FROZEN",
EVENT_CANCEL_FROZEN: "EVENT_CANCEL_FROZEN",
EVENT_PLAY_AWARD: "EVENT_PLAY_AWARD",
EVENT_PLAYER_LEAVE: "EVENT_PLAYER_LEAVE",
EVENT_TOUCH_FISH_VIEW: "EVENT_TOUCH_FISH_VIEW",
EVENT_STOP_FIRE: "EVENT_STOP_FIRE",
EVENT_PLAYER_INFO_UPDATE: "EVENT_PLAYER_INFO_UPDATE",
EVENT_CATCH_INFO_UPDATE: "EVENT_CATCH_INFO_UPDATE",
EVENT_GOLDFISH_INFO_UPDATE: "EVENT_GOLDFISH_INFO_UPDATE",
EVENT_GOLDFISH_LOTTERY_RESULT: "EVENT_GOLDFISH_LOTTERY_RESULT",
EVENT_CRAZY_STATE_UPDATE: "EVENT_CRAZY_STATE_UPDATE",
EVENT_SUMMON_FISH_SUCC: "EVENT_SUMMON_FISH_SUCC",
EVENT_SUMMON_BOSS_SUCC: "EVENT_SUMMON_BOSS_SUCC",
EVENT_FISH_COLOR_CHANGE: "EVENT_FISH_COLOR_CHANGE",
EVENT_FISH_SEVEN_DAY_TIME: "EVENT_FISH_SEVEN_DAY_TIME",
EVENT_WARHEAD_AIM_GOLD_FISH: "EVENT_WARHEAD_AIM_GOLD_FISH",
EVENT_PLAYER_BULLET_UPDATE: "EVENT_PLAYER_BULLET_UPDATE",
EVENT_ROOM_LIST_UPDATE: "EVENT_ROOM_LIST_UPDATE",
EVENT_SYNC_USE_HAOJIAO: "EVENT_SYNC_USE_HAOJIAO",
EVENT_SYNC_WARHEAD_BOMB_INFO: "EVENT_SYNC_WARHEAD_BOMB_INFO",
EVENT_UPDATE_DRAGON_TREASURE: "EVENT_UPDATE_DRAGON_TREASURE",
EVENT_SYNC_FISH_PLAY_STATE: "EVENT_SYNC_FISH_PLAY_STATE",
EVENT_UPDATE_MONSTER_BATTLE: "EVENT_UPDATE_MONSTER_BATTLE",
EVENT_FISH_PLAY_REWARD: "EVENT_FISH_PLAY_REWARD",
EVENT_UPDATE_FINGER_PLAY: "EVENT_UPDATE_FINGER_PLAY",
EVENT_UPDATE_CRUSH_EGGS: "EVENT_UPDATE_CRUSH_EGGS",
EVENT_UPDATE_SANGUO_WAR: "EVENT_UPDATE_SANGUO_WAR",
EVENT_UPDATE_PX_TREASURES: "EVENT_UPDATE_PX_TREASURES",
EVENT_UPDATE_MATCH_SCORE: "EVENT_UPDATE_MATCH_SCORE",
EVENT_SYNC_MATCH_TASK_STATUS: "EVENT_SYNC_MATCH_TASK_STATUS",
EVENT_PLAYER_CURRENY_UPDATE: "EVENT_PLAYER_CURRENY_UPDATE",
EVENT_UPDATE_SKILL_NU: "EVENT_UPDATE_SKILL_NU",
EVENT_UPDATE_FISH_SKILL: "EVENT_UPDATE_FISH_SKILL",
EVENT_KYLIN_TOUCH_ENDED: "EVENT_KYLIN_TOUCH_ENDED",
EVENT_KYLIN_BAO_DIAN: "EVENT_KYLIN_BAO_DIAN",
EVENT_KYLIN_TOUCH_RESULT: "EVENT_KYLIN_TOUCH_RESULT",
EVENT_FANBEI_UPDATE: "EVENT_FANBEI_UPDATE",
EVENT_UPDATE_WARHEAD_NUM: "EVENT_UPDATE_WARHEAD_NUM",
EVENT_WARHEAD_DROP_SHOW: "EVENT_WARHEAD_DROP_SHOW"
},
ctor: function() {
this.init();
this.initConfig();
this.initData();
},
initConfig: function() {
o = ConfigMgr.getConfig("fish_room_config");
a = ConfigMgr.getConfig("gun_config");
r = ConfigMgr.getConfig("gun_level");
l = ConfigMgr.getConfig("fish_path");
ConfigMgr.getConfig("fish_level_config");
c = ConfigMgr.getConfig("gun_unlock_level_config");
h = ConfigMgr.getConfig("room_gun_level_config");
},
initData: function() {
this._pathObjs = {};
this._fireStartPositions = {};
this._rotate = !1;
this._roomInfo = {};
this._hideData = !0;
this._btn2HideData = !0;
this._roleCrazyInfo = {};
this.mDoubleInfos = {};
this.GUN_POS = C;
this._myRoleId = RoleUtils.getRoleId();
this.initCanUseGunLevels();
},
setExitRoomShowViewType: function(e) {
this._exitViewConfig = e;
},
getExitRoomShowViewType: function() {
return this._exitViewConfig;
},
clearExitRoomShowViewType: function() {
this._exitViewConfig = null;
},
getRoomList: function(e) {
var t = [];
o.forEach(function(i) {
i.group == e && t.push(i);
});
ArrayUtils.sort(t, function(e, t) {
return e.roomType - t.roomType;
});
return t;
},
getViewPosOfPlayer: function(e) {
this._rotate && (e > 2 ? e -= 2 : e += 2);
return e;
},
getViewPosByRoleId: function(e) {
var t = this._roomInfo.players[e], i = 0;
TypeUtils.isRealNull(t) || (i = this.getViewPosOfPlayer(t.pos));
return i;
},
getPosByRoleId: function(e) {
var t = this._roomInfo.players[e], i = 0;
TypeUtils.isRealNull(t) || (i = t.pos);
return i;
},
getRoomInfo: function() {
return this._roomInfo || {};
},
getNextBulletId: function(e, t) {
var i = this.getPlayerInfo(e);
if (!TypeUtils.isRealNull(i)) {
var s = i.nextBulletId;
i.nextBulletId = i.nextBulletId + 1;
return s;
}
},
getMinGunLevel: function() {
return this._roomInfo.minGunLevel || .001;
},
getRoomType: function() {
return this._roomInfo.roomType || 1;
},
getRoomId: function() {
return this._roomInfo.roomId || 1;
},
getRoomGroup: function() {
return o.findByIndex(this.getRoomType()).group;
},
setRoomInfo: function(e) {
this._roomInfo = e;
var t = app.ctrls.role.getModel(), i = {};
for (var s in this._roomInfo.players) if (this._roomInfo.players.hasOwnProperty(s)) {
var n = this._roomInfo.players[s];
i[n.roleId] = n;
this.updateCurrency(n, n.currencyList);
n.nextBulletId = 1;
n.lastestFireTime = 0;
n.fireInfos = [];
if (n.roleId == t.getRoleId()) {
this._rotate = n.pos < 3;
this._myViewPos = this.getViewPosOfPlayer(n.pos);
this._myPlayerInfo = n;
this.setMatchTaskData(n.rewardTaskData);
}
}
this._roomInfo.players = i;
this._roomInfo.freezeTime = this._roomInfo.freezeTime || 0;
this._diffTimeToServer = new Date().getTime() / 1e3 - e.curTime;
this.strikesInfo = this._roomInfo.strikesInfo;
this.setIsLeavingRoom(!1);
this.setSkillNu(!1);
this.setChooseRoomType(this._roomInfo.roomType);
this.resetFishTalkNum();
},
handlePlayerItemUpdate: function(e) {
var t = this.getPlayerInfo(e.roleId);
TypeUtils.isRealNull(t) || this.updateCurrency(t, e.itemList);
},
updateCurrency: function(e, t) {
for (var i in t) if (t.hasOwnProperty(i)) {
var s = t[i];
if (s.itemId == d.ResourceType.QMBullet || s.itemId == d.ResourceType.DJBullet) {
e.bullet = .001 * Math.floor(1e3 * Number(s.amount));
this.dispatchEvent(this.EVENT_PLAYER_BULLET_UPDATE, {
roleId: e.roleId
});
} else {
e[f[s.itemId]] = .001 * Math.floor(1e3 * Number(s.amount));
this.dispatchEvent(this.EVENT_PLAYER_CURRENY_UPDATE, {
roleId: e.roleId,
itemId: s.itemId
});
}
}
},
isFrozen: function() {
var e = this.getNowTime(), t = this._roomInfo.freezeTime;
return !!(t && t > e);
},
getFreezeTime: function() {
return this._roomInfo.freezeTime || 0;
},
isMe: function(e) {
return !(!this._myPlayerInfo || this._myPlayerInfo.roleId != e);
},
isRotate: function() {
return this._rotate;
},
getNowTime: function() {
this._diffTimeToServer || (this._diffTimeToServer = 0);
return new Date().getTime() / 1e3 - this._diffTimeToServer - this._roomInfo.createTime;
},
getDiffTimeToServer: function() {
return this._diffTimeToServer;
},
getPlayerInfo: function(e) {
return this._roomInfo.players[e];
},
getPathTimeLen: function(e) {
var t = l.findByIndex(e);
if (TypeUtils.isRealNull(t)) return 0;
if (t.totalTimeLen) return t.totalTimeLen;
for (var i = 0, s = 0; s < t.path.length; s++) {
i += t.path[s].time;
}
t.totalTimeLen = i;
return i;
},
getMyViewPos: function() {
return this._myViewPos || 3;
},
getFireInterval: function(e) {
var t = e || this._myPlayerInfo.gunType, i = a.findByIndex(t), s = u.MIN_FIRE_INTERVAL;
TypeUtils.isRealNull(i.fireInterval) || (s = i.fireInterval / 1e3);
return s;
},
canFire: function() {
var e = this.getPlayerInfo(this._myRoleId);
if (!TypeUtils.isRealNull(e)) {
if (this.getUsingWarheadState()) return !0;
var t = a.findByIndex(e.gunType).cost * e.gunLevel, i = this.getCrazyMultiple(this._myRoleId);
TypeUtils.isRealNull(i) || (t *= i);
var s = this.getRoomType();
if (this.isMatchRoom(s) && e.bullet <= 0) return !1;
if (this.isShowJade(s)) {
if (!TypeUtils.isRealNull(e.jade) && e.jade >= t) return !0;
} else if (!TypeUtils.isRealNull(e.gold) && e.gold >= t) return !0;
return !1;
}
},
setSwitching: function(e) {
this._switching = e;
},
isSwitching: function() {
return this._switching;
},
getPathObject: function(e) {
return this._pathObjs[e];
},
setPathObject: function(e, t) {
TypeUtils.isRealNull(e) && (this._pathObjs[e] = t);
},
setAutoFire: function(e) {
if (this.canFire() || !e) {
this._autoFire = e;
this.dispatchEvent(this.EVENT_AUTO_FIRE, e);
} else {
var t = this.getRoomType();
this.isShowJade(t) ? TipsUtils.showTips(_LANG("COMMON_NEED_RECHARGE2")) : TipsUtils.showTips(_LANG("COMMON_NEED_RECHARGE1"));
}
},
isAutoFire: function() {
return this._autoFire;
},
pauseAutoFire: function() {
this._tmpAutoFire = !!this._autoFire;
this.setAutoFire(!1);
},
resumeAutoFire: function() {
this._tmpAutoFire && this.setAutoFire(!0);
},
update: function() {
var e = new Date().getTime();
for (var t in this._roomInfo.players) if (this._roomInfo.players.hasOwnProperty(t)) {
var i = this._roomInfo.players[t];
if (i.roleId != this._myPlayerInfo.roleId) {
var s = this.getCrazyStatus(i.roleId);
this.getFireInterval(i.gunType);
var n = u.MIN_FIRE_INTERVAL;
s.isCrazy ? n = (s.multiple == _.TWO ? .8 : .6) * u.MIN_FIRE_INTERVAL : this.isToAim(i.roleId) && (n = .9 * u.MIN_FIRE_INTERVAL);
var o = i.fireInfos[0];
if (o && e - i.lastestFireTime > 1e3 * n) {
i.lastestFireTime = e;
this.dispatchEvent(this.EVENT_FIRE, o);
ArrayUtils.remove(i.fireInfos, 0, 1);
}
}
}
},
handleFireFailure: function() {
this._myPlayerInfo.nextBulletId = this._myPlayerInfo.nextBulletId - 1;
},
handleStopFire: function() {
this.dispatchEvent(this.EVENT_STOP_FIRE);
},
handlePlayerEnter: function(e) {
e.nextBulletId = 1;
e.lastestFireTime = 0;
e.fireInfos = [];
e.gunLevel = Number(e.gunLevel);
this._roomInfo.players[e.roleId] = e;
this.dispatchEvent(this.EVENT_PLAYER_ENTER, e);
this.updateCurrency(e, e.currencyList);
},
changeRoom: function() {
this.isChangeRoom = !0;
this.leaveRoom();
},
leaveRoom: function(e) {
this.isReEntryRooom = e;
app.fishCtrls.catchFish.leaveRoom(function() {
ViewManager.closeView("CATCH_FISH_VIEW");
AudioMusicManager.stopSounds();
AudioMusicManager.playMusic("module/fish/sound/bgm/FishHallBGM");
});
},
handlePlayerLeave: function(e) {
var t = this._roomInfo.players[e];
if (!TypeUtils.isRealNull(t)) {
var i = this.getViewPosOfPlayer(t.pos);
this.dispatchEvent(this.EVENT_PLAYER_LEAVE, {
data: e,
pos: i
});
delete this._roomInfo.players[e];
delete this._roleCrazyInfo[e];
delete this.mDoubleInfos[e];
}
},
handleLeaveRoom: function() {
this.setCrazyPause(!1);
this.setUsingWarheadState(!1);
this.setWarheadBombInfo(null);
var e = this.getExitRoomShowViewType();
if (TypeUtils.isRealNull(e)) {
var t = this.getChooseRoomType(), i = o.findByIndex(t);
i.group == u.RoomGroup.Classical ? ViewManager.showView("FISH_ROOM_VIEW", null, {
isClickIn: !0,
roomType: t,
isChangeRoom: this.isChangeRoom
}) : i.group == u.RoomGroup.Magic ? ViewManager.showView("FISH_ROOM_MAGIC_VIEW", null, {
roomType: t,
isChangeRoom: this.isChangeRoom
}) : i.group == u.RoomGroup.Match ? ViewManager.showView("FISH_MATCH_ROOM_VIEW", null, {
roomType: t,
isReplay: this.isReEntryRooom,
isChangeRoom: this.isChangeRoom
}) : i.group == u.RoomGroup.Club ? ViewManager.showView("CLUB_HALL_VIEW", null, {
seleIdx: 3
}) : ViewManager.showView("FISH_HALL_VIEW");
this.isReEntryRooom = null;
this.isChangeRoom = null;
} else {
ViewManager.showView(e.viewName, null, e.exArg);
this.clearExitRoomShowViewType();
}
},
handleFishBorn: function(e) {
this.dispatchEvent(this.EVENT_FISH_BORN, e);
},
handleFire: function(e, t) {
var i = this.getPlayerInfo(t);
if (!TypeUtils.isRealNull(i)) {
if (this.getNowTime() - e[0].fireTime / 100 <= u.MAX_BULLET_ALIVE_TIME) {
var s = {
fireList: e,
roleId: t
};
this.isMe(t) ? this.dispatchEvent(this.EVENT_FIRE, s) : i.fireInfos.push(s);
}
}
},
handleHit: function(e) {
var t = this.getPlayerInfo(e.roleId);
if (!TypeUtils.isRealNull(t)) {
this.dispatchEvent(this.EVENT_HIT, e);
this.updateCurrency(t, e.currencyList);
}
},
handleDropItem: function(e) {
this.dispatchEvent(this.EVENT_DROP_ITEM, e);
},
handleDropThreasure: function(e) {
this.dispatchEvent(this.EVENT_DROP_TREASURE, e);
},
handleDrop: function(e) {
this.dispatchEvent(this.EVENT_DROP, e);
},
handleAim: function(e) {
var t = this.getPlayerInfo(e.roleId);
if (!TypeUtils.isRealNull(t)) {
t.aimObjectId = e.objectId;
t.aimEndAt = e.aimEndAt;
e.objectId <= 0 ? this.dispatchEvent(this.EVENT_START_AIM, e.roleId) : this.dispatchEvent(this.EVENT_AIM, e);
}
},
isToAim: function(e) {
e = e || this._myRoleId;
var t = this.getPlayerInfo(e);
if (t && t.aimEndAt) {
if (t.aimEndAt - TimeUtils.getServerTime() > 0) return !0;
}
return !1;
},
handleStopAim: function(e) {
var t = this.getPlayerInfo(e);
if (!TypeUtils.isRealNull(t)) {
t.aimObjectId = null;
t.aimEndAt = null;
}
this.dispatchEvent(this.EVENT_STOP_AIM, e);
},
handleUpdateGun: function(e) {
var t = this.getPlayerInfo(e.roleId);
if (!TypeUtils.isRealNull(t)) {
t.gunType = e.gunType;
t.gunLevel = e.gunLevel;
this.dispatchEvent(this.EVENT_UPDATE_GUN, e);
}
},
handleTotalPlayerUpdate: function(e) {
if (!TypeUtils.isRealNull(this._roomInfo)) {
this._roomInfo.totalPlayerCount = e;
this.dispatchEvent(this.EVENT_TOTAL_PLAYER_UPDATE, e);
}
},
getFishStrikesInfo: function() {
return this.strikesInfo;
},
handleFishStrikes: function(e) {
this.strikesInfo = e;
this.dispatchEvent(this.EVENT_FISH_STRIKES, e);
},
handlePlayerInfoUpdate: function(e) {
var t = this.getPlayerInfo(e.roleId);
if (!TypeUtils.isRealNull(t)) {
e.level && e.level > 0 && (t.level = e.level);
e.vipLevel && e.vipLevel > 0 && (t.vipLevel = e.vipLevel);
e.avatar && "" != e.avatar && (t.avatar = e.avatar);
e.nickname && "" != e.nickname && (t.nickname = e.nickname);
null != e.isOffline && (t.isOffline = e.isOffline);
this.updateCurrency(t, e.currencyList);
this.dispatchEvent(this.EVENT_PLAYER_INFO_UPDATE, {
roleId: e.roleId
});
}
},
handleFreeze: function(e) {
this._roomInfo.freezeTime = e.freezeTime;
this.dispatchEvent(this.EVENT_ENTER_FROZEN, e);
},
handleUnfreeze: function(e) {
this.dispatchEvent(this.EVENT_CANCEL_FROZEN, e);
},
isRobot: function(e) {
var t = this._roomInfo.players[e];
return !(!t || !t.isRobot);
},
robotHit: function(e) {
var t = 0;
for (var i in this._roomInfo.players) if (this._roomInfo.players.hasOwnProperty(i)) {
this._roomInfo.players[i];
TypeUtils.isRealNull(roleInfo.isRobot) && (t = Math.max(t, roleId));
}
this._myPlayerInfo.roleId == t && session.request(M_CatchFish.robotHit, e, function() {}, null, !1);
},
getGunUnlockLevelConf: function() {
if (TypeUtils.isRealNull(this.gun_unlock_conf)) {
var e = [];
c.forEach(function(t) {
e.push(t);
});
ArrayUtils.sort(e, function(e, t) {
return e.level - t.level;
});
this.gun_unlock_conf = e;
}
return this.gun_unlock_conf;
},
getCatchInfo: function() {
return this.m_catchInfo;
},
updateCatchInfo: function(e, t, i) {
var s = this.getPlayerInfo(i);
if (!TypeUtils.isRealNull(s)) {
s.level = e;
var n;
if (this.isMe(i)) {
if (TypeUtils.isRealNull(this.m_catchInfo)) return;
this.m_catchInfo.fishLevel = e;
this.m_catchInfo.fishExp = t;
n = this.m_catchInfo;
} else n = {
fishLevel: e,
fishExp: t,
roleId: i
};
this.dispatchEvent(this.EVENT_CATCH_INFO_UPDATE, n);
}
},
setCatchInfo: function(e, t, i) {
for (var s = {}, n = 0; n < e.unlockGunAwards.length; n++) {
s[e.unlockGunAwards[n]] = !0;
}
for (var o = {}, a = 0; a < e.levelAwards.length; a++) {
o[e.levelAwards[a]] = !0;
}
for (var r = {}, l = 0; l < e.unlockGunBoxAwards.length; l++) {
r[e.unlockGunBoxAwards[l]] = !0;
}
this.m_catchInfo = e;
this.m_catchInfo.unlockGunAwards = s;
this.m_catchInfo.levelAwards = o;
this.m_catchInfo.unlockGunBoxAwards = r;
this.m_catchInfo.roleId = app.ctrls.role.getModel().getRoleId();
this.dispatchEvent(this.EVENT_CATCH_INFO_UPDATE, this.m_catchInfo);
if (t) {
var h = c[t];
h && ViewManager.showAwards({
awards: h.award[0]
});
}
if (i) {
var u = c[i];
u && u.boxAward && ViewManager.showAwards({
awards: u.boxAward
});
}
this.onUpdateGoldFishInfo(e.goldFishInfo);
},
getGoldFishInfo: function() {
return this.m_goldfishInfo;
},
onUpdateGoldFishInfo: function(e) {
e.pool = Math.floor(Number(e.pool));
this.m_goldfishInfo = e;
this.dispatchEvent(this.EVENT_GOLDFISH_INFO_UPDATE, this.m_goldfishInfo);
},
handleGoldFishLotteryResult: function(e) {
this.onUpdateGoldFishInfo({
num: 0,
pool: "0"
});
this.dispatchEvent(this.EVENT_GOLDFISH_LOTTERY_RESULT, e);
},
getGoldFishPoolConf: function() {
var e = {};
ConfigMgr.getConfig("gold_fish_pool_config").forEach(function(t) {
TypeUtils.isRealNull(e[t.type]) && (e[t.type] = []);
e[t.type].push(t);
});
for (var t in e) e.hasOwnProperty(t) && ArrayUtils.sort(e[t], function(e, t) {
return e.id - t.id;
});
return e;
},
getCrazyStatus: function(e) {
var t = this._roleCrazyInfo[e], i = {
isCrazy: !1
};
if (!TypeUtils.isRealNull(t)) {
var s = t.crazyEndAt - TimeUtils.getServerTime() - .5;
if (s > 0) {
i.isCrazy = !0;
i.remainTime = s;
i.multiple = t.multiple;
}
}
return i;
},
getCrazyMultiple: function(e) {
var t = this._roleCrazyInfo[e];
if (!TypeUtils.isRealNull(t)) return t.multiple;
},
startCrazy: function(e) {
this._roleCrazyInfo[e.roleId] = e;
this.dispatchEvent(this.EVENT_CRAZY_STATE_UPDATE, e);
},
stopCrazy: function(e) {
this._roleCrazyInfo[e] = null;
this.dispatchEvent(this.EVENT_CRAZY_STATE_UPDATE, {
roleId: e
});
},
setCrazyPause: function(e) {
this._isCrazyPause = e;
},
isCrazyPause: function() {
return this._isCrazyPause;
},
setCrazyAuto: function(e) {
this._isCrazyAuto = e;
},
isCrazyAuto: function() {
return this._isCrazyAuto;
},
handleFishChange: function(e) {
this.dispatchEvent(this.EVENT_FISH_COLOR_CHANGE, e.data);
},
getGunLevelInfo: function(e, t) {
if (TypeUtils.isRealNull(this._gunLevelConf)) {
var i, s, n = {};
r.forEach(function(e) {
if (TypeUtils.isRealNull(n[e.type])) {
n[e.type] = {};
i = e.level;
s = e.level;
}
e.level < i && (i = e.level);
e.level > s && (s = e.level);
n[e.type].minGunLevel = i;
n[e.type].maxGunLevel = s;
n[e.type][e.level] = e;
});
this._gunLevelConf = n;
}
var o, a, l = this._gunLevelConf[e];
if (t) {
o = l.minGunLevel;
a = l.maxGunLevel;
l = this._gunLevelConf[e][t];
}
return [ l, o, a ];
},
initCanUseGunLevels: function() {
var e = [];
h.forEach(function(t) {
TypeUtils.isRealNull(e[t.roomType]) && (e[t.roomType] = []);
e[t.roomType].push(t.level);
});
for (var t in e) e.hasOwnProperty(t) && ArrayUtils.sort(e[t], function(e, t) {
return e - t;
});
this.canUseGunLevelsCfg = e;
},
getCanUseGunLevels: function(e) {
return this.canUseGunLevelsCfg[e];
},
getTurnForgeLevel: function() {
if (this.turnForgeLevel) return this.turnForgeLevel;
for (var e = this.getGunUnlockLevelConf(), t = 0; t < e.length; t++) {
var i = e[t];
if (i.cost.length > 1) break;
this.turnForgeLevel = i.level;
}
return this.turnForgeLevel;
},
getGunUnlockInfo: function(e) {
TypeUtils.isRealNull(e) && (e = this.getGunForgeLevel());
for (var t, i = this.getGunUnlockLevelConf(), s = 0; s < i.length; s++) {
var n = i[s];
if (n.level > e) {
t = n;
break;
}
}
return t;
},
isGunCanUpgrade: function(e) {
TypeUtils.isRealNull(e) && (e = this.getGunUnlockInfo());
var t = !1;
if (!TypeUtils.isRealNull(e)) {
t = !0;
for (var i = 0; i < e.cost.length; i++) {
var s = e.cost[i];
if (ItemUtils.getItemNum(s.itemId) < s.amount) {
t = !1;
break;
}
}
}
return t;
},
getForceTaskLevel: function() {
var e = o.findByIndex(1).forgeLevelLimit, t = 100;
e && e[2] && (t = e[2]);
return t;
},
handleSummonFishSucc: function() {
this.dispatchEvent(this.EVENT_SUMMON_FISH_SUCC);
},
handleSummonBossSucc: function() {
this.dispatchEvent(this.EVENT_SUMMON_BOSS_SUCC);
},
isSevenDayOpen: function() {
var e = this.getRoomType();
if (this.isShowJade(e)) return !1;
if (this.getGunForgeLevel() < u.SEVEN_DAY_OPEN_LEVEL) return !1;
var t = this.getFishSevenDayTime(), i = TimeUtils.getServerTime();
if (t && i >= t.startAt && i < t.endAt) for (var s = app.ctrls.task.getModel().getFishSevenDayTask(), n = 0; n < s.length; n++) {
var o = s[n];
if (!o.status || o.status < p.FinishStatus.HasReceive) return !0;
}
return !1;
},
getFishSevenDayTime: function() {
return this._sevenday_time;
},
hanldeFishSevenDay: function(e) {
this._sevenday_time = e;
this.dispatchEvent(this.EVENT_FISH_SEVEN_DAY_TIME, e);
},
getGunForgeLevel: function() {
return app.ctrls.bag.getModel().getGunForgeLevel();
},
getCurrentWarheadId: function() {
return this._curWarheadId;
},
setAimGoldFish: function(e) {
this._isAimGoldFish = e;
this.dispatchEvent(this.EVENT_WARHEAD_AIM_GOLD_FISH);
},
isAimGoldFish: function() {
return this._isAimGoldFish;
},
getUsingWarheadState: function() {
return this.isUsingWarhead;
},
setUsingWarheadState: function(e) {
this.isUsingWarhead = e;
},
hanldeRoomListUpdate: function(e) {
this.dispatchEvent(this.EVENT_ROOM_LIST_UPDATE, e);
},
setIsLeavingRoom: function(e) {
this._isLeavingRoom = e;
},
isLeavingRoom: function() {
return this._isLeavingRoom;
},
setNotAddJadeNum: function(e) {
this.notAddJadeNum = e;
this.dispatchEvent(this.EVENT_PLAYER_CURRENY_UPDATE, {
roleId: this._myRoleId,
itemId: d.ResourceType.Jade
});
},
getNotAddJadeNum: function() {
return this.notAddJadeNum || 0;
},
setNotAddGoldNum: function(e) {
this.notAddGoldNum = e;
this.dispatchEvent(this.EVENT_PLAYER_CURRENY_UPDATE, {
roleId: this._myRoleId,
itemId: d.ResourceType.Gold
});
},
getNotAddGoldNum: function() {
return this.notAddGoldNum || 0;
},
setNotAddTicketNum: function(e) {
this.notAddTicketNum = e;
this.dispatchEvent(this.EVENT_PLAYER_CURRENY_UPDATE, {
roleId: this._myRoleId,
itemId: d.ResourceType.Ticket
});
},
getNotAddTicketNum: function() {
return this.notAddTicketNum || 0;
},
getNotAddWarheadNum: function(e) {
var t = 0;
this.mNotAddWarheas && (t = this.mNotAddWarheas[e] || 0);
return t;
},
setNotAddWarheadNum: function(e, t) {
TypeUtils.isRealNull(this.mNotAddWarheas) && (this.mNotAddWarheas = {});
this.mNotAddWarheas[e] = t;
this.dispatchEvent(this.EVENT_UPDATE_WARHEAD_NUM, {
roleId: this._myRoleId,
itemId: e
});
},
setChooseRoomType: function(e) {
this.chooseRoomType = e;
var t = o.findByIndex(e);
UserUtils.setLastChooseRoomType(this._myRoleId, t.group, e);
},
getChooseRoomType: function() {
return this.chooseRoomType;
},
isRoomXinShouHaiTan: function(e) {
return e == T.XinShouHaiTan;
},
isRoomShenHaiJuShou: function(e) {
return e == T.ShenHaiJuShou;
},
isRoomYouLingChuangZhang: function(e) {
return e == T.YouLingChuangZhang || e == T.ClubYouLingChuangZhang;
},
isRoomHaiYaoXuanWo: function(e) {
return e == T.HaiYaoXuanWo || e == T.ClubHaiYaoXuanWo;
},
isRoomTiYan: function(e) {
return e == T.TiYanFangJian;
},
isRoomWangLingJuYuan: function(e) {
return e == T.MagicHaiYaoXuanWo || e == T.MagicWangLingJuYuan;
},
isShowJade: function(e) {
return this.isRoomWangLingJuYuan(e);
},
getRoomCurreny: function(e) {
var t = o.findByIndex(e);
if (t) return t.roomCurrency;
logger.warn("没有找到房间类型:%s", e);
},
isMatchRoom: function(e) {
var t = o.findByIndex(e);
return !(!t || t.group != g.Match);
},
isZombieFish: function(e) {
return e == m.ZOMBIE_FISH;
},
isNaJiaFish: function(e) {
var t;
return !!(n(t = {}, m.GOLD_NAJIA_FISH, !0), n(t, m.BLACK_NAJIA_FISH, !0), n(t, m.BLUE_NAJIA_FISH, !0), 
n(t, m.RED_NAJIA_FISH, !0), t)[e];
},
isHaiHuangJiFish: function(e) {
return e == m.HAIHUANGJI_FISH;
},
isNanJueFish: function(e) {
var t;
return !!(n(t = {}, m.GOLD_NANJUE_FISH, !0), n(t, m.BLACK_NANJUE_FISH, !0), n(t, m.BLUE_NANJUE_FISH, !0), 
n(t, m.RED_NANJUE_FISH, !0), t)[e];
},
isShuiShouFish: function(e) {
var t;
return !!(n(t = {}, m.GOUHUNSHUISHOU_FISH, !0), n(t, m.MIHUNSHUISHOU_FISH, !0), 
t)[e];
},
isChuangZhangFish: function(e) {
var t;
return !!(n(t = {}, m.GOLD_CHUANGZHANG_FISH, !0), n(t, m.BLACK_CHUANGZHANG_FISH, !0), 
n(t, m.BLUE_CHUANGZHANG_FISH, !0), n(t, m.RED_CHUANGZHANG_FISH, !0), t)[e];
},
isZhaDanFish: function(e) {
return e == m.BOMB_FISH;
},
isDragonFish: function(e) {
var t;
return !!(n(t = {}, m.GOLD_DRAGON_FISH, !0), n(t, m.BLACK_DRAGON_FISH, !0), n(t, m.BLUE_DRAGON_FISH, !0), 
n(t, m.RED_DRAGON_FISH, !0), t)[e];
},
isNaJiaShuiMuFish: function(e) {
return e == m.NAJIA_SHUIMU;
},
isRocketDrillFish: function(e) {
return e == m.ROCKET_DRILL_FISH;
},
isDogFish: function(e) {
return e == m.XIAOTIAN_DOG_FISH;
},
isShanCaiFish: function(e) {
return e == m.SHANCAITONGZI_FISH;
},
isKylinFish: function(e) {
return e == m.KYLIN_FISH;
},
handleHaoJiao: function(e) {
var t = this.getPlayerInfo(e);
if (t) {
var i = this.getViewPosOfPlayer(t.pos);
this.dispatchEvent(this.EVENT_SYNC_USE_HAOJIAO, i);
}
},
getWarheadBombInfo: function() {
return this.warheadBombInfo;
},
setWarheadBombInfo: function(e) {
this.warheadBombInfo = e;
},
handleWarheadBombInfo: function(e) {
this.setWarheadBombInfo(e);
this.dispatchEvent(this.EVENT_SYNC_WARHEAD_BOMB_INFO, e);
},
handleFishPlayState: function(e) {
this.dispatchEvent(this.EVENT_SYNC_FISH_PLAY_STATE, e);
},
handleFishPlayReward: function(e) {
this.dispatchEvent(this.EVENT_FISH_PLAY_REWARD, e);
},
handleUpdateDragonTreasure: function(e) {
this.dispatchEvent(this.EVENT_UPDATE_DRAGON_TREASURE, e);
},
handleUpdateMonsterBattle: function(e) {
this.dispatchEvent(this.EVENT_UPDATE_MONSTER_BATTLE, e.data);
},
handleUpdateFingerPlay: function(e) {
this.dispatchEvent(this.EVENT_UPDATE_FINGER_PLAY, e.data);
},
handleUpdateCrushEggs: function(e) {
this.dispatchEvent(this.EVENT_UPDATE_CRUSH_EGGS, e);
},
handleUpdateSGZBPlay: function(e) {
this.dispatchEvent(this.EVENT_UPDATE_SANGUO_WAR, e.data);
},
handleUpdatePXTreasures: function(e) {
this.dispatchEvent(this.EVENT_UPDATE_PX_TREASURES, e.data);
},
getFishTalkNum: function() {
return this.fishTalkNum || 0;
},
updateFishTalkNum: function(e) {
this.fishTalkNum || (this.fishTalkNum = 0);
this.fishTalkNum = this.fishTalkNum + (e ? 1 : -1);
},
resetFishTalkNum: function() {
this.fishTalkNum = 0;
},
handleUpdateMatchScore: function(e) {
var t = this.getPlayerInfo(e.roleId);
if (t) {
e.addScore = e.score - t.score;
t.score = e.score;
this.dispatchEvent(this.EVENT_UPDATE_MATCH_SCORE, e);
}
},
isItemJade: function(e) {
return e == d.ResourceType.Jade;
},
handleMoneyNotEnough: function() {
var e = this.getRoomType();
this.isShowJade(e) ? ViewManager.showView("JADE_EXCHANGE_VIEW") : this.handleOpenGoldShop();
},
handleOpenGoldShop: function(e) {
SystemUtils.checkIsClose(20025) || ViewManager.showView("SHOP_VIEW");
},
isCompetitionRoomType: function(e) {
return o.findByIndex(e).group == u.RoomGroup.Match;
},
isMatchTaskFish: function(e) {
return !(!this.matchTaskFish || !this.matchTaskFish[e]);
},
getMatchTaskData: function() {
return this.matchTaskData;
},
setMatchTaskData: function(e) {
this.matchTaskData = e;
this.matchTaskFish = {};
if (e && 1 == e.taskStatus) for (var t = 0; t < e.taskProgress.length; t++) {
var i = e.taskProgress[t];
i.progress < i.maxProgress && (this.matchTaskFish[i.fishType] = !0);
}
},
handleMatchRewardTaskInfo: function(e) {
this.setMatchTaskData(e);
this.dispatchEvent(this.EVENT_SYNC_MATCH_TASK_STATUS, e);
},
setSkillNu: function(e) {
this.isNuOpen = e;
this.dispatchEvent(this.EVENT_UPDATE_SKILL_NU, e);
},
isSkillNuOpen: function() {
return this.isNuOpen;
},
setFishSkill: function(e) {
this.dispatchEvent(this.EVENT_UPDATE_FISH_SKILL, e);
},
handleKylinTouchEnded: function(e) {
this.dispatchEvent(this.EVENT_KYLIN_TOUCH_ENDED, e);
},
handleQiLinBaoDian: function(e) {
var t = e.data;
t.stateType = u.FishPlayState.Kylin;
this.handleFishPlayState(t);
t.isStop && this.dispatchEvent(this.EVENT_KYLIN_BAO_DIAN, t);
},
handleKylinTouchResult: function(e) {
this.dispatchEvent(this.EVENT_KYLIN_TOUCH_RESULT, e);
},
isDoubleFire: function(e) {
var t, i = this.getDoubleInfo(e);
if (i) {
var s = TimeUtils.getServerTime();
i.crazyEndAt > s && (t = Number(i.multiple));
}
return t;
},
getDoubleInfo: function(e) {
return this.mDoubleInfos[e];
},
handleFanBei: function(e) {
var t = e.data;
this.mDoubleInfos[t.roleId] = t;
this.dispatchEvent(this.EVENT_FANBEI_UPDATE, t);
},
handleWarheasDrop: function(e) {
this.dispatchEvent(this.EVENT_WARHEAD_DROP_SHOW, e);
}
});
cc._RF.pop();
}, {
CatchFishConst: "CatchFishConst",
ItemConst: "ItemConst",
ShopConst: "ShopConst",
TaskConst: "TaskConst"
} ],
catchFishUI: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "834caepua5F2776mAGpzlJ5", "catchFishUI");
function s(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}
var n = e("CatchFishConst"), o = e("ItemConst"), a = e("ShopConst"), r = e("TaskConst"), l = e("MarqueeConst"), c = null, h = null, u = null, d = null, p = null, f = null, m = null, g = null, _ = null, T = n.CRAZY_MULTIPLE, C = n.FROZEN_COUNTDOWN, y = n.SHENDENG_COUNTDOWN, I = n.SEVEN_DAY_OPEN_LEVEL, v = (n.FishPlayState, 
n.CurrenyKeys), E = n.DynjPartTimes;
cc.Class({
extends: ViewBase,
properties: {
playerLayouts: [ cc.Node ],
nodeRight: cc.Node,
btnBoxAward: cc.Node,
nodeWarhead: cc.Node,
btnWarheads: [ cc.Node ],
btnGoldFish: cc.Node,
btnGunUnlock: cc.Node,
unlockName: cc.Node,
btnWarhead: cc.Node,
nodeLeft: cc.Node,
leftTips: cc.Node,
leftTipBtns: [ cc.Node ],
leftBtns: [ cc.Node ],
nodeBotUI: cc.Node,
nodeItems: cc.Node,
dropLayer: cc.Node,
playerInfo: cc.Prefab,
gunUpLevel: cc.Prefab,
botOperate: cc.Prefab,
goldFishTips: cc.Prefab,
operateLayer: cc.Prefab,
btnFishItem: cc.Prefab,
upGunTips: cc.Prefab,
awardZhuanPan: cc.Prefab,
awardBmfs: cc.Prefab,
nodeTask: cc.Prefab,
nodePoker: cc.Prefab,
nodeSeaman: cc.Prefab,
nodeTimer: cc.Prefab,
dropAwardItem: cc.Prefab,
greatAnimP: cc.Prefab,
dropAward: cc.Prefab,
dynjDieEffect: cc.Prefab
},
onAdapt: function() {
var e = 0;
AdaptUtils.isLiuHai() && (e = 50);
this.nodeLeft.getComponent(cc.Widget).left = e;
this.nodeLeft.getComponent(cc.Widget).updateAlignment();
},
onCreate: function(e) {
ViewBase.prototype.onCreate.call(this);
this.data = e || {};
this.initConfig();
this.initData();
this.initEvent();
this.initView();
},
initConfig: function() {
ConfigMgr.getConfig("gun_level");
c = ConfigMgr.getConfig("gun_skin");
h = ConfigMgr.getConfig("fish_room_config");
ConfigMgr.getConfig("gun_config");
ConfigMgr.getConfig("chat");
u = ConfigMgr.getConfig("fish");
d = ConfigMgr.getConfig("fish_level_config");
p = ConfigMgr.getConfig("gun_unlock_level_config");
ConfigMgr.getConfig("item_config");
f = ConfigMgr.getConfig("fish_vip_config");
m = ConfigMgr.getConfig("fish_room_ui_config");
g = ConfigMgr.getConfig("shop_config");
_ = ConfigMgr.getConfig("gold_fish_limit_config");
},
initData: function() {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this._roleCtrl = app.ctrls.role;
this._roleModel = this._roleCtrl.getModel();
this._roleId = this._roleModel.getRoleId();
this._bagCtrl = app.ctrls.bag;
this._bagModel = this._bagCtrl.getModel();
this._shopCtrl = app.ctrls.shop;
this._shopModel = this._shopCtrl.getModel();
this._currencyModel = app.ctrls.currency.getModel();
this._taskCtrl = app.ctrls.task;
this._taskModel = this._taskCtrl.getModel();
this._gun_unlock_level_conf = this.model.getGunUnlockLevelConf();
this._catch_info = this.model.getCatchInfo();
this._vipCtrl = app.ctrls.vip;
this._vipModel = this._vipCtrl.getModel();
this._vipCtrl.getVipInfo();
this._shopCtrl.getShopInfo();
this.ctrl.getSevenDayInfo();
this.marqueeModel = app.ctrls.marquee.getModel();
this._nuInterval = RandomUtils.randInt(180, 300);
this._tmNu = 0;
this._turnForgeLevel = this.model.getTurnForgeLevel();
this._areaBtns = {
Left: {},
LeftTips: {},
Bottom: {},
Right: {}
};
this._spOpenAssits = {};
this._redPoints = {};
this._btnTimeList = {};
this._roomUIList = {};
this._zhuanPanData = {};
},
initView: function() {
this._roomUIList.nodeLeft = this.nodeLeft;
this._roomUIList.nodeRight = this.nodeRight;
this.initPlayerUI();
this.initRoom();
this.initLeftNode();
this.initOperating();
this.initGoldFishTips();
this.initGunUprade();
this.handleCatchInfoUpdate({
data: this._catch_info
});
this.initBtnWarhead();
this.initBtnFrozen();
this.initBtnShenDeng();
this.initBtnHaoJiao();
this.initTaskInfo();
this.initPokerColors();
this.initSeamanReward();
this.initStrikesCountDown();
this.initBottomIcon();
this.checkPlayersCrazyState();
this.isInitTopNode = !0;
this.updateRoomUINode();
this.updateTopNode();
},
initEvent: function() {
this.eventOn(AppEvent.GameEventEnterBackground, this.handlerGameEventEnterBackground, this);
this.eventOn(AppEvent.GameEventEnterForeground, this.handlerGameEventEnterForeground, this);
this.eventOn(this.model.EVENT_PLAYER_ENTER, this.handlePlayerEnter, this);
this.eventOn(this.model.EVENT_PLAYER_LEAVE, this.handlePlayerLeave, this);
this.eventOn(this.model.EVENT_UPDATE_GUN, this.handleUpdateGun, this);
this.eventOn(this.model.EVENT_FIRE, this.handleFire, this);
this.eventOn(this.model.EVENT_STOP_FIRE, this.handleStopFire, this);
this.eventOn(this.model.EVENT_FISH_STRIKES, this.handleFishStrikes, this);
this.eventOn(this.model.EVENT_TOUCH_FISH_VIEW, this.handleTouchFishView, this);
this.eventOn(this.model.EVENT_PLAY_AWARD, this.handlePlayAward, this);
this.eventOn(this.model.EVENT_PLAYER_INFO_UPDATE, this.handlePlayerInfoUpdate, this);
this.eventOn(this.model.EVENT_CATCH_INFO_UPDATE, this.handleCatchInfoUpdate, this);
this.eventOn(this.model.EVENT_GOLDFISH_INFO_UPDATE, this.handleGoldFishInfoUpdate, this);
this.eventOn(this.model.EVENT_CRAZY_STATE_UPDATE, this.handleCrazyStateUpdate, this);
this.eventOn(this.model.EVENT_ENTER_FROZEN, this.handleEnterFrozen, this);
this.eventOn(this.model.EVENT_SUMMON_FISH_SUCC, this.handelSummonFishSucc, this);
this.eventOn(this.model.EVENT_SUMMON_BOSS_SUCC, this.handelSummonBossSucc, this);
this.eventOn(this.model.EVENT_FISH_SEVEN_DAY_TIME, this.updateFishSevenDayTask, this);
this.eventOn(this.model.EVENT_START_AIM, this.handleStartAim, this);
this.eventOn(this.model.EVENT_STOP_AIM, this.handleStopAim, this);
this.eventOn(this.model.EVENT_PLAYER_CURRENY_UPDATE, this.handlerPlayerCurrenyUpdate, this);
this.eventOn(this.model.EVENT_SYNC_USE_HAOJIAO, this.handlePlayerHaoJiao, this);
this.eventOn(this._currencyModel.EVENT_UPDATE_DIAMOND, this.handleUpdateRoleDiamond, this);
this.eventOn(this._taskModel.EVENT_UPDATE_TASK_INFO, this.updateFishSevenDayTask, this);
this.eventOn(this._taskModel.EVENT_UPDATE_TASK_INFO, this.updateTaskClassInfo, this);
this.eventOn(this._bagModel.EVENT_UPDATE_GUN_FORGE, this.updateGunUnlockInfo, this);
this.eventOn(this._bagModel.EVENT_UPDATE_BAG_GUN, this.updateGunListInfo, this);
this.eventOn(this._bagModel.EVENT_UPDATE_BAG_INFO, this.updateBagItemInfo, this);
this.eventOn(this._shopModel.EVENT_SHOP_INFO_UPDATE, this.handleShopInfoUpdate, this);
RedRemindManager.doAllRemind();
},
setCatchFishView: function(e) {
this.catchFishView = e;
},
update: function(e) {
this.handleUpdate();
},
onDestroy: function() {
ViewBase.prototype.onDestroy.call(this);
},
initPlayerUI: function() {
var e = this;
this.points = {};
this.playerTb = {};
for (var t = function(t) {
var i = e.playerLayouts[t - 1], s = cc.instantiate(e.playerInfo);
s.parent = i;
i.playerInfo = s;
i.playerScript = s.getComponent("playerInfoObject");
s.active = !0;
var n = cc.v2(0, 0);
1 == t ? n = cc.v2(s.width / 2, i.height - 75) : 2 == t ? n = cc.v2(i.width - s.width / 2, i.height - 75) : 3 == t ? n = cc.v2(i.width - s.width / 2, 0) : 4 == t && (n = cc.v2(s.width / 2, 0));
s.position = n;
var o = e.seekChild(i, "nodeGun");
i.nodeGun = o;
i.sprFort = e.seekChild(o, "sprFort");
i.nodeRotate = e.seekChild(o, "nodeRotate");
i.gunEffect = e.seekChild(o, "gunEffect");
i.gun = e.seekChild(i.nodeRotate, "gun");
i.txtMultiple = e.seekChild(o, "txtMultiple");
i.nodeRotate.index = t;
e.onClick(i.nodeRotate, function() {
e.handleTouchGun(t);
});
if (t > 2) {
i.add = e.seekChild(i, "btnAdd");
i.reduce = e.seekChild(i, "btnReduce");
e.onClick(i.add, e.handleTouchAdd.bind(e));
e.onClick(i.reduce, e.handleTouchReduce.bind(e));
}
i.nodeWait = e.seekChild(i, "nodeWait");
var a = e.seekChild(i, "nodeAward");
i.nodeAward = a;
var r = cc.instantiate(e.awardBmfs);
r.parent = a;
i.awardLabs = r;
i.awardLabs.bmfJade = e.seekChild(r, "bmfJade");
i.awardLabs.bmfGold = e.seekChild(r, "bmfGold");
i.awardLabs.active = !1;
i.zhuanPanview = cc.instantiate(e.awardZhuanPan);
i.zhuanPanview.parent = i.nodeAward;
i.zhuanPanview.script = i.zhuanPanview.getComponent("awardZhuanPan");
i.zhuanPanview.x = 0;
i.zhuanPanview.y = 0;
i.zhuanPanview.active = !1;
i.index = t;
e.playerTb[t] = i;
var l = i.nodeGun.getContentSize(), c = i.nodeGun.convertToWorldSpaceAR(cc.v2(l.width / 2 - 100, l.height - 70));
e.points[t] = e.node.convertToNodeSpaceAR(c);
e.playerLeave(t);
}, i = 1; i <= 4; i++) t(i);
},
getPlayerNode: function(e) {
return this.playerTb[e];
},
getPlayerWPos: function(e, t) {
var i = this.playerTb[e], s = i.convertToWorldSpaceAR(cc.v2(0, 0));
1 == t ? s = i.nodeAward.convertToWorldSpaceAR(cc.v2(0, 0)) : 2 == t ? s = i.playerInfo.convertToWorldSpaceAR(cc.v2(0, 0)) : 3 == t && (s = i.nodeGun.convertToWorldSpaceAR(cc.v2(0, 0)));
return s;
},
getPlayerNodePos: function(e, t) {
var i = this.getPlayerWPos(e, t), s = this.node.convertToWorldSpaceAR(i);
return cc.v2(s.x + this.node.width / 2, this.node.height / 2 - s.y);
},
getFireAngle: function(e, t, i) {
var s = this.model.getMyViewPos(), n = this.getPlayerWPos(s, 3), o = e - n.x, a = t - (display.height - n.y), r = Math.atan2(-a, o);
this.model.isRotate() && (r += Math.PI);
return r;
},
getFireStartPosition: function(e, t, i) {
var s = this.model.getPosByRoleId(e), n = this.model.GUN_POS[s];
return {
x: n[0] + Math.cos(t),
y: n[1] - Math.sin(t)
};
},
getDropLayer: function() {
return this.dropLayer;
},
initGoldFishTips: function() {
this.btnGoldFish = this.getUIChild("btnGoldFish");
this.onClick(this.btnGoldFish, this.onClickGoldFishMove.bind(this));
this._roomUIList.btnGoldFish = this.btnGoldFish;
this.canGoldFishHide = !1;
this._pnlGoldFish = cc.instantiate(this.goldFishTips);
this._pnlGoldFish.parent = this.nodeRight;
this._pnlGoldFish.zIndex = -1;
this._pnlGoldFish.x = 20;
this._pnlGoldFish.y = 170;
this._pnlGoldFish.script = this._pnlGoldFish.getComponent("goldFish");
this.handleGoldFishInfoUpdate();
},
onClickGoldFishMove: function(e) {
var t = this;
this._pnlGoldFish.stopAllActions();
var i = this.canGoldFishHide ? 20 : -285;
this._pnlGoldFish.runAction(cc.sequence(cc.moveTo(.3, cc.v2(i, 170)), cc.callFunc(function() {
t.canGoldFishHide = !t.canGoldFishHide;
})));
},
handleGoldFishInfoUpdate: function() {
var e = this;
if (!this.model.isShowJade(this.roomInfo.roomType)) {
var t = this.model.getGoldFishInfo();
if (!TypeUtils.isRealNull(t)) {
this._pnlGoldFish.script.updateInfo(t);
if (this.roomInfo.roomType != n.RoomType.TiYanFangJian) {
var i = -1;
_.forEach(function(e) {
t.num >= e.fishLimit && t.pool >= e.lowerLimit && (i = e.index);
});
if (i > 0 && (!this._LotteryType || this._LotteryType != i)) {
this._LotteryType = i;
if (!this.canGoldFishHide) {
this._pnlGoldFish.stopAllActions();
this._pnlGoldFish.runAction(cc.sequence(cc.moveTo(.3, cc.v2(-285, 170)), cc.callFunc(function() {
e.canGoldFishHide = !0;
}), cc.delayTime(5), cc.moveTo(.3, cc.v2(20, 170)), cc.callFunc(function() {
e.canGoldFishHide = !1;
})));
}
}
}
}
}
},
initTaskInfo: function() {
this.pnlTaskInfo = cc.instantiate(this.nodeTask);
this.pnlTaskInfo.parent = this.node;
this.pnlTaskInfo.x = 0;
this.pnlTaskInfo.y = this.node.height / 2;
this.pnlTaskInfo.active = !1;
},
initPokerColors: function() {
this.nodePokerColors = cc.instantiate(this.nodePoker);
this.nodePokerColors.parent = this.node;
this.nodePokerColors.x = 0;
this.nodePokerColors.y = this.node.height / 2;
this.onClick(this.nodePokerColors, function() {
ViewManager.showView("POKER_COLORS_VIEW");
});
this._roomUIList.nodePokerColors = this.nodePokerColors;
},
initSeamanReward: function() {
this.seamanRewardUI = cc.instantiate(this.nodeSeaman);
this.seamanRewardUI.parent = this.node;
this.seamanRewardUI.x = 0;
this.seamanRewardUI.y = this.node.height / 2;
},
initStrikesCountDown: function() {
this.nodeCountDown = cc.instantiate(this.nodeTimer);
this.nodeCountDown.parent = this.node;
this.nodeCountDown.x = 0;
this.nodeCountDown.y = this.node.height / 2;
this.nodeCountDown.script = this.nodeCountDown.getComponent("fishCountDown");
var e = this.model.getRoomInfo();
this.handleStrikesCountDown(e.strikesInfo);
},
checkTaskVisible: function() {
var e, t = this.model.getRoomType(), i = h.findByIndex(t).taskClassId, s = !1;
if (!TypeUtils.isRealNull(i)) for (var n = this._taskModel.getFishTaskInfo(i), o = 0; o < n.length; o++) {
var a = n[o];
if (a.status < r.FinishStatus.HasReceive) {
e = a;
s = !0;
break;
}
}
return {
state: s,
info: e
};
},
updateTopNode: function() {
if (this.isInitTopNode) {
this.nodePokerColors.active = !1;
this.pnlTaskInfo.active = !1;
this.seamanRewardUI.active = !1;
if (!this.nodeCountDown.active) {
if (this.checkTaskVisible().state) {
this.pnlTaskInfo.active = !0;
this.nodePokerColors.active = !1;
this.seamanRewardUI.active = !1;
} else {
this.pnlTaskInfo.active = !1;
this.model.isRoomShenHaiJuShou(this.roomInfo.roomType) ? this.nodePokerColors.active = !0 : this.model.isRoomYouLingChuangZhang(this.roomInfo.roomType) && (this.seamanRewardUI.active = !0);
}
}
}
},
getOpenBtnCfgs: function(e) {
for (var t = [], i = 0; i < e.length; i++) {
var s = e[i], n = this["isOpen" + s.name];
(s.isOpen || !TypeUtils.isRealNull(n) && this["isOpen" + s.name]()) && t.push(s);
}
return t;
},
updateBtnByCfg: function(e, t, i) {
var s = this;
t.btnCfg = i;
if (TypeUtils.isRealNull(i)) t.active = !1; else {
delete this._btnTimeList[i.name];
t.active = !0;
SpriteUtils.setTexture({
path: i.img
}, t, this);
if (TypeUtils.isAllNull(i.title)) t.sprTitle.active = !1; else {
t.sprTitle.active = !0;
SpriteUtils.setTexture({
path: i.title
}, t.sprTitle, this);
}
this.onClick(t, function() {
TypeUtils.isRealNull(i) || (TypeUtils.isRealNull(i.view) ? s["onClick" + i.name] && s["onClick" + i.name]() : ViewManager.showView(i.view, null, {
isInRoom: !0,
endpos: cc.v2(t.x, t.y)
}));
});
if (i.reminds.length > 0 && TypeUtils.isRealNull(this._redPoints[i.name])) {
TypeUtils.isRealNull(t.redPoint) && (t.redPoint = t.getComponent("redPoint"));
if (!TypeUtils.isRealNull(t.redPoint)) {
for (var n = {}, o = 0; o < i.reminds.length; o++) (i.reminds[o] != AppEvent.RedPointFishSevenDayTask || this.isOpenSevenDay()) && (n[i.reminds[o]] = !0);
t.redPoint.setRemind(n);
}
}
if (!TypeUtils.isRealNull(i.endAt)) {
if (i.endAt() > TimeUtils.getServerTime()) {
t.txtBtn.active = !0;
this._btnTimeList[i.name] = {
node: t.txtBtn,
cfg: i
};
}
}
}
},
getAreaBtnByName: function(e, t) {
var i, s = this._areaBtns[e];
for (var n in s) if (s.hasOwnProperty(n)) {
var o = s[n], a = o.btnCfg;
if (!TypeUtils.isRealNull(o) && a.name == t) {
i = o;
break;
}
}
return i;
},
initLeftNode: function() {
this.refreshLeftAreaNode();
this.refreshLeftTipsNode();
},
refreshLeftAreaNode: function() {
for (var e = this.getOpenBtnCfgs(n.CatchFishUIAreas.Left), t = 0; t < 5; t++) {
var i = this._areaBtns.Left[t];
if (TypeUtils.isRealNull(i)) {
(i = this.leftBtns[t]).sprTitle = this.seekC(i, "sprTitle");
this._areaBtns.Left[t] = i;
}
this.updateBtnByCfg("Left", i, e[t]);
}
},
refreshLeftTipsNode: function() {
for (var e = this.getOpenBtnCfgs(n.CatchFishUIAreas.LeftTips), t = 0, i = 0; i < this.leftTipBtns.length; i++) {
var s = this._areaBtns.LeftTips[i];
if (TypeUtils.isRealNull(s)) {
(s = this.leftTipBtns[i]).sprTitle = this.seekC(s, "sprTitle");
this._areaBtns.LeftTips[i] = s;
}
this.updateBtnByCfg("LeftTips", s, e[i]);
s.active && (t += 1);
}
this.leftTips.setContentSize(80 * t, 80);
},
isOpenWelfare: function() {
var e = m.findByIndex(this.roomInfo.roomType) || {};
return !TypeUtils.isRealNull(e) && 1 == e.btnWelfare;
},
isOpenJadeExchange: function() {
var e = m.findByIndex(this.roomInfo.roomType) || {};
return !TypeUtils.isRealNull(e) && 1 == e.btnJadeExchange;
},
isOpenQuickGift: function() {
var e = Math.floor(ConfigMgr.getCommon("PlayerFishBroke_GoldLimit") || 0), t = this._bagModel.getGunForgeLevel();
return t >= e && t < 1e4;
},
isOpenSevenDay: function() {
return !!this.model.isSevenDayOpen();
},
isOpenChangeSeat: function() {
var e = h.findByIndex(this.roomInfo.roomType) || {};
return !TypeUtils.isRealNull(e.seatArea);
},
isOpenCarnival: function() {
return !1;
},
onClickLeftHide: function(e) {
var t = this;
this.leftTips.active = !0;
this.leftTips.stopAllActions();
var i = this.canHide ? -455 : 100, s = [];
s.push(cc.moveTo(.2, cc.v2(i, this.leftTips.y)));
s.push(cc.callFunc(function() {
t.canHide = !t.canHide;
t.getAreaBtnByName("Left", "LeftHide").getComponent(cc.Sprite).spriteFrame.setFlipX(!t.canHide);
}));
this.leftTips.runAction(cc.sequence(s));
},
onClickShop: function(e) {
this.model.handleOpenGoldShop(!0);
},
onClickLeave: function() {
var e = this;
if ("YES" == (UserUtils.getRoleVal("ROOM_FIRST_ENTER") || "NO")) {
for (var t = n.FirstExitRoomPop, i = 0; i < t.length; i++) {
var s = t[i];
if (s.open()) {
PopViewManager.addPopQueue(s.view, {
viewType: ManagerEnum.QueueType.RoomExit,
viewArg: {}
});
}
}
UserUtils.setRoleVal("ROOM_FIRST_ENTER", "NO");
}
var o = {
desc: _LANG("FISH_ROOM_EXIT_TIPS"),
needCheckBox: !1,
cbTag: "fish_room_exit",
sureCallBack: function() {
if (e.model.isMatchRoom(e.roomInfo.roomType)) {
if (e.model.getPlayerInfo(e._roleId).bullet <= 0) return;
}
e.model.leaveRoom();
}
};
PopViewManager.addPopQueue("COMFIRM_BOX_VIEW", {
viewType: ManagerEnum.QueueType.RoomExit,
viewArg: o
});
},
onClickChangeSeat: function() {
this.model.changeRoom();
},
updateAutoMoveBack: function(e) {
var t = "roomMoveBtnHandle" + this.model.getRoomType();
if ("TRUE" == UserUtils.getDataStr(t, "TRUE") || e) {
this.onClickLeftHide();
this.createAutoMoveBackHandle();
UserUtils.setDataStr(t, "FALSE");
}
},
createAutoMoveBackHandle: function() {
var e = this;
this.delayTimer(function() {
e.autoMoveBack();
}, 3);
},
autoMoveBack: function() {
this.canHide && this.onClickLeftHide();
},
initRoom: function() {
this._roleModel.getRoleInfo();
var e = this.model.getRoomInfo();
for (var t in e.players) if (e.players.hasOwnProperty(t)) {
var i = e.players[t], s = this.model.getViewPosOfPlayer(i.pos), n = !1;
if (i.roleId == this._roleId) {
n = !0;
this.rolePos = s;
this.gunIndex = 1;
this.minGunIndex = 1;
this.maxGunIndex = 1;
this.gunLevels = this.model.getCanUseGunLevels(e.roomType);
for (var o = this.getGunInfo(i.gunType)[0], a = 99999999, r = 0, l = 0; l < this.gunLevels.length; l++) {
var c = this.gunLevels[l];
if (c < a && c >= o.minGunLevel) {
this.minGunIndex = l;
a = c;
}
if (c > r && c <= o.maxGunLevel) {
this.maxGunIndex = l;
r = c;
}
}
}
var h = this.getGunInfo(i.gunType, i.gunLevel);
this.playerJoin(s, i, !0, e.roomType);
this.updateGun(s, h[0], !1, i.roleId, i.level);
this.updateGold(s, i.gold, n);
this.updateName(s, i.nickname);
this.updateTicket(s, i.ticket, n);
this.updateDiamond(s, n);
this.updateJade(s, i.jade);
this.updateHeadImage(s, i.avatar);
this.updateLevel(s, i.level);
this.updateVipLevel(s, i.vipLevel);
this.updateEnjoyGold(s, i.enjoyGold, n);
}
this.roomInfo = e;
},
initGunUprade: function() {
var e = this;
this._gunLevelUpUI = cc.instantiate(this.gunUpLevel);
this._gunLevelUpUI.parent = this.nodeRight;
this._gunLevelUpUI.zIndex = -1;
this._gunLevelUpUI.x = 20;
this._gunLevelUpUI.y = 80;
this._gunLevelUpUI.script = this._gunLevelUpUI.getComponent("gunUpgrade");
this._gunLevelUpUI.script.setClickCB(function() {
e.handleGunOpen(!1);
});
this.onClick(this.btnGunUnlock, function() {
e.handleGunOpen(!0);
});
this.btnGunUnlock.isForge = !1;
this._isGunLevelUpUIOut = !0;
this.btnBoxAward.active = !1;
this.updateGunUnlockInfo();
},
updateGunUnlockInfo: function(e) {
var t = this._bagModel.getGunForgeLevel(), i = this.model.getGunUnlockInfo(t);
this.showGunForgeResultTips(e);
this.refreshLeftAreaNode();
this._nextUnlockInfo = i;
this._curUnlockLevel = t;
if (t >= this._turnForgeLevel) {
if (!this.btnGunUnlock.isForge) {
SpriteUtils.setTexture({
path: "module/fish/texture/catchFishUi/icons/forge_txt"
}, this.unlockName, this);
SpriteUtils.setTexture({
path: "module/fish/texture/catchFishUi/icons/icon_forge"
}, this.btnGunUnlock, this);
this.btnGunUnlock.isForge = !0;
}
} else {
this._gunLevelUpUI.script.updateInfo(i);
this.checkGunUpgrade(i, .3);
}
},
checkGunUpgrade: function(e, t) {
this.model.isGunCanUpgrade(e) ? this._isGunLevelUpUIOut && this._curUnlockLevel < this._turnForgeLevel && this.moveLevelUI(t) : this._isGunLevelUpUIOut || this.moveLevelUI(t);
},
showGunForgeResultTips: function(e) {
if (!TypeUtils.isRealNull(e) && !TypeUtils.isRealNull(e.data)) {
var t = e.data, i = t.forgeLevel;
if (i < this._turnForgeLevel) {
t.isSucc && this.playGunForgeSuccEffect(i);
if (this._curUnlockLevel < I && i >= I) {
this._showOpenSevenDay = !0;
this.ctrl.getSevenDayInfo();
} else this._curUnlockLevel < n.QUICK_GIFT_OPEN_LEVEL && i >= n.QUICK_GIFT_OPEN_LEVEL ? this._shopCtrl.getShopInfo() : this._curUnlockLevel < n.POKER_COLOR_OPEN_LEVEL && i >= n.POKER_COLOR_OPEN_LEVEL && ViewManager.showView("PLAY_GUIDE_VIEW", null, n.POKER_COLOR_OPEN_LEVEL);
} else {
this._isGunLevelUpUIOut || this.moveLevelUI();
this._curUnlockLevel < n.SSSC_OPEN_LEVEL && i >= n.SSSC_OPEN_LEVEL && ViewManager.showView("PLAY_GUIDE_VIEW", null, n.SSSC_OPEN_LEVEL);
}
}
},
playGunForgeSuccEffect: function(e) {
var t = this.playerTb[this.rolePos];
if (!TypeUtils.isRealNull(t)) {
var i = p.findByIndex(e), s = cc.instantiate(this.upGunTips);
s.parent = t.nodeAward;
s.x = 0;
s.y = 100;
var n = this.seekC(s, "txtDesc"), o = "";
if (TypeUtils.isRealNull(i.award)) o = StringUtils.format(_LANG("GUN_LEVEL_UNLOCK_SUCC"), e); else for (var a = "", r = 0; r < i.award.length; r++) {
var l = i.award[r];
a = a + l.amount + ItemUtils.getItemName(l.itemId);
o = StringUtils.format(_LANG("GUN_LEVEL_UNLOCK_SUCC_AWARD"), e, a);
}
n.getComponent(cc.Label).string = o;
ActionUtils.callOnce(s, function() {
s.destroy();
}, 1.2);
}
},
handleGunOpen: function(e) {
if (this._bagModel.getGunForgeLevel() >= this._turnForgeLevel) {
if (SystemUtils.checkIsClose(10010)) {
this.btnGunUnlock.active = !1;
return;
}
ViewManager.showView("GUN_FORGE_VIEW", null, {
isInRoom: !0
});
} else if (e) this.moveLevelUI(); else {
this.model.isGunCanUpgrade(this._nextUnlockInfo) ? this._isGunLevelUpUIOut ? this.moveLevelUI() : this._bagCtrl.requestGunForge(!1) : this.moveLevelUI();
}
},
moveLevelUI: function(e, t) {
var i = this;
this._gunLevelUpUI.stopAllActions();
var s = this._isGunLevelUpUIOut ? -285 : 20, n = [];
TypeUtils.isRealNull(e) || n.push(cc.delayTime(e));
n.push(cc.moveTo(.3, cc.v2(s, this._gunLevelUpUI.y)));
n.push(cc.callFunc(function() {
i._isGunLevelUpUIOut = !i._isGunLevelUpUIOut;
}));
t && ActionUtils.callOnce(this._gunLevelUpUI, function() {
tolua.isnull(i) || i._isGunLevelUpUIOut || i.moveLevelUI();
}, 2);
this._gunLevelUpUI.runAction(cc.sequence(n));
},
updateGunListInfo: function(e) {
if (!TypeUtils.isRealNull(e) && !TypeUtils.isRealNull(e.data)) {
if (this.model.isAimGoldFish()) return;
var t = e.data.new;
if (!TypeUtils.isRealNull(t)) {
var i = this.model.getPlayerInfo(this._roleId);
this.ctrl.updateGun({
roleId: this._roleId,
gunLevel: i.gunLevel,
gunType: t
});
}
}
},
initOperating: function() {
this.operatingLayer = cc.instantiate(this.operateLayer);
this.operatingLayer.active = !1;
this.operatingLayer.parent = this.node;
this.btnChangeGun = this.seekChild(this.operatingLayer, "btnChangeGun");
this.onClick(this.btnChangeGun, this.handleTouchChangeGun.bind(this));
this.btnAutoFire = this.seekChild(this.operatingLayer, "btnAutoFire");
this.onClick(this.btnAutoFire, this.handleTouchAutoFire.bind(this));
this.spAutoFireEffect = this.seekChild(this.operatingLayer, "spAutoFireEffect");
this.spAutoFireEffect.active = !1;
this.spAutoFireEffect.scale = .7;
var e = "roleOperatingHandle" + this._roleId;
if ("true" == UserUtils.getDataStr(e, "true")) {
this.showOperating(this.points[this.rolePos].x, this.points[this.rolePos].y);
UserUtils.setDataStr(e, "false");
}
},
handleTouchGun: function(e) {
if (this.rolePos == e) {
var t = this.points[e];
this.isShowOperating() ? this.hideOperating() : this.showOperating(t.x, t.y);
}
},
isShowOperating: function() {
return this.operatingLayer.active;
},
showOperating: function(e, t) {
this.operatingLayer.active = !0;
this.operatingLayer.x = e;
this.operatingLayer.y = t;
this.btnAutoFire.setPosition(-60, 10);
this.btnChangeGun.setPosition(60, 10);
if (this.model.isAutoFire()) {
this.spAutoFireEffect.active = !0;
this.spAutoFireEffect.runAction(cc.repeatForever(cc.rotateBy(1, 360)));
} else {
this.spAutoFireEffect.active = !1;
this.spAutoFireEffect.stopAllActions();
}
},
handleTouchChangeGun: function(e) {
ViewManager.showView("GUN_SWITCH_VIEW");
this.hideOperating();
},
handleTouchChat: function(e) {
TipsUtils.showTips("敬请期待");
},
handleTouchAutoFire: function(e) {
if (this._shopModel.getFishMonthCardDaysRemain() > 0) {
var t = !this.model.isAutoFire();
this.setAutoFireState(t);
} else {
if (SystemUtils.checkIsClose(20017)) return;
ViewManager.showView("CARD_GIFT_VIEW");
}
this.hideOperating();
},
setAutoFireState: function(e) {
this.model.setAutoFire(e);
if (this.model.isAutoFire()) {
this.spAutoFireEffect.active = !0;
this.spAutoFireEffect.runAction(cc.repeatForever(cc.rotateBy(1, 360)));
} else {
this.spAutoFireEffect.active = !1;
this.spAutoFireEffect.stopAllActions();
}
},
handleTouchAdd: function(e) {
this.requestUpdateGun(this.gunIndex + 1);
},
handleTouchReduce: function(e) {
this.requestUpdateGun(this.gunIndex - 1);
},
requestUpdateGun: function(e) {
if (!this.model.isSwitching() && !this.model.isAimGoldFish()) {
var t = this.model.isRoomTiYan(this.roomInfo.roomType), i = this._bagModel.getGunForgeLevel(), s = this.gunLevels[this.minGunIndex], n = this.maxGunIndex;
if (!t) {
if (i <= s) {
TipsUtils.showTips(_LANG("GUN_UNLOCK_TIPS"));
return;
}
for (var o = 0; o < this.gunLevels.length; o++) {
if (this.gunLevels[o] == i) {
n = o;
break;
}
}
}
var a = null;
e > (a = TypeUtils.isRealNull(n) ? this.maxGunIndex : this.maxGunIndex < n ? this.maxGunIndex : n) && (e = this.minGunIndex);
e < this.minGunIndex && (e = a);
var r = this.gunLevels[e] || 1, l = this.model.getPlayerInfo(this._roleId);
this.ctrl.updateGun({
roleId: this._roleId,
gunLevel: r,
gunType: l.gunType
});
}
},
stopAutoFire: function() {
this.model.isAutoFire() && this.setAutoFireState(!1);
},
stopAim: function() {
this.model.isToAim();
},
playerLeave: function(e) {
var t = this.playerTb[e];
if (!TypeUtils.isRealNull(t)) {
if (!TypeUtils.isRealNull(t.sprDouble)) {
t.sprDouble.destroy();
t.sprDouble = null;
}
TypeUtils.isRealNull(t._spineGunBase) || (t._spineGunBase.active = !1);
t.nodeGun.active = !1;
t.nodeWait.active = !0;
var i = cc.fadeOut(1.5), s = cc.fadeIn(1.5), n = cc.sequence(i, s);
t.nodeWait.runAction(cc.repeatForever(n));
t.playerInfo.active = !1;
}
},
getGunInfo: function(e, t) {
return this.model.getGunLevelInfo(e, t);
},
handlePlayerEnter: function(e) {
var t = e.data, i = this.model.getViewPosOfPlayer(t.pos), s = this.getGunInfo(t.gunType, t.gunLevel);
this.playerJoin(i, t, !1, this.roomInfo.roomType);
this.updateGun(i, s[0], null, t.roleId, t.level);
this.updateGold(i, t.gold);
this.updateName(i, t.nickname);
this.updateHeadImage(i, t.avatar);
this.updateTicket(i, t.ticket, this.model.isMe(t.roleId));
this.updateDiamond(i, this.model.isMe(t.roleId));
this.updateJade(i, t.jade);
this.updateLevel(i, t.level);
this.updateVipLevel(i, t.vipLevel);
this.updateEnjoyGold(i, t.enjoyGold);
},
handlePlayerLeave: function(e) {
var t = e.data || {};
this.playerLeave(t.pos);
},
handleUpdateGun: function(e) {
var t = e.data, i = this.model.getPlayerInfo(t.roleId), s = this.model.getViewPosOfPlayer(i.pos);
i.gunType = t.gunType;
i.gunLevel = t.gunLevel;
var n = this.getGunInfo(t.gunType, t.gunLevel);
this.updateGun(s, n[0], !0, t.roleId, i.level);
if (this._roleId == t.roleId) {
for (var o = 99999999, a = 0, r = 0; r < this.gunLevels.length; r++) {
var l = this.gunLevels[r];
if (l < o && l >= n[1]) {
this.minGunIndex = r;
o = l;
}
if (l > a && l <= n[2]) {
this.maxGunIndex = r;
a = l;
}
l == t.gunLevel && (this.gunIndex = r);
}
this._roleModel.setGun(t.gunType);
this._roleModel.setGunLevel(t.gunLevel);
}
},
handleFire: function(e) {
var t = e.data, i = t.roleId, s = this.model.getPlayerInfo(i);
if (!TypeUtils.isRealNull(s)) {
for (var a = this.model.getViewPosOfPlayer(s.pos), r = (this.playerTb[a], 0); r < t.fireList.length; r++) {
var l = t.fireList[r], c = DicUtils.deg(l.fireAngle);
c > 180 && (c -= 180);
c = a > 2 ? c - 90 : 90 - c;
this.playFireEffect(a, c, i, Number(l.gunPosType));
}
this.updateGold(a, s.gold, this.model.isMe(i));
if (this.model.isMe(i)) for (var h in o.WarheadType) if (o.WarheadType.hasOwnProperty(h)) {
var u = o.WarheadType[h], d = n.WarheadGunType[u];
if (s.gunType == d) {
ItemUtils.getItemNum(u) <= 1 && this.revertLastGunType();
break;
}
}
}
},
handleStopFire: function() {
this.stopAutoFire();
this.stopAim();
},
handleFishStrikes: function(e) {
if (1 == e.data.type) {
FishUtils.playSpine({
path: "module/fish/spine/yclx/by_yclx",
isLoop: !1,
ani: "1",
x: 0,
y: 0
}, this.node, 2);
} else this.handleStrikesCountDown(e.data);
},
handleStrikesCountDown: function(e) {
var t = this, i = Math.floor(TimeUtils.getServerTime());
if (TypeUtils.isRealNull(e) || e.type < 2 || e.endAt <= i + 1) {
this.nodeCountDown.active = !1;
this.strikesInfo = null;
this.updateTopNode();
} else {
this.strikesInfo = e;
this.seamanRewardUI.active = !1;
this.delayTimer(function() {
TypeUtils.isRealNull(t.nodeCountDown) || (t.nodeCountDown.active = !0);
t.updateTopNode();
t.checkStrikesCountDown();
}, 5, this);
}
},
checkStrikesCountDown: function() {
if (!TypeUtils.isRealNull(this.strikesInfo)) {
var e = Math.floor(TimeUtils.getServerTime()), t = Math.floor(this.strikesInfo.endAt - e);
if (t <= 0) {
this.strikesInfo = null;
this.nodeCountDown.active = !1;
this.updateTopNode();
} else this.nodeCountDown.script.checkCountDown(t);
}
},
updateStrikesInfo: function(e) {
TypeUtils.isRealNull(this.nodeCountDown) || this.nodeCountDown.script.setStrikesInfo(e);
},
handleTouchFishView: function(e) {
this.hideOperating();
this.autoMoveBack();
this.nodeCrazyUI.script.updateCrazyPauseState(!1);
this.canGoldFishHide && this.onClickGoldFishMove();
this._isGunLevelUpUIOut || this.moveLevelUI(null);
},
hideOperating: function() {
this.operatingLayer.active = !1;
},
handlePlayAward: function(e) {
var t = this, i = e.data.index, s = this.playerTb[i];
if (!TypeUtils.isRealNull(s)) {
var n = e.data.fishType, o = u.findByIndex(n);
if (this.model.isDragonFish(n) || this.model.isNanJueFish(n) || this.model.isNaJiaFish(n) || o.swsl || o.goldfish || o.undeadFish) {
this._zhuanPanData[n] = e.data;
if (this.model.isDragonFish(n)) {
this.marqueeModel.changeWaitState(l.WaitType.Dragon, !0);
this.model.isMe(s.roleId) || ActionUtils.callOnce(this.node, function() {
t.showZhuanPan(n);
}, 10);
}
} else {
s.zhuanPanview.active = !0;
s.zhuanPanview.script.updataData(e.data, s.conf, i);
}
}
},
showZhuanPan: function(e) {
if (!TypeUtils.isRealNull(this._zhuanPanData[e])) {
var t = this._zhuanPanData[e].index, i = this.playerTb[t];
if (!TypeUtils.isRealNull(i)) {
i.zhuanPanview.active = !0;
i.zhuanPanview.script.updataData(this._zhuanPanData[e], i.conf, t);
}
this._zhuanPanData[e] = null;
delete this._zhuanPanData[e];
}
this.model.isDragonFish(e) && this.marqueeModel.changeWaitState(l.WaitType.Dragon, !1);
},
handleCatchInfoUpdate: function(e) {
if (!TypeUtils.isRealNull(e.data)) {
var t = e.data, i = t.fishLevel, s = t.fishExp, n = this.model.getPlayerInfo(t.roleId), o = this.model.getViewPosOfPlayer(n.pos), a = this.playerTb[o];
if (this.model.isMe(t.roleId)) {
this._catch_info = t;
this.curFishLevel && this.curFishLevel != i && TipsUtils.showTips("恭喜升到" + i + "级~");
this.curFishLevel = i;
var r = 0, l = d.findByIndex(i);
if (!TypeUtils.isRealNull(l)) {
r = l.exp;
a.playerScript.setLevelPer({
exp: s,
needExp: r
});
}
}
this.updateLevel(o, i);
this.updateVipLevel(o, n.vipLevel);
}
},
handlerPlayerCurrenyUpdate: function(e) {
var t = e.data.roleId, i = this.model.getPlayerInfo(t);
if (!TypeUtils.isRealNull(i)) {
var s = this.model.isMe(t), n = this.model.getViewPosOfPlayer(i.pos), a = e.data.itemId, r = i[v[a]] || 0;
a == o.ResourceType.Gold ? this.updateGold(n, r, s) : a == o.ResourceType.Ticket ? this.updateTicket(n, r, s) : a == o.ResourceType.Jade ? this.updateJade(n, r) : a == o.ResourceType.EnjoyGold && this.updateEnjoyGold(n, r, s);
}
},
handleUpdateRoleDiamond: function(e) {
this.updateDiamond(this.rolePos, !0);
if (!TypeUtils.isRealNull(this._gunLevelUpUI)) {
this.checkGunUpgrade(this._nextUnlockInfo);
this._gunLevelUpUI.script.updateInfo(this._nextUnlockInfo);
}
},
handleUpdate: function() {
this.checkStrikesCountDown();
},
playFireEffect: function(e, t, i, s) {
var n = this.playerTb[e];
if (!TypeUtils.isRealNull(n)) {
n.nodeRotate.runAction(cc.rotateTo(.03, t));
if (!n.isPlaying) {
n.isPlaying = !0;
var o = this.model.getCrazyStatus(i).isCrazy ? .05 : .1, a = n.gunStay, r = n.gunShoot, l = n.playAni;
n.gun.stopAllActions();
ActionUtils.callOnce(n.gun, function() {
n.isPlaying = !1;
TypeUtils.isRealNull(n._spineFire) || (n._spineFire.active = !1);
TypeUtils.isRealNull(n._spineGun) || TypeUtils.isRealNull(a) || SpineUtils.changeAnimation(n._spineGun, a, !0, null, !0);
}, o);
TypeUtils.isRealNull(n._spineGun) || TypeUtils.isRealNull(r) || SpineUtils.changeAnimation(n._spineGun, r, !1, null, !0);
if (!TypeUtils.isRealNull(n._spineFire) && !TypeUtils.isRealNull(l)) {
n._spineFire.active = !0;
SpineUtils.changeAnimation(n._spineFire, l, !1, null, !0);
}
}
}
},
updateName: function(e, t) {
var i = this.playerTb[e];
if (!TypeUtils.isRealNull(i)) {
var s = t.substring(0, 6);
i.playerScript.setCurrency(0, s);
}
},
updateGold: function(e, t, i) {
var s = this.playerTb[e];
if (!TypeUtils.isRealNull(s)) {
var n = 0;
e == this.rolePos && (n = this.model.getNotAddGoldNum());
var a = (t || 0) - n;
s.playerScript.setCurrency(o.ResourceType.Gold, a);
}
},
updateTicket: function(e, t, i) {
if (i) {
var s = this.playerTb[e];
if (!TypeUtils.isRealNull(s)) {
var n = 0;
e == this.rolePos && (n = this.model.getNotAddTicketNum());
var a = (t || 0) - n;
a = Math.ceil(1e3 * a) / 1e3;
s.playerScript.setCurrency(o.ResourceType.Ticket, a);
}
}
},
updateDiamond: function(e, t) {
if (t) {
var i = this.playerTb[e];
if (!TypeUtils.isRealNull(i)) {
var s = this._currencyModel.getDiamond();
i.playerScript.setCurrency(o.ResourceType.Diamond, s);
}
}
},
updateJade: function(e, t) {
var i = this.playerTb[e];
if (!TypeUtils.isRealNull(i)) {
var s = 0;
e == this.rolePos && (s = this.model.getNotAddJadeNum());
var n = (t || 0) - s;
i.playerScript.setCurrency(o.ResourceType.Jade, n);
}
},
updateEnjoyGold: function(e, t, i) {
var s = this.playerTb[e];
TypeUtils.isRealNull(s);
},
handlePlayerInfoUpdate: function(e) {
var t = this.model.getPlayerInfo(e.data.roleId);
if (TypeUtils.isRealNull(t)) {
var i = this.model.getViewPosOfPlayer(t.pos), s = this.playerTb[i];
if (TypeUtils.isRealNull(s)) {
s.data = t;
this.updateName(i, t.nickname);
this.updateHeadImage(i, t.avatar);
this.updateLevel(i, t.level);
this.updateVipLevel(i, t.vipLevel);
s.playerScript.setOffline(t.isOffline);
}
}
},
updateHeadImage: function(e, t) {
var i = this.playerTb[e];
TypeUtils.isRealNull(i) || i.playerScript.loadHead({
roleId: i.data.roleId,
avatar: t || 1
});
},
updateLevel: function(e, t) {
var i = this.playerTb[e];
if (!TypeUtils.isRealNull(i)) {
var s = t || 0;
i.playerScript.setRoleLevel(s);
}
},
updateVipLevel: function(e, t) {
var i = this.playerTb[e];
if (!TypeUtils.isRealNull(i)) {
var s = s || 0, n = f.findByIndex(s);
TypeUtils.isRealNull(n) || i.playerScript.setVipInfo(n);
}
},
playerJoin: function(e, t, i, s) {
var n = this.playerTb[e];
if (!TypeUtils.isRealNull(n)) {
n.data = t;
n.nodeGun.active = !0;
n.nodeWait.stopAllActions();
n.nodeWait.active = !1;
if (e > 2) {
var o = this.rolePos == e;
n.add.active = o;
n.reduce.active = o;
}
if (this.model.isMe(t.roleId)) {
n.playerScript.isMySelf(!0, e);
this.playJoinInEffect(n);
} else n.playerScript.isMySelf(!1, e);
n.playerInfo.active = !0;
var a = this.model.isRoomWangLingJuYuan(s);
n.playerScript.isJadeChang(a);
}
},
playEffectSound: function(e) {
this.playSound(e);
},
playJoinInEffect: function(e) {
FishUtils.playSpine({
path: "module/fish/spine/wzhi/by_ptzy",
isLoop: !0,
ani: "1",
x: 0,
y: 20
}, e.nodeGun, 8);
},
updateGun: function(e, t, i, s, n) {
var o = c.findByIndex(t.skinId), a = this.playerTb[e];
if (!TypeUtils.isRealNull(a)) {
if (!a.conf || a.conf.skinId != t.skinId) {
a.conf = o;
this.updateGunSpine(a, o);
this.updateGunFireSpine(a, o);
if (this.model.isMe(s)) {
this.model.setAimGoldFish(o.aimGoldFish);
UserUtils.setDataStr("CurUseGunType" + this._roleId, t.type);
UserUtils.setDataStr("CurUseGunLevel" + this._roleId, t.level);
}
this.updateGunBaseSpine(s, a);
}
a.txtMultiple.getComponent(cc.Label).string = t.level;
i && this.playSwitchEffect(e);
}
},
updateGunSpine: function(e, t) {
if (!TypeUtils.isRealNull(e._spineGun)) {
e._spineGun.destroy();
e._spineGun = null;
e.gunStay = null;
e.gunShoot = null;
this.playEffectSound("huanpao");
}
if (!TypeUtils.isRealNull(t.gunOffset)) {
t.gunOffset[1] || 0;
t.gunOffset[2] || 0;
}
var i = t.fortScale.scene, s = t.gunSpine.stay, n = t.gunSpine.sp;
e._spineGun = FishUtils.playSpine({
ani: s,
isLoop: !0,
scale: i,
path: n
}, e.gun);
e.gunStay = s;
e.gunShoot = t.gunSpine.shoot;
},
updateGunBaseSpine: function(e, t, i, s, n) {
var o = this;
if (TypeUtils.isRealNull(t)) {
TypeUtils.isRealNull(i) && (i = this.model.getViewPosByRoleId(e));
t = this.playerTb[i];
}
if (!TypeUtils.isRealNull(t)) {
TypeUtils.isRealNull(t._spineGunBase) && (t._spineGunBase = FishUtils.playSpine({
ani: "1",
zorder: -1,
x: 0,
y: 0,
isLoop: !0,
scale: 1,
path: "module/fish/spine/ptxg/by_ptxg"
}, t.gun));
t._spineGunBase.active = !1;
var a = null;
if (TypeUtils.isRealNull(s)) if (this.model.isSkillNuOpen()) a = "pts_03"; else if (t.conf.fortRes) a = "dt"; else if (this.model.isDoubleFire(e)) a = "gj_x2"; else {
if (this.model.getCrazyStatus(e).isCrazy) a = "kb"; else {
this.model.isToAim(e) && (a = "mz");
}
} else a = s;
if (!TypeUtils.isAllNull(a)) {
SpineUtils.changeAnimation(t._spineGunBase, a, !0, null, !0);
t._spineGunBase.active = !0;
TypeUtils.isRealNull(n) || ActionUtils.callOnce(t._spineGunBase, function() {
o.updateGunBaseSpine(e, t, i);
}, n);
}
}
},
updateGunFireSpine: function(e, t) {
if (!TypeUtils.isRealNull(e)) {
var i = t.muzzleRes, s = t.muzzleResOffset, n = 0, o = 0;
if (!TypeUtils.isRealNull(s)) {
n = s[0];
o = s[1];
}
var a = this.model.getRoomType();
this.model.isShowJade(a);
if (!TypeUtils.isRealNull(e._spineFire)) {
e._spineFire.destroy();
e._spineFire = null;
e.playAni = null;
}
e._spineFire = FishUtils.playSpine({
ani: i.ani,
x: n,
y: o,
isLoop: !1,
path: i.sp
}, e.gunEffect);
e.playAni = i.ani;
}
},
playSwitchEffect: function(e) {
var t = this.playerTb[e];
if (!TypeUtils.isRealNull(t)) {
t.gun.stopAllActions();
FishUtils.playSpine({
ani: "1",
x: 0,
y: 0,
isLoop: !1,
path: "module/fish/spine/ptqh/by_ptqh"
}, t.gun, .35);
var i = [];
i.push(cc.scaleTo(.05, .8));
i.push(cc.scaleTo(.1, 1));
i.push(cc.callFunc(function() {
t.isPlaying = !1;
}));
t.gun.runAction(cc.sequence(i));
}
},
onExit: function() {
ViewManager.closeView("SEVEN_DAY_VIEW");
ViewManager.closeView("PLAY_GUIDE_VIEW");
ViewManager.closeView("FISH_CHAT_V2");
ViewManager.closeView("NEWER_TASK_VIEW");
},
initChatFace: function() {
ViewManager.showView("FISH_CHAT_V2");
},
initBottomIcon: function() {
this.btnCrazy = cc.instantiate(this.btnFishItem);
this.btnCrazy.parent = this.nodeItems;
this.btnCrazy.x = 38;
this.btnCrazy.y = 32;
this.btnCrazy.script = this.btnCrazy.getComponent("comFishItem");
this.btnCrazy.script.setClickCb(this.handleTouchCrazy.bind(this));
this.btnCrazy.script.updateItemNum(o.ResourceType.KuangBao, a.Fish_KuanagBaoId);
this.btnAim = cc.instantiate(this.btnFishItem);
this.btnAim.parent = this.nodeItems;
this.btnAim.x = -38;
this.btnAim.y = 32;
this.btnAim.script = this.btnAim.getComponent("comFishItem");
this.btnAim.script.setClickCb(this.handleTouchAim.bind(this));
this.btnAim.script.updateItemNum(o.ResourceType.Collimation, a.Fish_CollimationId);
this.nodeCrazyUI = cc.instantiate(this.botOperate);
this.nodeCrazyUI.parent = this.nodeBotUI;
this.nodeCrazyUI.script = this.nodeCrazyUI.getComponent("crazyOperate");
this.nodeCrazyUI.active = !1;
},
checkPlayersCrazyState: function() {
var e = this, t = this.model.getRoomInfo(), i = TimeUtils.getServerTime();
for (var s in t.players) t.players.hasOwnProperty(s) && function() {
var n = t.players[s];
n.crazyInfo && n.crazyInfo.crazyEndAt > i && ActionUtils.callOnce(e.node, function() {
e.model.startCrazy(n.crazyInfo);
}, 1 / 60);
}();
},
handleTouchCrazy: function(e) {
if (this.model.getUsingWarheadState()) TipsUtils.showTips(_LANG("USING_WARHEAD_TIPS")); else {
var t = this.model.getCrazyStatus(this._roleId), i = this.nodeCrazyUI.script.getPercentage();
if (t.isCrazy || i > 0) TipsUtils.showTips(_LANG("SKILL_COUNTDOWN")); else {
if (ItemUtils.getItemNum(o.ResourceType.KuangBao) <= 0) this.showQuickBuy(_LANG("QUICK_BUY_ITEM_TIPS"), a.Fish_KuanagBaoId); else {
var s = T.TWO;
this.model.isMatchRoom(this.roomInfo.roomType) || (s = UserUtils.getFloatVal("CrazyMultiple" + this._roleId, T.TWO));
this.requestCrazy(s, !0);
}
}
}
},
requestCrazy: function(e, t) {
var i = this.model.getPlayerInfo(this._roleId), s = i.gunLevel * e, n = this.model.isShowJade(this.roomInfo.roomType);
if (n ? (i.jade || 0) >= s : (i.gold || 0) >= s) this.ctrl.crazy(e); else {
var o = t ? _LANG("CRAZY_ITEM_NOT_ENOUGH_TIPS1") : _LANG("CRAZY_ITEM_NOT_ENOUGH_TIPS2");
TipsUtils.showTips(StringUtils.format(o, n ? "玉石" : "金币"));
}
},
handleTouchAim: function(e) {
if (this.btnAim.script.getPercentage() > 0) TipsUtils.showTips(_LANG("AIM_COUNTDOWN_TIPS")); else {
if (this._bagModel.getItemNum(o.ResourceType.Collimation) <= 0) this.showQuickBuy(_LANG("QUICK_BUY_ITEM_TIPS"), a.Fish_CollimationId); else {
this.model.getUsingWarheadState() ? TipsUtils.showTips(_LANG("USING_WARHEAD_TIPS")) : this.ctrl.aim({
objectId: 0
});
}
}
},
handleTouchFrozen: function() {
var e = this.model.getFishStrikesInfo();
if (!TypeUtils.isRealNull(e)) {
var t = TimeUtils.getServerTime();
if (e.endAt > t) {
2 == e.type ? TipsUtils.showTips(_LANG("BOSS_TASK_UNDERWAY")) : TipsUtils.showTips(_LANG("STRIKES_FROZEN_TIPS"));
return;
}
}
var i = this.model.getFreezeTime();
if (this.model.getNowTime() < i + 1) TipsUtils.showTips(_LANG("SKILL_COUNTDOWN")); else {
var s = this._bagModel.getItemNum(o.ResourceType.Frozen);
TypeUtils.isRealNull(s) || s <= 0 ? this.showQuickBuy(_LANG("QUICK_BUY_ITEM_TIPS"), a.Fish_FrozenId) : this.ctrl.freeze();
}
},
handleStartAim: function(e) {
var t = e.data;
if (!TypeUtils.isRealNull(t)) {
this.updateGunBaseSpine(t);
this.model.isMe(t) && this.updateAimCountDown(t);
}
},
handleStopAim: function(e) {
var t = e.data;
this.updateGunBaseSpine(t);
},
updateAimCountDown: function(e) {
var t = this.model.getPlayerInfo(e);
TypeUtils.isRealNull(t) || this.btnAim.script.setPercentage({
startAt: TimeUtils.getServerTime(),
endAt: t.aimEndAt,
total: n.AIM_COUNTDOWN
});
},
handleCrazyStateUpdate: function(e) {
if (!TypeUtils.isRealNull(e.data)) {
var t = e.data.roleId, i = this.model.getPlayerInfo(t);
if (!TypeUtils.isRealNull(i)) {
var s = this.model.getViewPosOfPlayer(i.pos), n = this.playerTb[s];
if (!TypeUtils.isRealNull(n)) {
this.updateGunBaseSpine(t, n);
if (this.model.isMe(t)) {
var o = this.model.getCrazyStatus(t);
this.nodeItems.active = !o.isCrazy;
this.nodeCrazyUI.active = o.isCrazy;
this.nodeCrazyUI.script.freshState();
}
}
}
}
},
initBtnWarhead: function() {
var e = this;
this.btnWarhead.numlab = this.seekC(this.btnWarhead, "txtNum");
this.btnWarhead.cancel = this.seekC(this.btnWarhead, "txtCancel");
this.btnWarhead.cancel.active = !1;
this.onClick(this.btnWarhead, this.moveWarheadUI.bind(this));
for (var t = function(t) {
var i = n.WarheadItems[t], s = e.btnWarheads[t];
s.itemId = i;
e.onClick(s, function() {
e.handleTouchWarhead(i);
});
s.numlab = e.seekC(s, "txtNum");
}, i = 0; i < n.WarheadItems.length; i++) t(i);
this._isWarheadUIOut = !0;
var s = this.roomInfo.roomType;
(this.model.isShowJade(s) || this.model.isRoomTiYan(s)) && !1;
this.handlerUpdateWarheadNum();
},
handlerUpdateWarheadNum: function() {
if (!TypeUtils.isRealNull(this.btnWarhead)) {
for (var e = 0, t = 0; t < this.btnWarheads.length; t++) {
var i = this.btnWarheads[t], s = ItemUtils.getItemNum(i.itemId) - this.model.getNotAddWarheadNum(i.itemId);
i.numlab.getComponent(cc.Label).string = s;
e += s;
}
this.btnWarhead.numlab.getComponent(cc.Label).string = e;
}
},
moveWarheadUI: function() {
var e = this;
if (!this.revertLastGunType()) {
this.nodeWarhead.stopAllActions();
var t = this._isWarheadUIOut ? -350 : 20;
ActionUtils.sequence(this.nodeWarhead, cc.moveTo(.1, cc.v2(t, this.nodeWarhead.y)), function() {
e._isWarheadUIOut = !e._isWarheadUIOut;
});
}
},
handleTouchWarhead: function(e) {
if (ItemUtils.getItemNum(e) <= 0) {
var t = ItemUtils.getItemName(e);
TipsUtils.showTips(StringUtils.format(_LANG("SOMETHING_NOTENOUGH"), t));
} else if (TypeUtils.isRealNull(this._lastGunType)) {
this.moveWarheadUI();
var i = this.model.getPlayerInfo(this._roleId), s = n.WarheadGunType[e];
this.btnWarhead.cancel.active = !0;
this.ctrl.updateGun({
roleId: this._roleId,
gunLevel: i.gunLevel,
gunType: s
});
this._lastGunType = i.gunType;
this.model.setUsingWarheadState(!0);
}
},
revertLastGunType: function() {
if (!TypeUtils.isRealNull(this._lastGunType)) {
this.btnWarhead.cancel.active = !1;
var e = this.model.getPlayerInfo(this._roleId);
this.ctrl.updateGun({
roleId: this._roleId,
gunLevel: e.gunLevel,
gunType: this._lastGunType
});
this._lastGunType = null;
this.model.setUsingWarheadState(!1);
return !0;
}
return !1;
},
initBtnFrozen: function() {
this.btnFrozen = cc.instantiate(this.btnFishItem);
this.btnFrozen.parent = this.nodeRight;
this.btnFrozen.x = -45;
this.btnFrozen.y = -80;
this.btnFrozen.script = this.btnFrozen.getComponent("comFishItem");
this.btnFrozen.script.setClickCb(this.handleTouchFrozen.bind(this));
this.btnFrozen.script.updateItemNum(o.ResourceType.Frozen, a.Fish_FrozenId);
},
showQuickBuy: function(e, t) {
var i = this, s = g.findByIndex(t);
if (!TypeUtils.isRealNull(s) && !TypeUtils.isRealNull(s.vipLimit) && s.vipLimit > 0) {
if (this._vipModel.getVipInfo().level < s.vipLimit) {
TipsUtils.showTips(StringUtils.format(_LANG("SHOP_BUY_VIP_LIMIT_TIPS"), s.vipLimit, s.goodsUnit));
return;
}
}
var n = this._roleId + "_fish_quick_buy_" + t;
FishUtils.showConfirmBox(e, n, !0, function() {
var e = g.findByIndex(t);
if (!TypeUtils.isRealNull(s)) if (TypeUtils.isRealNull(e.chargePrice)) i._shopCtrl.addOrder(e.id); else if (TypeUtils.isRealNull(e.price)) if (ItemUtils.getItemNum(e.price.itemId) >= e.price.amount) i._shopCtrl.buyGoods(e.id, 1, {
awards: e.goods
}); else {
var n = ItemUtils.getItemName(e.price.itemId);
TipsUtils.showTips(StringUtils.format(_LANG("SOMETHING_NOTENOUGH"), n));
}
});
},
handleEnterFrozen: function(e) {
this.showFrozenFont(e.data);
this.updateFrozenCountDown();
},
showFrozenFont: function(e) {
if (!TypeUtils.isRealNull(e)) {
var t = this.model.getPlayerInfo(e.roleId);
if (!TypeUtils.isRealNull(t)) {
var i = this.model.getViewPosOfPlayer(t.pos), s = this.playerTb[i], n = SpriteUtils.createSpr("module/fish/texture/catchFishUi/zm_txt_qpbd");
n.parent = s.nodeAward;
n.x = 0;
n.y = 50;
var o = [];
o.push(cc.delayTime(2));
o.push(cc.fadeOut(1));
o.push(cc.callFunc(function() {
n.destroy();
}));
n.runAction(cc.sequence(o));
}
}
},
updateFrozenCountDown: function() {
var e = this.model.getNowTime(), t = this.model.getFreezeTime();
this.btnFrozen.script.setPercentage({
startAt: e,
endAt: t,
total: C
});
},
initBtnShenDeng: function() {
this.btnShenDeng = cc.instantiate(this.btnFishItem);
this.btnShenDeng.parent = this.nodeRight;
this.btnShenDeng.x = -45;
this.btnShenDeng.y = -160;
this.btnShenDeng.script = this.btnShenDeng.getComponent("comFishItem");
this.btnShenDeng.script.setClickCb(this.onClickUseShenDeng.bind(this));
this.btnShenDeng.script.updateItemNum(o.ResourceType.ShenDeng, a.Fish_ShenDengId);
},
onClickUseShenDeng: function(e) {
if (this.catchFishView.getGhostFishNum() >= (ConfigMgr.getCommon("GhostFishMax") || 12)) TipsUtils.showTips(_LANG("FISH_CANNOT_BORN_TIPS")); else if (this.model.isFrozen()) TipsUtils.showTips(_LANG("SHENDENG_USE_TIPS")); else {
if (this.btnShenDeng.script.getPercentage() > 0) TipsUtils.showTips(_LANG("SKILL_COUNTDOWN")); else {
var t = this._bagModel.getItemNum(o.ResourceType.ShenDeng);
TypeUtils.isRealNull(t) || t <= 0 ? this.showQuickBuy(_LANG("QUICK_BUY_ITEM_TIPS"), a.Fish_ShenDengId) : this.ctrl.summonFish();
}
}
},
handelSummonFishSucc: function() {
var e = this.model.getNowTime();
this.summonEndAt = e + y;
this.updateSummonFishCountDown();
},
updateSummonFishCountDown: function() {
var e = this.model.getNowTime();
TypeUtils.isRealNull(this.summonEndAt) || this.summonEndAt <= e || this.btnShenDeng.script.setPercentage({
startAt: e,
endAt: this.summonEndAt,
total: y
});
},
initBtnHaoJiao: function() {
this.btnHaoJiao = cc.instantiate(this.btnFishItem);
this.btnHaoJiao.parent = this.nodeRight;
this.btnHaoJiao.x = -120;
this.btnHaoJiao.y = -160;
this.btnHaoJiao.script = this.btnHaoJiao.getComponent("comFishItem");
this.btnHaoJiao.script.setClickCb(this.onClickUseHaoJiao.bind(this));
this.btnHaoJiao.script.updateItemNum(o.ResourceType.HaoJiao, a.Fish_HaoJiaoId);
this._roomUIList.btnHaojiao = this.btnHaoJiao;
},
onClickUseHaoJiao: function(e) {
var t = this;
if (this.model.isFrozen()) TipsUtils.showTips(_LANG("HAOJIAO_USE_TIP")); else {
if (this.btnHaoJiao.script.getPercentage() > 0) TipsUtils.showTips(_LANG("SKILL_COUNTDOWN")); else if (TypeUtils.isRealNull(this.strikesInfo)) {
var i = this.model.getRoomInfo(), s = h.findByIndex(i.roomType).haojiao, n = this._bagModel.getItemNum(o.ResourceType.HaoJiao), r = ItemUtils.getItemName(o.ResourceType.HaoJiao);
if (TypeUtils.isRealNull(n) || n < s.cost) {
var l = StringUtils.format(_LANG("FISH_ITEM_NOTENOUGH_TIPS"), r);
this.showQuickBuy(l, a.Fish_HaoJiaoId);
} else {
var c = StringUtils.format(_LANG("HAOJIAO_USE_TIPS"), s.cost, r, s.bossName), u = this._roleId + "summon_bosss_tips";
FishUtils.showConfirmBox(c, u, !0, function() {
t.ctrl.summonBossFish();
});
}
} else TipsUtils.showTips(_LANG("BOSS_TASK_UNDERWAY"));
}
},
playDynjDieEffect: function(e, t, i) {
for (var s = this, n = {}, a = e.getType(), r = 0; r < t.dropList.length; r++) {
var l = t.dropList[r];
if (l.itemId == o.ResourceType.Jade) {
t.isMe && this.model.setNotAddJadeNum(l.amount);
l.amount;
}
n[l.itemId] = l.amount;
}
var c = null;
(c = this.getPoolSize("DYNJ_DIE_EFFECT") > 0 ? this.popPool("DYNJ_DIE_EFFECT") : cc.instantiate(this.dynjDieEffect)).parent = this.dropLayer;
c.x = 0;
c.y = 0;
c.getComponent("dynjDieEffect").initUI();
var h = [];
for (var u in E) if (E.hasOwnProperty(u)) for (var d = E[u], p = n[u] || 0, f = 0; f < p; f++) h.push(d);
for (var m = null, g = 0; g < h.length; g++) {
var _ = RandomUtils.randInt(0, h.length - 1);
if (_ != g) {
m = h[g];
h[g] = h[_];
h[_] = m;
}
}
var T = function() {
for (var n = function(n) {
var o = null;
(o = s.getPoolSize("CURRENCY_DROP_ITEM") > 0 ? s.popPool("CURRENCY_DROP_ITEM") : cc.instantiate(s.dropAward)).parent = s.dropLayer;
ActionUtils.sequence(o, .3 * n, cc.callFunc(function() {
var r = h[n];
o.getComponent("catchAwardDrop").init({
model: s.model,
x: e.getX(),
y: e.getY(),
isIgnore: !0,
pos: t.pos,
icon: "module/fish/texture/catchFishUi/icons/icon_dynj_" + r,
desc: "",
width: 55,
delayTime: 2,
callback: function() {
s.pushPool("CURRENCY_DROP_ITEM", o);
c.getComponent("dynjDieEffect").addNum(r);
if (n == h.length - 1) {
TypeUtils.isFunction(i) && i();
if (t.isMe) {
s.model.setNotAddJadeNum(0);
var e = s.model.getPlayerInfo(s._roleId);
s.updateJade(s.rolePos, e.jade);
}
s.delayTimer(function() {
s.pushPool("DYNJ_DIE_EFFECT", c);
s.showZhuanPan(a);
}, .5);
s.delayTimer(function() {
s.playDieEffect(t, a);
}, 1);
}
}
});
}), cc.moveTo(.5, cc.v2(40 * RandomUtils.randInt(0, 6) - 50, 20 * RandomUtils.randInt(4, 11))));
}, o = 0; o < h.length; o++) n(o);
}, C = [], y = this.getPlayerWPos(t.pos, 1), I = this.dropLayer.convertToNodeSpaceAR(y);
C.push(cc.delayTime(1.5));
C.push(cc.moveTo(.5, I));
C.push(cc.callFunc(function() {
TypeUtils.isFunction(T) && T();
}));
c.runAction(cc.sequence(C));
},
playDieEffect: function(e, t) {
var i = this, s = null;
(s = this.getPoolSize("HIT_GREAT_ANIM") > 0 ? this.popPool("HIT_GREAT_ANIM") : cc.instantiate(this.greatAnimP)).parent = this.dropLayer;
s.getComponent("greatAnim").setData(e, function() {
TypeUtils.isRealNull(t) || i.showZhuanPan(t);
i.pushPool("HIT_GREAT_ANIM", s);
});
},
handelSummonBossSucc: function() {
this.hideOperating();
this.revertLastGunType();
},
handlePlayerHaoJiao: function(e) {
var t = e.data, i = this.playerTb[t];
TypeUtils.isRealNull(i) || FishUtils.playSpine({
ani: "1",
x: 0,
y: 0,
isLoop: !0,
path: "module/fish/spine/haojiao/dt_hj"
}, i.nodeAward, 2);
},
updateBagItemInfo: function(e) {
var t = e.data;
if (!(TypeUtils.isRealNull(t) || TypeUtils.isRealNull(t.bagInfo) || TypeUtils.isRealNull(t.updateList))) {
for (var i = {}, r = 0; r < t.bagInfo.length; r++) {
var l = t.bagInfo[r];
TypeUtils.isRealNull(i[l.itemId]) ? i[l.itemId] = l.amount : i[l.itemId] = i[l.itemId] + l.amount;
}
if (TypeUtils.isRealNull(this._allUpdateList)) {
var c;
this._allUpdateList = (s(c = {}, o.ResourceType.Frozen, {
widget: this.btnFrozen,
shopId: a.Fish_FrozenId
}), s(c, o.ResourceType.KuangBao, {
widget: this.btnCrazy,
shopId: a.Fish_KuanagBaoId
}), s(c, o.ResourceType.Collimation, {
widget: this.btnAim,
shopId: a.Fish_CollimationId
}), s(c, o.ResourceType.ShenDeng, {
widget: this.btnShenDeng,
shopId: a.Fish_ShenDengId
}), s(c, o.ResourceType.HaoJiao, {
widget: this.btnHaoJiao,
shopId: a.Fish_HaoJiaoId
}), s(c, n.WarheadItems[0], {
widget: this.btnWarheads[0].numlab,
isAddNum: !0
}), s(c, n.WarheadItems[1], {
widget: this.btnWarheads[1].numlab,
isAddNum: !0
}), s(c, n.WarheadItems[2], {
widget: this.btnWarheads[2].numlab,
isAddNum: !0
}), s(c, n.WarheadItems[3], {
widget: this.btnWarheads[3].numlab,
isAddNum: !0
}), c);
}
for (var h = !1, u = 0; u < t.updateList.length; u++) {
var d = t.updateList[u], p = d.itemId <= 0 ? d.removeItemId : d.itemId, f = this._allUpdateList[p], m = i[p] || 0;
if (!TypeUtils.isRealNull(f)) if (TypeUtils.isRealNull(f.shopId)) {
f.widget.getComponent(cc.Label).string = m;
f.isAddNum && (h = !0);
} else f.widget.script.updateItemNum(p, f.shopId);
}
if (h) {
for (var g = 0, _ = 0; _ < n.WarheadItems.length; _++) {
g += i[n.WarheadItems[_]] || 0;
}
this.btnWarhead.numlab.getComponent(cc.Label).string = g;
}
}
},
updateTaskClassInfo: function() {
if (this.checkTaskVisible().state) {
if (!this.pnlTaskInfo.active) {
this.pnlTaskInfo.active = !0;
this.updateTopNode();
}
} else if (this.pnlTaskInfo.active) {
this.pnlTaskInfo.active = !1;
ViewManager.showView("NEWER_TASK_VIEW");
this.updateTopNode();
}
},
updateFishSevenDayTask: function(e) {
if (this._showOpenSevenDay && this.isOpenSevenDay()) {
this._showOpenSevenDay = !1;
ViewManager.showView("SEVEN_DAY_VIEW");
this.canHide || this.updateAutoMoveBack(!0);
}
this.refreshLeftTipsNode();
RedRemindManager.doRemind(AppEvent.RedPointFishSevenDayTask);
},
showFishPlayItem: function(e) {
if (!TypeUtils.isRealNull(e)) {
var t = e.itemId;
if (ItemUtils.isCurrenyItem(t)) {
var i = this.model.getViewPosByRoleId(e.roleId), s = this.playerTb[i];
if (!TypeUtils.isRealNull(s)) {
s.awardLabs.active = !0;
s.awardLabs.x = 0;
s.awardLabs.y = -50;
s.awardLabs.opacity = 0;
s.awardLabs.bmfJade.getComponent(cc.Label).string = "";
s.awardLabs.bmfGold.getComponent(cc.Label).string = "";
t == o.ResourceType.Jade ? s.awardLabs.bmfJade.getComponent(cc.Label).string = e.amount : s.awardLabs.bmfGold.getComponent(cc.Label).string = e.amount;
var n = [], a = cc.fadeIn(.1), r = cc.moveBy(.1, cc.v2(0, 50)).easing(cc.easeBackIn());
n.push(cc.spawn(a, r));
n.push(cc.delayTime(2));
n.push(cc.fadeOut(.1));
n.push(cc.callFunc(function() {
s.awardLabs.active = !1;
}));
s.awardLabs.runAction(cc.sequence(n));
}
}
}
},
showGainWarheadsNumEffect: function(e, t) {
var i = this, s = this.model.getViewPosByRoleId(e.roleId), n = this.playerTb[s];
if (!TypeUtils.isRealNull(n)) {
var o = null;
(o = this.getPoolSize("AWARD_WARHEADS_NUM") > 0 ? this.popPool("AWARD_WARHEADS_NUM") : cc.instantiate(this.dropAwardItem)).stopAllActions();
o.getComponent("dropAwardItem").setData(e);
o.parent = n.nodeAward;
o.x = t;
o.y = 20;
o.opacity = 0;
var a = [];
a.push(cc.delayTime(5));
a.push(cc.callFunc(function() {
o.opacity = 255;
}));
a.push(cc.delayTime(1.5));
a.push(cc.spawn(cc.moveTo(.3, cc.v2(-100, 0)), cc.scaleTo(.3, 0)));
a.push(cc.callFunc(function() {
i.pushPool("AWARD_WARHEADS_NUM", o);
}));
o.runAction(cc.sequence(a));
}
},
updateRoomUINode: function() {
var e = m.findByIndex(this.roomInfo.roomType);
for (var t in e) if (e.hasOwnProperty(t)) {
var i = e[t], s = this._roomUIList[t];
TypeUtils.isRealNull(s) || (s.active = 1 == i);
}
},
showBossComing: function(e) {
ViewManager.showView("BOSS_COMING_VIEW", null, e);
},
handleShopInfoUpdate: function(e) {
this.refreshLeftAreaNode();
},
handlerGameEventEnterBackground: function() {},
handlerGameEventEnterForeground: function() {
this.updateFrozenCountDown();
this.updateSummonFishCountDown();
this.updateAimCountDown(this._roleId);
}
});
cc._RF.pop();
}, {
CatchFishConst: "CatchFishConst",
ItemConst: "ItemConst",
MarqueeConst: "MarqueeConst",
ShopConst: "ShopConst",
TaskConst: "TaskConst"
} ],
catchFishView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "79ba30EZIRMTZUhTG+j7Js6", "catchFishView");
var s = null, n = null, o = null, a = e("MarqueeConst"), r = e("CatchFishConst"), l = e("ManagerEnum"), c = (r.FishType, 
r.MIN_FIRE_INTERVAL, r.FishBornType), h = r.FishGroupType, u = r.CRAZY_MULTIPLE, d = r.PLAYER_MAX_BULLET_NUM, p = r.FishPlayState, f = (r.SpineGunPosTypes, 
r.WarheadGunType);
cc.Class({
extends: ViewBase,
properties: {
seabedLayer: cc.Node,
seabedBg: cc.Node,
bossBg: cc.Node,
fishLayer: cc.Node,
nodeBubble: cc.Node,
waveProgress: cc.Node,
bar: cc.Node,
sprWave: cc.Node,
particleWave: cc.Node,
bulletLayer: cc.Node,
dropLayer: cc.Node,
animLayer: cc.Node,
fishUI: cc.Prefab,
bulletObj: cc.Prefab,
spineFish: cc.Prefab,
dropItem: cc.Prefab,
dropAward: cc.Prefab,
hitAwardNum: cc.Prefab,
goldPillar: cc.Prefab,
seamanRoll: cc.Prefab
},
onAdapt: function() {
AdaptUtils.AdaptNodeToFullAdapt(this.node);
this.nodeScaleX = this.node.scaleX;
this.nodeScaleY = this.node.scaleY;
},
onCreate: function(e) {
ViewBase.prototype.onCreate.call(this);
this.initConfig();
this.data = e || {};
this.initData();
this.initView();
this.initEvent();
},
initConfig: function() {
s = ConfigMgr.getConfig("fish");
n = ConfigMgr.getConfig("gold_effect");
ConfigMgr.getConfig("fish_room_config");
ConfigMgr.getConfig("item_config");
o = ConfigMgr.getConfig("gun_config");
},
initData: function() {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this.roleCtrl = app.ctrls.role;
this.roleModel = this.roleCtrl.getModel();
this.roleModel.setInCatchFishStatus(!0);
this.roleId = this.roleModel.getRoleId();
this.marqueeModel = app.ctrls.marquee.getModel();
this.fishTb = {};
this.bulletTb = {};
this.aimFish = null;
this.removeFishTb = {};
this.prevFireTime = 0;
this.goldsQuene = {};
this.goldsQueneTime = 0;
this.fishVoiceTime = 0;
this._aimChain = [];
this.fishSkills = {};
this.skillIdx = 0;
},
initEvent: function() {
this.eventOn(AppEvent.GameEventEnterBackground, this.handlerGameEventEnterBackground, this);
this.eventOn(AppEvent.GameEventEnterForeground, this.handlerGameEventEnterForeground, this);
this.eventOn(this.model.EVENT_PLAYER_LEAVE, this.handlePlayerLeave, this);
this.eventOn(this.model.EVENT_FISH_BORN, this.handleFishBorn, this);
this.eventOn(this.model.EVENT_FIRE, this.handleFire, this);
this.eventOn(this.model.EVENT_HIT, this.handleHit, this);
this.eventOn(this.model.EVENT_AIM, this.handleAim, this);
this.eventOn(this.model.EVENT_START_AIM, this.handleStartAim, this);
this.eventOn(this.model.EVENT_STOP_AIM, this.handleStopAim, this);
this.eventOn(this.model.EVENT_DROP, this.handleDrop, this);
this.eventOn(this.model.EVENT_FISH_STRIKES, this.handleFishStrikes, this);
this.eventOn(this.model.EVENT_ENTER_FROZEN, this.handleEnterFrozen, this);
this.eventOn(this.model.EVENT_CANCEL_FROZEN, this.handleCancelFrozen, this);
this.eventOn(this.model.EVENT_FISH_COLOR_CHANGE, this.handleFishChange, this);
this.eventOn(this.model.EVENT_WARHEAD_AIM_GOLD_FISH, this.handleWarheadAimGoldFish, this);
this.eventOn(this.model.EVENT_FISH_PLAY_REWARD, this.handleFishPlayReward, this);
this.eventOn(this.model.EVENT_SYNC_MATCH_TASK_STATUS, this.handleUpdateMatchTaskStatus, this);
this.eventOn(this.model.EVENT_UPDATE_FISH_SKILL, this.handleUpdateFishSkill, this);
this.eventOn(this.model.EVENT_KYLIN_TOUCH_ENDED, this.handleKylinTouchEnded, this);
this.eventOn(this.model.EVENT_KYLIN_BAO_DIAN, this.handleKylinBaoDian, this);
this.eventOn(this.model.EVENT_WARHEAD_DROP_SHOW, this.handleWarheadsDrop, this);
},
initView: function() {
this.waveProgress.active = !1;
this.initCatchFishView();
},
initCatchFishView: function() {
var e = this;
this.initCatchUI();
if (this.model.isRotate()) {
this.node.angle = 180;
this.catchFishUINode.angle = -180;
}
this.initSeabedObj();
var t = this.model.getRoomInfo();
this._addFishes(t.fishes, !0);
this.ctrl.unfreezeEvents();
NodeUtils.setNodeTouch(this.seabedLayer, this.onTouchSeabedLayer, this);
ActionUtils.callOnce(this.node, function() {
if (e.model.isFrozen()) {
var t = e.model.getFreezeTime();
e.model.handleFreeze({
freezeTime: t
});
}
}, 1 / 60);
},
initCatchUI: function() {
this.catchFishUINode = cc.instantiate(this.fishUI);
this.catchFishUINode.parent = this.node;
this.catchFishUINode.zIndex = 100;
this.catchFishUINode.x = 0;
this.catchFishUINode.y = 0;
this.catchFishUI = this.catchFishUINode.getComponent("catchFishUI");
this._dropLayer = this.catchFishUI.getDropLayer();
this.catchFishUI.setCatchFishView(this);
this.animLayer.zIndex = 200;
},
getUI: function() {
return this.catchFishUI;
},
initSeabedObj: function() {
var e = this.getSeabedBackgroundIndex(), t = "module/fish/texture/picture/fish/bg_" + StringUtils.addZero(e, 2);
SpriteUtils.setTexture({
path: t
}, this.seabedBg, this);
var i = RandomUtils.randInt(1, 8);
this.musicPath = "module/fish/sound/bgm/bgm_room_" + i;
AudioMusicManager.playMusic(this.musicPath);
if (this.model.isRotate()) {
this.seabedLayer.angle = -180;
this.nodeBubble.angle = -180;
}
},
getSeabedBackgroundIndex: function() {
var e = null, t = this.model.getRoomType(), i = ConfigMgr.getConfig("fish_room_config").findByIndex(t);
if (i && i.mapBg) {
var s = i.mapBg.length;
s > 0 && (e = i.mapBg[RandomUtils.randInt(1, s)]);
}
return e || RandomUtils.randInt(1, 8);
},
onTouchSeabedLayer: function(e) {
this._touchWPos = e.getLocation();
var t = this.roleId;
if (e.type == cc.Node.EventType.TOUCH_START) this._isTouching = !0; else if (e.type == cc.Node.EventType.TOUCH_END) {
this._isTouching = !1;
this.model.dispatchEvent(this.model.EVENT_TOUCH_FISH_VIEW);
if (!this.canFire()) {
this._canNotTouchFire();
return !0;
}
var i = this.model.getCrazyStatus(t);
if (this.model.isAimGoldFish()) {
var s = this._getTouchFish(this._touchWPos.x, this._touchWPos.y);
if (s && (s.isGoldFish() || s.isWangLingFish()) && !s.isAlreadyShot()) {
this._fire(this._touchWPos.x, this._touchWPos.y, s.getFishId()) && s.setAlreadyShot();
} else TipsUtils.showTips(_LANG("BULLET_AIM_GOLD_FISH"));
} else if (this.model.isToAim()) {
var n = this._getTouchFish(this._touchWPos.x, this._touchWPos.y);
if (!TypeUtils.isRealNull(n)) {
if (n == this.aimFish) return !0;
this.aimFish && this._stopAim(t);
this._aim(n);
}
} else if (!this.model.isAutoFire()) {
var o = this.model.getFireInterval(), a = o;
i.isCrazy ? a = (i.multiple == u.TWO ? .8 : .6) * o : this.model.isToAim() && (a = .9 * o);
new Date().getTime() - this.prevFireTime >= 1e3 * a && this._fire(this._touchWPos.x, this._touchWPos.y);
}
}
},
_addFishes: function(e, t) {
var i = this;
TaskSchManager.addTask(e, function(e) {
var s = i.model.getNowTime();
if (i.model.getPathTimeLen(e.pathId) > s - e.bornTime / 100) if (i.removeFishTb[e.objectId]) i.removeFishTb[e.objectId] = !1; else {
var n = i._createFish(e, t);
if (TypeUtils.isRealNull(n)) return;
var o = n.getComponent("spineFishObject");
i.fishTb[e.objectId] = o;
i.fishLayer.addChild(n, o.getZOrder());
o.update(s - e.bornTime / 100);
e.bornType < c.SUMMON_GOLD && ActionUtils.sequence(n, cc.delayTime(.05), cc.callFunc(function() {
i.model.isFrozen() ? o.pauseAnime() : o.resumeAnime();
}));
var a = i.model.getRoomInfo().players;
for (var r in a) if (a.hasOwnProperty(r)) {
var l = a[r];
l.aimObjectId == e.objectId && i.handleAim({
data: {
objectId: l.aimObjectId,
roleId: r
}
});
}
}
});
TaskSchManager.start();
this.playGuideSignAim();
},
_createFish: function(e, t) {
var i = this, n = s.findByIndex(e.type);
if (!TypeUtils.isRealNull(n)) {
this.count = this.count || 1;
var o = {
view: this,
model: this.model,
fishId: e.objectId,
fishType: e.type,
fishPathId: e.pathId,
startX: e.bornX,
startY: e.bornY,
rotation: e.rotation,
surviveTime: 0,
children: e.children,
goldDrop: e.goldDrop,
pirceId: e.pirceId,
shields: e.shields,
bornType: e.bornType,
isBorn: !t,
color: e.color,
caiQuan: e.caiQuan
}, a = cc.instantiate(this.spineFish);
a.getComponent("spineFishObject").init(o);
n.groupType != h.BOSS_FISH && n.groupType != h.GREAT_FISH || this.catchFishUI.showBossComing({
conf: n,
info: e
});
if (n.groupType == h.BOSS_FISH) {
var r = null;
this.model.isNaJiaFish(n.type) ? r = "renyu1" : this.model.isNanJueFish(n.type) ? r = "nanjue1" : this.model.isChuangZhangFish(n.type) ? r = "haidao1" : this.model.isDragonFish(n.type) && (r = "long1");
if (this.model.isNaJiaFish(n.type) || this.model.isNanJueFish(n.type) || this.model.isChuangZhangFish(n.type)) {
this.stopSounds();
var l = RandomUtils.randInt(1, 3);
this.playMusic("FishBossBGM" + l);
this.isBossAlive = !0;
}
this.delayTimer(function() {
TypeUtils.isRealNull(r) || i.playSound(r);
}, 6);
}
n.strikesBossName && this.catchFishUI.updateStrikesInfo(n);
return a;
}
},
onBossDieOrRun: function() {
this.isBossAlive = !1;
},
_aim: function(e) {
this.ctrl.aim({
objectId: e.getFishId()
});
},
playGuideSignAim: function() {
if (this._signAimFish) {
for (var e = 0; e < this.fishTb.length; e++) {
var t = this.fishTb[e], i = t.getType();
t.isAlive() && this._signAimFish[i] && this._aim(t);
}
this._signAimFish = null;
}
},
update: function(e) {
var t = new Date().getTime() / 1e3;
TypeUtils.isRealNull(this._prevUpdateTime) && (this._prevUpdateTime = t - e);
e = t - this._prevUpdateTime;
this._prevUpdateTime = t;
for (var i in this.fishTb) if (this.fishTb.hasOwnProperty(i) && !TypeUtils.isRealNull(this.fishTb[i])) {
var s = this.fishTb[i];
if (s.isMovedOutView()) {
this._removeFish(s);
s.escape();
}
}
if (!TypeUtils.isRealNull(this.aimFish)) {
var n = this.aimFish.getX(), o = this.aimFish.getY();
n > 0 && n < display.width && o > 0 && o < display.height || this._stopAim(this.roleId);
}
this.updateAimChain();
this._checkCollision();
this._checkFire();
this.model.update();
this.popGoldsQueue(e);
this.playFishVoice(e);
},
playFishVoice: function(e) {
if (!this.isBossAlive) {
this.fishVoiceTime = this.fishVoiceTime + e;
if (this.fishVoiceTime >= 10) {
this.fishVoiceTime = 0;
var t = RandomUtils.randInt(1, 36);
this.playSound("fish_" + StringUtils.addZero(t, 2));
}
}
},
onDestroy: function() {
TimeMgr.off(this.update);
this.model.setAutoFire(!1);
TaskSchManager.stop();
ViewBase.prototype.onDestroy.call(this);
},
_getAutoFireFish: function() {
var e = [];
for (var t in this.fishTb) if (this.fishTb.hasOwnProperty(t) && !TypeUtils.isRealNull(this.fishTb[t])) {
var i = this.fishTb[t];
if (i.isAlive() && !i.getDead()) {
var s = i.getX(), n = i.getY(), o = !1;
this.model.isRotate() ? n > 0 && n < display.height - 65 && (o = !0) : n > 65 && n < display.height && (o = !0);
o && s > 0 && s < display.width && e.push(i);
}
}
ArrayUtils.sort(e, function(e, t) {
var i = e.getAutoFirePrority(), s = t.getAutoFirePrority();
return i == s ? e.getFishId() - t.getFishId() : s - i;
});
return e[0];
},
_getTouchFish: function(e, t) {
var i = this.fishLayer.convertToNodeSpaceAR(cc.v2(e, t));
e = i.x + CC_DESIGN_RESOLUTION.width / 2;
t = CC_DESIGN_RESOLUTION.height / 2 - i.y;
var s = [];
for (var n in this.fishTb) if (this.fishTb.hasOwnProperty(n)) {
var o = this.fishTb[n];
o.isAlive() && o.canAim() && s.push(o);
}
ArrayUtils.sort(s, function(e, t) {
var i = e.getZOrder(), s = t.getZOrder();
return i == s ? t.getFishId() - e.getFishId() : s - i;
});
for (var a = 0; a < s.length; a++) {
var r = s[a];
if (r.checkCollison(e, t)) return r;
}
},
_getFirePos: function(e) {
var t = e.node.convertToWorldSpaceAR(cc.v2(0, 0)), i = this.getGunDistance(t.x, t.y) / r.BulletSpeed + 1 / CC_FPS, s = e.getFuturePos(i);
if (!TypeUtils.isRealNull(s)) {
var n = e.node.x, o = e.node.y;
e.node.x = s.x - CC_DESIGN_RESOLUTION.width / 2;
e.node.y = CC_DESIGN_RESOLUTION.height / 2 - s.y;
t = e.node.convertToWorldSpaceAR(cc.v2(0, 0));
e.node.x = n;
e.node.y = o;
}
return t;
},
getGunDistance: function(e, t) {
var i = this.model.getMyViewPos(), s = this.catchFishUI.playerTb[i].gun.convertToWorldSpaceAR(cc.v2(0, 0)), n = e - s.x, o = t - s.y;
return Math.sqrt(n * n + o * o);
},
_checkFire: function() {
if (!this._isStop && !this.model.isCrazyPause() && !this.model.isLeavingRoom() && this._checkAutoFire() && !this.model.isSwitching()) {
var e = this.model.getCrazyStatus(this.roleId), t = this.model.getFireInterval();
e.isCrazy ? t = (e.multiple == u.TWO ? .8 : .6) * t : this.model.isToAim() && (t *= .9);
if (!(new Date().getTime() - this.prevFireTime < 1e3 * t)) {
var i = this._touchWPos, s = this.model.isToAim();
if (!this.model.isAimGoldFish()) {
if (s && this.aimFish) i = this._getFirePos(this.aimFish); else if (this.model.isAutoFire()) {
if (TypeUtils.isRealNull(i) || TypeUtils.isRealNull(i.x) || TypeUtils.isRealNull(i.y)) {
var n = this._getAutoFireFish();
if (TypeUtils.isRealNull(n)) return;
i = this._getFirePos(n);
}
} else if (!this._isTouching) return;
this._fire(i.x, i.y);
}
}
}
},
_checkAutoFire: function() {
if (!this.canFire()) {
if (this.model.isAutoFire() && !this._checkOpen) {
this._checkOpen = !0;
this._canNotTouchFire();
this.catchFishUI.stopAutoFire();
}
this._stopAim(this.roleId);
return !1;
}
return !0;
},
canFire: function() {
return this.model.canFire();
},
_canNotTouchFire: function() {
var e = this.model.getRoomType(), t = _LANG("COMMON_NEED_RECHARGE1");
if (this.model.isShowJade(e)) t = _LANG("COMMON_NEED_RECHARGE2"); else if (this.model.isMatchRoom(e)) {
if (this.model.getPlayerInfo(this.roleId).bullet <= 0) return;
}
TipsUtils.showTips(t);
this.model.handleMoneyNotEnough();
},
_fire: function(e, t, i) {
if (this.getCurBulletNum() >= d) {
TipsUtils.showTips(_LANG("FIRE_MAX_BULLET_TIPS"));
return !1;
}
t = display.height - t;
var s = [], n = this.catchFishUI.getFireAngle(e, t);
if (n >= 0 && n <= Math.PI || n >= Math.PI && n <= 2 * Math.PI) {
var o = {
bulletId: this.model.getNextBulletId(this.roleId),
fireAngle: n + "",
fireTime: 100 * this.model.getNowTime(),
aimFish: i
};
s.push(o);
}
if (s.length > 0) {
this.ctrl.fire(s);
this.model.handleFire(s, this.roleId);
this.prevFireTime = new Date().getTime();
return !0;
}
return !1;
},
getCurBulletNum: function() {
var e = this.bulletTb[this.roleId], t = 0;
if (!TypeUtils.isRealNull(e)) for (var i in e) e.hasOwnProperty(i) && !TypeUtils.isRealNull(e[i]) && (t += 1);
return t;
},
handlePlayerLeave: function(e) {
var t = e.data;
this.delGoldsQueue(t.pos);
var i = this.bulletTb[t.roleId];
if (!TypeUtils.isRealNull(i)) {
for (var s in i) if (i.hasOwnProperty(s)) {
i[s].node.destroy();
}
delete this.bulletTb[t.roleId];
this._stopAim(t.roleId);
}
},
handleFishBorn: function(e) {
this._addFishes(e.data);
},
handleFire: function(e) {
var t = e.data, i = t.roleId, s = this.model.getPlayerInfo(i);
if (!TypeUtils.isRealNull(s)) {
for (var n = 0; n < t.fireList.length; n++) {
var o = t.fireList[n], a = this.catchFishUI.getFireStartPosition(i, o.fireAngle), r = this._addBullet({
roleId: i,
bulletId: o.bulletId,
type: s.gunType,
level: s.gunLevel,
fireTime: o.fireTime,
fireRadian: o.fireAngle,
curX: a.x,
curY: a.y
});
if (o.aimFish) {
var l = this.fishTb[o.aimFish];
r.setTargetFish(l);
} else if (s.aimObjectId) {
var c = this.fishTb[s.aimObjectId];
r.setTargetFish(c);
}
}
if (this.model.isMe(i)) {
var h = this.model.getCrazyStatus(i);
this.playFireSound(s.gunType, h.isCrazy);
this._checkOpen = null;
}
}
},
playFireSound: function(e, t) {
var i = "kuangbao";
t || (i = o.findByIndex(e).sound);
TypeUtils.isAllNull(i) || this.playEffectSound(i);
},
playEffectSound: function(e) {
this.playSound(e);
},
handleHit: function(e) {
var t = e.data, i = this.model.getPlayerInfo(t.roleId);
if (!TypeUtils.isRealNull(i)) {
var n = this.model.isMe(t.roleId), o = this.model.getViewPosOfPlayer(i.pos), a = [], r = [];
if (TypeUtils.isNotEmptyArray(t.changeList)) for (var l = 0; l < t.changeList.length; l++) {
var c = t.changeList[l], h = this.fishTb[c.fishId];
if (!TypeUtils.isRealNull(h)) {
h.updateDropGold(c.goldDrop);
h.playPokerColor(c.color);
}
}
for (var u = 0; u < t.dropList.length; u++) {
var d = t.dropList[u];
ItemUtils.isCurrenyItem(d.itemId) ? a.push({
fishId: t.fishId,
crit: catchInfo.crit,
gold: d.amount
}) : ItemUtils.isItemShow(d.itemId) && r.push({
roleId: t.roleId,
fishId: t.fishId,
itemId: d.itemId,
amount: d.amount
});
}
for (var p = [], m = [], g = 0, _ = [], T = 0; T < t.catchList.length; T++) {
var C = t.catchList[T], y = this.fishTb[C.fishId], I = !1, v = 0;
if (!TypeUtils.isRealNull(y)) {
v = y.getType();
y.isRewardSpecial() && n && (I = !0);
}
var E = !1;
if (!I) for (var S = 0; S < C.dropList.length; S++) {
var b = C.dropList[S];
if (TypeUtils.isRealNull(f[b.itemId])) ItemUtils.isCurrenyItem(b.itemId) ? a.push({
fishId: C.fishId,
itemId: b.itemId,
fishType: v,
crit: C.crit,
gold: b.amount,
dropMultiple: C.dropMultiple,
isDead: !0
}) : r.push({
roleId: t.roleId,
fishId: C.fishId,
itemId: b.itemId,
amount: b.amount,
dropMultiple: C.dropMultiple,
isDead: !0
}); else {
if (!this.model.isNaJiaFish(v) || !n) {
_.push(v);
m.push({
roleId: t.roleId,
fishId: C.fishId,
itemId: b.itemId,
amount: b.amount
});
g += b.amount;
}
E = !0;
}
}
if (TypeUtils.isRealNull(y)) this.removeFishTb[C.fishId] = !0; else {
C.pos = o;
C.isMe = n;
C.isHaveWarhead = E;
p.push({
fish: y,
catchInfo: C
});
}
}
this.playLightningChain(t.fishId, t.lightingFishList);
for (var R = 0; R < r.length; R++) this.handleDropItem({
data: r[R]
});
this.handleDrop({
data: {
roleId: t.roleId,
drops: a
}
});
this.handleWarheadsDrop({
data: {
itemList: m,
allNum: g
}
});
for (var N = 0; N < p.length; N++) {
var w = p[N], U = w.fish, A = U.getType(), L = s.findByIndex(A), F = w.catchInfo, M = F && F.isMe;
this.handleFishDieAction(U, M, F, t, L);
this.triggerBossShare(t.roleId, F, L, t.bulletLevel);
var x = L.isShake || !1;
M && x && this.screenTweenEffect();
U.playDie(F);
this._removeFish(U);
}
}
},
handleFishDieAction: function(e, t, i, s, n) {
var o = e.getType();
if ((this.model.isHaiHuangJiFish(o) || this.model.isNaJiaFish(o)) && t) {
this.marqueeModel.changeWaitState(a.WaitType.NaJia, !0);
var r = {
catchFishUI: this.catchFishUI,
catchInfo: i,
fishType: o,
bulletLevel: s.bulletLevel
};
PopViewManager.addPopQueue("NAJIA_PLAY_VIEW", {
viewType: l.QueueType.Settlement,
viewArg: r
});
} else if (this.model.isDragonFish(o) && t) {
var c = {
catchFishUI: this.catchFishUI,
catchInfo: i,
fishType: o
};
PopViewManager.addPopQueue("GOLD_DRAGON_VIEW", {
viewType: l.QueueType.Settlement,
viewArg: c
});
} else if (this.model.isShuiShouFish(o)) this.showSeamanRoll(i); else if (this.model.isZhaDanFish(o)) {
for (var h = 0, u = 0; u < s.catchList.length; u++) for (var d = s.catchList[u].dropList, p = 0; p < d.length; p++) {
var f = d[p];
ItemUtils.isCurrenyItem(f.itemId) && (h += f.amount);
}
this.playFishRoll(s.roleId, n, i.dropMultiple, h);
this.playBombEffect();
}
this.triggerDragonTreasure(i.longWangBox, o, t);
this.triggerMonsterBattle(i.juShouDuiJueInfo, o, t);
this.triggerFingerPlay(i.caiQuanInfo, o, t);
this.triggerCrushEggs(i.zaJinDanInfo, o, t);
this.triggerSGZBPlay(i.sanGuoInfo, o, t);
this.triggerSeaTreasures(i.pangXieInfo, o, t);
},
playBombEffect: function() {
FishUtils.playSpine({
ani: "1",
zorder: -1,
x: 0,
y: 0,
isLoop: !1,
path: "module/fish/spine/by_zd/by_qpzd"
}, this.bulletLayer, 2.5);
},
playLightningChain: function(e, t) {
if (!TypeUtils.isRealNull(t)) {
var i = this.fishTb[e], s = 0, n = 0;
if (!TypeUtils.isRealNull(i)) {
s = i.getX();
n = CC_DESIGN_RESOLUTION.height - i.getY();
}
for (var o = 0; o < t.length; o++) {
var a = t[o], r = this.fishTb[a];
if (!TypeUtils.isRealNull(r)) {
var l = r.getX(), c = CC_DESIGN_RESOLUTION.height - r.getY(), h = (PointUtils.mid(cc.v2(s, n), cc.v2(l, c)), 
s - l), u = n - c;
Math.sqrt(h * h + u * u), DicUtils.deg(Math.atan2(-u, h));
}
}
}
},
playFishGroundBomb: function(e, t, i) {
var s = this;
if (!TypeUtils.isRealNull(i)) {
this.playEffectSound("jingbao");
var n = [];
n.push(cc.delayTime(2));
n.push(cc.callFunc(function() {
spWarning.removethis();
spBomb.setVisible(!0);
s.playSound("Hedan_fly");
SpineUtilEx.changeAnimation(spBomb, "1", !1, null, !0);
}));
n.push(cc.delayTime(1));
n.push(cc.callFunc(function() {
s.playEffectSound("Hedan_boom");
}));
n.push(cc.delayTime(2));
n.push(cc.callFunc(function() {
s.hanldeFishGroundBombResult(e, t, i);
spBomb.removethis();
}));
spBomb.runAction(cc.sequence(n));
}
},
hanldeFishGroundBombResult: function(e, t, i) {
for (var s = 0; s < i.fishList.length; s++) {
var n = i.fishList[s], o = this.fishTb[n];
if (!TypeUtils.isRealNull(o)) {
o.setScale(5);
o.playDie();
this._removeFish(o);
}
}
var a = i.dropItem;
if (TypeUtils.isRealNull(a)) {
var r = 0;
if (ItemUtils.isCurrenyItem(a.itemId)) {
var l = Number(a.amount), c = {
roleId: e,
itemId: a.itemId,
x: display.cx,
y: display.cy,
gold: l,
goldDrop: 100,
isDead: !0
};
this._addDrop(c);
r += l;
}
if (r > 0) {
var h = {
index: t,
award: r,
isRedPacket: !1
};
this.model.dispatchEvent(this.model.EVENT_PLAY_AWARD, h);
}
}
},
showSeamanRoll: function(e) {
var t = this, i = null;
(i = this.getPoolSize("SEAMAN_ROLL_ITEM") > 0 ? this.popPool("SEAMAN_ROLL_ITEM") : cc.instantiate(this.seamanRoll)).parent = this.animLayer;
var s = this.catchFishUI.getPlayerWPos(e.pos, 1), n = this.animLayer.convertToNodeSpaceAR(s);
i.x = n.x;
i.y = n.y;
this.model.isRotate() && (i.angle = -180);
i.getComponent("seamanRollItem").setData(e, function() {
if (e.isMe) {
t.model.setNotAddGoldNum(0);
var s = t.model.getPlayerInfo(t.roleId);
t.catchFishUI.updateGold(e.pos, s.gold);
}
t.pushPool("SEAMAN_ROLL_ITEM", i);
});
},
triggerDragonTreasure: function(e, t, i) {
if (e && e.multiple) {
e.stateType = p.DragonTreasure;
if (i) {
if (!this.model.isHaiHuangJiFish(t) && !this.model.isNaJiaFish(t)) {
var s = {
data: e
};
PopViewManager.addPopQueue("DRAGON_TREASURE_VIEW", {
viewType: l.QueueType.Settlement,
viewArg: s
});
}
} else this.model.handleFishPlayState(e);
return !0;
}
},
triggerMonsterBattle: function(e, t, i) {
if (e && e.multiple) {
e.stateType = p.MonsterBattle;
if (i) {
if (!this.model.isHaiHuangJiFish(t) && !this.model.isNaJiaFish(t)) {
var s = {
data: e
};
PopViewManager.addPopQueue("MONSTER_BATTLE_VIEW", {
viewType: l.QueueType.Settlement,
viewArg: s
});
}
} else this.model.handleFishPlayState(e);
return !0;
}
},
triggerFingerPlay: function(e, t, i) {
if (e && e.multiple) {
e.stateType = p.FingerPlay;
i ? ViewManager.showView("FINGER_PLAY_VIEW", null, {
data: e
}) : this.model.handleFishPlayState(e);
return !0;
}
},
triggerCrushEggs: function(e, t, i) {
if (e && e.multiple) {
e.multiple = 1;
e.stateType = p.CrushEggs;
if (i) ; else this.model.handleFishPlayState(e);
return !0;
}
},
triggerSGZBPlay: function(e, t, i) {
if (e && e.itemList) {
e.stateType = p.SanGuoWar;
if (i) ; else this.model.handleFishPlayState(e);
return !0;
}
},
triggerSeaTreasures: function(e, t, i) {
if (e && e.itemList) {
e.stateType = p.SeaTreasures;
i || this.model.handleFishPlayState(e);
return !0;
}
},
triggerBossShare: function(e, t, i, s) {
if (this.model.isMe(e) && !SystemUtils.checkIsClose(10016) && !TypeUtils.isRealNull(i) && !TypeUtils.isRealNull(i.share)) i.type, 
t.dropMultiple, t.dropList;
},
handleFishPlayReward: function(e) {
var t = e.data;
if (!TypeUtils.isRealNull(t)) {
for (var i = [], s = 0, n = 0; n < t.list.length; n++) {
var o = t.list[n], a = {
roleId: this.roleId,
fishId: -1,
itemId: o.itemId,
amount: o.amount
};
if (TypeUtils.isRealNull(f[o.itemId])) this.catchFishUI.showFishPlayItem(a); else {
i.push(a);
s += o.amount;
}
}
this.handleWarheadsDrop({
data: {
itemList: i,
allNum: s
}
});
}
},
handleDrop: function(e) {
var t = e.data.roleId, i = this.model.getPlayerInfo(t);
if (!TypeUtils.isRealNull(i)) {
for (var s = 0, n = 0, o = null, a = 0, r = e.data.drops, l = 0; l < r.length; l++) {
var c = r[l], h = 0, u = this.fishTb[c.fishId];
if (!TypeUtils.isRealNull(u)) {
s = u.getX();
n = u.getY();
h = c.dropMultiple || u.getDropGold();
}
if (h && h > a) {
a = h;
o = c;
}
c.gold && c.gold > 0 && this._addDrop({
roleId: t,
itemId: c.itemId,
x: s,
y: n,
gold: c.gold,
goldDrop: h,
crit: c.crit,
isDead: c.isDead
});
}
this.playHitRoll(t, o, a);
}
},
playHitRoll: function(e, t, i) {
if (!TypeUtils.isRealNull(t)) {
var n = 0, o = 0, a = this.fishTb[t.fishId];
if (!TypeUtils.isRealNull(a)) {
n = a.getX();
o = a.getY();
}
if (t.crit && t.crit > 1) {
var r = 1, l = 85;
if (this.model.isRotate()) {
r = -1;
l = -85;
}
var c = SpriteUtils.createSpr("module/fish/texture/catchFishUi/txt_bj_" + t.crit);
c.parent = this.dropLayer;
c.x = n;
c.y = CC_DESIGN_RESOLUTION.height - o + l;
c.scale = 0;
var h = [];
h.push(cc.scaleTo(.5, r).easing(cc.easeBackOut()));
h.push(cc.delayTime(.7));
h.push(cc.fadeOut(.3));
h.push(cc.callFunc(function() {
c.destroy();
}));
c.runAction(cc.sequence(h));
}
var u = s.findByIndex(t.fishType);
this.playFishRoll(e, u, i, t.gold);
}
},
playFishRoll: function(e, t, i, s) {
if (!TypeUtils.isRealNull(t) && !TypeUtils.isAllNull(t.fishNameImg) && TypeUtils.isRealNull(t.noNeedRoll) && (!this.model.isMe(e) || TypeUtils.isRealNull(t.hideSelfRoll))) {
var n = this.model.getViewPosByRoleId(e);
if (!TypeUtils.isRealNull(n)) {
var o = {
index: n,
goldDrop: i,
award: s,
fishType: t.type,
isRedPacket: !1
};
this.model.dispatchEvent(this.model.EVENT_PLAY_AWARD, o);
}
}
},
handleDropItem: function(e) {
var t = e.data, i = t.roleId, s = this.model.getPlayerInfo(i);
if (!TypeUtils.isRealNull(s)) {
var n = 0, o = 0, a = this.fishTb[t.fishId];
if (!TypeUtils.isRealNull(a)) {
n = a.getX();
o = a.getY();
}
this.showDropSpecialItem({
roleId: t.roleId,
x: n,
y: o,
itemId: t.itemId,
amount: t.amount
});
}
},
_doHit: function(e) {
for (var t = [], i = {}, s = 0; s < e.length; s++) {
var n = e[s], o = n.bullet, a = o.getRoleId(), r = o.getBulletId(), l = n.fish.getFishId(), c = this.model.isMe(a);
if (c) t.push({
bulletId: r,
fishId: l
}); else if (this.model.isRobot(a)) {
var h = a, u = i[h];
if (TypeUtils.isRealNull(u)) {
u = [];
i[h] = u;
}
u.push({
bulletId: r,
fishId: l
});
}
o.playHit(l);
n.fish.playBeHit(c);
o.checkSurviveTime() && delete this.bulletTb[a][r];
}
for (var d = t.length, p = 0; p < d; p++) {
var f = t[p], m = {
bulletId: f.bulletId,
fishId: f.fishId
};
this.ctrl.hit(m);
}
for (var g in i) if (i.hasOwnProperty(g)) for (var _ = i[g], T = 0; T < _.length; T++) {
var C = _[T], y = {
roleId: g,
bulletId: C.bulletId,
fishId: C.fishId
};
this.model.robotHit(y);
}
},
handleAim: function(e) {
var t = e.data;
if (this.model.isMe(t.roleId)) {
var i = this.fishTb[t.objectId];
if (!TypeUtils.isRealNull(i)) {
this.aimFish && this.aimFish.stopAimEffect();
this.aimFish = i;
this.aimFish.playAimEffect();
}
}
},
handleStartAim: function(e) {
var t = e.data;
if (this.model.isMe(t) && !this.aimFirstHanlde) {
TimeMgr.on(this.aimFunc, this, .5);
this.aimFirstHanlde = !0;
}
},
aimFunc: function(e) {
if (TypeUtils.isRealNull(this.aimFish)) {
var t = this._getAutoFireFish();
if (TypeUtils.isRealNull(t)) return;
var i = this._getFirePos(t), s = this.catchFishUI.getFireAngle(i.x, i.y);
if (s >= 0 && s <= Math.PI || s >= Math.PI && s <= 2 * Math.PI) {
this._aim(t);
this.removeAimFirstHandle();
}
} else this.removeAimFirstHandle();
},
removeAimFirstHandle: function() {
if (this.aimFirstHanlde) {
TimeMgr.off(this.aimFunc);
this.aimFirstHanlde = null;
}
},
handleStopAim: function(e) {
this._stopAim(e.data);
},
_stopAim: function(e) {
if (this.aimFish && this.model.isMe(e)) {
this.removeAimFirstHandle();
this.aimFish.stopAimEffect();
this.aimFish = null;
}
},
updateAimChain: function() {
if (TypeUtils.isRealNull(this.aimFish)) this.showAimChain(); else {
var e = this.aimFish.getX() - CC_DESIGN_RESOLUTION.width / 2, t = CC_DESIGN_RESOLUTION.height / 2 - this.aimFish.getY(), i = this.model.getPlayerInfo(this.roleId);
if (!TypeUtils.isRealNull(i)) {
for (var s = this.model.getMyViewPos(), n = this.catchFishUI.playerTb[s].gun.convertToWorldSpaceAR(cc.v2(0, 0)), o = this.fishLayer.convertToNodeSpaceAR(n), a = e - o.x, r = t - o.y, l = Math.sqrt(Math.pow(a, 2) + Math.pow(r, 2)), c = Math.floor(l / 60), h = Math.atan2(a, r) + Math.PI / 2, u = 60 * Math.abs(Math.cos(h)), d = 60 * Math.abs(Math.sin(h)), p = o.x, f = o.y, m = [], g = 0; g < c; g++) {
o.x > e ? p -= u : p += u;
o.y > t ? f -= d : f += d;
m.push(cc.v2(p, f));
}
this.showAimChain(m, 180 - DicUtils.deg(Math.atan2(-a, -r)));
}
}
},
showAimChain: function(e, t) {
var i = 0, s = this._aimChain.length;
if (!TypeUtils.isRealNull(e)) {
i = e.length;
t = t || 0;
}
for (var n = 0; n < this._aimChain.length; n++) {
var o = this._aimChain[n];
if (n < i) {
o.active = !0;
o.angle = t;
o.x = e[n].x;
o.y = e[n].y;
} else o.active = !1;
}
if (i > s) for (var a = s; a < i; a++) {
var r = SpriteUtils.createSpr("module/fish/texture/catchFishUi/pro_6");
r.parent = this.fishLayer;
r.angle = t;
r.x = e[a].x;
r.y = e[a].y;
this._aimChain.push(r);
}
},
screenTweenEffect: function() {
var e = [ .5, 0, 100, 3 ], t = e[0], i = e[1], s = e[2], n = e[3], o = this.node;
this.node.x = 0;
this.node.y = 0;
o.stopAllActions();
ActionUtils.shake(o, t, i, s, n);
o.scaleX = this.nodeScaleX;
o.scaleY = this.nodeScaleY;
o.stopActionByTag(1014);
var a = cc.sequence(cc.scaleTo(.05, 1.15), cc.scaleTo(.05, this.nodeScaleX, this.nodeScaleY));
a.setTag(1014);
o.runAction(a);
},
showDropSpecialItem: function(e) {
if (!TypeUtils.isRealNull(e)) {
var t = ItemUtils.getItemPng(e.itemId, 114), i = e.amount || 0, s = e.x || display.cx, n = e.y || display.cy;
this._addTreasureDrop({
roleId: e.roleId,
x: s,
y: n,
treasure: i,
icon: t,
itemId: e.itemId,
isTargetPos: e.isTargetPos,
delayTime: e.delayTime
});
}
},
handleFishStrikes: function(e) {
var t = this;
this._stopAim(this.roleId);
this.playEffectSound("fish_yuchao");
for (var i in this.fishTb) if (this.fishTb.hasOwnProperty(i)) {
var s = this.fishTb[i];
if (s.isAlive()) s.setSpeed(10); else {
s.releaseShader();
s.node.removeFromParent();
delete this.fishTb[i];
}
}
TaskSchManager.stop();
var n = this.getSeabedBackgroundIndex(), o = "module/fish/texture/picture/fish/bg_" + StringUtils.addZero(n, 2);
this.waveProgress.active = !0;
this.waveProgress.getComponent(cc.ProgressBar).progress = 0;
SpriteUtils.setTexture({
path: o
}, this.bar, this);
this.sprWave.x = -970;
this.model.isRotate() && (this.waveProgress.angle = -180);
var a = 0;
ActionUtils.timerAct(this.waveProgress, function(e) {
a += e;
t.waveProgress.getComponent(cc.ProgressBar).progress = a / 2.3;
if (a >= 2.3) {
t.waveProgress.stopAllActions();
SpriteUtils.setTexture({
path: o
}, t.seabedBg, t);
} else ;
}, .1);
ActionUtils.sequence(this.sprWave, cc.moveTo(5, this.sprWave.width + 1280, 0), cc.callFunc(function() {
t.waveProgress.active = !1;
}));
},
showSummonEffect: function(e, t) {
var i = this, s = SpriteUtils.createSpr(ItemUtils.toItemPngPath("icon_d_156"));
s.parent = this.fishLayer;
s.x = e.x;
s.y = e.y;
s.scale = .5;
var n = cc.rotateBy(.4, 720), o = cc.moveTo(.4, cc.v2(e.x - CC_DESIGN_RESOLUTION.width / 2, CC_DESIGN_RESOLUTION.height / 2 - e.y)), a = cc.scaleTo(.4, .2), r = cc.fadeOut(.4);
s.runAction(cc.sequence(cc.spawn(n, o), cc.delayTime(.2), cc.spawn(n, a, r), cc.callFunc(function() {
if (!TypeUtils.isRealNull(t)) {
t.showSummon();
i.model.isFrozen() && t.pauseAnime();
}
TypeUtils.isRealNull(s) || s.destroy();
})));
},
_removeFish: function(e) {
this.aimFish == e && this._stopAim(this.roleId);
var t = [];
for (var i in this.bulletTb) if (this.bulletTb.hasOwnProperty(i)) {
var s = this.bulletTb[i];
for (var n in s) if (s.hasOwnProperty(n) && !TypeUtils.isRealNull(s[n])) {
var o = s[n];
o.getTargetFish() == e && (o.checkTargetAway() ? t.push({
roleId: i,
bulletId: n
}) : o.setTargetFish(null));
}
}
for (var a = 0; a < t.length; a++) {
var r = t[a];
delete this.bulletTb[r.roleId][r.bulletId];
if (this.model.isMe(r.roleId)) {
this.ctrl.hit({
bulletId: r.bulletId,
fishId: 0
});
TipsUtils.showTips(_LANG("BULLET_AUTO_LOSE_TIPS"));
}
}
delete this.fishTb[e.getFishId()];
},
_addBullet: function(e) {
var t = e.roleId, i = e.bulletId, s = cc.instantiate(this.bulletObj), n = s.getComponent("bulletObject");
n.initData({
roleId: t,
bulletId: i,
type: e.type,
level: e.level,
fireRadian: e.fireRadian,
curX: e.curX,
curY: e.curY,
fireTime: 0,
fireFish: e.fireFish,
gunPosType: e.gunPosType,
model: this.model
});
TypeUtils.isRealNull(this.bulletTb[t]) && (this.bulletTb[t] = {});
var o = this.bulletTb[t][i];
TypeUtils.isRealNull(o) || o.node.destroy();
this.bulletTb[t][i] = n;
s.parent = this.bulletLayer;
return n;
},
_checkCollision: function() {
if (!this._isStop && !this.model.isLeavingRoom()) {
var e = [];
for (var t in this.fishTb) if (this.fishTb.hasOwnProperty(t)) {
var i = this.fishTb[t];
i && i.isAlive() && e.push(i);
}
ArrayUtils.sort(e, function(e, t) {
return e.getZOrder() == t.getZOrder() ? e.getFishId() - t.getFishId() : e.getZOrder() - t.getZOrder();
});
var s = [];
for (var n in this.bulletTb) if (this.bulletTb.hasOwnProperty(n)) {
var o = this.bulletTb[n];
for (var a in o) if (o.hasOwnProperty(a) && !TypeUtils.isRealNull(o[a])) {
var r = o[a], l = r.getX(), c = r.getY(), h = r.getTargetFish(), u = r.getBulletSize();
if (TypeUtils.isRealNull(h)) for (var d = 0; d < e.length; d++) {
var p = e[d], f = p.getFishId();
if (!r.isHit(f) && p.checkCollison(l, c, u)) {
s.push({
bullet: r,
fish: p
});
break;
}
} else {
var m = h.getFishId();
!r.isHit(m) && h.checkCollison(l, c, u) && s.push({
bullet: r,
fish: h
});
}
}
}
s.length > 0 && this._doHit(s);
}
},
_addDrop: function(e) {
if (!(e.gold <= 0)) {
if (e.isDead) this._addBigFishTips(e); else {
e.goldDrop = e.crit;
this._redPacketTips(e);
}
this._addDropGold(e);
this._addDropLabel(e);
this.showGolds(e);
}
},
_redPacketTips: function(e) {
var t = this.model.getPlayerInfo(e.roleId), i = this.model.getViewPosOfPlayer(t.pos);
this.model.dispatchEvent(this.model.EVENT_PLAY_AWARD, {
index: i,
award: e.gold,
crit: e.crit,
isRedPacket: !0
});
},
_addDropGold: function(e) {
var t = this, i = this.model.getPlayerInfo(e.roleId), s = 10;
n.forEach(function(t) {
var i = t.section, n = e.goldDrop;
n >= i[0] && n <= i[1] && (s = t.num);
});
for (var o = function(n) {
var o = null;
t.getPoolSize("CURRENCY_DROP_ANIM") > 0 ? o = t.popPool("CURRENCY_DROP_ANIM") : (o = cc.instantiate(t.dropItem)).getComponent("spineGoldView").initData({
model: t.model,
drop: e
});
var a = o.getComponent("spineGoldView");
a.updateSpine(e);
o.parent = t.dropLayer;
var r = 35;
t.model.isRotate() && (r = -r);
var l = e.x - CC_DESIGN_RESOLUTION.width / 2, c = CC_DESIGN_RESOLUTION.height / 2 - e.y + r, h = FishUtils.getDropItemPos(l, c, n, s);
o.x = h.x;
o.y = h.y + 50;
a.startAct();
var u = cc.moveTo(.3, h).easing(cc.easeBackOut()), d = cc.scaleTo(.3, .75).easing(cc.easeBackOut()), p = cc.spawn(u, d), f = cc.jumpBy(.2, cc.v2(0, 0), 50, 1), m = cc.callFunc(function() {
if (t.model) {
var e = t.model.GUN_POS[i.pos], s = e[0] - o.x, n = CC_DESIGN_RESOLUTION.height - e[1] - o.y, a = Math.sqrt(Math.pow(s, 2) + Math.pow(n, 2)) / 500, r = cc.delayTime(.3), l = cc.moveTo(a, cc.v2(cc.v2(e[0] - CC_DESIGN_RESOLUTION.width / 2, CC_DESIGN_RESOLUTION.height / 2 - e[1]))).easing(cc.easeBackIn()), c = cc.scaleTo(a, .5).easing(cc.easeBackIn()), h = cc.spawn(l, c), u = cc.callFunc(function() {
t.pushPool("CURRENCY_DROP_ANIM", o);
});
o.runAction(cc.sequence(r, h, u));
}
});
o.runAction(cc.sequence(p, f, m));
}, a = 0; a < s; a++) o(a);
var r = e.goldDrop || 1, l = "Gold_down";
r > 100 && r <= 500 ? l = "Gold_down_more" : r > 500 && (l = "Get_more_gold");
this.playEffectSound(l);
},
_addDropLabel: function(e) {
var t = this, i = null;
(i = this.getPoolSize("CURRENCY_DROP_FONT") > 0 ? this.popPool("CURRENCY_DROP_FONT") : cc.instantiate(this.hitAwardNum)).getComponent("hitAwardNum").setData(e);
i.parent = this.dropLayer;
var s = 35;
i.angle = 0;
if (this.model.isRotate()) {
i.angle = -180;
s = -s;
}
i.x = e.x - CC_DESIGN_RESOLUTION.width / 2;
i.y = CC_DESIGN_RESOLUTION.height / 2 - e.y + s;
i.scale = 0;
i.opacity = 255;
ActionUtils.sequence(i, cc.scaleTo(.4, 1.2).easing(cc.easeBackOut()), cc.delayTime(.7), cc.fadeOut(.3), cc.callFunc(function() {
t.pushPool("CURRENCY_DROP_FONT", i);
}));
},
_addTreasureDrop: function(e) {
var t = this;
TypeUtils.isRealNull(e.isTargetPos);
var i = e.x + 0, s = e.y + 0, n = this.model.getPlayerInfo(e.roleId), o = null;
(o = this.getPoolSize("CURRENCY_DROP_ITEM") > 0 ? this.popPool("CURRENCY_DROP_ITEM") : cc.instantiate(this.dropAward)).parent = this.dropLayer;
o.getComponent("catchAwardDrop").init({
model: this.model,
x: i,
y: s,
itemId: e.itemId,
pos: n.pos,
icon: e.icon || "card_big",
amount: e.treasure,
delayTime: e.delayTime || 1,
callback: function() {
t.pushPool("CURRENCY_DROP_ITEM", o);
}
});
this.playEffectSound("Daoju_down");
},
_addBigFishTips: function(e) {},
handleEnterFrozen: function(e, t) {
if (TypeUtils.isRealNull(this._frozenAni)) {
this._frozenAni = FishUtils.playSpine({
ani: "animation",
zorder: -1,
x: 0,
y: 0,
isLoop: !1,
path: "module/fish/spine/bd/by_bd"
}, this.bulletLayer);
if (!t) for (var i in this.fishTb) if (this.fishTb.hasOwnProperty(i) && !TypeUtils.isRealNull(this.fishTb[i])) {
this.fishTb[i].pauseAnime();
}
this.playEffectSound("BingDong");
} else this._frozenAni.spine.setAnimation(0, "animation", !1);
},
handleCancelFrozen: function(e) {
if (!TypeUtils.isRealNull(this._frozenAni)) {
this._frozenAni.destroy();
this._frozenAni = null;
}
for (var t in this.fishTb) if (this.fishTb.hasOwnProperty(t) && !TypeUtils.isRealNull(this.fishTb[t])) {
this.fishTb[t].resumeAnime();
}
},
handlerGameEventEnterBackground: function() {
this.catchFishUI.stopAutoFire();
this.catchFishUI.stopAim();
this.onBackGroudFish();
},
handlerGameEventEnterForeground: function() {},
showGolds: function(e) {
if (!this.model.isItemJade(e.itemId)) {
var t = this.model.getPlayerInfo(e.roleId), i = Math.floor(e.goldDrop / 50), s = e.goldDrop % 50, n = e.gold / e.goldDrop;
s > 0 && (i += 1);
var o = t.pos;
this.model.isRotate() && (1 == o ? o = 3 : 2 == o ? o = 4 : 3 == o ? o = 1 : 4 == o && (o = 2));
for (var a = 0; a < i; a++) {
if (a == i - 1 && s > 0) {
this.addGoldsQueue({
gold: s * n,
pos: o,
bet: s
});
break;
}
this.addGoldsQueue({
gold: 50 * n,
pos: o,
bet: 50
});
}
}
},
addGoldsQueue: function(e) {
TypeUtils.isRealNull(this.goldsQuene[e.pos]) && (this.goldsQuene[e.pos] = []);
this.goldsQuene[e.pos].push(e);
},
popGoldsQueue: function(e) {
this.goldsQueneTime = this.goldsQueneTime + e;
if (this.goldsQueneTime > .25) {
for (var t in this.goldsQuene) if (this.goldsQuene.hasOwnProperty(t)) {
var i = this.goldsQuene[t];
if (i.length > 0) {
var s = ArrayUtils.remove(i, 0, 1);
this._addGoldsDrop(s[0]);
}
}
this.goldsQueneTime = 0;
}
},
delGoldsQueue: function(e) {
if (!TypeUtils.isRealNull(e)) {
this.model.isRotate() && (1 == e ? e = 3 : 2 == e ? e = 4 : 3 == e ? e = 1 : 4 == e && (e = 2));
if (this.goldsQuene[e]) {
this.goldsQuene[e] = null;
delete this.goldsQuene[e];
}
}
},
_addGoldsDrop: function(e) {
var t = this, i = null;
if (this.getPoolSize("GOLD_COIN_PILLAR") > 0) i = this.popPool("GOLD_COIN_PILLAR"); else {
(i = cc.instantiate(this.goldPillar)).gold = this.seekC(i, "gold");
i.text = this.seekC(i, "txtNum");
}
i.parent = this._dropLayer;
var s = 1, n = 1;
if (1 == e.pos) {
i.x = 50 - display.width / 2;
i.y = display.height / 2 - 75;
i.gold.y = 150;
n = -1;
} else if (2 == e.pos) {
i.x = display.width / 2 - 50;
i.y = display.height / 2 - 75;
i.gold.y = 150;
s = -1;
n = -1;
} else if (3 == e.pos) {
i.x = display.width / 2 - 50;
i.y = 75 - display.height / 2;
i.gold.y = -150;
s = -1;
} else if (4 == e.pos) {
i.x = 50 - display.width / 2;
i.y = 75 - display.height / 2;
i.gold.y = -150;
}
var o = cc.delayTime(.2), a = cc.moveBy(1.5, cc.v2(170 * s, 0)), r = cc.callFunc(function() {
i.text.active = !1;
t.pushPool("GOLD_COIN_PILLAR", i);
});
i.runAction(cc.sequence(o, a, r));
var l = Math.min(30, e.bet), c = Math.ceil(e.gold);
i.gold.runAction(cc.sequence(cc.moveBy(.2, cc.v2(0, 150 * n * l / 30)), cc.callFunc(function() {
i.text.active = !0;
i.text.y = 1 == n ? 150 * l / 30 - 65 : 150 - 150 * l / 30 - 95;
i.text.getComponent(cc.Label).string = c;
})));
},
onBackGroudFish: function() {},
handleFishChange: function(e) {
var t = e.data, i = this.fishTb[t.fishId];
if (!TypeUtils.isRealNull(i)) {
i.updateDropGold(t.goldDrop);
i.playPokerColor(t.color);
}
},
handleWarheadAimGoldFish: function(e) {
var t = this.model.isAimGoldFish();
TypeUtils.isRealNull(t) || this._stopAim(this.roleId);
for (var i in this.fishTb) if (this.fishTb.hasOwnProperty(i)) {
var s = this.fishTb[i];
s.isAlive() && s.updateWarheadEffect();
}
},
getGhostFishNum: function() {
var e = 0;
for (var t in this.fishTb) if (this.fishTb.hasOwnProperty(t)) {
var i = this.fishTb[t];
TypeUtils.isRealNull(i) || !i.isGoldFish() && !i.isWangLingFish() || (e += 1);
}
return e;
},
handleUpdateMatchTaskStatus: function(e) {
e.data;
for (var t in this.fishTb) if (this.fishTb.hasOwnProperty(t)) {
var i = this.fishTb[t];
i.isAlive() && i.updateMatchTaskFlag();
}
},
handleUpdateFishSkill: function(e) {
this.skillIdx = this.skillIdx + 1;
this.fishSkills[this.skillIdx] = e.data;
},
handleKylinTouchEnded: function(e) {
var t = e.data, i = [];
for (var s in this.fishTb) if (this.fishTb.hasOwnProperty(s)) {
var n = this.fishTb[s], o = n.node.x, a = n.node.y, r = o - t.x, l = a - t.y;
r * r + l * l < 34225 && i.push(s);
}
var c = i.length > 0;
this.model.handleKylinTouchResult(c);
if (c) {
var h = {
posX: Math.floor(t.x),
posY: Math.floor(t.y),
direction: this.model.isRotate() ? 1 : 0,
fishList: i
};
this.ctrl.endQiLinBaoDian(h);
}
},
handleKylinBaoDian: function(e) {
var t = e.data;
if (!TypeUtils.isRealNull(t)) {
var i = t.targePosX || 0;
t.targePosY || display.height;
(this.model.isRotate() ? 1 : 0) != t.direction && (i = display.width - i);
for (var s = 0; s < t.hitFishList.length; s++) {
var n = t.hitFishList[s], o = this.fishTb[n];
if (!TypeUtils.isRealNull(o)) {
o.setBodyColor(cc.c3b(255, 76, 0));
o.playDie();
this._removeFish(o);
}
}
}
},
handleWarheadsDrop: function(e) {
for (var t = this, i = e.data, s = function() {
if (!(TypeUtils.isRealNull(i) || i.allNum <= 0)) {
for (var e, s, n = 0; n < i.allNum; n++) {
if (n * (n + 2) >= i.allNum) {
e = n;
break;
}
}
s = e + 2;
for (var o = 1, a = 1, r = display.cx - 100 * s / 2 + 50, l = display.cy + 100 * e / 2 - 50, c = 0; c < i.itemList.length; c++) {
for (var h = i.itemList[c], u = 0; u < h.amount; u++) {
var d = r + (o - 1) % s * 100, p = l - 100 * Math.floor((o - .5) / s);
t.showDropSpecialItem({
roleId: h.roleId,
x: d,
y: p,
itemId: h.itemId,
amount: 1,
isTargetPos: !0,
delayTime: 4
});
o += 1;
}
t.catchFishUI.showGainWarheadsNumEffect(h, 105 * (a - 1));
a += 1;
}
}
}, n = !1, o = i.fishList || [], r = 0; r < o.length; r++) {
var l = o[r];
if (this.model.isNaJiaFish(l)) {
n = !0;
this.catchFishUI.showWaitTips({
roleId: i.roleId,
fishType: v,
state: !0
});
this.marqueeModel.changeWaitState(a.WaitType.NaJia, !0);
this.delayTimer(function() {
t.catchFishUI.showWaitTips({
roleId: i.roleId,
fishType: v,
state: !1
});
t.marqueeModel.changeWaitState(a.WaitType.NaJia, !1);
s();
}, 12);
break;
}
}
n || s();
},
onExit: function() {
for (var e in this.fishTb) if (this.fishTb.hasOwnProperty(e)) {
this.fishTb[e].destroy();
delete this.fishTb[e];
}
this.fishTb = {};
}
});
cc._RF.pop();
}, {
CatchFishConst: "CatchFishConst",
ManagerEnum: "ManagerEnum",
MarqueeConst: "MarqueeConst"
} ],
chargeCarnivalView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "4acfcP4vKBG3LPG6LIV5Oh4", "chargeCarnivalView");
var s = e("ShopConst"), n = e("ItemConst");
cc.Class({
extends: ViewBase,
properties: {
sprTitle: cc.Node,
btnClose: cc.Node,
txtDate: cc.Label,
txtNum: cc.Label,
spBox: cc.Node,
btnLeft: cc.Node,
btnRight: cc.Node,
btnBuy: cc.Node,
txtBuy: cc.Node,
sprTips: cc.Node,
giftItem: cc.Prefab
},
onAdapt: function() {
AdaptUtils.AdaptNodeToHWAdapt(this.node);
},
onCreate: function(e) {
this.initData(e);
this.initEvent();
this.initUI();
},
initData: function(e) {
this.ctrl = app.ctrls.shop;
this.model = this.ctrl.getModel();
this.shopInfos = this.model.getShopData(s.Shop_Carnival) || [];
ArrayUtils.sort(this.shopInfos, function(e, t) {
return e.rank - t.rank;
});
},
initEvent: function() {
this.eventOn(this.model.EVENT_SHOP_INFO_UPDATE, this.handleShopInfoUpdate.bind(this));
},
initUI: function() {
var e = this;
this.onClick(this.btnClose, function() {
ViewManager.closeView(e);
});
this.onClick(this.btnBuy, this.onClickCharge.bind(this));
this.onClick(this.btnLeft, this.onClickPrior.bind(this));
this.onClick(this.btnRight, this.onClickNext.bind(this));
this.goodsList = [];
for (var t = 0; t < 6; t++) {
var i = cc.instantiate(this.giftItem);
i.parent = this.node;
i.x = t % 3 * 140 - 30;
i.y = t > 2 ? -110 : 20;
i.script = i.getComponent("bubbleItem");
this.goodsList.push(i);
}
this.txtDate.string = "每日凌晨0点更新";
this.freshIndex();
this.freshChargeInfo();
},
onClickCharge: function() {
var e = this.shopInfos[this.currIdx];
TypeUtils.isRealNull(e) || (TypeUtils.isRealNull(e.chargePrice) ? ItemUtils.isEnough(e.price) && this.ctrl.buyGoods(e.id, 1) : AppUtils.addOrder(e.id));
},
onClickPrior: function() {
if (this.currIdx > 0) {
this.currIdx = this.currIdx - 1;
this.freshChargeInfo();
}
},
onClickNext: function() {
if (this.currIdx < 5) {
this.currIdx = this.currIdx + 1;
this.freshChargeInfo();
}
},
freshChargeInfo: function() {
this.btnLeft.active = 0 != this.currIdx;
this.btnRight.active = 5 != this.currIdx;
SpriteUtils.setTexture({
path: "module/fish/texture/chargeCarnival/czjnh_title_0" + (this.currIdx + 1)
}, this.sprTitle, this);
for (var e = this.shopInfos[this.currIdx] || {}, t = "", i = [], s = e.goods || [], o = 0; o < s.length; o++) {
var a = s[o];
if (a.itemId == n.ResourceType.Gold) if (TypeUtils.isRealNull(a.random)) {
t = NumberUtils.toString(a.amount) + "金币";
} else {
var r = NumberUtils.toString(a.random[0]), l = NumberUtils.toString(a.random[1]);
t = cc.js.formatStr("%s-%s金币", r, l);
} else i.push({
award: [ a ]
});
}
this.txtNum.string = t;
var c = !0, h = "立即获得", u = cc.color(204, 96, 0, 255);
if (!TypeUtils.isRealNull(e.buyCounting) && CountingUtils.getRemainUsingCount(e.buyCounting) <= 0) {
c = !1;
u = cc.color(90, 90, 90, 255);
h = "已领取";
} else if (this.currIdx > this.canBuyIdx) {
c = !1;
u = cc.color(90, 90, 90, 255);
}
this.spBox.active = c;
this.sprTips.active = c;
this.btnBuy.getComponent(cc.Button).interactable = c;
this.txtBuy.getComponent(cc.Label).string = h;
this.txtBuy.getComponent(cc.LabelOutline).color = u;
for (var d = 0; d < this.goodsList.length; d++) {
var p = this.goodsList[d], f = i[d];
if (TypeUtils.isRealNull(f)) p.active = !1; else {
p.active = !0;
p.script.setData(f);
}
}
},
freshIndex: function() {
this.currIdx = -1;
this.canBuyIdx = 6;
for (var e = 0; e < 6; e++) {
var t = this.shopInfos[e] || {};
if (TypeUtils.isRealNull(t.buyCounting) || CountingUtils.getRemainUsingCount(t.buyCounting) > 0) {
this.currIdx = e;
this.canBuyIdx = e;
break;
}
}
-1 == this.currIdx && (this.currIdx = 5);
},
handleShopInfoUpdate: function() {
this.freshIndex();
this.freshChargeInfo();
}
});
cc._RF.pop();
}, {
ItemConst: "ItemConst",
ShopConst: "ShopConst"
} ],
checkPwdView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "04d73du879DDL/sp2CwRzzs", "checkPwdView");
cc.Class({
extends: ViewBase,
properties: {
inputPwd: cc.Node,
btnSure: cc.Node,
prefabBg: cc.Prefab
},
onCreate: function(e) {
var t = this;
this.config = e || {};
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(600, 420)
});
this.comBg.getComponent("comBasePopView").setTitle("提 示");
this.initData();
this.initEvent();
this.initView();
},
initData: function() {
this.ctrl = app.ctrls.role;
this.model = this.ctrl.getModel();
},
initEvent: function() {
this.eventOn(this.model.EVENT_CHECK_SECOND_PWD_SUCCESS, this.handlerCheckSuccess, this);
},
initView: function() {
var e = this;
this.onClick(this.btnSure, function() {
var t = e.inputPwd.getComponent(cc.EditBox).string;
t.length < 6 ? TipsUtils.showTips("密码长度不少于6位") : e.ctrl.checkSecondPwd(t);
});
},
handlerCheckSuccess: function() {
TypeUtils.isFunction(this.config.callback) && this.config.callback();
this.model.setCheckPwdStatue(!0);
ViewManager.closeView(this);
}
});
cc._RF.pop();
}, {} ],
clubApplyInfo: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "98c8536swpJkrEoiGW2YlAi", "clubApplyInfo");
var s = e("List");
cc.Class({
extends: ViewBase,
properties: {
nodeNoApply: cc.Node,
scrollNode: cc.Node,
listApply: s,
prefabBg: cc.Prefab
},
onCreate: function(e) {
var t = this;
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(830, 588)
});
this.comBg.getComponent("comBasePopView").setTitle("申请信息");
this.comBg.getComponent("comBasePopView").showBgType(3);
this.initData();
this.initEvent();
this.initUI(e);
},
initData: function() {
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
var e = this.model.getClubInfo();
this.ctrl.requireUnionApplicants(e.unionId);
},
initEvent: function() {
this.eventOn(this.model.EVENT_FISH_CLUB_APPLY_INFO_LIST, this.onApplyInfoList.bind(this));
this.eventOn(this.model.EVENT_FISH_APPROVE_MEMBER, this.onApproveMember.bind(this));
},
initUI: function(e) {
var t = this.model.getUnionApplicants();
if (!TypeUtils.isArray(t) || t.length <= 0) {
this.nodeNoApply.active = !0;
this.scrollNode.active = !1;
} else {
this.nodeNoApply.active = !1;
this.scrollNode.active = !0;
this.canAction = !0;
this.initScrollview();
}
},
initScrollview: function() {
var e = this.model.getUnionApplicants() || [];
ArrayUtils.sort(e, function(e, t) {
return e.applicantTime - t.applicantTime;
});
this.applyList = e;
this.listApply.numItems = this.applyList.length;
this.listApply.scrollTo(0, .02);
},
onListRender: function(e, t) {
var i = this, s = DicUtils.copy(this.applyList[t]);
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("clubApplyItem"));
s.ctrl = this.ctrl;
e.script.setData(s);
e.stopAllActions();
e.scale = 1;
if (this.canAction) {
e.scale = 0;
ActionUtils.sequence(e, cc.delayTime(.05 * t), cc.scaleTo(.1, 1.1), cc.scaleTo(.05, 1), cc.callFunc(function() {
i.canAction = !1;
}));
}
},
onApplyInfoList: function() {
this.initScrollview();
},
onApproveMember: function() {
this.initScrollview();
var e = this.model.getClubInfo();
this.ctrl.requestUnionMembers(e.unionId);
}
});
cc._RF.pop();
}, {
List: "List"
} ],
clubApplyItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "895f1xXoN5KDJuW0VxBvRjT", "clubApplyItem");
var s = e("BaseComponent");
e("ClubConst");
cc.Class({
extends: s,
properties: {
txtName: cc.Label,
txtVip: cc.Label,
txtGunLv: cc.Label,
btnNo: cc.Node,
btnYes: cc.Node
},
onLoad: function() {
this.initData();
this.initUI();
},
initData: function() {},
initUI: function() {
this.txtName.string = "无";
this.txtVip.string = "VIP0";
this.txtGunLv.string = "0";
},
setData: function(e) {
var t = this;
this.config = e;
this.ctrl = e.ctrl;
this.model = this.ctrl.getModel();
var i = this.model.getClubInfo();
this.txtName.string = e.nickname;
this.txtVip.string = "VIP" + e.vipLevel;
this.txtGunLv.string = e.forgeLevel;
this.onClick(this.btnNo, function() {
t.ctrl.requireApproveMember({
unionId: i.unionId,
roleId: e.roleId,
approve: !1
});
t.model.removeOneUnionApplicant(e);
});
this.onClick(this.btnYes, function() {
t.ctrl.requireApproveMember({
unionId: i.unionId,
roleId: e.roleId,
approve: !0
});
t.model.removeOneUnionApplicant(e);
});
if (this.model.isIamMaster() || this.model.isIamViceMaster()) {
this.btnYes.active = !0;
this.btnNo.active = !0;
} else {
this.btnYes.active = !1;
this.btnNo.active = !1;
}
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
ClubConst: "ClubConst"
} ],
clubApplyView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "fab1fPlCDdDBbdoVpfPWHKD", "clubApplyView");
var s = e("List");
cc.Class({
extends: ViewBase,
properties: {
nodeNoClub: cc.Node,
scrollList: cc.Node,
listClub: s,
btnInvite: cc.Node,
btnCreate: cc.Node,
editClub: cc.Node,
btnSeach: cc.Node,
prefabBg: cc.Prefab
},
onCreate: function(e) {
e = e || {};
this.initData();
this.initEvent();
this.initUI(e);
if ("NO" != (UserUtils.getRoleVal(UserDefaultConst.UserNotFirstTimeClickClub) || "NO")) {
UserUtils.setRoleVal(UserDefaultConst.UserNotFirstTimeClickClub, "YES");
ActionUtils.callOnce(this.node, function() {
ViewManager.showView("CLUB_INVITE_VIEW");
}, 1);
}
},
initData: function() {
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
this.ctrl.requestUnionList();
},
initEvent: function() {
this.eventOn(this.model.EVENT_FISH_CLUB_CREATE_CLUB, this.onCreateClub.bind(this));
this.eventOn(this.model.EVENT_FISH_CLUB_LIST, this.onClubList.bind(this));
this.eventOn(this.model.EVENT_FISH_CLUB_SEARCH_CLUB, this.onSearchClub.bind(this));
this.eventOn(this.model.EVENT_FISH_CLUB_APPLY_CLUB, this.onApplyClub.bind(this));
},
initUI: function(e) {
var t = this;
this.tabIndex = -1;
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBaseView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBaseView").setTitle({
type: 1,
path: "module/fish/texture/fishClub/gh_title_01",
bgType: 1
});
this.onClick(this.btnCreate, function() {
ViewManager.showView("CLUB_CREATE_VIEW");
});
this.onClick(this.btnSeach, function() {
var e = t.editClub.getComponent(cc.EditBox).string;
TypeUtils.isAllNull(e) ? TipsUtils.showTips("请输入公会ID") : t.ctrl.requireSearchClub(e);
});
this.onClick(this.btnInvite, function() {
ViewManager.showView("CLUB_INVITE_VIEW");
});
this.canAction = !0;
},
freshListView: function(e) {
this.listData = e || [];
this.nodeNoClub.active = this.listData.length <= 0;
this.scrollList.active = this.listData.length > 0;
this.listClub.numItems = this.listData.length;
},
onListRender: function(e, t) {
var i = this, s = this.listData[t];
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("clubListItem"));
e.script.setData(s);
e.stopAllActions();
e.scale = 1;
if (this.canAction) {
e.scale = 0;
ActionUtils.sequence(e, cc.delayTime(.05 * t), cc.scaleTo(.1, 1.1), cc.scaleTo(.05, 1), cc.callFunc(function() {
i.canAction = !1;
}));
}
},
onCreateClub: function(e) {
ViewManager.closeView(this);
},
onApplyClub: function(e) {
var t = this.model.getUnionList();
this.freshListView(t);
},
onClubList: function(e) {
var t = this.model.getUnionList();
this.freshListView(t);
this.listClub.scrollTo(0, .02);
this.canAction = !0;
},
onSearchClub: function(e) {
this.freshListView([ e.data ]);
this.listClub.scrollTo(0, .02);
}
});
cc._RF.pop();
}, {
List: "List"
} ],
clubCreateView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "761ffgtKF1He6pDz8qhaSKm", "clubCreateView");
cc.Class({
extends: ViewBase,
properties: {
editCode: cc.Node,
editName: cc.Node,
btnSure: cc.Node,
prefabBg: cc.Prefab
},
onCreate: function(e) {
var t = this;
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(570, 400)
});
this.comBg.getComponent("comBasePopView").setTitle("创建公会");
this.initData();
this.initEvent();
this.initUI();
},
initData: function() {
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
},
initEvent: function() {
this.eventOn(this.model.EVENT_FISH_CLUB_CREATE_CLUB, this.onCreateClub.bind(this));
},
initUI: function() {
var e = this;
this.onClick(this.btnSure, function() {
var t = e.editCode.getComponent(cc.EditBox).string, i = e.editName.getComponent(cc.EditBox).string;
TypeUtils.isAllNull(t) ? TipsUtils.showTips("创建码不可为空~") : TypeUtils.isAllNull(i) ? TipsUtils.showTips("公会名称不可为空~") : e.checkChineseWordLen(i) ? e.ctrl.requestCreateClub({
unionName: i,
introduction: "会长说了，随便玩......",
createCode: t
}) : TipsUtils.showTips("必须有汉字!");
});
},
onCreateClub: function(e) {
ViewManager.closeView("CLUB_APPLY_VIEW");
ViewManager.closeView(this);
},
checkChineseWordLen: function(e) {
return !!/.*[\u4e00-\u9fa5]+.*$/.test(e);
}
});
cc._RF.pop();
}, {} ],
clubDepotAccess: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "f9126jSOPRDPIkrSnIbovKW", "clubDepotAccess");
var s = e("ClubConst");
cc.Class({
extends: ViewBase,
properties: {
sprItem: cc.Node,
sprIcon: cc.Node,
txtNum: cc.Label,
nodeNum: cc.Node,
txtNumDes: cc.Label,
editNum: cc.Node,
btnSub: cc.Node,
btnAdd: cc.Node,
btnMax: cc.Node,
nodeCode: cc.Node,
editCode: cc.Node,
btnCopy: cc.Node,
nodePlayer: cc.Node,
editRoleId: cc.Node,
btnHistory: cc.Node,
checkBox: cc.Node,
nodeTake: cc.Node,
txtSender: cc.Label,
txtReceiver: cc.Label,
txtTimer: cc.Label,
btnSure: cc.Node,
seleScroll: cc.Prefab,
prefabBg: cc.Prefab
},
onCreate: function(e) {
var t = this;
e = e || {};
this.type = e.type || s.AccessType.Save;
this.itemData = e.itemData || {};
this.maxNum = this.itemData.amount;
TypeUtils.isRealNull(this.itemData.maxSaveTime) || (this.remainTime = Math.floor(this.itemData.maxSaveTime - TimeUtils.getServerTime()));
this.selectItemNum = 1;
this.isSelfPlayer = !1;
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(630, 450)
});
this.comBg.getComponent("comBasePopView").setTitle(this.type == s.AccessType.Save ? "存 入" : "取 出");
this.initData();
this.initEvent();
this.initUI();
},
initData: function() {
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
this._shopModel = app.ctrls.shop.getModel();
},
initEvent: function() {
this.eventOn(this.model.EVENT_FISH_CLUB_DEPOT_LATELY_RECORD, this.onClubDepotPutInRecord.bind(this));
this.eventOn(this.model.EVENT_FISH_CLUB_DEPOT_PUTIN_REMAIN_COUNT, this.onClubDepotPutInRemainCount.bind(this));
this.eventOn(this.model.EVENT_FISH_CLUB_DEPOT_TAKE_REMAIN_COUNT, this.onClubDepotTakeRemainCount.bind(this));
this.eventOn(this.model.EVENT_FISH_CLUB_DEPOT_SAVE_AND_TAKE_SUCCESS, this.onClubDepotSaveAndTakeSuccess.bind(this));
},
initUI: function() {
var e = this;
this.nodeNum.active = !1;
this.nodeCode.active = !1;
this.nodePlayer.active = !1;
this.nodeTake.active = !1;
if (this.type == s.AccessType.Save) {
this.nodeNum.active = !0;
this.nodeCode.active = !0;
this.nodePlayer.active = !0;
this.btnCopy.active = !0;
this.checkBox.on("toggle", this.onClickCheckBox, this);
this.toggleBox = this.checkBox.getComponent(cc.Toggle);
this.toggleBox.isChecked = this.isSelfPlayer;
this.onClick(this.btnHistory, this.onClickHistory.bind(this));
this.onClick(this.btnCopy, this.onClickBtnCopy.bind(this));
this.filterListView = cc.instantiate(this.seleScroll);
this.filterListView.parent = this.node;
this.filterListView.zIndex = 999;
this.filterListView.script = this.filterListView.getComponent("itemScrollView");
this.filterListView.script.setSize(cc.size(250, 200));
this.editRoleId.active = this.isSelfPlayer;
} else {
this.nodeNum.active = !0;
this.nodeCode.active = !0;
this.btnCopy.active = !1;
this.nodeTake.active = !0;
this.txtSender.string = cc.js.formatStr("存入者：%s(ID:%s)", this.itemData.senderName, this.itemData.senderId);
TypeUtils.isAllNull(this.itemData.receiverName) ? this.txtReceiver.string = "取出者：无" : this.txtReceiver.string = cc.js.formatStr("取出者：%s(ID:%s)", this.itemData.receiverName, this.itemData.receiverId);
this.txtTimer.string = "取出倒计时：" + TimeUtils.getTimeForm(this.remainTime);
}
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(this.itemData.itemId),
callback: function() {
SpriteUtils.setAdaptContentSize(e.sprIcon, null, 95);
}
}, this.sprIcon, this);
this.txtNum.string = "X" + (this.itemData.amount || 0);
this.editNum.getComponent(cc.EditBox).string = this.selectItemNum;
this.onClick(this.btnSub, this.onClickSubItem.bind(this));
this.onClick(this.btnAdd, this.onClickAddItem.bind(this));
this.onClick(this.btnMax, this.onClickMaxItem.bind(this));
this.onClick(this.btnSure, this.onClickSure.bind(this));
},
onClickHistory: function() {
var e = this.btnHistory.convertToWorldSpaceAR(cc.v2(-140, -20));
this.filterListView.script.onShowView(e);
},
onClickBtnCopy: function() {
var e = this.editCode.getComponent(cc.EditBox).string;
AppUtils.getPlatform().copy(e);
TipsUtils.showTips("复制成功！");
},
onClickSubItem: function() {
this.selectItemNum = this.selectItemNum - 1;
this.updateSelectItemNum();
},
onClickAddItem: function() {
this.selectItemNum = this.selectItemNum + 1;
this.updateSelectItemNum();
},
onClickMaxItem: function() {
this.selectItemNum = this.maxNum;
this.updateSelectItemNum();
},
updateSelectItemNum: function() {
this.selectItemNum = this.selectItemNum <= 1 ? 1 : this.selectItemNum;
this.selectItemNum = this.selectItemNum >= this.maxNum ? this.maxNum : this.selectItemNum;
this.editNum.getComponent(cc.EditBox).string = this.selectItemNum;
},
updateMemberList: function(e) {
for (var t = this, i = RoleUtils.getRoleId(), s = [], n = 0; n < e.length; n++) {
var o = e[n];
o.receiverId != i && s.push({
receiverId: o.receiverId,
receiverName: o.receiverName,
desc: cc.js.formatStr("%s(ID:%s)", o.receiverName, o.receiverId)
});
}
this.filterListView.script.setData(s);
this.filterListView.script.setSelectCb(function(e) {
t.editRoleId.getComponent(cc.EditBox).string = s[e].receiverId;
});
},
onClickCheckBox: function(e) {
this.isSelfPlayer = e.isChecked;
this.editRoleId.active = e.isChecked;
e.isChecked && this.ctrl.getLatelyRecord();
},
onClubDepotPutInRecord: function(e) {
this.updateMemberList(e.data.list || []);
},
onSaveEditEnd: function(e) {
this.selectItemNum = Number(e.string || 0);
this.updateSelectItemNum();
},
onRoleIdEditEnd: function(e) {
var t = Number(e.string || 0);
if (Number(RoleUtils.getRoleId()) == t) {
this.editRoleId.getComponent(cc.EditBox).string = "";
TipsUtils.showTips("不能指定自己哦~");
}
},
onClickSure: function(e) {
if (this.type == s.AccessType.Save) {
if (this._shopModel.getFishMonthCardDaysRemain() <= 0) {
ViewManager.showView("CARD_GIFT_VIEW");
TipsUtils.showTips(_LANG("CLUB_DEPOT_OPEN_ERROR_TIPS"));
return;
}
this.recviveCode = this.editCode.getComponent(cc.EditBox).string;
if (!TypeUtils.isAllNull(this.recviveCode) && this.recviveCode.length < 6) {
TipsUtils.showTips(_LANG("UNION_DEPOT_CODE_ERROR"));
return;
}
var t = {
itemId: this.itemData.itemId,
amount: this.selectItemNum,
recviveCode: this.recviveCode
};
this.receiverId = null;
if (this.isSelfPlayer) {
var i = this.editRoleId.getComponent(cc.EditBox).string;
if (TypeUtils.isAllNull(i)) {
TipsUtils.showTips("请输入玩家ID");
return;
}
this.receiverId = Number(i);
t.receiverId = this.receiverId;
}
this.ctrl.getPutinRemainCount(t);
} else {
if (this.itemData.senderId != RoleUtils.getRoleId() && "" != this.itemData.recviveCode) {
this.recviveCode = this.editCode.getComponent(cc.EditBox).string;
if ("" == this.recviveCode) {
TipsUtils.showTips("请输入取出码~");
return;
}
}
this.ctrl.getTakeRemainCount(this.itemData.warehouseItemId);
}
},
onClubDepotPutInRemainCount: function(e) {
if (e.data.errorCode == SystemError.success) {
var t = e.data.data;
this.requestPutInDepot(t);
} else {
this.editRoleId.getComponent(cc.EditBox).string = "";
ViewManager.showErrorMsg(e.data.errorCode);
}
},
requestPutInDepot: function(e) {
var t = this;
if (0 != e.remainCount) if (-1 == e.remainCount || this.selectItemNum <= e.remainCount) {
var i = e.nickname, s = [];
TypeUtils.isRealNull(i) ? s.push({
str: "未指定取出人",
color: "#FF0000"
}) : s.push({
str: "取出人：" + i,
color: "#0C4C88"
});
s.push({
str: cc.js.formatStr("，即将存入%sX%s", ItemUtils.getItemName(this.itemData.itemId), this.selectItemNum),
color: "#0C4C88"
});
var n = StringUtils.getHtmlStr(s);
TipsUtils.showTipsBox({
desc: n,
isHideCloce: !0,
alignType: cc.macro.TextAlignment.CENTER,
sureCallBack: function() {
var e = {
receiverId: t.receiverId,
amount: t.selectItemNum,
itemId: t.itemData.itemId,
recviveCode: t.recviveCode
};
t.ctrl.putIntoUnionWarehouse(e);
}
});
} else {
this.maxNum = e.remainCount < this.itemData.amount ? e.remainCount : this.itemData.amount;
this.updateSelectItemNum();
TipsUtils.showTips(cc.js.formatStr("剩余可存入数量为%d~", this.maxNum));
} else TipsUtils.showTips("剩余可存入数量为0~");
},
onClubDepotTakeRemainCount: function(e) {
if (e.data.errorCode == SystemError.success) {
var t = e.data.data;
this.requestTakeDepotItem(t);
} else ViewManager.showErrorMsg(e.data.errorCode);
},
requestTakeDepotItem: function(e) {
if (0 != e) if (-1 == e || this.selectItemNum <= e) {
var t = {
warehouseItemId: this.itemData.warehouseItemId,
amount: this.selectItemNum,
recviveCode: this.editCode.getComponent(cc.EditBox).string
};
this.ctrl.takeOutUnionWarehouse(t);
} else {
this.maxNum = e < this.itemData.amount ? e : this.itemData.amount;
this.updateSelectItemNum();
TipsUtils.showTips(cc.js.formatStr("剩余可存入数量为%d~", this.maxNum));
} else TipsUtils.showTips("剩余可取出数量为0~");
},
onClubDepotSaveAndTakeSuccess: function() {
ViewManager.closeView("CLUB_DEPOT_ACCESS");
},
update: function(e) {
this.remainTime -= e;
this.remainTime < 0 && (this.remainTime = 0);
this.txtTimer.string = "取出倒计时：" + TimeUtils.getTimeForm(this.remainTime);
}
});
cc._RF.pop();
}, {
ClubConst: "ClubConst"
} ],
clubDepotRecord: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "a5253E85ZNEnaVVA1MLKM2P", "clubDepotRecord");
var s = e("ClubConst"), n = e("List");
cc.Class({
extends: ViewBase,
properties: {
btnClose: cc.Node,
toggleLeft: cc.Node,
toggleRight: cc.Node,
txtNoRecord: cc.Node,
listView: n,
btnLast: cc.Node,
btnNext: cc.Node
},
onCreate: function() {
this.initData();
this.initEvent();
this.initUI();
},
initData: function() {
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
this.curPage = 1;
},
requireRecord: function() {
var e = {
flag: this.seleIdx,
page: this.curPage
};
this.ctrl.getUnionWarehouseRecord(e);
},
initEvent: function() {
this.eventOn(this.model.EVENT_FISH_CLUB_DEPOT_RECORD, this.onClubDepotRecord, this);
},
initUI: function() {
var e = this;
this.itemList = [];
this.onClick(this.btnClose, function() {
ViewManager.closeView(e);
});
this.onClick(this.btnLast, this.onClickBtnLast.bind(this));
this.onClick(this.btnNext, this.onClickbtnNext.bind(this));
this.toggleLeft.on("toggle", function() {
e.switchChannel(1);
});
this.toggleRight.on("toggle", function() {
e.switchChannel(2);
});
this.toggleLeft.getComponent(cc.Toggle).isChecked = !0;
this.switchChannel(1);
},
switchChannel: function(e) {
if (e != this.seleIdx) {
this.seleIdx = e;
this.curPage = 1;
this.requireRecord();
}
},
onClickBtnLast: function(e) {
if (this.curPage > 1) {
this.curPage = this.curPage - 1;
this.requireRecord();
}
},
onClickbtnNext: function(e) {
if (TypeUtils.isArray(this.recordListData) && this.recordListData.length >= 20) {
this.curPage = this.curPage + 1;
this.requireRecord();
}
},
updateRecordList: function() {
TypeUtils.isArray(this.recordListData) || (this.recordListData = []);
ArrayUtils.sort(this.recordListData, function(e, t) {
return e.recordTime - t.recordTime;
});
this.txtNoRecord.active = this.recordListData.length <= 0;
this.listView.numItems = this.recordListData.length;
this.listView.scrollTo(0, .02);
},
onRenderEvent: function(e, t) {
var i = this.recordListData[t];
TypeUtils.isRealNull(e.txtDesc) && (e.txtDesc = this.seekChild(e, "txtDesc"));
var n = [];
if (this.seleIdx == s.AccessType.Save) {
n.push({
str: TimeUtils.dateFormat("mm/dd HH:MM\t", i.recordTime),
color: "#2746C2"
});
n.push({
str: cc.js.formatStr("%s(ID:%s)", i.senderName, i.senderId),
color: "FFFFFF",
outline: "#2746C2",
lineSize: 2
});
n.push({
str: "存入",
color: "#2746C2"
});
n.push({
str: cc.js.formatStr("%sX%s", ItemUtils.getItemName(i.itemId), i.amount),
color: "#2746C2"
});
n.push({
str: ",指定人",
color: "#2746C2"
});
i.receiverId && i.receiverId > 0 ? n.push({
str: cc.js.formatStr("%s(ID:%s)", i.receiverName, i.receiverId),
color: "FFFFFF",
outline: "#2746C2",
lineSize: 2
}) : n.push({
str: "无",
color: "#2746C2"
});
} else {
n.push({
str: TimeUtils.dateFormat("mm/dd HH:MM\t", i.recordTime),
color: "#2746C2"
});
n.push({
str: cc.js.formatStr("%s(ID:%s)", i.receiverName, i.receiverId),
color: "FFFFFF",
outline: "#2746C2",
lineSize: 2
});
n.push({
str: "取出",
color: "#2746C2"
});
n.push({
str: cc.js.formatStr("%s(ID:%s)", i.senderName, i.senderId),
color: "FFFFFF",
outline: "#2746C2",
lineSize: 2
});
n.push({
str: "存入的",
color: "#2746C2"
});
n.push({
str: cc.js.formatStr("%sX%s", ItemUtils.getItemName(i.itemId), i.amount),
color: "#2746C2"
});
}
var o = StringUtils.getHtmlStr(n);
e.txtDesc.getComponent(cc.RichText).string = o;
},
onClubDepotRecord: function(e) {
this.recordListData = e.data.list;
this.updateRecordList();
}
});
cc._RF.pop();
}, {
ClubConst: "ClubConst",
List: "List"
} ],
clubDepotView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "ff56dFPn9RPBbkrff+oePx2", "clubDepotView");
var s = e("List"), n = e("ItemConst"), o = e("ClubConst");
cc.Class({
extends: ViewBase,
properties: {
listDepot: s,
txtRecord: cc.Node,
btnRefresh: cc.Node,
listBag: s,
prefabBg: cc.Prefab
},
onCreate: function(e) {
e = e || {};
this.initData();
this.initEvent();
this.initUI(e);
},
initData: function() {
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
this.bagModel = app.ctrls.bag.getModel();
this.ctrl.getUnionWarehouse();
},
initEvent: function() {
this.eventOn(this.model.EVENT_FISH_CLUB_DEPOT_INFO, this.onClubDepotInfo.bind(this));
this.eventOn(this.bagModel.EVENT_UPDATE_BAG_INFO, this.handleUpdateBagInfo.bind(this));
},
initUI: function(e) {
var t = this;
this.tabIndex = -1;
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBaseView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBaseView").setTitle({
type: 0,
str: "仓 库"
});
this.onClick(this.txtRecord, function() {
ViewManager.showView("CLUB_DEPOT_RECORD");
});
this.onClick(this.btnRefresh, function() {
t.ctrl.getUnionWarehouse();
});
this.updateBagInfo();
this.updateDepotInfo();
},
updateBagInfo: function() {
var e = this.bagModel.getBagInfo();
this.bagList = ArrayUtils.filter(e, function(e, t) {
var i = ConfigMgr.getConfig("union_warehouse_config").findByIndex(e.itemId);
if (!TypeUtils.isRealNull(i) && e.amount > 0 && 1 != e.noShow && e.itemId != n.ResourceType.CarnivalConch) return !0;
});
this.listBag.numItems = this.bagList.length;
},
updateDepotInfo: function(e) {
e = e || {};
var t = RoleUtils.getRoleId();
this.depotItemList = e.list || [];
this.depotItemList.length > 0 && ArrayUtils.sort(this.depotItemList, function(e, i) {
return e.senderId == t ? i.senderId == t ? e.maxSaveTime - i.maxSaveTime : -1 : i.senderId == t ? 1 : e.maxSaveTime - i.maxSaveTime;
});
this.listDepot.numItems = this.depotItemList.length;
},
onBagListRender: function(e, t) {
var i = this.bagList[t];
this.freshItem(e, i);
},
onDepotListRender: function(e, t) {
var i = this.depotItemList[t];
this.freshItem(e, i);
},
freshItem: function(e, t) {
var i = this.seekC(e, "sprIcon"), s = this.seekC(e, "txtNum");
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(t.itemId),
isHide: !0,
callback: function() {
SpriteUtils.setAdaptContentSize(i, null, 80);
}
}, i, e);
s.getComponent(cc.Label).string = "X" + t.amount;
},
onBagListSelected: function(e, t, i, s) {
ViewManager.showView("CLUB_DEPOT_ACCESS", null, {
itemData: this.bagList[t],
type: o.AccessType.Save
});
},
onDepotListSelected: function(e, t, i, s) {
ViewManager.showView("CLUB_DEPOT_ACCESS", null, {
itemData: this.depotItemList[t],
type: o.AccessType.Take
});
},
handleUpdateBagInfo: function() {
this.updateBagInfo();
},
onClubDepotInfo: function(e) {
this.updateDepotInfo(e.data);
}
});
cc._RF.pop();
}, {
ClubConst: "ClubConst",
ItemConst: "ItemConst",
List: "List"
} ],
clubHallBuild: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "61f6dXiPzNDvpALmaeLjc0g", "clubHallBuild");
var s = e("List"), n = e("TaskConst");
e("ClubConst");
cc.Class({
extends: ViewBase,
properties: {
sprHead: cc.Node,
btnTips: cc.Node,
btnDetail: cc.Node,
sprUpMen: cc.Node,
sprUpExp: cc.Node,
progExp: cc.Node,
txtClubLv: cc.Label,
txtClubMem: cc.Label,
txtClubExp: cc.Label,
txtClubScoreDesc: cc.Node,
txtClubScore: cc.Node,
txtClubID: cc.Label,
txtTodayOffer: cc.Label,
txtTotalOffer: cc.Label,
listTask: s,
scrollList: cc.Node,
headSelet: cc.Prefab
},
onCreate: function(e) {
ViewBase.prototype.onCreate.call(this, e);
this.initData();
this.initEvent();
this.initUI();
},
onAdapt: function() {},
initRequest: function() {
var e = this.model.getClubInfo();
this.ctrl.requireUnionScoreInfo(e.unionId);
},
initData: function() {
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
this.taskModel = app.ctrls.task.getModel();
},
initEvent: function() {
this.eventOn(this.model.EVENT_FISH_CLUB_CHANGE_HEAD, this.onChangeHead.bind(this));
this.eventOn(this.model.EVENT_FISH_CLUB_UPDATE, this.onClubUpdate.bind(this));
this.eventOn(this.model.EVENT_FISH_CLUB_MY_CLUB_INFO, this.onClubInfo.bind(this));
this.eventOn(this.model.EVENT_FISH_CLUB_SYNC_MY_CONTRIBUTION, this.syncMyContribution.bind(this));
this.eventOn(this.model.EVENT_FISH_CLUB_UP_CLUB_MAX_MEM, this.onUpClubMaxMem.bind(this));
this.eventOn(this.taskModel.EVENT_GET_TASK_AWARD, this.onGetTaskAward.bind(this));
},
initUI: function() {
this.initTop();
this.initMid();
this.canAction = !0;
this.initScrollview();
},
initMid: function() {
var e = this.model.getOneMemberInfo(RoleUtils.getRoleId());
this.txtTodayOffer.string = e.todayContribution;
this.txtTotalOffer.string = e.totalContribution;
},
initTop: function() {
var e = this, t = this.model.getClubInfo();
this.unionAvatar = t.unionAvatar;
this.headList = [];
for (var i = 1; i <= 6; i++) this.headList.push({
image: "module/fish/texture/fishClub/tx_gh_0" + i,
isCom: !0
});
this.headSeleView = cc.instantiate(this.headSelet);
this.headSeleView.parent = this.node;
this.headSeleView.zIndex = 999;
this.headSeleView.script = this.headSeleView.getComponent("headScrollView");
this.headSeleView.script.setData(this.headList, Number(this.unionAvatar) - 1);
this.headSeleView.script.setSelectCb(function(i) {
e.ctrl.requireChangeHead({
unionId: t.unionId,
unionAvatar: i + 1 + ""
});
});
this.onClick(this.sprHead, function() {
if (e.model.isIamMaster()) {
var t = e.sprHead.convertToWorldSpaceAR(cc.v2(0, 0));
e.headSeleView.script.onClickHead(t);
}
});
this.sprUpExp.active = !1;
this.sprUpMen.active = !1;
if (this.model.isIamMaster() || this.model.isIamViceMaster()) {
this.btnDetail.active = !0;
this.onClick(this.btnDetail, function() {
ViewManager.showView("CLUB_SCORE_DETAIL");
});
} else {
this.btnDetail.active = !1;
this.txtClubScoreDesc.active = !1;
this.txtClubScore.active = !1;
this.onClick(this.btnDetail, function() {
TipsUtils.showTips("只有会长才能查看~");
});
}
this.onClick(this.btnTips, function() {
var e = ConfigMgr.getConfig("rule_config").findByIndex("club");
TipsUtils.showTipsBox({
title: "帮 助",
desc: e.content,
signBtn: !0,
isHideCloce: !0,
fontSize: 26,
alignType: cc.macro.TextAlignment.LEFT
});
});
if (!this.model.isIamMaster()) {
this.sprUpExp.active = !1;
this.sprUpMen.active = !1;
}
this.onClick(this.sprUpMen, function() {
var t = e.model.getClubInfo(), i = ConfigMgr.getConfig("union_up_member_config").VOList[0];
t.maxMember != i.memberCountInterval[1] ? ViewManager.showView("CLUB_ADD_MEMBER") : TipsUtils.showTips("已达到人数上限~");
});
this.initTopUI();
},
initTopUI: function() {
var e = this.model.getClubInfo();
this.txtClubLv.string = "LV" + e.level;
this.txtClubMem.string = e.maxMember;
this.txtClubID.string = "ID:" + e.unionId;
SpriteUtils.setTexture({
path: "module/fish/texture/fishClub/tx_gh_0" + e.unionAvatar
}, this.sprHead, this);
this.txtClubScore.getComponent(cc.Label).string = e.myScore;
var t = ConfigMgr.getConfig("union_level_config").findByIndex(e.level + 1), i = 0, s = 0;
if (TypeUtils.isRealNull(t)) ; else {
i = e.unionExp;
s = t.upgradeNeedExp;
this.model.isIamMaster() && (e.unionExp, t.upgradeNeedExp);
}
this.txtClubExp.string = i + "/" + s;
this.progExp.getComponent(cc.ProgressBar).progress = i / s;
},
onClubUpdate: function() {
TipsUtils.showTips("升级成功");
var e = this.model.getClubInfo();
this.ctrl.requestUnionInfo(e.unionId);
},
onClubInfo: function() {
this.initTopUI();
},
syncMyContribution: function() {
this.initMidUI();
},
onGetTaskAward: function() {
this.ctrl.requestUnionInfo();
this.initScrollview();
},
initScrollview: function() {
for (var e = DicUtils.copy(this.taskModel.getFishClubInfo()), t = 0; t < e.length; t++) e[t].status == n.FinishStatus.Finish ? e[t].sort = 100 + e[t].rank : e[t].status == n.FinishStatus.NotFinish ? e[t].sort = 200 + e[t].rank : e[t].status == n.FinishStatus.HasReceive ? e[t].sort = 300 + e[t].rank : e[t].sort = 400 + e[t].rank;
ArrayUtils.sort(e, function(e, t) {
return e.sort - t.sort;
});
this.taskTb = e;
this.listTask.numItems = this.taskTb.length;
this.listTask.scrollTo(0, .02);
},
onListRender: function(e, t) {
var i = this, s = this.taskTb[t];
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("clubTaskItem"));
e.script.setData(s);
e.stopAllActions();
e.scale = 1;
if (this.canAction) {
e.scale = 0;
ActionUtils.sequence(e, cc.delayTime(.05 * t), cc.scaleTo(.1, 1.1), cc.scaleTo(.05, 1), cc.callFunc(function() {
i.canAction = !1;
}));
}
},
onChangeHead: function() {
var e = this.model.getClubInfo();
SpriteUtils.setTexture({
path: "module/fish/texture/fishClub/tx_gh_0" + e.unionAvatar
}, this.sprHead, this);
},
onUpClubMaxMem: function() {
this.initTopUI();
}
});
cc._RF.pop();
}, {
ClubConst: "ClubConst",
List: "List",
TaskConst: "TaskConst"
} ],
clubHallManager: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "7e265vrvKdOI5ACH697jcjS", "clubHallManager");
var s = e("List"), n = e("ClubConst");
cc.Class({
extends: ViewBase,
properties: {
sprHead: cc.Node,
btnApplyInfo: cc.Node,
btnExit: cc.Node,
txtClubName: cc.Label,
txtClubMaster: cc.Label,
txtClubLv: cc.Label,
txtClubMem: cc.Label,
txtClubID: cc.Label,
listMember: s,
scrollList: cc.Node,
headSelet: cc.Prefab
},
onCreate: function(e) {
ViewBase.prototype.onCreate.call(this, e);
this.initData();
this.initEvent();
this.initUI();
this.initRequest();
this.initScrollview();
},
onAdapt: function() {},
initRequest: function() {
var e = this.model.getClubInfo();
this.ctrl.requireUnionApplicants(e.unionId);
},
initData: function() {
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
},
initEvent: function() {
this.eventOn(this.model.EVENT_FISH_CLUB_MEMBER_LIST, this.onMemberList.bind(this));
this.eventOn(this.model.EVENT_FISH_CLUB_CHANGE_HEAD, this.onChangeHead.bind(this));
this.eventOn(this.model.EVENT_FISH_CLUB_APPLY_INFO_LIST, this.onApplyInfoList.bind(this));
this.eventOn(this.model.EVENT_FISH_APPROVE_MEMBER, this.onApproveMember.bind(this));
this.eventOn(this.model.EVENT_FISH_CLUB_KICK_OUT_CLUB, this.onKickOutClub.bind(this));
},
initUI: function() {
var e = this;
this.onClick(this.sprHead, function() {
if (e.model.isIamMaster()) {
var t = e.sprHead.convertToWorldSpaceAR(cc.v2(0, 0));
e.headSeleView.script.onClickHead(t);
}
});
this.onClick(this.btnApplyInfo, function() {
ViewManager.showView("CLUB_APPLY_INFO");
});
this.model.isIamMaster() || this.model.isIamViceMaster() || (this.btnApplyInfo.active = !1);
this.onClick(this.btnExit, function() {
e.model.isIamViceMaster() ? TipsUtils.showTips("副会长不能退出公会") : e.model.isIamMaster() ? TipsUtils.showTips("会长不能解散公会") : TipsUtils.showTipsBox({
desc: config.content,
isHideCloce: !0,
alignType: cc.macro.TextAlignment.CENTER,
sureCallBack: function() {
e.ctrl.requireExitClub(e.model.getClubId());
ViewManager.closeView("CLUB_HALL_VIEW");
}
});
});
this.refreshClubInfo();
},
refreshClubInfo: function() {
var e = this, t = this.model.getClubInfo();
this.unionAvatar = t.unionAvatar;
this.txtClubName.string = t.unionName;
this.txtClubLv.string = "LV" + t.level;
this.txtClubMaster.string = t.creatorName;
this.txtClubMem.string = t.memberNums + "/" + t.maxMember;
this.txtClubID.string = "ID:" + t.unionId;
SpriteUtils.setTexture({
path: "module/fish/texture/fishClub/tx_gh_0" + t.unionAvatar
}, this.sprHead, this);
this.headList = [];
for (var i = 1; i <= 6; i++) this.headList.push({
image: "module/fish/texture/fishClub/tx_gh_0" + i,
isCom: !0
});
this.headSeleView = cc.instantiate(this.headSelet);
this.headSeleView.parent = this.node;
this.headSeleView.zIndex = 999;
this.headSeleView.script = this.headSeleView.getComponent("headScrollView");
this.headSeleView.script.setData(this.headList, Number(this.unionAvatar) - 1);
this.headSeleView.script.setSelectCb(function(i) {
e.ctrl.requireChangeHead({
unionId: t.unionId,
unionAvatar: i + 1 + ""
});
});
},
initScrollview: function() {
var e = this.model.getUnionMembers();
if (!(TypeUtils.isRealNull(e) || e.length <= 0)) {
this.sortTb = [];
for (var t = [], i = [], s = [], o = 0; o < e.length; o++) {
var a = e[o];
a.membershipLevel == n.MemberShipLevel.Master ? t.push(a) : a.membershipLevel == n.MemberShipLevel.ViceMaster ? i.push(a) : a.membershipLevel == n.MemberShipLevel.Member && s.push(a);
}
ArrayUtils.sort(i, function(e, t) {
return e.totalContribution == t.totalContribution ? e.vipLevel - t.vipLevel : e.totalContribution - t.totalContribution;
});
ArrayUtils.sort(s, function(e, t) {
return e.totalContribution == t.totalContribution ? e.vipLevel - t.vipLevel : e.totalContribution - t.totalContribution;
});
ArrayUtils.merge(this.sortTb, t);
ArrayUtils.merge(this.sortTb, i);
ArrayUtils.merge(this.sortTb, s);
this.scrollList.active = !0;
this.listMember.numItems = this.sortTb.length;
this.listMember.scrollTo(0, .02);
this.canAction = !0;
}
},
onListRender: function(e, t) {
var i = this, s = this.sortTb[t];
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("clubMemberItem"));
e.script.setData(s);
e.stopAllActions();
e.scale = 1;
if (this.canAction) {
e.scale = 0;
ActionUtils.sequence(e, cc.delayTime(.05 * t), cc.scaleTo(.1, 1.1), cc.scaleTo(.05, 1), cc.callFunc(function() {
i.canAction = !1;
}));
}
},
onMemberList: function(e) {
this.initScrollview();
},
onChangeHead: function(e) {
e.data.unionAvatar != this.unionAvatar && TipsUtils.showTips("修改成功");
var t = this.model.getClubInfo();
SpriteUtils.setTexture({
path: "module/fish/texture/fishClub/tx_gh_0" + t.unionAvatar
}, this.sprHead, this);
},
onApplyInfoList: function() {
if (this.model.isIamMaster() || this.model.isIamViceMaster()) {
var e = this.model.getUnionApplicants();
TypeUtils.isArray(e) && e.length;
}
},
onApproveMember: function() {
this.onApplyInfoList();
},
onKickOutClub: function() {
this.initScrollview();
}
});
cc._RF.pop();
}, {
ClubConst: "ClubConst",
List: "List"
} ],
clubHallRank: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "4ba6cqUde5I9Ldlvh7hT2Ba", "clubHallRank");
var s = e("List");
cc.Class({
extends: ViewBase,
properties: {
sprHead: cc.Node,
progExp: cc.Node,
txtClubLv: cc.Label,
txtClubMem: cc.Label,
txtClubExp: cc.Label,
txtClubRank: cc.Label,
txtClubID: cc.Label,
listRank: s,
scrollList: cc.Node,
headSelet: cc.Prefab
},
onCreate: function(e) {
ViewBase.prototype.onCreate.call(this, e);
this.initData();
this.initEvent();
this.initUI();
this.initRequest();
},
onAdapt: function() {},
initRequest: function() {
this.ctrl.requireRankInfoBySociaty();
},
initData: function() {
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
this.taskModel = app.ctrls.task.getModel();
},
initEvent: function() {
this.eventOn(this.model.EVENT_FISH_CLUB_CHANGE_HEAD, this.onChangeHead.bind(this));
this.eventOn(this.model.EVENT_FISH_CLUB_RANK, this.onClubRankInfos.bind(this));
},
initUI: function() {
this.initTop();
this.canAction = !0;
this.initScrollview();
},
initTop: function() {
var e = this, t = this.model.getClubInfo();
this.unionAvatar = t.unionAvatar;
this.headList = [];
for (var i = 1; i <= 6; i++) this.headList.push({
image: "module/fish/texture/fishClub/tx_gh_0" + i,
isCom: !0
});
this.headSeleView = cc.instantiate(this.headSelet);
this.headSeleView.parent = this.node;
this.headSeleView.zIndex = 999;
this.headSeleView.script = this.headSeleView.getComponent("headScrollView");
this.headSeleView.script.setData(this.headList, Number(this.unionAvatar) - 1);
this.headSeleView.script.setSelectCb(function(i) {
e.ctrl.requireChangeHead({
unionId: t.unionId,
unionAvatar: i + 1 + ""
});
});
this.onClick(this.sprHead, function() {
if (e.model.isIamMaster()) {
var t = e.sprHead.convertToWorldSpaceAR(cc.v2(0, 0));
e.headSeleView.script.onClickHead(t);
}
});
this.txtClubLv.string = "LV" + t.level;
this.txtClubMem.string = t.maxMember;
this.txtClubID.string = "ID:" + t.unionId;
SpriteUtils.setTexture({
path: "module/fish/texture/fishClub/tx_gh_0" + t.unionAvatar
}, this.sprHead, this);
var s = ConfigMgr.getConfig("union_level_config").findByIndex(t.level + 1), n = 0, o = 0;
if (!TypeUtils.isRealNull(s)) {
n = t.unionExp;
o = s.upgradeNeedExp;
}
this.txtClubExp.string = n + "/" + o;
this.progExp.getComponent(cc.ProgressBar).progress = n / o;
},
initScrollview: function() {
var e = this.model.getRank();
if (!TypeUtils.isArray(e) || e.length <= 0) this.txtClubRank.string = "未上榜"; else {
var t = null, i = this.model.getClubInfo();
if (!TypeUtils.isRealNull(i)) for (var s = i.unionId, n = 0; n < e.length; n++) {
var o = e[n];
if (Number(o.soc_id) == s) {
t = n + 1;
break;
}
}
TypeUtils.isRealNull(t) ? this.txtClubRank.string = "未上榜" : this.txtClubRank.string = t;
this.rankTb = e;
this.listRank.numItems = this.rankTb.length;
this.listRank.scrollTo(0, .02);
}
},
onListRender: function(e, t) {
var i = this, s = this.rankTb[t];
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("clubRankItem"));
s.rank = t + 1;
e.script.setData(s);
e.stopAllActions();
e.scale = 1;
if (this.canAction) {
e.scale = 0;
ActionUtils.sequence(e, cc.delayTime(.05 * t), cc.scaleTo(.1, 1.1), cc.scaleTo(.05, 1), cc.callFunc(function() {
i.canAction = !1;
}));
}
},
onChangeHead: function() {
var e = this.model.getClubInfo();
SpriteUtils.setTexture({
path: "module/fish/texture/fishClub/tx_gh_0" + e.unionAvatar
}, this.sprHead, this);
},
onClubRankInfos: function() {
this.initScrollview();
}
});
cc._RF.pop();
}, {
List: "List"
} ],
clubHallRoom: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "cdee9GtPDVCRbil6vowPl6x", "clubHallRoom");
var s = e("List"), n = e("MiniGameConst"), o = e("ChannelConst");
cc.Class({
extends: ViewBase,
properties: {
seatList: s,
scrollList: cc.Node,
btnQuick: cc.Node
},
onCreate: function(e) {
ViewBase.prototype.onCreate.call(this, e);
this.initData();
this.initRequest();
this.initEvent();
this.initUI();
this.setChannel([ {
enterChannel: {
channelId: o.Type.FishClubRoomList,
param1: this.model.getClubInfo().unionId
},
exitChannel: {
channelId: o.Type.FishClubRoomList,
param1: this.model.getClubInfo().unionId
}
} ]);
},
onAdapt: function() {},
initRequest: function() {
var e = this.model.getClubInfo();
this.ctrl.requireUnionGames(e.unionId);
},
initData: function() {
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
this.fishCtrls = app.fishCtrls.catchFish;
this.fishModel = this.fishCtrls.getModel();
},
initEvent: function() {
this.eventOn(this.model.EVENT_FISH_CLUB_GAME_ROOM_LIST, this.onGameRoomList.bind(this));
this.eventOn(this.model.EVENT_FISH_CLUB_GAME_ROOM_LIST_REFRESH, this.onGameRoomList.bind(this));
},
initUI: function() {
var e = this;
this.onClick(this.btnQuick, function() {
for (var t = e.model.getUnionGames(), i = 0; i < t.length; i++) {
var s = t[i];
if (s.playerList.length < s.maxChairCount && e.isCanEnterRoom(s)) {
e.enterRoom(s);
return;
}
}
TipsUtils.showTips("暂时没有可进入的房间");
});
this.canAction = !0;
this.initScrollview();
},
initScrollview: function() {
var e = this.model.getUnionGames();
if (!TypeUtils.isRealNull(e)) {
for (var t = [], i = [], s = 0; s < e.length; s++) {
var o = e[s];
o.roomType == n.FishRoomType.ClubChuangZhang ? t.push(o) : o.roomType == n.FishRoomType.ClubXuanWo && i.push(o);
}
this.roomList = [];
for (var a = 0; a < e.length && !TypeUtils.isRealNull(t[a]); a++) {
this.roomList.push(t[a]);
if (TypeUtils.isRealNull(i[a])) break;
this.roomList.push(i[a]);
}
this.seatList.numItems = this.roomList.length;
this.seatList.scrollTo(0, .02);
}
},
onListRender: function(e, t) {
var i = this, s = this.roomList[t];
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("roomSeatItem"));
s.idx = Math.ceil((t + 1) / 2);
e.script.setData(s);
e.stopAllActions();
e.scale = 1;
if (this.canAction) {
e.scale = 0;
ActionUtils.sequence(e, cc.delayTime(.05 * Math.floor(t / 2)), cc.scaleTo(.1, 1.1), cc.scaleTo(.05, 1), cc.callFunc(function() {
i.canAction = !1;
}));
}
},
isCanEnterRoom: function(e) {
var t = ConfigMgr.getConfig("fish_room_config").findByIndex(e.roomType).forgeLevelLimit, i = app.ctrls.bag.getModel().getGunForgeLevel();
return i >= t[0] && i <= t[1];
},
enterRoom: function(e) {
var t = this.model.getClubInfo();
this.ctrl.requireEnterClubFishRoom({
unionId: t.unionId,
gameType: e.gameType,
roomId: e.roomId,
roomType: e.roomType
});
ViewManager.closeView(this);
},
onGameRoomList: function() {
this.initScrollview();
},
updateSeatPlayers: function(e) {
this.roomList = {};
for (var t = 0; t < e.length; t++) this.roomList[e[t].roomId] = e[t].playerNum;
this.seatList.numItems = this.roomList.length;
},
channelSyncDataFishRoomSeatList: function(e) {
TypeUtils.isRealNull(e) || TypeUtils.isRealNull(e.fishRoomList) || TypeUtils.isRealNull(e.fishRoomList.list) || this.updateSeatPlayers(e.fishRoomList.list);
}
});
cc._RF.pop();
}, {
ChannelConst: "ChannelConst",
List: "List",
MiniGameConst: "MiniGameConst"
} ],
clubHallView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "8fba21a6qtKZLSP2ZD3K/uy", "clubHallView");
var s = e("List"), n = e("CommonConst");
cc.Class({
extends: ViewBase,
properties: {
sprBg: cc.Node,
nodeRoot: cc.Node,
nodeTop: cc.Node,
nodeTopLeft: cc.Node,
btnShare: cc.Node,
btnCopy: cc.Node,
nodeInvite: cc.Node,
txtInvite: cc.Label,
nodeLeft: cc.Node,
sprBgL: cc.Node,
txtNotice: cc.Label,
btnNotice: cc.Node,
tabList: s,
nodeTopRight: cc.Node,
btnBack: cc.Node,
btnDepot: cc.Node,
nodeRight: cc.Node,
nodeView: cc.Node
},
onAdapt: function() {
AdaptUtils.AdaptNodeToFullAdapt(this.sprBg);
AdaptUtils.AdaptNodeToFullSize(this.nodeRoot);
AdaptUtils.AdaptNodeToHWAdapt(this.nodeTop);
AdaptUtils.AdaptNodeToHWAdapt(this.nodeTopLeft);
AdaptUtils.AdaptNodeToHWAdapt(this.nodeLeft);
AdaptUtils.AdaptNodeToHWAdapt(this.nodeTopRight);
AdaptUtils.AdaptNodeToHWAdapt(this.nodeRight);
this.addActViewList(this.nodeTopRight, this.nodeTopRight.scale);
this.addActViewList(this.nodeTop, this.nodeTop.scale);
this.addActViewList(this.nodeTopLeft, this.nodeTopLeft.scale);
this.addActViewList(this.nodeRight, this.nodeRight.scale);
this.addActViewList(this.nodeLeft, this.nodeLeft.scale);
},
onCreate: function(e) {
e = e || {};
this.initData();
this.initEvent();
this.initRequire();
this.initUI();
this.doSelect(e.seleIdx);
this.doViewAction();
},
initData: function() {
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
this._scrollviewConfig = [ {
paths: {
enable: "module/fish/texture/fishClub/gh_txt_01_disable",
sele: "module/fish/texture/fishClub/gh_txt_01_enable"
},
viewName: "CLUB_HALL_MANAGER"
}, {
paths: {
enable: "module/fish/texture/fishClub/gh_txt_02_disable",
sele: "module/fish/texture/fishClub/gh_txt_02_enable"
},
viewName: "CLUB_HALL_BUILD"
}, {
paths: {
enable: "module/fish/texture/fishClub/gh_txt_03_disable",
sele: "module/fish/texture/fishClub/gh_txt_03_enable"
},
viewName: "CLUB_HALL_WELFARE"
}, {
paths: {
enable: "module/fish/texture/fishClub/gh_txt_04_disable",
sele: "module/fish/texture/fishClub/gh_txt_04_enable"
},
viewName: "CLUB_HALL_ROOM"
}, {
paths: {
enable: "module/fish/texture/fishClub/gh_txt_05_disable",
sele: "module/fish/texture/fishClub/gh_txt_05_enable"
},
viewName: "CLUB_HALL_RANK"
} ];
},
initRequire: function() {
var e = this.model.getClubInfo();
this.ctrl.requestUnionMembers(e.unionId);
},
initEvent: function() {
this.eventOn(this.model.EVENT_FISH_UPDATE_INTRODUCTION, this.onUpdateIntroduction.bind(this));
this.eventOn(this.model.EVENT_FISH_CLUB_EXIT_CLUB, this.onExitClub.bind(this));
this.eventOn(this.model.EVENT_FISH_CLUB_MEMBER_LIST, this.onMemberList.bind(this));
this.eventOn(this.model.EVENT_FISH_CLUB_MY_CLUB_INFO, this.onMyClubInfo.bind(this));
},
initUI: function() {
var e = this, t = this.model.getClubInfo();
this.txtNotice.string = t.introduction;
this.btnNotice.active = this.model.isIamMaster();
this.onClick(this.btnBack, function() {
ViewManager.showView("FISH_HALL_VIEW", null, null, function() {
ViewManager.closeView("CLUB_HALL_VIEW");
});
});
this.onClick(this.btnNotice, function() {
ViewManager.showView("CLUB_MODIFY_NOTICE");
});
this.onClick(this.btnDepot, function() {
ViewManager.showView("CLUB_DEPOT_VIEW");
});
this.onClick(this.btnShare, function() {
ViewManager.showView("SHARE_VIEW", null, {
type: n.ShareType.Club,
clubId: e.model.getClubId(),
roleId: RoleUtils.getRoleId()
});
});
this.tabList.numItems = this._scrollviewConfig.length;
this.tabList.selectedId = 0;
},
onListRender: function(e, t) {
var i = this._scrollviewConfig[t];
e.scale = .9;
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("tabItem"));
e.script.setData(t, i);
},
onListSelected: function(e, t, i, s) {
if (this.curIndex != t) {
this.curIndex;
var n = this._scrollviewConfig[i].viewName;
ViewManager.closeView(n);
this.curName = this._scrollviewConfig[t].viewName;
ViewManager.showView(this.curName, this.nodeView);
}
},
doSelect: function(e) {
TypeUtils.isRealNull(e) || (this.tabList.selectedId = e);
},
onMemberList: function() {
var e = this;
if (this.model.isIamMaster() || this.model.isIamViceMaster()) {
this.btnShare.active = !0;
this.checkInvite();
} else {
this.btnShare.active = !1;
this.nodeInvite.active = !1;
}
SystemUtils.checkFishSystemStatus(20027, function() {
e.btnShare.active = !1;
});
},
checkInvite: function() {
var e = this.model.getClubInfo();
if (TypeUtils.isAllNull(e.myInvitationCode)) this.nodeInvite.active = !1; else {
this.nodeInvite.active = !0;
this.txtInvite.string = "邀请码:" + e.myInvitationCode;
this.onClick(this.btnCopy, function() {
AppUtils.getPlatform().copy(e.myInvitationCode);
TipsUtils.showTips("复制成功");
});
}
},
onMyClubInfo: function(e) {
this.checkInvite();
},
onUpdateIntroduction: function(e) {
this.txtNotice.string = this.model.getUpdateIntroduction();
},
onExitClub: function(e) {
TipsUtils.showTips("退出成功");
ViewManager.closeView(this);
},
addActViewList: function(e, t) {
this.actViews = this.actViews || [];
this.actViews.push({
node: e,
scale: t
});
},
doViewAction: function() {
for (var e = 0; e < this.actViews.length; e++) {
var t = this.actViews[e];
t.node.scale = 0;
ActionUtils.sequence(t.node, cc.delayTime(.08 * e), cc.scaleTo(.2, t.scale).easing(cc.easeBackOut()));
}
},
onDestroy: function() {
ViewManager.closeView(this.curName);
ViewBase.prototype.onDestroy.call(this);
}
});
cc._RF.pop();
}, {
CommonConst: "CommonConst",
List: "List"
} ],
clubHallWelfare: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "f7142QmZBNFhZ2JRyX1aFVn", "clubHallWelfare");
var s = e("List"), n = e("ItemConst"), o = e("ShopConst");
cc.Class({
extends: ViewBase,
properties: {
sprHead: cc.Node,
txtClubID: cc.Label,
txtClubLv: cc.Label,
txtTipsDesc: cc.Label,
txtMyOffer: cc.Label,
listRoom: s,
scrollList: cc.Node,
headSelet: cc.Prefab
},
onCreate: function(e) {
ViewBase.prototype.onCreate.call(this, e);
this.initData();
this.initEvent();
this.initUI();
},
onAdapt: function() {},
initRequest: function() {
var e = this.model.getClubInfo();
this.ctrl.requireUnionScoreInfo(e.unionId);
},
initData: function() {
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
},
initEvent: function() {
this.eventOn(this.model.EVENT_FISH_CLUB_CHANGE_HEAD, this.onChangeHead.bind(this));
this.eventOn(this.model.EVENT_FISH_CLUB_SYNC_MY_CONTRIBUTION, this.syncMyContribution.bind(this));
},
initUI: function() {
var e = this, t = this.model.getClubInfo();
this.unionAvatar = t.unionAvatar;
this.txtClubLv.string = "LV" + t.level;
this.txtClubID.string = "ID:" + t.unionId;
SpriteUtils.setTexture({
path: "module/fish/texture/fishClub/tx_gh_0" + t.unionAvatar
}, this.sprHead, this);
this.txtMyOffer.string = ItemUtils.getItemNum(n.ResourceType.ClubJiJin);
this.headList = [];
for (var i = 1; i <= 6; i++) this.headList.push({
image: "module/fish/texture/fishClub/tx_gh_0" + i,
isCom: !0
});
this.headSeleView = cc.instantiate(this.headSelet);
this.headSeleView.parent = this.node;
this.headSeleView.zIndex = 999;
this.headSeleView.script = this.headSeleView.getComponent("headScrollView");
this.headSeleView.script.setData(this.headList, Number(this.unionAvatar) - 1);
this.headSeleView.script.setSelectCb(function(i) {
e.ctrl.requireChangeHead({
unionId: t.unionId,
unionAvatar: i + 1 + ""
});
});
this.onClick(this.sprHead, function() {
if (e.model.isIamMaster()) {
var t = e.sprHead.convertToWorldSpaceAR(cc.v2(0, 0));
e.headSeleView.script.onClickHead(t);
}
});
this.canAction = !0;
this.initScrollview();
},
initScrollview: function() {
var e = ConfigMgr.getConfig("shop_config").findAll(function(e) {
return e.shopId == o.ShopType.ClubShop;
});
ArrayUtils.sort(e, function(e, t) {
return e.id - t.id;
});
this.roomTb = e;
this.listRoom.numItems = this.roomTb.length;
this.listRoom.scrollTo(0, .02);
},
onListRender: function(e, t) {
var i = this, s = this.roomTb[t];
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("clubWelfareItem"));
e.script.setData(s);
e.stopAllActions();
e.scale = 1;
if (this.canAction) {
e.scale = 0;
ActionUtils.sequence(e, cc.delayTime(.05 * Math.floor(t / 2)), cc.scaleTo(.1, 1.1), cc.scaleTo(.05, 1), cc.callFunc(function() {
i.canAction = !1;
}));
}
},
onChangeHead: function() {
var e = this.model.getClubInfo();
SpriteUtils.setTexture({
path: "module/fish/texture/fishClub/tx_gh_0" + e.unionAvatar
}, this.sprHead, this);
},
syncMyContribution: function() {
this.txtMyOffer.string = ItemUtils.getItemNum(n.ResourceType.ClubJiJin);
}
});
cc._RF.pop();
}, {
ItemConst: "ItemConst",
List: "List",
ShopConst: "ShopConst"
} ],
clubInfoView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "b50b0DOe/dMoIzQyGrnrM6C", "clubInfoView");
cc.Class({
extends: ViewBase,
properties: {
txtClubID: cc.Label,
txtClubMaster: cc.Label,
txtClubLv: cc.Label,
txtClubName: cc.Label,
txtClubNotice: cc.Label,
btnSure: cc.Node,
prefabBg: cc.Prefab
},
onCreate: function(e) {
var t = this;
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(610, 400)
});
this.comBg.getComponent("comBasePopView").setTitle("公会信息");
this.initData();
this.initEvent();
this.initUI(e);
},
initData: function() {
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
},
initEvent: function() {},
initUI: function(e) {
var t = this;
this.txtClubName.string = e.unionName;
this.txtClubLv.string = "LV" + e.level;
this.txtClubMaster.string = e.creatorName;
this.txtClubID.string = e.unionId;
this.txtClubNotice.string = e.introduction;
this.onClick(this.btnSure, function() {
t.ctrl.requestApplyClub({
unionId: e.unionId
}, function() {
TipsUtils.showTips("已提交申请，请等待会长审批");
ViewManager.closeView(t);
});
});
}
});
cc._RF.pop();
}, {} ],
clubInviteView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "0211arQmPhIrKzLf6/6tasj", "clubInviteView");
cc.Class({
extends: ViewBase,
properties: {
sprBgs: [ cc.Node ],
sprIcons: [ cc.Node ],
txtNames: [ cc.Label ],
editInvite: cc.Node,
btnSeach: cc.Node,
prefabBg: cc.Prefab
},
onCreate: function(e) {
var t = this;
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(825, 580)
});
this.comBg.getComponent("comBasePopView").setTitle("邀请码");
this.comBg.getComponent("comBasePopView").showBgType(3);
this.initData();
this.initEvent();
this.initUI();
},
initData: function() {
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
},
initEvent: function() {
this.eventOn(this.model.EVENT_FISH_CLUB_INVITE_CODE_INFO, this.onInviteCodeInfo.bind(this));
},
initUI: function() {
for (var e = this, t = ConfigMgr.getCommon("joinUnionAward"), i = 0; i < 4; i++) {
var s = t[i];
ActionUtils.repeat(this.sprBgs[i], cc.scaleTo(1, 1.1), cc.scaleTo(1, 1));
if (TypeUtils.isRealNull(s)) this.sprBgs[i].active = !1; else {
this.sprBgs[i].active = !0;
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(s.itemId)
}, this.sprIcons[i], this);
var n = s.txt || "";
this.txtNames.string = n;
}
}
this.onClick(this.btnSeach, function() {
var t = e.editInvite.getComponent(cc.EditBox).string;
if (TypeUtils.isAllNull(t)) TipsUtils.showTips("邀请码不能为空~"); else {
e._inviteCode = t;
e.ctrl.requireInputInvitationCode(t);
}
});
},
onInviteCodeInfo: function(e) {
var t = this, i = e.data;
TipsUtils.showTipsBox({
desc: cc.js.formatStr("将为您申请公会(%s, ID:%s),会长(%s),申请后请等待会长审核加入~", i.unionName, i.unionId, i.creatorName),
isHideCloce: !0,
sureCallBack: function() {
t.ctrl.requestApplyClubForInvite(t._inviteCode, function() {
TipsUtils.showTips("申请成功！");
});
}
});
}
});
cc._RF.pop();
}, {} ],
clubListItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "18962wNGYpFIqj+gWf5KxQG", "clubListItem");
var s = e("BaseComponent"), n = e("ClubConst");
cc.Class({
extends: s,
properties: {
sprHead: cc.Node,
btnApply: cc.Node,
txtApply: cc.Node,
txtClubID: cc.Label,
txtClubMaster: cc.Label,
txtClubLv: cc.Label,
txtClubName: cc.Label,
txtMemberNum: cc.Label,
txtMaxMemNum: cc.Label
},
onLoad: function() {
this.initData();
this.initUI();
},
initData: function() {
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
},
initUI: function() {
this.txtClubID.string = "无";
this.txtClubMaster.string = "无";
this.txtClubLv.string = "无";
this.txtClubName.string = "无";
this.txtMemberNum.string = "0";
this.txtMaxMemNum.string = "0";
},
setData: function(e) {
var t = this;
this.config = e;
this.freshBtnState(e.status != n.PlayerApplyClubStatus.HadApply);
SpriteUtils.setTexture({
path: "module/fish/texture/fishClub/tx_gh_0" + e.unionAvatar
}, this.sprHead, this);
this.txtClubName.string = e.unionName;
this.txtClubLv.string = e.level;
this.txtClubMaster.string = e.creatorName;
this.txtClubID.string = e.unionId;
this.txtMemberNum.string = e.memberNums;
this.txtMaxMemNum.string = "/" + e.maxMember;
this.onClick(this.node, function() {
ViewManager.showView("CLUB_INFO_VIEW", null, e);
});
this.onClick(this.btnApply, function() {
t.ctrl.requestApplyClub({
unionId: e.unionId
}, function() {
TipsUtils.showTips("已提交申请，请等待会长审批");
t.freshBtnState(!1);
});
});
},
freshBtnState: function(e) {
var t = !1, i = "已申请", s = cc.color(90, 90, 90, 255);
if (e) {
t = !0;
i = "申 请";
s = cc.color(204, 96, 0, 255);
}
this.btnApply.getComponent(cc.Button).interactable = t;
this.txtApply.getComponent(cc.Label).string = i;
this.txtApply.getComponent(cc.LabelOutline).color = s;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
ClubConst: "ClubConst"
} ],
clubMemberItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "dd491BQV2dPsbj/AYPw4W/A", "clubMemberItem");
var s = e("ClubConst"), n = e("BaseComponent");
cc.Class({
extends: n,
properties: {
sprHead: cc.Node,
txtName: cc.Label,
txtTotalOffer: cc.Label,
txtTodayOffer: cc.Label,
sprSign: cc.Node,
txtVip: cc.Label
},
onLoad: function() {
this.initData();
this.initUI();
},
initData: function() {
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
},
initUI: function() {
this.txtName.string = "无";
this.txtTotalOffer.string = "无";
this.txtTodayOffer.string = "无";
this.txtVip.string = "";
this.sprSign.active = !1;
},
setData: function(e) {
this.config = e;
if (e.membershipLevel == s.MemberShipLevel.Master) {
this.sprSign.active = !0;
SpriteUtils.setTexture({
path: "module/fish/texture/fishClub/gh_txt_13"
}, this.sprSign, this);
} else if (e.membershipLevel == s.MemberShipLevel.ViceMaster) {
this.sprSign.active = !0;
SpriteUtils.setTexture({
path: "module/fish/texture/fishClub/gh_txt_14"
}, this.sprSign, this);
} else e.membershipLevel == s.MemberShipLevel.Member && (this.sprSign.active = !1);
this.txtName.string = e.nickname;
this.txtTotalOffer.string = e.totalContribution;
this.txtTodayOffer.string = e.todayContribution;
this.txtVip.string = "VIP" + e.vipLevel;
HeadManager.loadHead(this.sprHead, {
roleId: e.roleId,
isRequest: !1
});
this.onClick(this.sprHead, function() {
e.roleId != RoleUtils.getRoleId() && ViewManager.showView("CLUB_ROLE_INFO_VIEW", null, e);
});
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
ClubConst: "ClubConst"
} ],
clubModifyNotice: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "327355WEXlHq7m2HjmFp3om", "clubModifyNotice");
e("List");
cc.Class({
extends: ViewBase,
properties: {
editSign: cc.Node,
txtNum: cc.Label,
btnSure: cc.Node,
prefabBg: cc.Prefab
},
onCreate: function(e) {
var t = this;
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(600, 430)
});
this.comBg.getComponent("comBasePopView").setTitle("修改公告");
this.initData();
this.initEvent();
this.initUI();
},
initData: function() {
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
},
initEvent: function() {
this.eventOn(this.model.EVENT_FISH_UPDATE_INTRODUCTION, this.onUpdateIntroduction, this);
},
initUI: function() {
var e = this, t = this.model.getClubInfo();
this.editSign.getComponent(cc.EditBox).string = t.introduction;
this.txtNum.string = t.introduction.length + "/30";
this.onClick(this.btnSure, function() {
e.ctrl.requireUpdateIntroduction({
unionId: t.unionId,
introduction: e.editSign.getComponent(cc.EditBox).string
});
});
},
onEditChange: function(e) {
this.txtNum.string = e.length + "/30";
},
onEditEnd: function(e) {
var t = e.string;
this.txtNum.string = t.length + "/30";
},
onUpdateIntroduction: function() {
TipsUtils.showTips("修改成功");
ViewManager.closeView("CLUB_MODIFY_NOTICE");
}
});
cc._RF.pop();
}, {
List: "List"
} ],
clubRankItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "e7571iiRq5CdavXSLf0EQKE", "clubRankItem");
e("ClubConst"), e("ItemConst"), e("TaskConst");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
sprHead: cc.Node,
txtClubName: cc.Label,
txtClubLv: cc.Label,
txtClubMaster: cc.Label,
txtClubMem: cc.Label,
txtRank: cc.Label,
sprRank: cc.Node
},
onLoad: function() {
this.initData();
this.initUI();
},
initData: function() {
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
},
initUI: function() {
this.txtClubName.string = "无";
this.txtClubMaster.string = "无";
this.txtClubLv.string = "0";
this.txtClubMem.string = "0";
},
setData: function(e) {
this.config = e;
SpriteUtils.setTexture({
path: "module/fish/texture/fishClub/tx_gh_0" + e.soc_avatar
}, this.sprHead, this);
this.txtRank.string = e.rank;
this.sprRank.active = e.rank <= 3;
e.rank <= 3 && SpriteUtils.setTexture({
path: "module/fish/texture/fishClub/sssc_img_0" + e.rank
}, this.sprRank, this);
this.txtClubName.string = e.soc_name;
this.txtClubLv.string = "LV" + e.soc_level;
this.txtClubMaster.string = e.nickname;
this.txtClubMem.string = e.soc_member;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
ClubConst: "ClubConst",
ItemConst: "ItemConst",
TaskConst: "TaskConst"
} ],
clubRoleInfoView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "86cbd/hmUxOu6fbDs/FIWyo", "clubRoleInfoView");
var s = e("RoleConst"), n = e("ItemConst"), o = e("ClubConst");
cc.Class({
extends: ViewBase,
properties: {
nodeHead: cc.Node,
sprSex: cc.Node,
nodeName: cc.Node,
txtName: cc.Label,
txtRoleId: cc.Node,
progExp: cc.Node,
txtProg: cc.Label,
txtLeve: cc.Label,
nodeOwn: cc.Node,
txtOwn: cc.Label,
sprOwn: cc.Node,
nodeVip: cc.Node,
txtVip: cc.Label,
nodeSignature: cc.Node,
txtSignature: cc.Label,
btnKitout: cc.Node,
btnAppoint: cc.Node,
prefabHead: cc.Prefab,
prefabBg: cc.Prefab
},
onCreate: function(e) {
var t = this;
this.info = e || {};
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(640, 590)
});
this.comBg.getComponent("comBasePopView").setTitle("个人信息");
this.initData();
this.initEvent();
this.initUI(this.info);
},
initData: function() {
var e = this;
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
this.roleCtrl = app.ctrls.role;
this.roleModel = this.roleCtrl.getModel();
this.roleCtrl.getOtherInfo(this.info.roleId, {
callback: function(t) {
e.freshRoleInfo(t);
}
});
},
initEvent: function() {
this.eventOn(this.model.EVENT_FISH_CLUB_UP_MEMBER_SHIP, this.onUpMemberShip, this);
this.eventOn(this.model.EVENT_FISH_CLUB_KICK_OUT_CLUB, this.onKickOutClub, this);
},
initUI: function(e) {
this.playerHead = cc.instantiate(this.prefabHead);
this.playerHead.parent = this.nodeHead;
this.playerHead.zIndex = -1;
this.playerHead.getComponent("comHead").setRoleData({
roleId: e.roleId,
vip: e.vipLevel
});
this.progExp.y = 100;
this.txtName.string = e.nickname;
this.txtRoleId.getComponent(cc.Label).string = "ID:" + e.roleId;
this.txtVip.string = "VIP" + e.vipLevel;
this.onClick(this.btnKitout, this.onClickKitout.bind(this));
this.onClick(this.btnAppoint, this.onClickAppoint.bind(this));
if (this.model.isIamMaster()) {
this.btnKitout.active = !this.model.isViceMaster(e);
this.btnAppoint.active = !this.model.isViceMaster(e);
} else {
this.btnKitout.active = this.model.IsCanIKitMember(e);
this.btnKitout.x = 0;
this.btnAppoint.active = !1;
}
},
freshRoleInfo: function(e) {
this.txtSignature.string = e.signature;
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(n.ResourceType.Gold)
}, this.sprOwn, this);
var t = e.gender == s.RoleSex.Boy ? "icon_28" : "icon_29";
SpriteUtils.setTexture({
path: "module/fish/texture/fishRole/" + t
}, this.sprSex, this);
this.txtOwn.string = e.goldNum;
this.txtLeve.string = "LV" + e.catchFishLevel;
var i = 1, o = 1, a = ConfigMgr.getConfig("fish_level_config").findByIndex(e.catchFishLevel);
if (!TypeUtils.isRealNull(a)) {
i = a.exp;
o = e.catchFishExp || 0;
}
this.txtProg.string = o + "/" + i;
this.progExp.getComponent(cc.ProgressBar).progress = o / i;
},
onClickKitout: function() {
var e = this;
if (this.model.isViceMaster(this.info)) TipsUtils.showTips("无法踢出副会长"); else {
var t = StringUtils.getHtmlStr([ {
str: "即将踢出",
color: "#ffffff"
}, {
str: this.info.nickname,
color: "#fff23a"
}, {
str: "，踢出后该玩家",
color: "#ffffff"
}, {
str: "贡献度清零",
color: "#fff23a"
}, {
str: "同时",
color: "#ffffff"
}, {
str: "周一4点后",
color: "#fff23a"
}, {
str: "才可再次加入本公会，是否确定？",
color: "#ffffff"
} ]);
TipsUtils.showTipsBox({
desc: t,
isHideCloce: !0,
sureCallBack: function() {
var t = e.model.getClubInfo();
e.ctrl.requireKickOutClub({
unionId: t.unionId,
roleId: e.info.roleId
});
}
});
}
},
onClickAppoint: function() {
var e = this;
if (this.info.membershipLevel == o.MemberShipLevel.ViceMaster) TipsUtils.showTips("该玩家已是副会长"); else {
var t = this.model.getViceMasterNum();
t >= o.MaxViceMasterNum ? TipsUtils.showTips("副会长人数已满") : TipsUtils.showTipsBox({
desc: cc.js.formatStr("即将任命%s为本公会副会长,任命后无法踢出也无法撤销职位,是否确定?副会长人数:%s/%s", this.info.nickname, t, o.MaxViceMasterNum),
isHideCloce: !0,
sureCallBack: function() {
var t = e.model.getClubInfo();
e.ctrl.requireSettingMembershipLevel({
unionId: t.unionId,
memRoleId: e.info.roleId,
membershipLevel: o.MemberShipLevel.ViceMaster
});
}
});
}
},
onUpMemberShip: function(e) {
TipsUtils.showTips("任命成功");
ViewManager.closeView(this);
},
onKickOutClub: function(e) {
TipsUtils.showTips("成功踢出");
ViewManager.closeView(this);
}
});
cc._RF.pop();
}, {
ClubConst: "ClubConst",
ItemConst: "ItemConst",
RoleConst: "RoleConst"
} ],
clubScoreDetail: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "0eaf3DhwfdAeJE9cXYrXfU/", "clubScoreDetail");
var s = e("List"), n = e("ItemConst"), o = e("ClubConst");
cc.Class({
extends: ViewBase,
properties: {
btnChange: cc.Node,
txtDesc: cc.Node,
txtDayScore: cc.Label,
txtWeekScore: cc.Label,
txtAward: cc.Label,
sprAward: cc.Node,
scrollNode: cc.Node,
listScore: s,
seleScroll: cc.Prefab,
prefabBg: cc.Prefab
},
onCreate: function(e) {
var t = this;
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(830, 588)
});
this.comBg.getComponent("comBasePopView").setTitle("积分详情");
this.comBg.getComponent("comBasePopView").showBgType(3);
this.initData();
this.initEvent();
this.initUI(e);
},
initData: function() {
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
var e = this.model.getClubInfo();
this.ctrl.requireUnionScoreInfo({
unionId: e.unionId,
middlemanId: RoleUtils.getRoleId()
});
},
initEvent: function() {
this.eventOn(this.model.EVENT_FISH_CLUB_SCORE_INFO, this.onGetUnionScoreInfo.bind(this));
},
initUI: function(e) {
var t = this;
this.btnChange.active = this.model.isIamMaster();
if (this.model.isIamMaster()) {
this.filterListView = cc.instantiate(this.seleScroll);
this.filterListView.parent = this.node;
this.filterListView.zIndex = 999;
this.filterListView.script = this.filterListView.getComponent("itemScrollView");
this.onClick(this.btnChange, function() {
var e = t.txtDesc.convertToWorldSpaceAR(cc.v2(0, -10));
t.filterListView.script.onShowView(e);
});
this.initViceMasterList();
}
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(n.ResourceType.WarheadPlatinum)
}, this.sprAward, this);
this.canAction = !0;
this.initScrollview();
},
initViceMasterList: function() {
var e = this, t = this.model.getUnionMembers(), i = this.model.getClubInfo();
this.viceMasterConfig = [];
this.viceMasterConfig.push({
desc: "全部成员",
unionId: i.unionId,
roleId: RoleUtils.getRoleId()
});
this.selet = 0;
for (var s = 0; s < t.length; s++) {
var n = t[s];
n.membershipLevel == o.MemberShipLevel.ViceMaster && this.viceMasterConfig.push({
desc: n.nickname,
unionId: i.unionId,
roleId: n.roleId
});
}
this.filterListView.script.setData(this.viceMasterConfig);
this.filterListView.script.setSelectCb(function(t) {
if (e.selet != t) {
e.selet = t;
var i = e.viceMasterConfig[t];
e.txtDesc.getComponent(cc.Label).string = i.desc;
e.ctrl.requireUnionScoreInfo({
unionId: i.unionId,
middlemanId: i.roleId
});
}
});
},
initScrollview: function() {
var e = this.model.getScoreInfo() || {};
this.memberScoreList = e.memberScoreList || [];
ArrayUtils.sort(this.memberScoreList, function(e, t) {
return e.rebate - t.rebate;
});
this.listScore.numItems = this.memberScoreList.length;
this.listScore.scrollTo(0, .02);
},
initTop: function() {
var e = this.model.getScoreInfo() || {};
this.txtDayScore.string = NumberUtils.toString(e.unionDailyScore || 0);
this.txtWeekScore.string = NumberUtils.toString(e.unionWeeklyScore || 0);
this.txtAward.string = NumberUtils.toString(e.totalRebate || 0);
},
onListRender: function(e, t) {
var i = this, s = this.memberScoreList[t];
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("clubScoreItem"));
e.script.setData(s);
e.stopAllActions();
e.scale = 1;
if (this.canAction) {
e.scale = 0;
ActionUtils.sequence(e, cc.delayTime(.05 * t), cc.scaleTo(.1, 1.1), cc.scaleTo(.05, 1), cc.callFunc(function() {
i.canAction = !1;
}));
}
},
onGetUnionScoreInfo: function() {
this.initScrollview();
this.initTop();
}
});
cc._RF.pop();
}, {
ClubConst: "ClubConst",
ItemConst: "ItemConst",
List: "List"
} ],
clubScoreItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "e875aDOBWtGsaPPyqv3Pa15", "clubScoreItem");
var s = e("ItemConst"), n = e("BaseComponent");
cc.Class({
extends: n,
properties: {
txtName: cc.Label,
txtDayScore: cc.Label,
txtWeekScore: cc.Label,
sprHopeBack: cc.Node,
txtHopeBack: cc.Label
},
onLoad: function() {
this.initData();
this.initUI();
},
initData: function() {
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
},
initUI: function() {
this.txtName.string = "无";
this.txtDayScore.string = "0";
this.txtWeekScore.string = "0";
this.txtHopeBack.string = "0";
},
setData: function(e) {
this.config = e;
this.txtName.string = e.nickname || "无";
this.txtDayScore.string = e.dailyScore || "0";
this.txtWeekScore.string = e.weeklyScore || "0";
this.txtHopeBack.string = e.rebate || "0";
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(s.ResourceType.WarheadPlatinum)
}, this.sprHopeBack, this);
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
ItemConst: "ItemConst"
} ],
clubTaskItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "e2121qLjRNNRLtXiGjU5Cg6", "clubTaskItem");
e("ClubConst");
var s = e("ItemConst"), n = e("TaskConst"), o = e("BaseComponent");
cc.Class({
extends: o,
properties: {
sprHead: cc.Node,
txtNameDesc: cc.Node,
txtName: cc.Node,
txtReward: cc.Label,
txtPerReward: cc.Label,
btnGo: cc.Node,
txtGo: cc.Node
},
onLoad: function() {
this.initData();
this.initUI();
},
initData: function() {
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
},
initUI: function() {
this.txtName.string = "无";
this.txtReward.string = "0";
this.txtPerReward.string = "0";
},
setData: function(e) {
this.config = e;
SpriteUtils.setTexture({
path: "module/fish/texture/fishClub/" + e.icon
}, this.sprHead, this);
this.txtNameDesc.getComponent(cc.Label).string = e.name;
this.txtName.getComponent(cc.Label).string = cc.js.formatStr("(%s/%s)", e.progress, e.num);
this.txtNameDesc.getComponent(cc.Label)._forceUpdateRenderData();
this.txtName.x = this.txtNameDesc.width;
for (var t = ConfigMgr.getConfig("task_extra_reward_config").findAll(function(t) {
return t.taskId == e.id;
}), i = VipUtils.getFishVipLevel(), o = null, a = 0; a < t.length; a++) {
var r = t[a], l = r.fishVipLevel;
if ((i >= l[0] || -1 == l[0]) && (i <= l[1] || -1 == l[1])) {
o = r;
break;
}
}
var c = {};
if (!TypeUtils.isRealNull(o)) for (var h = 0; h < o.award.length; h++) {
var u = o.award[h];
c[u.itemId] = u.amount;
}
for (var d = 0; d < e.award.length; d++) {
var p = e.award[d];
if (p.itemId == s.ResourceType.ClubExp) {
var f = p.amount;
TypeUtils.isRealNull(c[p.itemId]) || (f = cc.js.formatStr("%s + %s", f, c[p.itemId]));
this.txtReward.string = f;
} else if (p.itemId == s.ResourceType.ClubJiJin) {
var m = p.amount;
TypeUtils.isRealNull(c[p.itemId]) || (m = cc.js.formatStr("%s + %s", m, c[p.itemId]));
this.txtPerReward.string = m;
}
}
var g = !0, _ = "领 取", T = cc.color(204, 96, 0, 255);
if (e.status == n.FinishStatus.Finish) this.onClick(this.btnGo, function() {
var t = DicUtils.copy(e.award);
for (var i in c) if (Object.hasOwnProperty.call(c, i)) {
for (var s = c[i], n = !1, o = 0; o < t.length; o++) if (t[o].itemId == i) {
n = !0;
t[o].amount = t[o].amount + s;
break;
}
n || t.push({
amount: s,
itemId: i
});
}
app.ctrls.task.getTaskAward(e.id, t);
}); else if (e.status == n.FinishStatus.NotFinish) {
g = !1;
_ = "未完成";
T = cc.color(15, 76, 169, 255);
} else if (e.status == n.FinishStatus.HasReceive) {
g = !1;
_ = "已领取";
T = cc.color(15, 76, 169, 255);
}
this.btnGo.getComponent(cc.Button).interactable = g;
this.txtGo.getComponent(cc.Label).string = _;
this.txtGo.getComponent(cc.LabelOutline).color = T;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
ClubConst: "ClubConst",
ItemConst: "ItemConst",
TaskConst: "TaskConst"
} ],
clubWelfareItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "81236CIo2tFCKgnPuzL4TQr", "clubWelfareItem");
var s = e("ItemConst"), n = e("BaseComponent");
cc.Class({
extends: n,
properties: {
sprHead: cc.Node,
txtGoodsNum: cc.Label,
txtCost: cc.Label,
txtDesc: cc.Label,
btnExchange: cc.Node,
txtExchange: cc.Node
},
onLoad: function() {
this.initData();
this.initUI();
},
initData: function() {
this.ctrl = app.ctrls.club;
this.model = this.ctrl.getModel();
},
initUI: function() {
this.txtCost.string = "0";
this.txtDesc.string = "";
},
setData: function(e) {
this.config = e;
var t = this.model.getClubInfo();
SpriteUtils.setTexture({
path: ItemUtils.toItemPngPath(e.icon)
}, this.sprHead, this);
var i = !1;
t.level >= e.unionOpenLevel && (i = !0);
var n = !0, o = cc.color(204, 96, 0, 255);
if (i) this.onClick(this.btnExchange, function() {
ItemUtils.getItemNum(s.ResourceType.ClubJiJin) >= e.price.amount ? app.ctrls.shop.buyGoods(e.id, 1) : TipsUtils.showTips("贡献度不足");
}); else {
n = !1;
o = cc.color(102, 71, 125, 255);
this.onClick(this.btnExchange, function() {
TipsUtils.showTips("公会等级不足");
});
}
this.btnExchange.getComponent(cc.Button).interactable = n;
this.txtExchange.getComponent(cc.LabelOutline).color = o;
this.txtGoodsNum.string = e.goodsCount;
this.txtCost.string = e.price.amount;
this.txtDesc.string = cc.js.formatStr("公会%s级可兑换", e.unionOpenLevel);
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
ItemConst: "ItemConst"
} ],
comAwardItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "5e385H/xl5A8YBDsdTTXDIJ", "comAwardItem");
var s = e("ItemConst"), n = e("BaseComponent");
cc.Class({
extends: n,
properties: {},
ctor: function() {},
onLoad: function() {
n.prototype.onLoad.call(this);
this.initUI();
},
initUI: function() {
this.sprIcon = this.getC("sprIcon");
this.txtName = this.getC("txtName");
this.txtNum = this.getC("txtNum");
this.sprCharge = this.getC("sprCharge");
this.sprCharge.active = !1;
this.txtTips = this.seekC(this.sprCharge, "txtTips");
this.sprSend = this.getC("sprSend");
this.txtSend = this.seekC(this.sprSend, "txtSend");
this.sprSend.active = !1;
},
setData: function(e) {
var t, i, n = this, o = e.name, a = e.obtainType || s.ItemAwardType.Default;
if (a == s.ItemAwardType.FirstCharge) {
this.sprCharge.active = !0;
this.txtSend.getComponent(cc.Label).string = "首充\n赠送";
} else if (a == s.ItemAwardType.VIPSend) {
this.sprCharge.active = !0;
this.txtSend.getComponent(cc.Label).string = "VIP\n赠送";
} else a == s.ItemAwardType.ExtraSend && (this.sprSend.active = !0);
TypeUtils.isRealNull(e.itemId) && !TypeUtils.isRealNull(e.prizeId) && (e.itemId = ItemUtils.getItemConfigByPrizeId(e.prizeId));
if (!TypeUtils.isRealNull(e.itemId) && e.itemId > 0) {
t = ItemUtils.getItemCfg(e.itemId);
TypeUtils.isAllNull(o) && (o = t.name);
}
i = TypeUtils.isRealNull(e.icon) ? TypeUtils.isRealNull(t) ? ItemUtils.toItemPngPath("icon_a_100", 114) : ItemUtils.getItemPngByCfg(e, 114) : TypeUtils.isRealNull(e.isTitle) ? ItemUtils.toItemPngPath(e.icon, 114) : "module/fish/texture/title/" + e.icon;
SpriteUtils.setTexture({
path: i,
callback: function() {
SpriteUtils.setAdaptContentSize(n.sprIcon, 100);
}
}, this.sprIcon, this);
TypeUtils.isAllNull(e.md5) || LoadUtils.loadImg(e.icon, function(t, i) {
if (null == t) try {
n.sprIcon.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(i);
SpriteUtils.setAdaptContentSize(n.sprIcon, 100);
} catch (t) {
logger.error("load url error:", t, e.icon);
SpriteUtils.setTexture({
path: "module/fish/texture/icon/icon_a_100",
callback: function() {
SpriteUtils.setAdaptContentSize(n.sprGoods, 100);
}
}, n.sprGoods, n);
}
});
TypeUtils.isAllNull(o) && (o = "未知道具");
this.txtName.getComponent(cc.Label).string = o;
var r = "";
!TypeUtils.isRealNull(t) && !TypeUtils.isRealNull(t.existTime) && t.existTime > 0 ? r = t.existTime < 86400 ? t.existTime / 3600 + "小时" : t.existTime / 86400 + "天" : !TypeUtils.isRealNull(e.amount) && Number(e.amount) > 0 && (r = NumberUtils.toString(Number(e.amount), 2));
this.txtNum.getComponent(cc.Label).string = r;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
ItemConst: "ItemConst"
} ],
comBasePopView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "40374teRZxDXaOBxTvPG7I0", "comBasePopView");
cc.Class({
extends: ViewBase,
properties: {
maskBtn: cc.Node,
sprBg: cc.Node,
btnClose: cc.Node,
sprTitleBg: cc.Node,
txtTile: cc.Node,
sprCenBg: cc.Node,
sprBotBg: cc.Node
},
onCreate: function() {
var e = this;
this.bgSize = this.sprBg.getContentSize();
this.onClick(this.maskBtn, function() {}, !1);
this.onClick(this.btnClose, function() {
e.callback && e.callback();
});
this.showBgType(2);
},
onAdapt: function() {},
showBgType: function(e) {
this.sprCenBg.active = 1 == e;
this.sprBotBg.active = 2 == e;
},
setCenterWidget: function(e, t) {
this.sprCenBg.getComponent(cc.Widget)[t] = e;
this.sprCenBg.getComponent(cc.Widget).updateAlignment();
},
hideMask: function() {
this.maskBtn.active = !1;
},
setCloseCallback: function(e) {
this.callback = e;
},
hideCloseBtn: function() {
this.btnClose.active = !1;
},
setBgContentsize: function(e) {
var t = e.size || cc.size(640, 505);
this.sprBg.width = t.width;
this.sprBg.height = t.height;
},
setTitle: function(e) {
this.txtTile.getComponent(cc.Label).string = e;
},
setTitleSpr: function(e) {},
onAnimCompleted: function(e, t) {
this.node.destroy();
}
});
cc._RF.pop();
}, {} ],
comBaseView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "e35f2sBduZPH4WrGIlm/iZO", "comBaseView");
var s;
function n(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}
var o = e("List"), a = (n(s = {}, 2, {
path: "module/fish/texture/fishCommon/pn_back_14",
sx: 1,
sy: 1
}), n(s, 3, {
path: "module/fish/texture/fishCommon/by_common_title_01",
sx: 1.24,
sy: 1.2
}), n(s, 4, {
path: "module/fish/texture/fishCommon/tq_title_02",
sx: 1,
sy: 1
}), s);
cc.Class({
extends: ViewBase,
properties: {
maskBtn: cc.Node,
rootNode: cc.Node,
nodeTitle: cc.Node,
titleBg1: cc.Node,
titleBg2: cc.Node,
sprTitleL: cc.Node,
sprTitleR: cc.Node,
nodeSpine: cc.Node,
sprTitle: cc.Node,
txtTitle: cc.Node,
spTitle: cc.Node,
btnClose: cc.Node,
tabList: o,
scrollTab: cc.Node,
titleSp: cc.Prefab
},
onCreate: function() {
this.initBaseUI();
},
onAdapt: function() {},
initBaseUI: function() {
var e = this;
this.nodeTitle.active = !1;
this.nodeSpine.active = !1;
this.titleBg1.active = !1;
this.titleBg2.active = !1;
this.sprTitle.active = !1;
this.txtTitle.active = !1;
this.spTitle.active = !1;
this.scrollTab.active = !1;
this.onClick(this.maskBtn, function() {
TypeUtils.isFunction(e.maskCallback) && e.maskCallback();
});
this.onClick(this.btnClose, function() {
TypeUtils.isFunction(e.callback) && e.callback();
});
this.itemList = [];
},
hideMask: function() {
this.maskBtn.active = !1;
},
setCloseCallback: function(e) {
this.callback = e;
},
setMaskCallback: function(e) {
this.maskCallback = e;
},
hideCloseBtn: function() {
this.btnClose.active = !1;
},
setTitle: function(e) {
var t = this;
if (TypeUtils.isRealNull(e)) this.nodeTitle.active = !1; else {
var i = e.type;
if (TypeUtils.isRealNull(e.type)) {
TypeUtils.isAllNull(e.str) || (i = 0);
TypeUtils.isAllNull(e.ani) || (i = 2);
if (TypeUtils.isAllNull(e.path)) return;
i = 1;
}
this.nodeTitle.active = !0;
if (0 == i) {
this.titleBg1.active = !0;
this.txtTitle.active = !0;
this.txtTitle.getComponent(cc.Label).string = e.str || "";
} else if (1 == i) {
var s = e.bgType || 1;
this.titleBg1.active = 1 == s;
this.titleBg2.active = 1 != s;
if (1 != s) {
var n = a[s];
SpriteUtils.setTexture({
path: n.path,
isHide: !0,
callback: function() {
SpriteUtils.setSpriteScale(t.sprTitleL, n.sx, n.sy);
}
}, this.sprTitleL, this);
SpriteUtils.setTexture({
path: n.path,
isHide: !0,
callback: function() {
SpriteUtils.setSpriteScale(t.sprTitleR, -n.sx, n.sy);
}
}, this.sprTitleR, this);
}
this.sprTitle.active = !0;
SpriteUtils.setTexture({
path: e.path,
isHide: !0
}, this.sprTitle, this);
} else if (2 == i) {
this.spTitle.active = !0;
SpineUtils.changeSpine(e.path, function(i, s) {
var n = t.spTitle.getComponent(sp.Skeleton);
n.skeletonData = s;
n.setAnimation(0, e.ani, !0);
});
}
}
},
showTitleSp: function(e) {
this.nodeSpine.active = !0;
this.titleSpine = cc.instantiate(this.titleSp);
this.titleSpine.parent = this.nodeSpine;
this.titleSpine.getComponent("comTitleSp").playSpine(e);
},
showTabStyle: function(e) {
var t = e.tabCfg || [], i = e.scale || 1;
if (TypeUtils.isEmptyArray(t)) this.scrollTab.active = !1; else {
this.scrollTab.active = !0;
this.scrollTab.scale = i;
this.tabDatas = t;
var s = e.defaultIdx || 0;
this.setSeleCallback(e.callFunc);
this.tabList.numItems = t.length;
this.tabList.selectedId = s;
}
},
setSeleCallback: function(e) {
this.seleTabCB = e;
},
onListRender: function(e, t) {
var i = this.tabDatas[t];
e.scale = .9;
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("tabItem"));
e.script.setData(t, i);
},
onListSelected: function(e, t, i, s) {
TypeUtils.isFunction(this.seleTabCB) && this.seleTabCB(t);
},
doSelect: function(e) {
this.scrollTab.active && this.tabList.numItems > 0 && (this.tabList.selectedId = e);
}
});
cc._RF.pop();
}, {
List: "List"
} ],
comBtnList: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "8f1b5+W2KpIIIktcAY7D++E", "comBtnList");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
comBtn: cc.Prefab
},
ctor: function() {},
onLoad: function() {
s.prototype.onLoad.call(this);
this.btnLayer = this.getC("btnLayer");
this.btns = {};
},
setBtnsData: function(e) {
this.data = e || {};
for (var t = 0; t < this.data.length; t++) {
var i = this.data[t];
if (t < this.len) {
null.parent = this.btnLayer;
null.getComponent("comBtn").setParentNode(this.btnLayer);
null.getComponent("comBtn").setData(i, this.area);
this.btns.push(null);
}
}
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
comBtn: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "b4740PI4iNG3IGtg3DNgKf6", "comBtn");
var s = e("BaseComponent"), n = e("redPoint"), o = e("FishConst");
cc.Class({
extends: s,
properties: {
btnNode: cc.Node,
sprBg: cc.Node,
sprIcon: cc.Node,
sprBuble: cc.Node,
sprTips: cc.Node,
nodeTips: cc.Node,
sprTpisBg: cc.Node,
txtTips: cc.Node,
txtTime: cc.Node,
spineNode: cc.Node,
redPointScript: n,
spineCompo: sp.Skeleton
},
ctor: function() {},
onLoad: function() {
var e = this;
s.prototype.onLoad.call(this);
this.config = {};
this.childBtns = {};
ActionUtils.timerAct(this.node, this.handleUpdate.bind(this), 1);
this.onClick(this.node, function() {
e.onClickFunc();
});
},
setParentNode: function(e) {
this.parentNode = e;
this.parentJs = this.parentNode.getComponent("comHallArea");
},
setData: function(e, t) {
var i = this;
this.area = t;
this.config = e || {};
if (e.bgPath) {
this.sprBg.active = !0;
SpriteUtils.setTexture({
path: e.bgPath
}, this.sprBg, this);
} else this.sprBg.active = !1;
for (var s = this.config.reminds || [], n = {}, o = 0; o < s.length; o++) n[s[o]] = !0;
this.redPointScript.setRemind(n);
this.sprIcon.active = !0;
this.spineNode.active = !1;
if (TypeUtils.isAllNull(e.spinePath) || TypeUtils.isAllNull(e.ani)) if (TypeUtils.isAllNull(e.btnPath)) SpriteUtils.setTexture({
path: "module/fish/texture/fishCommonS9/common_gold_bg"
}, this.sprIcon, this); else {
TypeUtils.isRealNull(this.nodeSpine) || (this.nodeSpine.active = !1);
SpriteUtils.setTexture({
path: "module/fish/texture/" + e.btnPath
}, this.sprIcon, this);
} else {
cc.loader.loadRes(e.spinePath, sp.SkeletonData, function(t, s) {
if (t) cc.log("load err errff"); else {
i.spineNode.active = !0;
if (!TypeUtils.isRealNull(e.spPos)) {
i.spineNode.x = e.spPos.x;
i.spineNode.y = e.spPos.y;
}
i.spineCompo.skeletonData = s;
i.spineCompo.setAnimation(0, e.ani, !0);
}
});
this.sprIcon.active = !1;
}
this.nodeTips.active = !1;
TypeUtils.isAllNull(e.tips) || this.createTips(e, t);
this.sprBuble.active = !1;
TypeUtils.isAllNull(e.tipsIcon) || this.createTipsIcon(e, t);
this.txtTime.active = !1;
TypeUtils.isRealNull(e.endAt) || this.createCDTime(e, t);
this.onClick(this.btnNode, function() {
TypeUtils.isNotEmptyArray(e.btnList) ? i.parentJs.doPnlAction(e.name) : TypeUtils.isAllNull(e.funcName) || TypeUtils.isRealNull(i.parentJs) || !i.parentJs[e.funcName] ? e.viewName ? ViewManager.showView(e.viewName, null, e.params) : TipsUtils.showTips("敬请期待") : i.parentJs[e.funcName]();
});
},
createTips: function(e, t) {
e = e || {};
if (TypeUtils.isAllNull(e.tipFunc) || !TypeUtils.isRealNull(this.parentJs) || !this.parentJs[e.tipFunc] || !this.parentJs[e.tipFunc]()) {
this.nodeTips.active = !0;
this.nodeTips.opacity = 0;
var i = e.offset || {}, s = e.tips, n = e.showTime || 5, a = e.delayTime || 5, r = e.fadeTime || 2, l = i.x || 0, c = i.y || 0;
this.txtTips.getComponent(cc.Label).string = s;
this.txtTips.getComponent(cc.Label)._forceUpdateRenderData();
this.nodeTips.width = this.txtTips.width + 20;
if (t == o.FishAreaName.Left) {
this.sprTpisBg.scaleX = -1;
this.nodeTips.position = cc.v2(this.node.width / 2 + this.txtTips.width - 20 + l, this.node.height / 2 - 20 + c);
} else this.nodeTips.position = cc.v2(-this.txtTips.width / 2 + 20 + l, this.node.height / 2 - 20 + c);
ActionUtils.repeat(this.nodeTips, cc.delayTime(a), cc.fadeIn(r), cc.delayTime(n), cc.fadeOut(r));
}
},
createTipsIcon: function(e, t) {
var i = this, s = e.tipsIcon();
if (!TypeUtils.isRealNull(s)) {
this.sprBuble.active = !0;
this.sprBuble.scale = .6;
this.sprBuble.position = cc.v2(15, this.node.height / 2 + 35);
this.sprBuble.setOpacity(0);
ActionUtils.repeat(this.sprBuble, cc.fadeIn(2), cc.delayTime(3), cc.fadeOut(2), cc.delayTime(3));
cc.loader.load(s.icon, function(e, t) {
null === e && (i.sprTips.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(t));
});
}
},
createCDTime: function(e, t) {
if (!(e.endAt() <= TimeUtils.getServerTime())) {
this.txtTime.active = !1;
this.txtTime.y = -(this.node.height / 2 + this.txtTime.height / 2);
}
},
handleUpdate: function(e) {
if (!TypeUtils.isRealNull(this.config.endAt)) {
var t = !1, i = (this.config.endAt() || 0) - Math.floor(TimeUtils.getServerTime());
this.txtTime.active = !0;
if (i > 0) this.txtTime.getComponent(cc.Label).string = TimeUtils.getTimeForm(i); else {
t = !0;
this.txtTime.getComponent(cc.Label).string = "00:00:00";
this.txtTime.active = !1;
}
t && this.setData(this.config, this.area);
}
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
FishConst: "FishConst",
redPoint: "redPoint"
} ],
comCurrency: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "4f1a2MeGC5NT7M6/ld3cF3B", "comCurrency");
var s = e("BaseComponent"), n = e("ShopConst"), o = e("ItemConst"), a = e("SystemConst");
cc.Class({
extends: s,
properties: {},
ctor: function() {},
onLoad: function() {
var e = this;
s.prototype.onLoad.call(this);
this.sprIcon = this.getC("sprIcon");
this.btnAdd = this.getC("btnAdd");
this.txtNum = this.getC("txtNum");
this.onClick(this.btnAdd, function() {
e.onClicAdd();
});
this.initData();
this.initEvent();
},
initData: function() {
this.ctrl = app.ctrls.currency;
this.model = this.ctrl.getModel();
},
initEvent: function() {
this.eventOn(this.model.EVENT_UPDATE_CURRENCY, this.updateCurrency, this);
},
setData: function(e, t, i) {
var s = this;
i = i || {};
this.itemId = e;
this.clickCB = t;
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(this.itemId),
callback: function() {
SpriteUtils.setAdaptContentSize(s.sprIcon, null, 65);
}
}, this.sprIcon, this);
this.updateCurrency();
},
onClicAdd: function() {
if (TypeUtils.isFunction(this.clickCB)) this.clickCB(); else {
var e = Number(this.itemId);
if (e == o.ResourceType.Jade) ViewManager.showView("JADE_EXCHANGE_VIEW"); else if (SystemUtils.checkIsClose(a.SystemId.Shop)) TipsUtils.showTips("敬请期待"); else {
var t = {
id: n.Shop_Diamond
};
e == o.ResourceType.Diamond && (t.id = n.Shop_Stone);
ViewManager.showView("SHOP_VIEW", null, t);
}
}
},
updateCurrency: function() {
var e = Number(this.itemId);
if (!TypeUtils.isRealNull(e)) {
var t = ItemUtils.getItemNum(e);
ItemUtils.isCurrenyItem(e) && (t = NumberUtils.toStringWithFloor(t, 2));
this.txtNum.getComponent(cc.Label).string = t;
}
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
ItemConst: "ItemConst",
ShopConst: "ShopConst",
SystemConst: "SystemConst"
} ],
comFishItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "8b945Kw+TFNjIiadpHLuXt4", "comFishItem");
var s;
function n(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}
var o = e("BaseComponent"), a = e("ItemConst"), r = (e("CatchFishConst"), null), l = (n(s = {}, a.ResourceType.KuangBao, "kuangbao"), 
n(s, a.ResourceType.Frozen, "zm_btn_07"), n(s, a.ResourceType.HaoJiao, "zm_btn_08"), 
n(s, a.ResourceType.ShenDeng, "zm_btn_09"), n(s, a.ResourceType.Collimation, "aim"), 
s);
cc.Class({
extends: o,
properties: {
sprBotBg: cc.Node,
sprIcon: cc.Node,
cutdownProg: cc.Node,
txtNum: cc.Node
},
ctor: function() {},
onLoad: function() {
o.prototype.onLoad.call(this);
r = ConfigMgr.getConfig("shop_config");
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this.initUI();
},
initUI: function() {
var e = this;
this.onClick(this.node, function() {
TypeUtils.isFunction(e.callback) && e.callback();
});
this.cutdownProg.getComponent(cc.ProgressBar).progress = 0;
},
setClickCb: function(e) {
this.callback = e;
},
updateItemNum: function(e, t) {
var i = ItemUtils.getItemNum(e);
SpriteUtils.setTexture({
path: "module/fish/texture/catchFishUi/icons/" + l[e]
}, this.node);
if (i > 0) {
this.sprIcon.active = !1;
this.txtNum.getComponent(cc.Label).string = i;
} else {
this.sprIcon.active = !0;
var s = r.findByIndex(t);
TypeUtils.isRealNull(s) || TypeUtils.isRealNull(s.price) || (this.txtNum.getComponent(cc.Label).string = s.price.amount);
}
},
getPercentage: function() {
var e = this.cutdownProg.getComponent(cc.ProgressBar).progress;
e > 0 && e < .01 && (e = 0);
return e;
},
setPercentage: function(e) {
var t = this, i = e.startAt, s = e.endAt || this.model.getNowTime();
this.cutdownProg.stopAllActions();
if (i > s) this.cutdownProg.getComponent(cc.ProgressBar).progress = 0; else {
var n = i;
ActionUtils.timerAct(this.cutdownProg, function() {
TypeUtils.isRealNull(i) ? n = t.model.getNowTime() : n += .05;
t.cutdownProg.getComponent(cc.ProgressBar).progress = (s - n) / e.total;
if (s < n) {
t.cutdownProg.stopAllActions();
t.cutdownProg.getComponent(cc.ProgressBar).progress = 0;
}
}, .05);
}
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
CatchFishConst: "CatchFishConst",
ItemConst: "ItemConst"
} ],
comHallArea: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "5c7ecmEnBFB1K+OJqlh5nWB", "comHallArea");
var s = e("BaseComponent"), n = e("FishConst"), o = e("ShopConst"), a = cc.Enum({
TOP: 0,
LEFT: 1,
RIGHT: 2,
BOT: 3
});
cc.Class({
extends: s,
properties: {
leftNode: cc.Node,
rightNode: cc.Node,
comBtn: cc.Prefab,
comBtnList: cc.Prefab,
areaType: {
default: a.TOP,
tooltip: !1,
type: a
}
},
ctor: function() {},
onLoad: function() {
s.prototype.onLoad.call(this);
this.initData();
this.initEvent();
this.initView();
},
initData: function() {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this._shopModel = app.ctrls.shop.getModel();
this._bagModel = app.ctrls.bag.getModel();
this._clubModel = app.ctrls.club.getModel();
},
initEvent: function() {
this.eventOn(AppEvent.SystemOnOffInfo, this.onSystemOnOffInfo, this);
this.areaType == a.BOT && this.eventOn(this._clubModel.EVENT_FISH_CLUB_MY_CLUB_INFO, this.handleMyClubInfo, this);
},
initView: function() {
this.len = 4;
this.areabtns = [];
this.areaView = {};
this.areaType == a.TOP ? this.len = 3 : this.areaType == a.BOT && (this.len = 7);
TypeUtils.isRealNull(this.leftNode) || this.addAreaViewList(this.area, this.leftNode);
for (var e = 0; e < this.len; e++) {
var t = cc.instantiate(this.comBtn);
t.parent = this.node;
t.zIndex = -1;
t.getComponent("comBtn").setParentNode(this.node);
this.areabtns.push(t);
if (this.areaType == a.TOP) {
t.y = 20;
t.x = 110 * (e + .5) + 220;
this.area = n.FishAreaName.Top;
} else if (this.areaType == a.BOT) {
t.y = 25;
t.x = 120 * e - this.node.width / 2 + 180;
this.area = n.FishAreaName.Bot;
} else {
t.y = this.node.height / 2 - 110 * (e + .5) - 20;
this.area = n.FishAreaName.Right;
this.areaType == a.LEFT && (this.area = n.FishAreaName.Left);
}
this.addAreaViewList(this.area, t);
}
TypeUtils.isRealNull(this.rightNode) || this.addAreaViewList(this.area, this.rightNode);
this.childList = {};
this.btnsList = {};
this.setData(n.FishHallArea);
this.doEnterAction();
},
setData: function(e) {
this.data = e[this.area];
this.updateBtns();
},
updateBtns: function() {
for (var e = 0, t = 0; t < this.data.length; t++) {
var i = this.data[t], s = this.areabtns[e];
if (s && this.isOpen(i)) {
s.active = !0;
s.getComponent("comBtn").setData(i, this.area);
e += 1;
TypeUtils.isNotEmptyArray(i.btnList) && this.updateChildList(i.name, i.btnList, s, this.area);
}
}
for (var n = e; n < this.areabtns.length; n++) this.areabtns[n].active = !1;
},
updateChildList: function(e, t, i, s) {
if (TypeUtils.isRealNull(this.childList[e])) {
var o = cc.instantiate(this.comBtnList);
o.parent = this.node;
this.childList[e] = o;
}
if (s == n.FishAreaName.Right) {
this.childList[e].anchorX = 1;
this.childList[e].x = i.x - i.width / 2;
} else {
this.childList[e].anchorX = 0;
this.childList[e].x = i.x + i.width / 2;
}
var a = this.seekC(this.childList[e], "sprBg"), r = this.seekC(this.childList[e], "btnLayer");
this.childList[e].y = i.y;
this.btnsList[e] = this.btnsList[e] || {};
for (var l = {}, c = 0, h = 0; h < t.length; h++) {
var u = t[h];
if (this.isOpen(u)) {
c++;
var d = null;
l[u.name] = !0;
if (TypeUtils.isRealNull(this.btnsList[e][u.name])) {
d = cc.instantiate(this.comBtn);
this.btnsList[e][u.name] = d;
d.parent = r;
d.getComponent("comBtn").setParentNode(this.node);
} else d = this.btnsList[e][u.name];
d.getComponent("comBtn").setData(u, this.area);
d.x = 120 * (c - .5) + 5;
}
}
this.childList[e].width = 120 * c + 40;
a.width = 120 * c + 40;
a.scale = 1 == this.childList[e].anchorX ? -1 : 1;
r.width = 120 * c;
r.x = 1 == this.childList[e].anchorX ? -r.width - 30 : 30;
this.childList[e].active = !1;
for (var p in this.btnsList[e]) if (!l[p]) {
this.btnsList[e][p].node.destroy();
this.btnsList[e][p] = null;
}
},
isOpen: function(e) {
if (!e.statue) return !1;
if (e.isMainHall && !this.isMainHall) return !1;
if (e.type != n.BtnType.Act || TypeUtils.isRealNull(e.actId)) {
if (!TypeUtils.isRealNull(e.systemId) && SystemUtils.checkIsClose(e.systemId)) return !1;
} else ;
var t = !1;
if (TypeUtils.isNotEmptyArray(e.btnList)) {
for (var i = 0; i < e.btnList.length; i++) {
var s = e.btnList[i];
t = t || this.isOpen(s);
}
if (!t) return !1;
}
return !e.open || !this[e.open] || this[e.open]();
},
isShowClubTips: function() {
return 0 == RoleUtils.getUnionId();
},
hasCharge: function() {
return !this._shopModel.isCharge();
},
hasBuyGoods: function() {
if (this.hasCharge()) return !1;
var e = this._shopModel.getShopInfoBuyCount(o.Fish_NewerGift);
return !TypeUtils.isRealNull(e) && e <= 0;
},
onClickGunForge: function() {
var e = this._bagModel.getGunForgeLevel(), t = this.model.getTurnForgeLevel();
e >= t ? ViewManager.showView("GUN_FORGE_VIEW") : TipsUtils.showTips(StringUtils.format(_LANG("GUN_FORGE_OPEN_TIPS"), t));
},
onClickClub: function() {
app.ctrls.club.requestUnionInfo();
},
handleMyClubInfo: function(e) {
var t = this._clubModel.getClubInfo();
TypeUtils.isRealNull(t) ? ViewManager.showView("CLUB_APPLY_VIEW") : ViewManager.showView("CLUB_HALL_VIEW", null, null, function() {
ViewManager.closeView("FISH_HALL_VIEW");
});
},
doPnlAction: function(e) {
var t = this;
if (TypeUtils.isRealNull(this.childList[e])) for (var i in this.childList) this.childList.hasOwnProperty(i) && this.childList[i].active && this.doPnlAction(i); else {
var s = AdaptUtils.getMinAdaptiveScale(), n = this.childList[e];
if (n.active) {
n.active = !0;
n.scaleX = 1;
n.isAct = !0;
ActionUtils.sequence(n, cc.scaleTo(.1, 1.1 * s, s), cc.scaleTo(.1, 0, s), cc.callFunc(function() {
n.active = !1;
n.scaleX = 1;
TypeUtils.isFunction(t.callback) && t.callback();
n.isAct = !1;
}));
} else {
n.active = !0;
n.scaleX = 0;
ActionUtils.sequence(n, cc.scaleTo(.1, 1.1 * s, s), cc.scaleTo(.1, s, s), cc.callFunc(function() {
TypeUtils.isFunction(t.callback) && t.callback();
}));
}
}
},
setDoActionCallback: function(e) {
this.callback = e;
},
addAreaViewList: function(e, t) {
this.areaView[e] = this.areaView[e] || [];
this.areaView[e].push({
pnl: t,
pos: cc.v2(t.x, t.y)
});
},
doEnterAction: function() {
for (var e in this.areaView) if (this.areaView.hasOwnProperty(e)) for (var t = this.areaView[e], i = 0; i < t.length; i++) {
var s = t[i];
if (s.pnl.active) {
var o = .3, a = .05, r = s.pos;
if (e == n.FishAreaName.Top) r = cc.v2(r.x, r.y + 150); else if (e == n.FishAreaName.Left) {
r = cc.v2(r.x - 150, r.y);
o = .5;
} else if (e == n.FishAreaName.Right) {
r = cc.v2(r.x + 150, r.y);
o = .5;
} else if (e == n.FishAreaName.Bot) {
r = cc.v2(r.x, r.y - 150);
o = .5;
a = .03;
}
s.pnl.setPosition(r);
s.pnl.stopAllActions();
ActionUtils.sequence(s.pnl, cc.delayTime(o + i * a), cc.moveTo(.3, s.pos).easing(cc.easeBackOut()));
}
}
},
onSystemOnOffInfo: function(e) {
for (var t = {}, i = 0; i < e.length; i++) TypeUtils.isRealNull(e[i].numId) || (t[e[i].numId] = !0);
for (var s = 0; s < this.data.length; s++) {
var n = this.data[s];
if (!TypeUtils.isRealNull(n.systemId) && t[n.systemId]) {
this.updateBtns();
return;
}
if (!TypeUtils.isRealNull(n.btnList)) for (var o = 0; o < n.btnList.length; o++) {
var a = n.btnList[o];
if (!TypeUtils.isRealNull(a.systemId) && t[a.systemId]) {
this.updateBtns();
return;
}
}
}
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
FishConst: "FishConst",
ShopConst: "ShopConst"
} ],
comHeadRailing: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "523a3ttHeRLsYr3QrL7n4og", "comHeadRailing");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
nodeRoot: cc.Node,
txtName: cc.Label,
txtRoleId: cc.Label,
comHead: cc.Prefab,
comCurrency: cc.Prefab
},
ctor: function() {},
onLoad: function() {
var e = this;
s.prototype.onLoad.call(this);
this.onClick(this.nodeRoot, function() {
e.onClicHead();
});
this.initData();
this.initEvent();
this.initUI();
},
initData: function() {
this.ctrl = app.ctrls.role;
this.model = this.ctrl.getModel();
},
initEvent: function() {
this.eventOn(this.model.EVENT_UPDATE_ROLEINFO, this.handleUpdateRoleInfo, this);
},
initUI: function() {
this.playerHead = cc.instantiate(this.comHead);
this.playerHead.scale = .9;
this.playerHead.parent = this.node;
this.playerHead.setPosition(60, -65);
this.playerHead.getComponent("comHead").setRoleData({
roleId: RoleUtils.getRoleId(),
vip: VipUtils.getFishVipLevel()
});
this.playerHead.getComponent("comHead").setClickCB(this.onClicHead.bind(this));
this.updateRoleInfo();
},
updateRoleInfo: function() {
this.txtName.string = this.model.getNickName();
this.txtRoleId.string = "ID:" + RoleUtils.getRoleId();
},
setData: function(e) {
this.currencyList = {};
this.posList = [];
for (var t = 0; t < e.length; t++) {
var i = e[t], s = cc.instantiate(this.comCurrency);
this.node.addChild(s);
s.setPosition(440 + 270 * t, -50);
s.getComponent("comCurrency").setData(i.itemId);
this.currencyList[i.itemId] = s;
this.posList.push({
node: s,
pos: cc.v2(s.x, s.y)
});
}
this.doEnterAction();
},
onClicHead: function() {
ViewManager.showView("ROLE_VIEW");
},
doEnterAction: function() {
for (var e = 0; e < this.posList.length; e++) {
var t = this.posList[e], i = cc.v2(t.pos.x, t.pos.y + 150);
t.node.setPosition(i);
t.node.stopAllActions();
ActionUtils.sequence(t.node, cc.delayTime(.3 + .05 * e), cc.moveTo(.3, t.pos).easing(cc.easeBackOut()));
}
},
handleUpdateRoleInfo: function() {
this.updateRoleInfo();
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
comHead: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "243a2wAxwZG2KO79mlrnv9O", "comHead");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
sprHead: cc.Node,
sprHeadBox: cc.Node,
txtVip: cc.Node
},
onLoad: function() {
s.prototype.onLoad.call(this);
this.initData();
this.initEvent();
this.txtVip.active = !1;
},
initData: function() {
this.ctrl = app.ctrls.role;
this.model = this.ctrl.getModel();
},
initEvent: function() {
this.eventOn(this.model.EVENT_UPDATE_ROLEINFO, this.handleUpdateRoleInfo, this);
},
setRoleData: function(e) {
var t = this;
this.data = e || {};
TypeUtils.isRealNull(this.sprHead) && logger.error(e);
this.sprHead.active = !0;
this.data.roleId && RoleUtils.getRoleId() == this.data.roleId && (e.vip = VipUtils.getFishVipLevel());
TypeUtils.isRealNull(e.roleId) ? TypeUtils.isAllNull(e.image) || TypeUtils.isAllNull(e.md5) ? this.sprHead.active = !1 : LoadUtils.loadImg(e.url, function(e, i) {
t.sprHead.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(i);
}) : HeadManager.loadHead(this.sprHead, {
roleId: e.roleId,
isRequest: !0
});
this.setVipLv(e.vip);
},
setVipLv: function(e) {},
setClickCB: function(e) {
this.clickCB = e;
},
onClicHead: function() {
TypeUtils.isFunction(this.clickCB) && this.clickCB();
},
onChangeHeadSuccess: function() {
this.data.roleId && (RoleUtils.getRoleId(), this.data.roleId);
},
handleUpdateRoleInfo: function(e) {
this.setRoleData(this.data);
},
onDestroy: function() {
s.prototype.onDestroy.call(this);
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
comInputItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "be5ceSZnapGtIBe81OWuj7D", "comInputItem");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
txtName: cc.Label,
editBox: cc.Node,
editBg: cc.Node,
btnCode: cc.Node,
txtCode: cc.Node,
sprCheck: cc.Node,
txtCheck: cc.Label
},
onLoad: function() {
this.sprCheck.active = !1;
this.txtCheck.string = "";
this.stateData = {
state: !1,
tips: "输入为空！"
};
},
setConfig: function(e) {
if (TypeUtils.isRealNull(e)) this.stateData = {
state: !0
}; else {
this.node.stopAllActions();
var t = 1 == e.hasBtn;
this.btnCode.getComponent(cc.Button).interactable = !0;
this.txtCode.getComponent(cc.LabelOutline).color = cc.color(23, 139, 78, 255);
this.txtCode.getComponent(cc.Label).string = "验证码";
this.onClick(this.btnCode, function() {
TypeUtils.isFunction(e.clickCB) && e.clickCB();
});
this.btnCode.active = t;
this.editBox.width = t ? 180 : 320;
this.codeTime = e.codeTime || 60;
this.editBg.getComponent(cc.Widget).updateAlignment();
this.txtName.string = e.name || "";
this.sprCheck.active = !1;
this.txtCheck.string = "";
this.editBox.getComponent(cc.EditBox).string = "";
this.editBox.getComponent(cc.EditBox).maxLength = e.maxLength || 11;
var i = e.inputMode;
TypeUtils.isRealNull(i) && (i = cc.EditBox.InputMode.ANY);
this.editBox.getComponent(cc.EditBox).inputMode = i;
var s = e.inputFlag;
TypeUtils.isRealNull(s) && (s = cc.EditBox.InputFlag.DEFAULT);
this.editBox.getComponent(cc.EditBox).inputFlag = s;
this.editBox.getComponent(cc.EditBox).placeHolder = e.placeHolder || "点击输入...";
this.editBox.getComponent(cc.EditBox).fontSize = e.fontSize || 26;
this.returnCb = e.callback;
}
},
onTextChange: function(e) {
if (TypeUtils.isFunction(this.returnCb)) {
this.stateData = this.returnCb(this.getString());
this.sprCheck.active = !0;
SpriteUtils.setTexture({
path: "module/fish/texture/fishCommon/icon_" + (this.stateData.state ? "6" : "83")
}, this.sprCheck, this);
var t = this.stateData.tips || "";
this.txtCheck.string = t;
}
TypeUtils.isFunction(this.changeCallback) && this.changeCallback();
},
setChangeCB: function(e) {
this.changeCallback = e;
},
getString: function() {
return this.editBox.getComponent(cc.EditBox).string;
},
getStateData: function() {
return {
state: this.stateData.state,
tips: this.stateData.tips,
input: this.getString()
};
},
getWaitTime: function() {
var e = this;
if (this.btnCode.active) {
this.btnCode.getComponent(cc.Button).interactable = !1;
this.txtCode.getComponent(cc.LabelOutline).color = cc.color(102, 71, 125, 255);
ActionUtils.timerAct(this.node, function(t, i, s) {
e.txtCode.getComponent(cc.Label).string = e.codeTime - i + "s";
if (s) {
e.btnCode.getComponent(cc.Button).interactable = !0;
e.txtCode.getComponent(cc.LabelOutline).color = cc.color(23, 139, 78, 255);
e.txtCode.getComponent(cc.Label).string = "验证码";
}
}, 1, this.codeTime);
}
},
getState: function() {
return this.stateData.state;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
comItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "d069129pLZCpa8DilSrm+p9", "comItem");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
sprBotBg: cc.Node,
txtNum: cc.Node,
sprIcon: cc.Node
},
onLoad: function() {},
setData: function(e) {
var t = this, i = e.path, s = e.desc || "";
i = TypeUtils.isAllNull(i) && !TypeUtils.isRealNull(e.itemId) ? ItemUtils.getItemPngByCfg(e) : ItemUtils.getItemDefaultPng();
SpriteUtils.setTexture({
path: i,
isHide: !0,
callback: function() {
SpriteUtils.setAdaptContentSize(t.sprIcon, null, 70);
}
}, this.sprIcon, this);
if (TypeUtils.isAllNull(s) && !TypeUtils.isRealNull(e.amount)) {
s = "X" + NumberUtils.toString(Number(e.amount), 2);
this.sprBotBg.active = !0;
this.txtNum.getComponent(cc.Label).string = s;
} else this.sprBotBg.active = !1;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
comNodeSpine: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "6533dQKKFdHooPAFmzxWews", "comNodeSpine");
cc.Class({
extends: cc.Component,
editor: {
requireComponent: sp.Skeleton
},
properties: {},
start: function() {},
loadSpine: function(e, t) {
cc.loader.loadRes(e, sp.SkeletonData, this.onProcess.bind(this), this.onComplete.bind(this));
this.callback = t;
},
onProcess: function(e, t, i) {},
onComplete: function(e, t) {
e && cc.error(e);
if (this.isValid) {
var i = this.getComponent(sp.Skeleton);
i.premultipliedAlpha = !1;
i.skeletonData = t;
this.callback(e, i);
}
}
});
cc._RF.pop();
}, {} ],
comOpenSp: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "ab16597obhA979jB5J4YebP", "comOpenSp");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
nodeOpen: cc.Node,
spYanHua: sp.Skeleton,
spRibbon: sp.Skeleton
},
onLoad: function() {
this.initSpine();
},
initSpine: function() {
SpineUtils.changeAnimation(this.spYanHua, "play", !0, null, !0);
SpineUtils.changeAnimation(this.spRibbon, "1", !1, null, !0);
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
comTitleSp: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "b72f8sbPUpKvonZEtoTWsfL", "comTitleSp");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
spTitle: cc.Node,
spineTitle: sp.Skeleton
},
playSpine: function(e) {
1 == e ? SpineUtils.changeAnimation(this.spineTitle, "1", !0, "2", !0) : SpineUtils.changeAnimation(this.spineTitle, "3", !0, "4", !0);
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
comfirmBox: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "4df84cAeqNHX797CMOQr+ut", "comfirmBox");
e("List");
cc.Class({
extends: ViewBase,
properties: {
listDesc: cc.Node,
content: cc.Node,
txtDes: cc.Node,
btnCancel: cc.Node,
btnSure: cc.Node,
btnSureLabel: cc.Label,
checkBox: cc.Node,
toggleBox: cc.Toggle,
prefabBg: cc.Prefab
},
onCreate: function(e) {
var t = this;
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
e.cancelCallback && e.cancelCallback();
ViewManager.closeView(t);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(600, 409)
});
this.comBg.getComponent("comBasePopView").setTitle(e.title || "提示");
this.data = e;
e.isHideCloce && this.comBg.getComponent("comBasePopView").hideCloseBtn();
if (e.signBtn) {
this.btnCancel.active = !1;
this.btnSure.x = 0;
}
this.tagKey = e.cbTag;
this.isSelected = !1;
this.toggleBox.isChecked = !1;
this.checkBox.active = !0 === e.needCheckBox;
this.onClick(this.btnCancel, function() {
e.cancelCallback && e.cancelCallback();
ViewManager.closeView(this);
}.bind(this));
this.onClick(this.btnSure, function() {
e.sureCallBack && e.sureCallBack();
UserUtils.setDataStr(this.tagKey, this.isSelected ? "TRUE" : "FALSE");
ViewManager.closeView(this);
}.bind(this));
this.checkBox.on("toggle", this.onClickNoTips, this);
e.enterDesc && (this.btnSureLabel.string = e.enterDesc);
TypeUtils.isRealNull(e.alignType) || (this.txtDes.getComponent(cc.RichText).horizontalAlign = e.alignType);
TypeUtils.isRealNull(e.fontSize) || (this.txtDes.getComponent(cc.RichText).fontSize = e.fontSize);
this.txtDes.getComponent(cc.RichText).string = e.desc;
var i = this.txtDes.height;
if (i > this.content.height) {
this.content.height = i;
this.txtDes.y = -i / 2;
} else this.txtDes.y = -this.content.height / 2;
},
onClickNoTips: function(e) {
this.isSelected = e.isChecked;
},
update: function(e) {
this.data.desCallBack && this.txtDes && this.data.desCallBack(e, this.txtDes);
}
});
cc._RF.pop();
}, {
List: "List"
} ],
crazyOperate: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "1eab7o/GIhHRYqNBnior5MU", "crazyOperate");
var s = e("BaseComponent"), n = e("CatchFishConst"), o = e("ItemConst"), a = n.CRAZY_MULTIPLE, r = n.CRAZY_COUNTDOWN;
cc.Class({
extends: s,
properties: {},
ctor: function() {},
onLoad: function() {
s.prototype.onLoad.call(this);
this.initUI();
this.initData();
},
initUI: function() {
this.btnPause = this.getC("btnPause");
this.btnTwo = this.getC("btnTwo");
this.btnFour = this.getC("btnFour");
this.crazyProgress = this.getC("loadBar");
this.crazyProgress.getComponent(cc.ProgressBar).progress = 0;
},
initData: function(e) {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this._roleModel = app.ctrls.role.getModel();
this._roleId = this._roleModel.getRoleId();
this.roomInfo = this.model.getRoomInfo();
this.multi = a.TWO;
},
onClickCrazyPause: function() {
this.updateCrazyPauseState(!this.model.isCrazyPause());
},
updateCrazyPauseState: function(e) {
this.model.setCrazyPause(e);
var t = e ? "zm_kb_btn_04" : "zm_kb_btn_01";
SpriteUtils.setTexture({
path: "module/fish/texture/catchFishUi/" + t
}, this.btnPause, this);
},
onClickCrazyTwo: function() {
this.requestCrazy(a.TWO);
},
onClickCrazyFour: function() {
this.model.isMatchRoom(this.roomInfo.roomType) ? TipsUtils.showTips(_LANG("CRAZY_MUTIPLE_USE_TIPS")) : this.requestCrazy(a.FOUR);
},
requestCrazy: function(e) {
if (this.isCurrenyEnough(e)) this.ctrl.crazy(e); else {
var t = this.model.isShowJade(this.roomInfo.roomType), i = _LANG("CRAZY_ITEM_NOT_ENOUGH_TIPS2");
TipsUtils.showTips(StringUtils.format(i, t ? "灵玉" : "金币"));
}
},
updateBtnState: function() {
var e = "zm_kb_btn_02", t = "zm_kb_btn_03";
this.multi = this.model.getCrazyMultiple(this._roleId);
TypeUtils.isRealNull(this.multi) || (this.multi == a.TWO ? e = "zm_kb_btn_05" : this.multi == a.FOUR && (t = "zm_kb_btn_06"));
SpriteUtils.setTexture({
path: "module/fish/texture/catchFishUi/" + e
}, this.btnTwo, this);
SpriteUtils.setTexture({
path: "module/fish/texture/catchFishUi/" + t
}, this.btnFour, this);
},
update: function(e) {},
freshState: function() {
var e = this, t = this.model.getCrazyStatus(this._roleId);
if (t.isCrazy) {
this.updateBtnState();
this.setVisible(!0);
this.crazyProgress.stopAllActions();
var i = t.remainTime;
ActionUtils.timerAct(this.crazyProgress, function(t) {
if ((i -= t) < 0) {
e.crazyProgress.getComponent(cc.ProgressBar).progress = 0;
e.crazyProgress.stopAllActions();
} else e.crazyProgress.getComponent(cc.ProgressBar).progress = i / r;
}, .2);
} else {
if (this.model.isCrazyAuto()) {
if (ItemUtils.getItemNum(o.ResourceType.KuangBao) > 0) {
var s = this.multi || a.TWO;
if (this.isCurrenyEnough(s)) {
this.requestCrazy(s);
return;
}
}
}
this.setVisible(!1);
this.updateCrazyPauseState(!1);
}
},
setVisible: function(e) {
this.node.opacity = e ? 255 : 0;
},
isCurrenyEnough: function(e) {
var t = this.model.getPlayerInfo(this._roleId), i = t.gunLevel * e;
return this.model.isShowJade(this.roomInfo.roomType) ? (t.jade || 0) >= i : (t.gold || 0) >= i;
},
getPercentage: function() {
return this.crazyProgress.getComponent(cc.ProgressBar).progress;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
CatchFishConst: "CatchFishConst",
ItemConst: "ItemConst"
} ],
createView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "204c9ICoRVEb6zvycJkT0Bc", "createView");
cc.Class({
extends: ViewBase,
properties: {
prefabBg: cc.Prefab
},
onCreate: function(e) {
var t = this;
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(640, 505)
});
this.comBg.getComponent("comBasePopView").setTitle("创建角色");
this.initData();
this.initEvent();
this.initView();
},
initData: function() {
this.controller = app.ctrls.login;
this.model = this.controller.getModel();
this.controller.getDefaultFace();
},
initEvent: function() {
this.eventOn(this.model.EVENT_GET_HEAD_IMG_SUCCESS, this.handleGetHeadSuccess, this);
},
initView: function() {
var e = this;
this.btnLeft = this.getC("btnLeft");
this.btnRight = this.getC("btnRight");
this.sprAvatar = this.getC("sprAvatar");
this.btnSure = this.getC("btnSure");
this.btnRandom = this.getC("btnRandom");
this.editBox = this.getC("editBox");
this.onClickRandomName();
this.onClick(this.btnRandom, function() {
e.onClickRandomName();
});
this.onClick(this.btnLeft, function() {
e.changeAvatar(!1);
});
this.onClick(this.btnRight, function() {
e.changeAvatar(!0);
});
this.onClick(this.btnSure, function() {
e.onClickCreate();
});
this.freshHead();
},
changeAvatar: function(e) {
var t = this.model.getHeadImgList() || [];
TypeUtils.isEmptyArray(t) ? this.avatarIndex = 1 : e ? this.avatarIndex + 1 < t.length ? this.avatarIndex = this.avatarIndex + 1 : this.avatarIndex = 0 : this.avatarIndex - 1 >= 0 ? this.avatarIndex = this.avatarIndex - 1 : this.avatarIndex = t.length - 1;
this.freshHead();
},
freshHead: function() {
var e = this, t = this.model.getHeadImgList() || [];
if (TypeUtils.isEmptyArray(t)) SpriteUtils.setTexture({
path: "module/games/texture/fish_avatars/tx_gh_22"
}, this.sprAvatar, this); else {
var i = t[this.avatarIndex || 0];
cc.loader.load(i.image, function(t, i) {
null === t && (e.sprAvatar.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(i));
});
}
},
onClickRandomName: function() {
this.nickname = this.getValidRandomName();
TypeUtils.isAllNull(this.nickname) && (this.nickname = this.randomName());
this.editBox.getComponent(cc.EditBox).string = this.nickname;
},
onClickCreate: function() {
var e = this;
this.nickname = this.editBox.getComponent(cc.EditBox).string;
TypeUtils.isAllNull(this.nickname) ? TipsUtils.showTips(_LANG("NICKNAME_IS_NULL")) : TxtFilterUtils.getInstance().checkIsValid(this.nickname, function() {
if (e.isValid) {
var t = e.model.getHeadImgList() || [], i = t[e.avatarIndex || 0] || [];
TypeUtils.isEmptyArray(t) && logger.error("返回默认头像为空：headList：" + t);
e.controller.createRole({
nickname: e.nickname,
avatar: i.image
});
}
});
},
getValidRandomName: function() {
for (var e = "", t = 0; t < 20; t++) {
e = this.randomName();
if (TxtFilterUtils.getInstance().isValid(e)) return e;
}
logger.warn("名字不合法 : " + e);
},
randomName: function() {
var e = this.model.getNickname();
if (TypeUtils.isAllNull(e)) {
e = "";
for (var t = 0; t < 3; t++) {
var i = Math.ceil(25 * Math.random());
e += String.fromCharCode(65 + i);
}
e += RandomUtils.getRandIntInRange(1e3, 9999);
} else e.length > 7 && (e = e.substring(0, 7));
return e;
},
handleGetHeadSuccess: function() {
this.freshHead();
}
});
cc._RF.pop();
}, {} ],
disclaimerView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "b65faen0c1JK4lMHLbkRnEm", "disclaimerView");
cc.Class({
extends: ViewBase,
properties: {
prefabBg: cc.Prefab,
content: cc.Node,
txtDes: cc.Label
},
onCreate: function(e) {
var t = this;
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(830, 588)
});
this.comBg.getComponent("comBasePopView").setTitle("用户协议");
this.checkBox = this.getC("checkBox");
this.checkBox.on("toggle", this.onClickAllow, this);
this.toggleBox = this.checkBox.getComponent(cc.Toggle);
var i = UserUtils.getFloatVal(UserDefaultConst.AllowUserProtocol);
this.toggleBox.isChecked = 1 == i;
this.btnSure = this.getC("btnSure");
LoadUtils.loadResWithType("disclaimer_config", cc.JsonAsset, function(e, i) {
void 0 != i && void 0 != i.json && (t.txtDes.string = i.json[0].content);
});
ActionUtils.callOnce(this.content, function() {
t.content.height = t.txtDes.node.height;
}, 1);
this.onClick(this.btnSure, function() {
ViewManager.closeView(t);
});
},
onClickAllow: function(e) {
UserUtils.setFloatVal(UserDefaultConst.AllowUserProtocol, e.isChecked ? 1 : 0);
this.emit(AppEvent.AllowUserProtocol, {
isAllow: e.isChecked
});
}
});
cc._RF.pop();
}, {} ],
dragonTreasureView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "cfbe0qbimhAKYHlue3T5OYV", "dragonTreasureView");
var s = e("ItemConst");
cc.Class({
extends: ViewBase,
properties: {
nodeAward: cc.Node,
txtAwards: [ cc.Label ],
btnExit: cc.Node,
txtNums: [ cc.Label ],
txtTimes: cc.Label,
txtMaxAward: cc.Node,
txtTime: cc.Label,
btnBoxLeft: cc.Node,
spBoxLeft: cc.Node,
btnBoxRight: cc.Node,
spBoxRight: cc.Node
},
onCreate: function(e) {
ViewBase.prototype.onCreate.call(this);
this.data = e || {};
this.initData(this.data);
this.initEvent();
this.initUI();
},
initData: function(e) {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this.rewardInfo = e.data;
this.curRonud = 1;
this.isClicked = !1;
this.countdownTime = 11;
},
initEvent: function() {
this.eventOn(this.model.EVENT_UPDATE_DRAGON_TREASURE, this.handleUpdateDragonTreasure, this);
},
initUI: function() {
var e = this;
this.onClick(this.btnExit, this.onClickActivityEnd.bind(this));
this.txtMaxAward.active = !1;
this.nodeAward.active = !0;
this.spBoxLeft.getComponent(sp.Skeleton).setCompleteListener(this.onSpineComplete.bind(this));
this.spBoxRight.getComponent(sp.Skeleton).setCompleteListener(this.onSpineComplete.bind(this));
this.onClick(this.btnBoxLeft, function() {
e.onClickOpenBox(e.spBoxLeft);
});
this.onClick(this.btnBoxRight, function() {
e.onClickOpenBox(e.spBoxRight);
});
ActionUtils.timerAct(this.node, function() {
e.countdownTime = e.countdownTime - 1;
e.txtTime.string = e.countdownTime + "s";
if (e.countdownTime <= 0) {
e.onClickActivityEnd();
e.node.stopAllActions();
}
}, 1);
this.updateWarheadNum();
},
onClickActivityEnd: function() {
this.rewardInfo.multiple > 0 && this.ctrl.takeAwayDragonTreasureBox();
this.closethis();
},
onClickOpenBox: function(e) {
if (!(this.isClicked || this.curRonud > 3)) {
this.isClicked = !0;
this.touchBox = e;
this.rewardInfo.multiple <= 0 ? this.closethis() : this.ctrl.openDragonTreasureBox();
}
},
handleUpdateDragonTreasure: function(e) {
var t = this, i = e.data;
if (!TypeUtils.isRealNull(i)) {
this.rewardInfo = i;
this.curRonud = this.curRonud + 1;
var s = this.rewardInfo.multiple;
this.txtTimes.string = StringUtils.format("【第%d/%d轮】", this.curRonud > 3 ? 3 : this.curRonud, 3);
var n = this.curRonud > 3 && s > 0;
this.txtMaxAward.active = n;
this.nodeAward.active = !n;
SpineUtils.changeAnimation(this.touchBox, s > 0 ? "zhongjiang" : "shibai", !0, "daiji", !0);
(this.curRonud > 3 || s <= 0) && ActionUtils.callOnce(this.touchBox, function() {
t.onClickActivityEnd();
}, 5);
this.countdownTime = 11;
}
},
updateWarheadNum: function() {
for (var e = this.rewardInfo.danTouDrop || [], t = 0; t < e.length; t++) {
var i = e[t];
if (i.itemId == s.WarheadType.WarheadPlatinum) {
this.txtNums[0].getComponent(cc.Label).string = i.amount * this.rewardInfo.multiple;
this.txtAwards[0].getComponent(cc.Label).string = i.amount * this.rewardInfo.multiple * 2;
} else if (i.itemId == s.WarheadType.WarheadGold) {
this.txtNums[1].getComponent(cc.Label).string = i.amount * this.rewardInfo.multiple;
this.txtAwards[1].getComponent(cc.Label).string = i.amount * this.rewardInfo.multiple * 2;
} else if (i.itemId == s.WarheadType.WarheadSilver) {
this.txtNums[2].getComponent(cc.Label).string = i.amount * this.rewardInfo.multiple;
this.txtAwards[2].getComponent(cc.Label).string = i.amount * this.rewardInfo.multiple * 2;
}
}
},
onSpineComplete: function(e) {
if (e && e.animation && ("zhongjiang" == e.animation.name || "shibai" == e.animation.name)) {
this.updateWarheadNum();
this.isClicked = !1;
}
},
closethis: function() {
ViewManager.closeView(this);
}
});
cc._RF.pop();
}, {
ItemConst: "ItemConst"
} ],
drawItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "1d1ebWcoRJAkrKTiQEewzYj", "drawItem");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
spLight: cc.Node,
txtNum: cc.Node,
sprBox: cc.Node,
sprIcon: cc.Node,
spMfcj: cc.Node,
spineMfcj: sp.Skeleton
},
onLoad: function() {
this.initUI();
},
initUI: function() {
this.spLight.active = !1;
this.sprBox.active = !1;
this.spineMfcj.setCompleteListener(this.spineCompleteHanlde.bind(this));
},
updateUI: function() {
this.spLight.active = !1;
this.txtNum.active = !1;
this.sprIcon.active = !1;
this.enabledDark(!1);
SpineUtils.changeAnimation(this.spineMfcj, "2", !1, null, !0);
},
enabledDark: function(e) {
this.sprIcon.color = e ? cc.color(100, 100, 100) : cc.color(255, 255, 255);
},
showLight: function(e) {
e ? SpineUtils.changeAnimation(this.spineMfcj, "3", !0, null, !0) : SpineUtils.changeAnimation(this.spineMfcj, "4", !1, null, !0);
},
updateData: function(e, t) {
var i = this;
this.data = e;
this.index = t;
var s = e.content.replace("×", "");
this.txtNum.getComponent(cc.Label).string = s;
SpriteUtils.setTexture({
path: ItemUtils.getItemPngByCfg(e.award),
callback: function() {
SpriteUtils.setAdaptContentSize(i.sprIcon, null, 80);
}
}, this.sprIcon, this);
this.updateUI();
},
spineCompleteHanlde: function(e) {
if (e && e.animation && "2" == e.animation.name) {
this.spLight.active = !0;
this.txtNum.active = !0;
this.sprIcon.active = !0;
1 == this.index && TypeUtils.isFunction(this.showCallBack) && this.showCallBack();
}
},
setShowFinishCb: function(e) {
this.showCallBack = e;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
dropAwardItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "4370636PzRMr5RWpNtAltCb", "dropAwardItem");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
sprBg: cc.Node,
txtNum: cc.Node,
sprIcon: cc.Node
},
onLoad: function() {},
setData: function(e) {
var t = this, i = e.path, s = e.desc || "";
1 == e.hideBg && (this.sprBg.active = !1);
TypeUtils.isAllNull(i) && (i = TypeUtils.isRealNull(e.itemId) ? ItemUtils.getItemDefaultPng() : ItemUtils.getItemPngByCfg(e));
SpriteUtils.setTexture({
path: i,
isHide: !0,
callback: function() {
SpriteUtils.setAdaptContentSize(t.sprIcon, null, 70);
}
}, this.sprIcon, this);
TypeUtils.isAllNull(s) && !TypeUtils.isRealNull(e.amount) && (s = "+" + NumberUtils.toString(e.amount, 2));
this.txtNum.getComponent(cc.Label).string = s;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
dynjDieEffect: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "d6d68ju9SxNmKfYQo/BsYnC", "dynjDieEffect");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
spJade: cc.Node,
spineJade: sp.Skeleton,
spRoll: cc.Node,
spineRoll: sp.Skeleton,
txtNums: [ cc.Label ]
},
onLoad: function() {},
initUI: function() {
this.totalNum = 0;
for (var e = 0; e < this.txtNums.length; e++) this.txtNums[e].string = "";
SpineUtils.changeAnimation(this.spineJade, "1", !1, null, !0);
},
addNum: function(e) {
this.totalNum += e;
for (var t = StringUtils.addZero(this.totalNum, 4), i = 0; i < this.txtNums.length; i++) this.txtNums[i].string = t.charAt(i);
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
fingerPlayResultView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "2cad0dNFqZI2pHBRxBZwOmG", "fingerPlayResultView");
cc.Class({
extends: ViewBase,
properties: {
sprResult: cc.Node,
sprIcon: cc.Node,
btnSettle: cc.Node,
btnContinu: cc.Node,
txtNum: cc.Node,
txtTime: cc.Label
},
onCreate: function(e) {
ViewBase.prototype.onCreate.call(this);
this.initData(e);
this.initEvent();
this.initUI();
},
initData: function(e) {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this.roomType = this.model.getRoomType();
this.battleInfo = e.info;
this.closeCallback = e.callback;
this.isMaxRound = e.isMaxRound;
this.isWin = e.isWin;
this.countdownTime = 10;
},
initEvent: function() {},
initUI: function() {
var e = this.model.isRoomWangLingJuYuan(this.roomType);
SpriteUtils.setTexture({
path: "module/fish/texture/fishPlay/fingerPlay/" + (e ? "cq_jade" : "cq_gold"),
isHide: !0
}, this.sprIcon, this);
var t = this.battleInfo.result;
SpriteUtils.setTexture({
path: "module/fish/texture/fishPlay/fingerPlay/cq_result_" + t,
isHide: !0
}, this.sprResult, this);
this.sprIcon.active = this.isWin;
this.txtNum.active = this.isWin;
var i = Number(this.battleInfo.itemList[0].amount);
this.txtNum.getComponent(cc.Label).string = Math.floor(.5 * i);
this.onClick(this.btnSettle, this.onClickEndPlay.bind(this));
var s = !this.isWin || this.isMaxRound;
this.btnSettle.x = s ? 0 : -222;
this.onClick(this.btnContinu, this.onClickBtnClose.bind(this));
this.btnContinu.active = !s;
},
update: function(e) {
this.countdownTime = this.countdownTime - e;
this.txtTime.string = Math.ceil(this.countdownTime) + "S";
this.countdownTime <= 0 && this.onClickEndPlay();
},
onClickEndPlay: function() {
this.ctrl.endCaiQuan();
ViewManager.closeView(this);
ViewManager.closeView("FINGER_PLAY_VIEW");
},
onClickBtnClose: function() {
TypeUtils.isFunction(this.closeCallback) && this.closeCallback();
ViewManager.closeView(this);
}
});
cc._RF.pop();
}, {} ],
fingerPlayView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "4222b6HvdlL4LdDcJoS0m5w", "fingerPlayView");
var s;
function n(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}
var o = (n(s = {}, 0, [ 2, 0, 1 ]), n(s, 1, [ 0, 1, 2 ]), n(s, 2, [ 1, 2, 0 ]), 
s), a = [ {
dj: "zi_daiji",
zj: "zi_zhongjiang"
}, {
dj: "lv_daiji",
zj: "lv_zhongjiang"
}, {
dj: "hong_daiji",
zj: "hong_zhongjiang"
} ];
cc.Class({
extends: ViewBase,
properties: {
sysFinger: cc.Node,
myFinger: cc.Node,
btnFingers: [ cc.Node ],
offLights: cc.Node,
onLights: cc.Node,
btnClose: cc.Node,
spFingers: [ cc.Node ],
spOpen: cc.Node,
txtNum: cc.Label,
txtRound: cc.Label,
txtTime: cc.Label,
txtDesc: cc.Label,
txtWin: cc.Label
},
onCreate: function(e) {
ViewBase.prototype.onCreate.call(this);
this.data = e || {};
this.initData(this.data);
this.initEvent();
this.initUI();
},
initData: function(e) {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this.roomType = this.model.getRoomType();
this.battleInfo = e.data;
this.model.pauseAutoFire();
this.curIndex = 0;
this.curRound = 1;
this.runTime = 0;
this.countTime = 0;
},
initEvent: function() {
this.eventOn(this.model.EVENT_UPDATE_FINGER_PLAY, this.handleUpdateFingerPlay, this);
},
initUI: function() {
var e = this;
this.initLight();
this.onClick(this.btnClose, this.onClickBtnClose.bind(this));
var t = Number(this.battleInfo.itemList[0].amount);
this.txtNum.string = t;
this.txtWin.string = "赢我得:" + Math.floor(.5 * t);
this.myFinger.active = !1;
var i = this.model.isRoomWangLingJuYuan(this.roomType);
this.txtDesc.string = StringUtils.format(_LANG("FINGER_PLAY_DESC_TIPS"), i ? "玉石" : "金币");
this.spOpen.active = !1;
for (var s = function(t) {
var i = e.btnFingers[t];
e.onClick(i, function() {
e.onClickGo(t);
});
}, n = 0; n < this.btnFingers.length; n++) s(n);
},
initLight: function() {
for (var e = [], t = 0; t < 8; t++) {
var i = this.seekChild(this.offLights, "light_" + t), s = this.seekChild(this.onLights, "light_" + t);
e.push({
offLigt: i,
onLigt: s
});
}
ActionUtils.timerAct(this.offLights, function(t, i) {
for (var s = 0; s < e.length; s++) {
var n = e[s].offLigt, o = e[s].onLigt;
n.active = i % 2 == 0 && s % 2 == 0 || i % 2 == 1 && s % 2 == 1;
o.active = i % 2 == 1 && s % 2 == 0 || i % 2 == 0 && s % 2 == 1;
}
}, 1);
},
onClickGo: function(e) {
if (!this.isTouched) if (this.curRound > 2) {
this.ctrl.endCaiQuan();
this.onClickBtnClose();
} else {
this.isTouched = !0;
this.btnFingers[e].getComponent(cc.Button).interactable = !1;
SpineUtils.changeAnimation(this.spFingers[e], a[e].zj, !0, null, !0);
this.touchIndex = e;
this.ctrl.startCaiQuan();
}
},
update: function(e) {
this.countTime += e;
if (!(this.countTime < .25)) {
this.countTime -= .25;
var t = (this.curIndex + 1) % 3;
if (TypeUtils.isRealNull(this.resultType)) {
SpriteUtils.setTexture({
path: "module/fish/texture/fishPlay/fingerPlay/cq_icon_0" + (t + 1)
}, this.sysFinger, this);
this.curIndex = t;
} else {
var i = this.touchIndex, s = o[i][this.resultType];
if (this.curIndex == s) this.displayResult(); else {
SpriteUtils.setTexture({
path: "module/fish/texture/fishPlay/fingerPlay/cq_icon_0" + (t + 1)
}, this.sysFinger, this);
this.curIndex = t;
}
}
this.updateCountDown(.25);
}
},
updateCountDown: function(e) {
this.runTime = this.runTime + e;
var t = Math.floor(10 - this.runTime);
t >= 0 && (this.txtTime.string = t + "S");
t <= 0 && !this.isTouched && this.onClickBtnClose();
},
handleUpdateFingerPlay: function(e) {
var t = this;
if (TypeUtils.isRealNull(e) && TypeUtils.isRealNull(e.data)) this.isTouched = !1; else {
this.battleInfo = e.data;
this.resultType = e.data.result - 1;
this.curRound = this.curRound + 1;
this.txtRound.string = StringUtils.format("第%s/%s轮", this.curRound > 2 ? 2 : this.curRound, 2);
this.spOpen.active = !0;
SpineUtils.changeAnimation(this.spOpen, "zhongjiang", !1, null, !0);
ActionUtils.callOnce(this.spOpen, function() {
t.spOpen.active = !1;
}, 1);
}
},
displayResult: function() {
var e = this;
if (!this.isDisplay) {
this.isDisplay = !0;
var t = this.touchIndex;
this.myFinger.active = !0;
SpriteUtils.setTexture({
path: "module/fish/texture/fishPlay/fingerPlay/cq_icon_0" + (t + 1)
}, this.myFinger, this);
var i = o[this.curIndex][this.resultType];
SpriteUtils.setTexture({
path: "module/fish/texture/fishPlay/fingerPlay/cq_icon_0" + (i + 1)
}, this.sysFinger, this);
ActionUtils.callOnce(this.node, function() {
var t = e.battleInfo.result <= 1, i = {
info: e.battleInfo,
callback: e.resetBattle.bind(e),
isWin: t,
isMaxRound: e.curRound > 2
};
ViewManager.showView("FINGER_PLAY_RESULT_VIEW", null, i);
}, 1);
}
},
resetBattle: function() {
this.isTouched = !1;
this.isDisplay = !1;
this.resultType = null;
this.runTime = 0;
var e = this.battleInfo, t = Number(e.itemList[0].amount), i = e.multiple;
this.txtNum.string = Math.floor(t * i);
this.myFinger.active = !1;
this.btnFingers[this.touchIndex].getComponent(cc.Button).interactable = !0;
SpineUtils.changeAnimation(this.spFingers[this.touchIndex], a[this.touchIndex].dj, !0, null, !0);
},
onClickBtnClose: function() {
this.ctrl.endCaiQuan();
ViewManager.closeView(this);
},
onDestroy: function() {
this.model.resumeAutoFire();
ViewBase.prototype.onDestroy.call(this);
}
});
cc._RF.pop();
}, {} ],
fishCountDown: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "e5c5abr7OlOqph03APCxGlG", "fishCountDown");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
sprTitle: cc.Node,
txtMultiple: cc.Label,
txtTimer: cc.Node
},
onLoad: function() {
this.initData();
this.initEvent();
this.initUI();
},
initEvent: function() {},
initData: function() {},
initUI: function() {
this.txtTimer.isRed = !1;
},
setStrikesInfo: function(e) {
this.strikesInfo = e;
this.txtTimer.active = !0;
this.txtTimer.isRed = !1;
this.txtTimer.color = cc.color(255, 255, 255, 255);
this.txtTimer.stopAllActions();
SpriteUtils.setTexture({
path: "module/fish/texture/catchFishUi/name/" + e.strikesBossName,
isHide: !0
}, this.sprTitle, this);
var t = "";
t = TypeUtils.isRealNull(e.goldRange) ? e.goldDrop + "倍" : StringUtils.format("%d-%d倍", e.goldRange[0], e.goldRange[1]);
this.txtMultiple.string = t;
},
checkCountDown: function(e) {
if (!(e <= 0)) {
this.txtTimer.getComponent(cc.Label).string = TimeUtils.getTimeForm(e, null, 2);
this.txtTimer.active = !0;
if (e <= 10 && !this.txtTimer.isRed) {
this.txtTimer.isRed = !0;
this.txtTimer.color = cc.color(255, 0, 0, 255);
var t = [];
t.push(cc.spawn(cc.scaleTo(.5, 1.3), cc.blink(.5, 1)));
t.push(cc.spawn(cc.scaleTo(.5, 1), cc.blink(.5, 1)));
this.txtTimer.runAction(cc.repeatForever(cc.sequence(t)));
}
}
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
fishHallView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "c5005ps+7NO9Yfi2D1koz7X", "fishHallView");
function s(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}
var n = e("ItemConst"), o = e("ShopConst"), a = e("ResConst"), r = e("CatchFishConst"), l = null;
cc.Class({
extends: ViewBase,
properties: {
sprHallBg: cc.Node,
nodeRoot: cc.Node,
nodeMid: cc.Node,
nodeHaiMo: cc.Node,
nodeActivity: cc.Node,
nodeMatch: cc.Node,
nodeClassical: cc.Node,
nodeTop: cc.Node,
nodeBot: cc.Node,
nodeLeft: cc.Node,
nodeRight: cc.Node,
btnQuickStart: cc.Node,
nodeMore: cc.Node,
btnMore: cc.Node,
rootMore: cc.Node,
sprBg: cc.Node,
btnSetting: cc.Node,
btnNotice: cc.Node,
btnCode: cc.Node,
btnCustom: cc.Node,
btnShare: cc.Node,
comTop: cc.Prefab
},
onAdapt: function() {
AdaptUtils.AdaptNodeToFullSize(this.nodeRoot);
AdaptUtils.AdaptNodeToFullAdapt(this.sprHallBg);
AdaptUtils.AdaptNodeToHWAdapt(this.nodeMid);
AdaptUtils.AdaptNodeToHWAdapt(this.nodeTop);
AdaptUtils.AdaptNodeToHWAdapt(this.nodeBot);
AdaptUtils.AdaptNodeToHWAdapt(this.nodeLeft);
AdaptUtils.AdaptNodeToHWAdapt(this.nodeRight);
AdaptUtils.AdaptNodeToHWAdapt(this.btnQuickStart);
var e = 0;
AdaptUtils.isLiuHai() && (e = 50);
this.nodeTop.getComponent(cc.Widget).left = e;
this.nodeTop.getComponent(cc.Widget).updateAlignment();
this.nodeLeft.getComponent(cc.Widget).left = e;
this.nodeLeft.getComponent(cc.Widget).updateAlignment();
this.nodeBot.getComponent(cc.Widget).left = e;
this.nodeBot.getComponent(cc.Widget).updateAlignment();
},
onCreate: function() {
this.initConfig();
this.initData();
this.initEvent();
this.initView();
this.doEnterAction();
},
initConfig: function() {
l = ConfigMgr.getConfig("fish_room_config");
},
initData: function() {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this._vipCtrl = app.ctrls.vip;
this._vipModel = this._vipCtrl.getModel();
this._shopModel = app.ctrls.shop.getModel();
this._bagModel = app.ctrls.bag.getModel();
},
initEvent: function() {
this.eventOn(AppEvent.SystemOnOffInfo, this.onSystemOnOffInfo, this);
},
initView: function() {
this.pnlList = [];
this.onClick(this.nodeHaiMo, this.onClickHaiMo.bind(this));
this.pnlList.push({
node: this.nodeHaiMo,
pos: cc.v2(this.nodeHaiMo.x, this.nodeHaiMo.y)
});
this.onClick(this.nodeActivity, this.onClickActivity.bind(this));
this.pnlList.push({
node: this.nodeActivity,
pos: cc.v2(this.nodeActivity.x, this.nodeActivity.y)
});
this.onClick(this.nodeMatch, this.onClickMatch.bind(this));
this.pnlList.push({
node: this.nodeMatch,
pos: cc.v2(this.nodeMatch.x, this.nodeMatch.y)
});
this.onClick(this.nodeClassical, this.onClickClassical.bind(this));
this.pnlList.push({
node: this.nodeClassical,
pos: cc.v2(this.nodeClassical.x, this.nodeClassical.y)
});
this.topJs = this.nodeTop.getComponent("comHallArea");
this.topRailing = cc.instantiate(this.comTop);
this.topRailing.parent = this.nodeTop;
this.topRailing.position = cc.v2(-this.nodeTop.width / 2, this.nodeTop.height / 2);
this.topRailing.getComponent("comHeadRailing").setData([ {
itemId: n.ResourceType.Gold
}, {
itemId: n.ResourceType.Diamond
} ]);
this.botJs = this.nodeBot.getComponent("comHallArea");
this.leftJs = this.nodeLeft.getComponent("comHallArea");
this.rightJs = this.nodeRight.getComponent("comHallArea");
this.onClick(this.btnQuickStart, this.onClickQuickStart.bind(this));
this.onClick(this.btnMore, this.onClickMore.bind(this));
this.moreBtns = [ this.btnSetting, this.btnNotice, this.btnCode, this.btnCustom, this.btnShare ];
this.freshMoreBtns();
this.rootMore.isAct = !1;
this.rootMore.active = !1;
this.onClick(this.btnSetting, this.onClickSetting.bind(this));
this.onClick(this.btnNotice, this.onClickNotice.bind(this));
LoadUtils.preload(a.resload.preload3, !1);
},
freshMoreBtns: function() {
this.nodeMore.active = !SystemUtils.checkIsClose(10008);
this.btnSetting.active = !SystemUtils.checkIsClose(20023);
this.btnNotice.active = !SystemUtils.checkIsClose(20024);
this.btnCode.active = !1;
this.btnCustom.active = !1;
this.btnShare.active = !1;
for (var e = 0, t = 0; t < this.moreBtns.length; t++) {
var i = this.moreBtns[t];
if (i.active) {
i.x = 80 * e - 5;
e++;
}
}
this.moreBgWidth = 0;
e > 0 && (this.moreBgWidth = 35 + 80 * e);
this.sprBg.width = this.moreBgWidth;
},
onClickHaiMo: function() {
var e = this;
ViewManager.showView("FISH_ROOM_MAGIC_VIEW", null, null, function() {
ViewManager.closeView(e);
});
},
onClickActivity: function() {
TipsUtils.showTips("敬请期待");
},
onClickMatch: function() {
TipsUtils.showTips("敬请期待");
},
onClickClassical: function() {
var e = this;
ViewManager.showView("FISH_ROOM_VIEW", null, null, function() {
ViewManager.closeView(e);
});
},
onClickQuickStart: function() {
if (this.hasShowSailing()) {
var e = UserUtils.getLastChooseRoomType(RoleUtils.getRoleId(), r.RoomGroup.Classical);
if (!TypeUtils.isRealNull(e)) {
var t = l.findByIndex(e);
if (!TypeUtils.isRealNull(t)) {
this.ctrl.enterRoom(t.roomType, t.group);
return;
}
}
for (var i, s = this.model.getRoomList(1), n = this._bagModel.getGunForgeLevel(), o = 0; o < s.length; o++) {
var a = s[o];
n >= a.forgeLevelLimit[0] && n <= a.forgeLevelLimit[1] && (i = a);
}
TypeUtils.isRealNull(i) || this.ctrl.enterRoom(i.roomType, i.group);
} else ViewManager.showView("FISH_SAILING_VIEW");
},
onClickMore: function() {
var e = this;
if (!this.rootMore.isAct) {
var t = AdaptUtils.getMinAdaptiveScale();
this.rootMore.isAct = !0;
if (this.rootMore.active) {
this.rootMore.active = !0;
this.rootMore.scale = 1;
ActionUtils.sequence(this.rootMore, cc.scaleTo(.1, 1.1 * t, 1.1 * t), cc.scaleTo(.1, 0, 0), cc.callFunc(function() {
e.rootMore.active = !1;
e.rootMore.scaleX = 1;
e.rootMore.isAct = !1;
}));
this.btnMore.runAction(cc.rotateTo(.1, 0));
} else {
this.rootMore.active = !0;
this.rootMore.scale = 0;
ActionUtils.sequence(this.rootMore, cc.scaleTo(.1, 1.1 * t, 1.1 * t), cc.scaleTo(.1, t, t), cc.callFunc(function() {
e.rootMore.isAct = !1;
}));
this.btnMore.runAction(cc.rotateTo(.1, 180));
}
}
},
onClickSetting: function() {
ViewManager.showView("SETTING_VIEW");
},
onClickNotice: function() {
ViewManager.showView("NOTICE_VIEW");
},
hasShowSailing: function() {
var e = this._shopModel.getShopInfoBuyCount(o.Fish_SailingGift);
return !(TypeUtils.isRealNull(e) || e < 0);
},
onSystemOnOffInfo: function(e) {
for (var t, i = (s(t = {}, 20023, !0), s(t, 20024, !0), s(t, 20025, !0), s(t, 20022, !0), 
s(t, 10014, !0), s(t, 10008, !0), t), n = 0; n < e.length; n++) if (!TypeUtils.isRealNull(e[n].numId) && i[e[n].numId]) {
this.freshMoreBtns();
return;
}
},
doEnterAction: function() {
this.pnlList;
for (var e = 0; e < this.pnlList.length; e++) {
var t = this.pnlList[e];
t.node.setPosition(cc.v2(200, t.pos.y - 100));
t.node.stopAllActions();
t.node.runAction(cc.moveTo(.6, t.pos).easing(cc.easeBackOut()));
}
}
});
cc._RF.pop();
}, {
CatchFishConst: "CatchFishConst",
ItemConst: "ItemConst",
ResConst: "ResConst",
ShopConst: "ShopConst"
} ],
fishInit: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "641a5dHl71HTLmIyy37rNhc", "fishInit");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
catchFish: "catchFishCtrl"
}, n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
fishLoadingView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "8f2e7bH1KpPQ7lNRgHbGj3Y", "fishLoadingView");
var s = e("ResConst");
cc.Class({
extends: ViewBase,
properties: {},
onAdapt: function() {
AdaptUtils.AdaptNodeToFullAdapt(this.node);
},
onCreate: function(e) {
var t = this;
ViewBase.prototype.onCreate.call(this);
this.data = e || {};
this.initData();
this.initView();
this.initPrefab();
ActionUtils.timerAct(this.node, function() {
t.updateTime(1 / 60);
}, 1 / 60);
},
initData: function() {
this.precent = 0;
this.isLoaded = !1;
},
initPrefab: function() {
var e = this, t = 0, i = s.resload.preload4.length;
LoadUtils.preload(s.resload.preload4, !0, function(s, n) {
t++;
e.precent = t / i;
});
},
initView: function() {
this.sprBg = this.getC("sprBg");
this.progressBar = this.getC("progressBar");
this.loadProgress = this.progressBar.getComponent(cc.ProgressBar);
this.txtProg = this.getC("txtProg");
this.txtTip = this.getC("txtTip");
this.loadProgress.progress = 0;
this.txtProg.getComponent(cc.Label).string = "";
this.txtTip.getComponent(cc.Label).string = "";
ViewManager.showMarqueeLayer(!1);
},
refreshAllPrecent: function() {
var e = this.precent / 1.2;
this.loadProgress.progress = e;
this.txtProg.getComponent(cc.Label).string = "加载资源中..." + Math.floor(100 * e) + "%";
},
updateTime: function(e) {
this.precent >= 1 && (this.precent += e);
this.refreshAllPrecent();
if (!this.isLoaded && this.precent >= 1) {
this.isLoaded = !0;
ViewManager.showView("CATCH_FISH_VIEW");
}
if (this.precent >= 1.2) {
this.node.stopAllActions();
ViewManager.showMarqueeLayer(!0);
ViewManager.closeView("FISH_LOADING_VIEW");
}
},
onDestroy: function() {
ViewBase.prototype.onDestroy.call(this);
}
});
cc._RF.pop();
}, {
ResConst: "ResConst"
} ],
fishPokerColor: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "c08a5n4sdlADqeFSiN6QTdE", "fishPokerColor");
var s = e("BaseComponent"), n = e("CatchFishConst");
cc.Class({
extends: s,
properties: {
sprTitle: cc.Node,
sprPokers: [ cc.Node ],
txtPokerNums: [ cc.Label ],
txtTips: cc.Label
},
onLoad: function() {
this.initData();
this.initEvent();
this.initUI();
},
initData: function() {
this._bagCtrl = app.ctrls.bag;
this._bagModel = this._bagCtrl.getModel();
},
initEvent: function() {
this.eventOn(this._bagModel.EVENT_UPDATE_BAG_INFO, this.updateBagItemInfo, this);
},
initUI: function() {
this.updateItems();
},
updateItems: function() {
for (var e = 0; e < this.txtPokerNums.length; e++) {
var t = this.txtPokerNums[e], i = n.PokerColorItems[e];
t.string = ItemUtils.getItemNum(i);
}
},
updateBagItemInfo: function(e) {
this.updateItems();
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
CatchFishConst: "CatchFishConst"
} ],
fishRoomMagicView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "f303bQHRZxIaLEtWi2Yuau2", "fishRoomMagicView");
var s = e("ItemConst"), n = e("CatchFishConst"), o = e("ChannelConst"), a = n.RoomOfSystemId, r = null, l = null;
cc.Class({
extends: ViewBase,
properties: {
sprBg: cc.Node,
nodeLayer: cc.Node,
nodeTop: cc.Node,
btnQuickStart: cc.Node,
btnBack: cc.Node,
comTop: cc.Prefab,
comLand: cc.Prefab
},
onAdapt: function() {
AdaptUtils.AdaptNodeToFullAdapt(this.sprBg);
AdaptUtils.AdaptNodeToFullSize(this.nodeLayer);
AdaptUtils.AdaptNodeToHWAdapt(this.nodeTop);
AdaptUtils.AdaptNodeToHWAdapt(this.btnQuickStart);
AdaptUtils.AdaptNodeToHWAdapt(this.btnBack);
var e = 0;
AdaptUtils.isLiuHai() && (e = 50);
this.nodeTop.getComponent(cc.Widget).left = e;
this.nodeTop.getComponent(cc.Widget).updateAlignment();
if (AppUtils.IsWechat()) {
this.btnBack.getComponent(cc.Widget).isAlignBottom = !0;
this.btnBack.getComponent(cc.Widget).bottom = 20;
this.btnBack.getComponent(cc.Widget).isAlignLeft = !0;
this.btnBack.getComponent(cc.Widget).left = e + 20;
} else {
this.btnBack.getComponent(cc.Widget).isAlignRight = !0;
this.btnBack.getComponent(cc.Widget).right = 20;
this.btnBack.getComponent(cc.Widget).isAlignTop = !0;
this.btnBack.getComponent(cc.Widget).top = 20;
}
this.btnBack.getComponent(cc.Widget).updateAlignment();
},
onCreate: function(e) {
e = e || {};
this.initConfig();
this.initData(e);
this.initEvent();
this.initView();
this.setChannel([ {
enterChannel: {
channelId: o.Type.FishRoomSeatList,
param1: this.roomType
},
exitChannel: {
channelId: o.Type.FishRoomSeatList,
param1: this.roomType
}
} ]);
this.doEnterAction();
},
initConfig: function() {
r = ConfigMgr.getConfig("fish_room_config");
l = ConfigMgr.getConfig("online_fix_config");
},
initData: function(e) {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this._bagModel = app.ctrls.bag.getModel();
this._roomList = this.getRoomList(n.RoomGroup.Magic);
this.isChangeRoom = e.isChangeRoom;
var t = this.getSuitableRoomType();
this.roomType = t.type;
this.roomPlayerList = {};
var i = {};
l.forEach(function(e) {
2 == e.gameType && (i[e.roomType] = e);
});
this.onlineConfig = i;
this.ctrl.getRoomSeatList(this.roomType);
},
initEvent: function() {
this.eventOn(this.model.EVENT_ROOM_LIST_UPDATE, this.handleRoomListUpdate, this);
},
initView: function() {
this.btnPos = cc.v2(this.btnQuickStart.x, this.btnQuickStart.y);
this.onClick(this.btnQuickStart, this.onQuickStart.bind(this));
this.onClick(this.btnBack, this.onClicBack.bind(this));
this.topRailing = cc.instantiate(this.comTop);
this.topRailing.parent = this.nodeTop;
this.topRailing.position = cc.v2(-this.nodeTop.width / 2, this.nodeTop.height / 2);
this.topRailing.getComponent("comHeadRailing").setData([ {
itemId: s.ResourceType.Gold
}, {
itemId: s.ResourceType.Diamond
}, {
itemId: s.ResourceType.Jade
} ]);
this.landList = [];
for (var e = 0; e < 2; e++) {
var t = cc.instantiate(this.comLand), i = t.getComponent("roomItem");
t.parent = this.nodeLayer;
t.x = (e - .5) * this.nodeLayer.width / 2;
t.y = 0;
t.scale = AdaptUtils.getMinAdaptiveScale();
var n = this._roomList[e];
t.roomType = n.roomType;
t.script = i;
TypeUtils.isRealNull(n.iconSpine) || i.loadSpine({
ani: n.iconSpine.ani,
path: n.iconSpine.sp,
x: 0,
y: 50,
isLoop: !0
});
i.setSeleCallback(this.onChooseRoom.bind(this));
var o = r.findByIndex(n.roomType);
i.setData(o, n);
this.landList.push(t);
}
},
handleRoomListUpdate: function(e) {
if (!TypeUtils.isRealNull(e)) {
this.roomPlayerList = {};
if (!TypeUtils.isRealNull(e.list)) for (var t = 0; t < e.list.length; t++) {
var i = e.list[t];
this.roomPlayerList[i.roomId] = i.playerNum;
}
this.changeRoom();
}
},
changeRoom: function() {
if (!TypeUtils.isRealNull(this.roomType) && this.isChangeRoom) {
this.isChangeRoom = !1;
var e = r.findByIndex(this.roomType);
if (TypeUtils.isRealNull(e.seatArea)) this.requestEnterRoom(this.roomType); else if (!TypeUtils.isRealNull(this.roomPlayerList)) {
for (var t = null, i = 0; i < 100; i++) {
t = RandomUtils.getRandIntInRange(1, 20 * e.seatArea.num);
if ((this.roomPlayerList[t] || 0) <= 2) break;
}
TypeUtils.isRealNull(t) || this.requestEnterRoom(this.roomType, null, t);
}
}
},
requestEnterRoom: function(e, t, i) {
a[e] && SystemUtils.checkIsClose(a[e]) ? TipsUtils.showTips("敬请期待") : this.ctrl.enterRoom(e, t, i);
},
getRoomList: function(e) {
var t = [];
r.forEach(function(i) {
i.group == e && t.push(i);
});
ArrayUtils.sort(t, function(e, t) {
return e.roomType - t.roomType;
});
return t;
},
onQuickStart: function() {
var e = this.getSuitableRoomType(), t = r.findByIndex(e.type);
TypeUtils.isRealNull(t) ? TipsUtils.showTips("没有可以进入的房间") : this.requestEnterRoom(t.roomType, t.group);
},
onClicBack: function() {
var e = this;
ViewManager.showView("FISH_HALL_VIEW", null, null, function() {
ViewManager.closeView(e);
});
},
onChooseRoom: function(e, t) {
var i = t.forgeLevelLimit;
if (TypeUtils.isRealNull(i)) {
ViewManager.showView("ROOM_INTRODUCE_VIEW", null, t);
TipsUtils.showTips(_LANG("FISH_ROOM_CONDITION_TIPS"));
} else {
var s = this._bagModel.getGunForgeLevel(), n = i[0], o = i[1];
if (s < n) {
ViewManager.showView("ROOM_INTRODUCE_VIEW", null, t);
TipsUtils.showTips(_LANG("FISH_ROOM_CONDITION_TIPS"));
return;
}
if (s > o) {
TipsUtils.showTips(_LANG("FISH_ROOM_ENTRY_FAILURE_2"));
return;
}
this.requestEnterRoom(t.roomType, t.group);
}
},
isRoomCanEnter: function(e) {
var t = this._bagModel.getGunForgeLevel(), i = r.findByIndex(e), s = i.forgeLevelLimit[0], n = i.forgeLevelLimit[1];
return t >= s && t <= n;
},
getSuitableRoomType: function() {
var e = UserUtils.getLastChooseRoomType(RoleUtils.getRoleId(), n.RoomGroup.Magic);
if (!TypeUtils.isRealNull(e)) {
var t = r.findByIndex(e);
!TypeUtils.isRealNull(t) && this.isRoomCanEnter(e) || (e = null);
}
for (var i = null, s = 0; s < this._roomList.length; s++) {
var o = this._roomList[s];
TypeUtils.isRealNull(e) && this.isRoomCanEnter(o.roomType) && (e = o.roomType);
if (!TypeUtils.isRealNull(e) && e == o.roomType) {
i = s;
break;
}
}
return {
type: e,
index: i
};
},
doEnterAction: function() {
for (var e = AdaptUtils.getMinAdaptiveScale(), t = 0; t < this.landList.length; t++) {
var i = this.landList[t];
i.scale = 0;
i.stopAllActions();
ActionUtils.sequence(i, cc.delayTime(.03 * t), cc.callFunc(function() {}), cc.scaleTo(.2, 1.2 * e), cc.scaleTo(.15, e));
}
TypeUtils.isRealNull(this.btnPos) && (this.btnPos = cc.v2(this.btnQuickStart.x, this.btnQuickStart.y));
this.btnQuickStart.x = this.btnPos.x;
this.btnQuickStart.y = this.btnPos.y - 150;
this.btnQuickStart.stopAllActions();
ActionUtils.sequence(this.btnQuickStart, cc.delayTime(.2), cc.moveTo(.5, this.btnPos).easing(cc.easeBackOut()));
},
update: function(e) {
this._timeCount += e;
if (!(this._timeCount < 3)) {
this._timeCount = 0;
if (!TypeUtils.isRealNull(this.landList)) for (var t = 0; t < this.landList.length; t++) {
var i = this.landList[t], s = this.onlineConfig[i.roomType];
if (!TypeUtils.isRealNull(s)) {
var n = (s.onlineNum[new Date().getHours()] || 50) * s.fixRatio + RandomUtils.getRandIntInRange(0, s.range);
i.script.setOnline(n);
}
}
}
}
});
cc._RF.pop();
}, {
CatchFishConst: "CatchFishConst",
ChannelConst: "ChannelConst",
ItemConst: "ItemConst"
} ],
fishRoomView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "e1f14DrqphOJ5mauX15ji0O", "fishRoomView");
var s = e("ItemConst"), n = e("CatchFishConst"), o = (e("ChannelConst"), n.RoomOfSystemId), a = null, r = null, l = cc.size(cc.winSize.width, cc.winSize.height);
cc.Class({
extends: ViewBase,
properties: {
sprBg: cc.Node,
nodeLayer: cc.Node,
nodeTop: cc.Node,
btnQuickStart: cc.Node,
btnBack: cc.Node,
comTop: cc.Prefab,
comLand: cc.Prefab
},
onAdapt: function() {
AdaptUtils.AdaptNodeToFullAdapt(this.sprBg);
AdaptUtils.AdaptNodeToFullSize(this.nodeLayer);
AdaptUtils.AdaptNodeToHWAdapt(this.nodeTop);
AdaptUtils.AdaptNodeToHWAdapt(this.btnQuickStart);
AdaptUtils.AdaptNodeToHWAdapt(this.btnBack);
l = cc.size(this.nodeLayer.width, this.nodeLayer.height);
var e = 0;
AdaptUtils.isLiuHai() && (e = 50);
this.nodeTop.getComponent(cc.Widget).left = e;
this.nodeTop.getComponent(cc.Widget).updateAlignment();
if (AppUtils.IsWechat()) {
this.btnBack.getComponent(cc.Widget).isAlignBottom = !0;
this.btnBack.getComponent(cc.Widget).bottom = 20;
this.btnBack.getComponent(cc.Widget).isAlignLeft = !0;
this.btnBack.getComponent(cc.Widget).left = e + 20;
} else {
this.btnBack.getComponent(cc.Widget).isAlignRight = !0;
this.btnBack.getComponent(cc.Widget).right = 20;
this.btnBack.getComponent(cc.Widget).isAlignTop = !0;
this.btnBack.getComponent(cc.Widget).top = 20;
}
this.btnBack.getComponent(cc.Widget).updateAlignment();
},
onCreate: function(e) {
e = e || {};
this.initConfig();
this.initData(e);
this.initEvent();
this.initView(e);
this.doEnterAction();
},
initConfig: function() {
a = ConfigMgr.getConfig("fish_room_config");
r = ConfigMgr.getConfig("online_fix_config");
},
initData: function(e) {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this._bagModel = app.ctrls.bag.getModel();
this.posList = [ cc.v2(-l.width / 6 * 4, 0), cc.v2(-l.width / 6 * 2, 0), cc.v2(0, 0), cc.v2(l.width / 6 * 2, 0), cc.v2(l.width / 6 * 4, 0) ];
this._roomList = this.getRoomList(n.RoomGroup.Classical);
this.isChangeRoom = e.isChangeRoom;
var t = this.getSuitableRoomType();
this.roomType = t.type;
TypeUtils.isRealNull(t.index) || TypeUtils.isRealNull(this._roomList[t.index]) ? this._currIdx = 0 : this._currIdx = t.index;
this.btnPos = cc.v2(this.btnQuickStart.x, this.btnQuickStart.y);
this.roomPlayerList = {};
var i = {};
r.forEach(function(e) {
2 == e.gameType && (i[e.roomType] = e);
});
this.onlineConfig = i;
this.ctrl.getRoomSeatList(this.roomType);
},
initEvent: function() {
this.eventOn(this.model.EVENT_ROOM_LIST_UPDATE, this.handleRoomListUpdate, this);
},
initView: function(e) {
NodeUtils.setNodeTouch(this.nodeLayer, this.onTouchToSele.bind(this), this, !0);
this.onClick(this.btnQuickStart, this.onQuickStart.bind(this));
this.onClick(this.btnBack, this.onClicBack.bind(this));
this.topRailing = cc.instantiate(this.comTop);
this.topRailing.parent = this.nodeTop;
this.topRailing.position = cc.v2(-this.nodeTop.width / 2, this.nodeTop.height / 2);
this.topRailing.getComponent("comHeadRailing").setData([ {
itemId: s.ResourceType.Gold
}, {
itemId: s.ResourceType.Diamond
}, {
itemId: s.ResourceType.Ticket
} ]);
this.landList = [];
for (var t = 0; t < 4; t++) {
var i = cc.instantiate(this.comLand), n = i.getComponent("roomItem");
i.parent = this.nodeLayer;
i.i = t;
i.posId = (t - this._currIdx + 2 + 4) % 4;
i.x = this.posList[i.posId].x;
var o = this._roomList[t];
i.roomType = o.roomType;
i.script = n;
if (!TypeUtils.isRealNull(o.iconSpine)) {
var r = 2 == i.posId ? o.iconSpine.ani : o.iconSpine.pause;
n.loadSpine({
ani: r,
path: o.iconSpine.sp,
x: 0,
y: 50,
isLoop: !0
});
this.setLandScale(i);
}
n.setSeleCallback(this.onSeleItem.bind(this));
var l = a.findByIndex(o.roomType);
n.setData(l, o);
n.hideSele();
this.landList.push(i);
}
TypeUtils.isRealNull(this.roomType) && !this.isChangeRoom || this.changeRoom();
},
handleRoomListUpdate: function(e) {
if (!TypeUtils.isRealNull(e)) {
if (!TypeUtils.isRealNull(e.list)) for (var t = 0; t < e.list.length; t++) {
var i = e.list[t];
this.roomPlayerList[i.roomId] = i.playerNum;
}
this.changeRoom();
}
},
changeRoom: function() {
if (!TypeUtils.isRealNull(this.roomType) && this.isChangeRoom) {
this.isChangeRoom = !1;
var e = a.findByIndex(this.roomType);
if (!TypeUtils.isRealNull(e.seatArea)) {
for (var t = null, i = 0; i < 100; i++) {
t = RandomUtils.getRandIntInRange(1, 20 * e.seatArea.num);
if ((this.roomPlayerList[t] || 0) <= 2) break;
}
if (!TypeUtils.isRealNull(t)) {
this.requestEnterRoom(this.roomType, null, t);
return;
}
}
this.requestEnterRoom(this.roomType);
}
},
requestEnterRoom: function(e, t, i) {
o[e] && SystemUtils.checkIsClose(o[e]) ? TipsUtils.showTips("敬请期待") : this.ctrl.enterRoom(e, t, i);
},
getRoomList: function(e) {
var t = [];
a.forEach(function(i) {
i.group == e && t.push(i);
});
ArrayUtils.sort(t, function(e, t) {
return e.roomType - t.roomType;
});
return t;
},
onQuickStart: function() {
var e = this.getSuitableRoomType(), t = a.findByIndex(e.type);
TypeUtils.isRealNull(t) ? TipsUtils.showTips("没有可以进入的房间") : this.requestEnterRoom(t.roomType, t.group);
},
onClicBack: function() {
var e = this;
ViewManager.showView("FISH_HALL_VIEW", null, null, function() {
ViewManager.closeView(e);
});
},
onSeleItem: function(e, t) {
if (2 != e) for (var i = 0; i < this.landList.length; i++) {
var s = this.landList[i];
if (e > 2) {
s.posId -= 1;
s.posId < 0 && (s.posId = 3);
} else if (e < 2) {
s.posId += 1;
s.posId > 4 && (s.posId = 1);
}
var n = this._roomList[s.i], o = 2 == s.posId ? n.iconSpine.ani : n.iconSpine.pause;
s.script.changeSpine(o, !0);
this.doResetPosAct(s);
} else this.onChooseRoom(t);
},
onChooseRoom: function(e) {
var t = e.forgeLevelLimit;
if (TypeUtils.isRealNull(t)) {
ViewManager.showView("ROOM_INTRODUCE_VIEW", null, e);
TipsUtils.showTips(_LANG("FISH_ROOM_CONDITION_TIPS"));
} else {
var i = this._bagModel.getGunForgeLevel(), s = t[0], n = t[1];
if (i < s) {
ViewManager.showView("ROOM_INTRODUCE_VIEW", null, e);
TipsUtils.showTips(_LANG("FISH_ROOM_CONDITION_TIPS"));
return;
}
if (i > n) {
TipsUtils.showTips(_LANG("FISH_ROOM_ENTRY_FAILURE_2"));
return;
}
this.requestEnterRoom(e.roomType, e.group);
}
},
onTouchToSele: function(e) {
if (e.type == cc.Node.EventType.TOUCH_START) {
this.movePos = cc.v2(0, 0);
this._touchStart = e.getLocation();
} else if (e.type == cc.Node.EventType.TOUCH_MOVE) {
for (var t = e.getLocation().x - this._touchWPos.x, i = e.getLocation().y - this._touchWPos.y, s = 0; s < this.landList.length; s++) {
var n = this.landList[s];
n && n.active && (n.x += t);
Math.abs(n.x) > l.width / 6 * 5 && (n.x = n.x - l.width / 6 * 8 * (n.x / Math.abs(n.x)));
this.setLandScale(n);
}
this.movePos = cc.v2(this.movePos.x + Math.abs(t), this.movePos.y + Math.abs(i));
} else if (e.type == cc.Node.EventType.TOUCH_END || e.type == cc.Node.EventType.TOUCH_CANCEL) {
if (this.movePos.x < 10 && this.movePos.y < 10) for (var o = 0; o < this.landList.length; o++) {
var a = this.landList[o], r = a.convertToWorldSpaceAR(cc.v2(0, 0)), c = new cc.Rect(r.x - a.width * a.scale / 2, r.y - a.height * a.scale / 2, a.width * a.scale, a.height * a.scale);
if (a.scale > 0 && c.contains(this._touchStart)) {
a.script.onSeleRoom();
return;
}
}
for (var h = 0; h < this.landList.length; h++) {
var u = this.landList[h];
this.doResetPosAct(u);
}
}
this._touchWPos = e.getLocation();
},
setLandScale: function(e) {
var t = 1 - Math.abs(e.x / l.width * 1.5);
Math.abs(e.x) > 1.5 * l.width && (t = 0);
var i = e.posId;
Math.abs(e.x) < l.width / 6 ? e.posId = 2 : e.x >= l.width / 6 && e.x < l.width / 6 * 3 ? e.posId = 3 : e.x <= -l.width / 6 && e.x > -l.width / 6 * 3 ? e.posId = 1 : Math.abs(e.x) > l.width / 6 * 3 && Math.abs(e.x) < l.width / 6 * 5 && (e.x < 0 ? e.posId = 0 : e.posId = 4);
if (e.posId != i) {
var s = this._roomList[e.i], n = 2 == e.posId ? s.iconSpine.ani : s.iconSpine.pause;
e.script.changeSpine(n, !0);
}
t < 0 && (t = 0);
e.scale = t;
},
isRoomCanEnter: function(e) {
var t = this._bagModel.getGunForgeLevel(), i = a.findByIndex(e), s = i.forgeLevelLimit[0], n = i.forgeLevelLimit[1];
return t >= s && t <= n;
},
getSuitableRoomType: function() {
var e = UserUtils.getLastChooseRoomType(RoleUtils.getRoleId(), n.RoomGroup.Classical);
if (!TypeUtils.isRealNull(e)) {
var t = a.findByIndex(e);
!TypeUtils.isRealNull(t) && this.isRoomCanEnter(e) || (e = null);
}
for (var i = null, s = 0; s < this._roomList.length; s++) {
var o = this._roomList[s];
TypeUtils.isRealNull(e) && this.isRoomCanEnter(o.roomType) && (e = o.roomType);
if (!TypeUtils.isRealNull(e) && e == o.roomType) {
i = s;
break;
}
}
return {
type: e,
index: i
};
},
doResetPosAct: function(e) {
var t = this.posList[e.posId], i = 1 - Math.abs(t.x / l.width * 1.5);
Math.abs(t.x - e.x) > l.width / 1.5 && (e.x += l.width / 6 * 8 * (t.x / Math.abs(t.x)));
Math.abs(t.x) > 1.5 * l.width && (i = 0);
i < 0 && (i = 0);
ActionUtils.spawn(e, cc.moveTo(.2, t), cc.scaleTo(.2, i));
},
doEnterAction: function() {
for (var e = 0; e < this.landList.length; e++) {
var t = this.landList[e], i = 1 - Math.abs(t.x / l.width * 1.5);
Math.abs(t.x) > 1.5 * l.width && (i = 0);
i < 0 && (i = 0);
t.scale = 0;
t.stopAllActions();
ActionUtils.sequence(t, cc.delayTime(.03 * e), cc.callFunc(function() {}), cc.scaleTo(.2, 1.2 * i), cc.scaleTo(.15, i));
}
TypeUtils.isRealNull(this.btnPos) && (this.btnPos = cc.v2(this.btnQuickStart.x, this.btnQuickStart.y));
this.btnQuickStart.x = this.btnPos.x;
this.btnQuickStart.y = this.btnPos.y - 150;
this.btnQuickStart.stopAllActions();
ActionUtils.sequence(this.btnQuickStart, cc.delayTime(.2), cc.moveTo(.5, this.btnPos).easing(cc.easeBackOut()));
},
update: function(e) {
this._timeCount += e;
if (!(this._timeCount < 3)) {
this._timeCount = 0;
if (!TypeUtils.isRealNull(this.landList)) for (var t = 0; t < this.landList.length; t++) {
var i = this.landList[t], s = this.onlineConfig[i.roomType];
if (!TypeUtils.isRealNull(s)) {
var n = (s.onlineNum[new Date().getHours()] || 50) * s.fixRatio + RandomUtils.getRandIntInRange(0, s.range);
i.script.setOnline(n);
}
}
}
}
});
cc._RF.pop();
}, {
CatchFishConst: "CatchFishConst",
ChannelConst: "ChannelConst",
ItemConst: "ItemConst"
} ],
fishSeamanReward: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "d6074vpVcNIxL46DueKe3xr", "fishSeamanReward");
var s = e("BaseComponent"), n = e("ItemConst");
cc.Class({
extends: s,
properties: {
sprBottle: cc.Node,
txtTitle: cc.Label,
txtBottleNum: cc.Label,
txtTips: cc.Label,
nodeBotUI: cc.Node
},
onLoad: function() {
this.initData();
this.initEvent();
this.initUI();
},
initData: function() {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this.roomInfo = this.model.getRoomInfo();
},
initEvent: function() {},
initUI: function() {
this.nodeBotUI.active = !1;
this.onClick(this.node, function() {
ViewManager.showView("FISH_ANCHOR_RANK_VIEW");
});
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(n.ResourceType.ShipAnchor, 76),
isHide: !0
}, this.sprBottle, this);
},
updateProgressCount: function() {
this.model.isRoomYouLingChuangZhang(this.roomInfo.roomType);
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
ItemConst: "ItemConst"
} ],
fishStart: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "c6d02QWB1NJ86s1MQ1AycF9", "fishStart");
var s = e("MiniGameConst"), n = e("ResConst");
cc.Class({
properties: {},
ctor: function() {
this.initData(arguments[0]);
this.loadRes();
},
initData: function(e) {
this.params = e || {};
this._modeId = this.params.modeId || 1;
this.roomGroup = this.params.roomGroup;
},
loadRes: function() {
ViewManager.showView("LOADING_VIEW", null, {
gameId: s.GameType.Fish,
bg: "module/fish/texture/picture/loading2",
configPath: "module/fish/config/",
prefabPath: "module/fish/view/",
cfgCompleted: this.requireNeedData.bind(this),
completed: this.loadResCompleted.bind(this)
}, function() {
ViewManager.closeView("LOGIN_VIEW");
});
},
requireNeedData: function() {
var t = e("fishInit");
app.fishCtrls = {};
for (var i in t) if (t.hasOwnProperty(i)) {
var s = e(t[i]);
if (!TypeUtils.isRealNull(s)) {
app.fishCtrls[i] = new s();
app.fishCtrls[i].doAfterInit();
}
}
app.fishCtrls.reset = function() {
for (var e in t) if (t.hasOwnProperty(e)) {
var i = app.fishCtrls[e];
if (!TypeUtils.isRealNull(i)) {
i.reset();
delete app.fishCtrls[e];
}
}
};
app.fishCtrls.catchFish.getCatchInfo();
},
loadResCompleted: function() {
var e = ViewManager.getView("FISH_HALL_VIEW");
TypeUtils.isRealNull(e) ? ViewManager.showView("FISH_HALL_VIEW", null, null, function() {
ViewManager.closeView("LOADING_VIEW");
}) : ViewManager.closeView("LOADING_VIEW");
this.popViewOnGameStart();
this.resetMarQueePosition();
app.ctrls.vip.unFreezeSupplementGold();
},
popViewOnGameStart: function() {
LoadUtils.preload(n.resload.preload5, !1);
},
resetMarQueePosition: function() {
ViewManager.showMarqueeView();
}
});
cc._RF.pop();
}, {
MiniGameConst: "MiniGameConst",
ResConst: "ResConst",
fishInit: "fishInit"
} ],
fishTaskInfo: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "201a6S0r3lIlq6hGxc2ZnX8", "fishTaskInfo");
var s = e("BaseComponent"), n = e("TaskConst");
cc.Class({
extends: s,
properties: {
sprTaskIcon: cc.Node,
sprTitle: cc.Node,
sprStages: [ cc.Node ],
nodeTaskSp: cc.Node,
txtTitle: cc.Label,
txtTaskDesc: cc.Label,
txtProgress: cc.Label
},
onLoad: function() {
this.initData();
this.initEvent();
this.initUI();
},
initEvent: function() {
this.eventOn(this._taskModel.EVENT_UPDATE_TASK_INFO, this.updateTaskClassInfo, this);
this.eventOn(this._taskModel.EVENT_UPDATE_TASK_CLASS, this.onUpdateTaskClassBox, this);
},
initData: function() {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this._taskCtrl = app.ctrls.task;
this._taskModel = this._taskCtrl.getModel();
var e = this.model.getRoomType();
this.roomConfig = ConfigMgr.getConfig("fish_room_config").findByIndex(e) || {};
},
initUI: function() {
this.onClick(this.node, this.getTaskReward.bind(this));
TypeUtils.isRealNull(this.roomConfig.taskClassId) || (this.txtTitle.string = this.roomConfig.name);
this.updateTaskClassInfo();
this.onUpdateTaskClassBox();
},
getTaskReward: function() {
if (!TypeUtils.isRealNull(this.roomConfig.taskClassId)) {
for (var e, t = this._taskModel.getFishTaskInfo(this.roomConfig.taskClassId), i = 0; i < t.length; i++) {
var s = t[i];
if (s.status == n.FinishStatus.Finish) {
e = s;
break;
}
}
if (TypeUtils.isRealNull(e)) ViewManager.showView("NEWER_TASK_VIEW"); else {
var o = e.award[0];
this._taskCtrl.getTaskAward(e.id, o);
}
}
},
checkTaskVisible: function() {
var e, t = this.roomConfig.taskClassId, i = !1;
if (!TypeUtils.isRealNull(t)) for (var s = this._taskModel.getFishTaskInfo(t), o = 0; o < s.length; o++) {
var a = s[o];
if (a.status < n.FinishStatus.HasReceive) {
e = a;
i = !0;
break;
}
}
return {
state: i,
info: e
};
},
updateTaskClassInfo: function() {
var e = this.checkTaskVisible(), t = e.info;
if (e.state) {
this.txtTaskDesc.string = t.desc;
SpriteUtils.setTexture({
path: "module/fish/texture/catchFishUi/task/" + t.icon
}, this.sprTaskIcon, this);
this.txtProgress.string = t.progress + "/" + t.num;
this.nodeTaskSp.active = t.status == n.FinishStatus.Finish;
}
},
onUpdateTaskClassBox: function() {
if (this.node.active) for (var e = this._taskModel.getClassInfo(), t = 0; t < this.sprStages.length; t++) {
var i = this.sprStages[t], s = e[t + 1] != n.FinishStatus.HasReceive ? "mb_box_" + (t + 1) : "mb_img_01";
SpriteUtils.setTexture({
path: "module/fish/texture/catchFishUi/task/" + s
}, i, this);
}
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
TaskConst: "TaskConst"
} ],
fishTypeItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "fb18f6RxjdBx5Ip8zBGzifJ", "fishTypeItem");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
txtMult: cc.Label,
txtName: cc.Label,
sprFish: cc.Node
},
onLoad: function() {},
setData: function(e) {
var t = ConfigMgr.getConfig("fish").findByIndex(e);
SpriteUtils.setTexture({
path: "module/fish/texture/fishIntroduce/fish/" + t.icon
}, this.sprFish, this);
this.txtName.string = t.name;
var i = "";
TypeUtils.isAllNull(t.multipleShow) ? TypeUtils.isRealNull(t.goldRange) ? TypeUtils.isRealNull(t.goldDrop) || (i = t.goldDrop) : i = t.goldRange[0] + "-" + t.goldRange[1] : i = t.multipleShow;
this.txtMult.string = i;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
goldDragonView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "e31d5pRAA9E4JojN3/KD4yb", "goldDragonView");
var s = e("autoScrollView"), n = e("ItemConst"), o = [ 9, 8, 7, 6, 5, 4, 3, 2, 1, 0 ];
cc.Class({
extends: ViewBase,
properties: {
spDragon: cc.Node,
spineDragon: sp.Skeleton,
scrollNums: [ s ],
scrollNodes: [ cc.Node ]
},
onAdapt: function() {
AdaptUtils.AdaptNodeToFullAdapt(this.node);
},
onCreate: function(e) {
ViewBase.prototype.onCreate.call(this);
this.data = e || {};
this.initData(this.data);
this.initUI();
},
initData: function(e) {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this._roleCtrl = app.ctrls.role;
this._roleModel = this._roleCtrl.getModel();
this._roleId = this._roleModel.getRoleId();
this.catchFishUI = e.catchFishUI;
this.catchInfo = e.catchInfo;
this.fishType = e.fishType;
this.dropNum = 0;
this.dropItemId = 0;
for (var t = 0; t < this.catchInfo.dropList.length; t++) {
var i = this.catchInfo.dropList[t];
if (i.itemId == n.ResourceType.Gold) {
this.dropNum = i.amount;
this.dropItemId = i.itemId;
this.catchInfo.isMe && this.model.setNotAddGoldNum(i.amount);
} else if (i.itemId == n.ResourceType.Jade) {
this.dropNum = i.amount;
this.dropItemId = i.itemId;
this.catchInfo.isMe && this.model.setNotAddJadeNum(i.amount);
}
}
this.model.pauseAutoFire();
},
initUI: function() {
this.spDragon.active = !0;
SpineUtils.changeAnimation(this.spineDragon, "1", !0, "2", !0);
this.spineDragon.setCompleteListener(this.onSpineComplete.bind(this));
this.initNumberLists();
},
initNumberLists: function() {
for (var e = 0; e < 4; e++) {
var t = this.scrollNums[e], i = this.scrollNodes[e];
t.numItems = o.length;
i.active = !1;
}
},
onRenderEvent: function(e, t) {
this.seekC(e, "label").getComponent(cc.Label).string = o[t];
},
startPlay: function() {
var e = this;
this.rewardNum = [];
for (var t = this.catchInfo.dropMultiple, i = function(i) {
var s = e.scrollNums[i], n = e.scrollNodes[i];
n.active = !0;
ActionUtils.callOnce(n, function() {
var n = t % 10;
t = Math.floor(t / 10);
s.startScroll(3, 9 - n, 4);
3 == i && e.playResult();
}, i / 2);
}, s = 0; s < 4; s++) i(s);
},
onSpineComplete: function(e) {
e && e.animation && "1" == e.animation.name && this.startPlay();
},
playResult: function() {
var e = this, t = this.dropItemId == n.ResourceType.Jade, i = [];
i.push(cc.delayTime(.5));
i.push(cc.callFunc(function() {
e.catchInfo.isMe && (t ? e.model.setNotAddJadeNum(0) : e.model.setNotAddGoldNum(0));
}));
i.push(cc.delayTime(4));
i.push(cc.callFunc(function() {
e.dropNum > 0 && !TypeUtils.isRealNull(e.catchFishUI) && TypeUtils.isFunction(e.catchFishUI.playDieEffect) ? e.catchFishUI.playDieEffect(e.catchInfo, e.fishType) : !TypeUtils.isRealNull(e.catchFishUI) && TypeUtils.isFunction(e.catchFishUI.showZhuanPan) && e.catchFishUI.showZhuanPan(e.fishType);
e.closethis();
}));
this.node.runAction(cc.sequence(i));
},
closethis: function() {
ViewManager.closeView(this);
},
onDestroy: function() {
ViewBase.prototype.onDestroy.call(this);
this.model.resumeAutoFire();
}
});
cc._RF.pop();
}, {
ItemConst: "ItemConst",
autoScrollView: "autoScrollView"
} ],
goldFishView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "cd2fd9KOjJFFbKXHPuG/6AM", "goldFishView");
var s = e("CatchFishConst"), n = null, o = [ -385, -230, -80, 75, 225, 380 ];
cc.Class({
extends: ViewBase,
properties: {
tabToggle: cc.Node,
toggles: {
default: [],
type: [ cc.Node ]
},
togNames: {
default: [],
type: [ cc.Label ]
},
togSeleNames: {
default: [],
type: [ cc.Label ]
},
nodeSwallo: cc.Node,
nodeCenter: cc.Node,
sprLight1: cc.Node,
sprLight2: cc.Node,
txtGoldNum: cc.Label,
txtDrawType: cc.Label,
runProgressBar: cc.Node,
txtProg: cc.Label,
btnDraw: cc.Node,
txtDesc: cc.Node,
btnEnabled: cc.Node,
prefabBg: cc.Prefab,
drawItem: cc.Prefab
},
onCreate: function() {
this.initConfig();
this.initData();
this.initEvent();
this.initUI();
},
initConfig: function() {
n = ConfigMgr.getConfig("gold_fish_limit_config");
ConfigMgr.getConfig("gold_fish_pool_config");
},
initData: function() {
var e = this;
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this.goldFishInfo = this.model.getGoldFishInfo();
this.goldFishInfo.pool = Math.floor(Number(this.goldFishInfo.pool));
this.poolConf = this.model.getGoldFishPoolConf();
this.model.pauseAutoFire();
this.limitCfg = [];
n.forEach(function(t) {
e.limitCfg.push(t);
});
},
initEvent: function() {
this.eventOn(this.model.EVENT_GOLDFISH_INFO_UPDATE, this.updateGoldFishInfo, this);
this.eventOn(this.model.EVENT_GOLDFISH_LOTTERY_RESULT, this.handleGoldFishLotteryResult, this);
},
initUI: function() {
var e = this;
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBaseView").setCloseCallback(function() {
ViewManager.closeView(e);
});
this.comBg.getComponent("comBaseView").setTitle({
type: 1,
bgType: 3,
path: "module/fish/texture/goldFish/mfcj_title"
});
this.onClick(this.btnDraw, this.onClickToDraw.bind(this));
this.btnDraw.active = !1;
ActionUtils.timerAct(this.nodeCenter, function() {
e.sprLight1.active = !e.sprLight1.active;
e.sprLight2.active = !e.sprLight1.active;
}, .5);
this.rewardItems = [];
this.initRewardItems();
this.initMenuTab();
},
initMenuTab: function() {
for (var e = this, t = 0, i = function(i) {
var s = e.toggles[i], o = e.togNames[i], a = e.togSeleNames[i], r = n.findByIndex(i + 1);
o.string = r.name;
a.string = r.name;
if (e.goldFishInfo.num >= r.fishLimit && e.goldFishInfo.pool >= r.lowerLimit) {
s.getComponent(cc.Toggle).isChecked = !0;
t = i;
}
s.on("toggle", function() {
e.seleTab(i);
});
}, s = 0; s < this.toggles.length; s++) i(s);
this.seleTab(t);
},
initRewardItems: function() {
for (var e = 0; e < 6; e++) {
var t = cc.instantiate(this.drawItem);
t.parent = this.nodeCenter;
t.y = -25;
t.x = o[e];
t.script = t.getComponent("drawItem");
t.script.setShowFinishCb(this.showFinish.bind(this));
this.rewardItems.push(t);
}
},
seleTab: function(e) {
var t = this;
if (this.curIndex != e) {
this.btnDraw.active = !1;
this.btnEnabled.active = !0;
this.curIndex = e;
for (var i = this.poolConf[e + 1], s = 0; s < this.rewardItems.length; s++) {
this.rewardItems[s].script.updateData(i[s], s);
}
this.nodeSwallo.active = !0;
this.nodeSwallo.stopAllActions();
ActionUtils.callOnce(this.nodeSwallo, function() {
t.nodeSwallo.active = !1;
}, 3);
}
},
showFinish: function() {
this.nodeSwallo.stopAllActions();
this.nodeSwallo.active = !1;
this.updateGoldFishInfo();
},
onClickToDraw: function() {
var e = this, t = this.limitCfg[this.curIndex + 1];
if (TypeUtils.isRealNull(t)) this.requestLottery(); else {
var i = t.lowerLimit - this.goldFishInfo.pool, s = StringUtils.format(_LANG("GOLD_FISH_LOTTERY_TIPS"), t.name, i);
TipsUtils.showTipsBox({
desc: s,
needCheckBox: !1,
cbTag: "gold_fish_lottery",
sureCallBack: function() {
e.requestLottery();
}
});
}
},
requestLottery: function() {
var e = this;
this.isRequest = !0;
this.winIndex = null;
this.runIndex = 0;
this.tmElapsed = 0;
this.nodeSwallo.active = !0;
this.btnDraw.active = !1;
this.btnEnabled.active = !0;
this.node.stopAllActions();
ActionUtils.timerAct(this.node, function(t) {
e.tmElapsed = e.tmElapsed + t;
var i = e.runIndex >= 5 ? 0 : e.runIndex + 1;
e.rewardItems[e.runIndex].script.enabledDark(!0);
var s = e.rewardItems[i];
s.script.enabledDark(!1);
if (TypeUtils.isRealNull(e.winIndex) || e.winIndex != i) s.script.showLight(!1); else {
e.node.stopAllActions();
s.script.showLight(!0);
e.isRequest = !1;
ViewManager.showAwards({
awards: e.poolConf[e.curIndex + 1][e.winIndex].award
});
}
e.runIndex = i;
}, .1);
this.delayTimer(function() {
var t = e.limitCfg[e.curIndex];
e.ctrl.requestGoldFishLottery(t.type);
}, 2.5);
},
handleGoldFishLotteryResult: function(e) {
var t = (e = e || {}).data;
if (!TypeUtils.isRealNull(t)) {
for (var i = 0; i < this.rewardItems.length; i++) {
var s = this.rewardItems[i];
t.data == i + 1 && (this.winIndex = t.data - 1);
s.script.enabledDark(!0);
}
this.nodeSwallo.active = !1;
}
},
updateGoldFishInfo: function() {
var e = this.model.getGoldFishInfo();
if (!TypeUtils.isRealNull(e)) {
e.pool = Math.floor(Number(e.pool));
this.goldFishInfo = e;
for (var t = -1, i = 0; i < this.limitCfg.length; i++) {
var n = this.limitCfg[i];
e.num >= n.fishLimit && e.pool >= n.lowerLimit && (t = i);
}
this.btnDraw.active = this.curIndex == t;
this.btnEnabled.active = this.curIndex != t;
this.txtGoldNum.string = e.pool;
if (e.num < s.GOLD_FISH_LOTTERY_NUM) {
this.txtDrawType.string = this.limitCfg[0].name + ":";
this.runProgressBar.getComponent(cc.ProgressBar).progress = e.num / s.GOLD_FISH_LOTTERY_NUM;
this.txtProg.string = e.num + "/" + s.GOLD_FISH_LOTTERY_NUM;
} else {
var o = this.limitCfg[this.curIndex + 1];
TypeUtils.isRealNull(o) && (o = this.limitCfg[this.curIndex]);
this.txtDrawType.string = o.name + ":";
this.runProgressBar.getComponent(cc.ProgressBar).progress = e.pool / o.lowerLimit;
this.txtProg.string = e.pool + "/" + o.lowerLimit;
}
}
}
});
cc._RF.pop();
}, {
CatchFishConst: "CatchFishConst"
} ],
goldFish: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "3bb20PFrnNK5Z7xgkJ7NCE9", "goldFish");
var s = null;
cc.Class({
extends: BaseComponent,
properties: {
loadBar: cc.Node,
txtName: cc.Label,
txtLoad: cc.Label,
txtLottrey: cc.Label,
txtTitle: cc.Label,
txtLotteryGold: cc.Label,
sprIcon: cc.Node,
spGoldFish: cc.Node
},
ctor: function() {},
onLoad: function() {
BaseComponent.prototype.onLoad.call(this);
this.initData();
this.initUI();
},
initData: function() {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
s = ConfigMgr.getConfig("gold_fish_limit_config");
},
initUI: function() {
this.txtLottrey.node.active = !1;
this.onClick(this.node, this.onClickGoldFishOpen.bind(this));
this.spGoldFish.active = !1;
},
onClickGoldFishOpen: function() {
ViewManager.showView("GOLD_FISH_VIEW");
},
updateInfo: function(e) {
var t = e.num;
this.txtLotteryGold.string = e.pool;
var i = -1;
s.forEach(function(t) {
e.num >= t.fishLimit && e.pool >= t.lowerLimit && (i = t.index);
});
if (-1 == i) {
var n = s.findByIndex(1).fishLimit;
this.loadBar.active = !0;
this.txtLottrey.node.active = !1;
this.spGoldFish.active = !1;
this.txtLoad.string = StringUtils.format("%s/%s", t, n);
this.loadBar.getComponent(cc.ProgressBar).progress = t / n;
} else {
this.loadBar.active = !1;
this.txtLottrey.node.active = !0;
this.spGoldFish.active = !0;
}
}
});
cc._RF.pop();
}, {} ],
goodsItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "288b4gqxGpFg5jMM4KqJhIh", "goodsItem");
var s = e("BaseComponent"), n = e("ShopConst"), o = e("ItemConst");
cc.Class({
extends: s,
properties: {
spLight: cc.Node,
txtName: cc.Label,
btnBuy: cc.Node,
sprTag: cc.Node,
txtPrice: cc.Node,
sprGoods: cc.Node,
spGoods: cc.Node,
txtTimes: cc.Node,
sprFlag: cc.Node,
txtSend: cc.Node,
txtTime: cc.Node,
sprRecommend: cc.Node,
txtRecommend: cc.Node,
sprSend: cc.Node,
txtDouble: cc.Node
},
onLoad: function() {
this.initData();
},
initUI: function() {},
initData: function() {
this.ctrl = app.ctrls.shop;
this.model = this.ctrl.getModel();
},
setData: function(e, t, i) {
var s = this;
this.data = e;
this.idx = i;
var a = !1;
this.onClick(this.node, this.onClickCell.bind(this));
this.txtName.string = e.name;
if (n.Shop_Gun == e.shopId) {
this.sprGoods.active = !1;
this.spGoods.active = !0;
SpineUtils.changeSpine(e.icons.sp, function(t, i) {
if (t) logger.error(t); else {
var n = s.spGoods.getComponent(sp.Skeleton);
n.skeletonData = i;
n.setAnimation(0, e.icons.stay, !0);
}
});
this.spGoods.stopAllActions();
this.spGoods.y = 50;
var r = cc.sequence(cc.moveBy(1, cc.v2(0, 8)), cc.moveBy(1, cc.v2(0, -8)));
this.spGoods.runAction(cc.repeatForever(r));
} else {
this.sprGoods.active = !0;
this.spGoods.active = !1;
e.shopId == n.ShopType.FishShop ? this.sprGoods.scale = .6 : this.sprGoods.scale = .8;
SpriteUtils.setTexture({
path: ItemUtils.toItemPngPath(e.icon),
isHide: !0
}, this.sprGoods, this);
}
this.sprRecommend.active = !1;
this.txtRecommend.active = !1;
if (!TypeUtils.isRealNull(e.label) && e.label != n.TipsType.NotTips) {
this.sprRecommend.active = !0;
this.txtRecommend.active = !0;
e.label == n.TipsType.HotSell ? this.txtRecommend.string = "热卖" : e.label == n.TipsType.Discount ? this.txtRecommend.string = "折扣" : e.label == n.TipsType.LimitTime ? this.txtRecommend.string = "限时" : e.label == n.TipsType.LimitNum && (this.txtRecommend.string = "限量");
}
var l = e.goods[0].itemId;
if (!TypeUtils.isRealNull(l)) {
var c = ItemUtils.getItemCfg(l).existTime;
if (e.shopId != n.Shop_Diamond && !TypeUtils.isRealNull(c) && c > 0) {
this.txtTime.active = !0;
this.txtTime.getComponent(cc.Label).string = StringUtils.format("有效时间：%s天", c / 86400);
a = !0;
} else this.txtTime.active = !1;
}
this.sprSend.active = !1;
var h = this.model.canGiveItems(e.id), u = 0, d = "";
if (!TypeUtils.isRealNull(h.send)) {
this.sprSend.active = !0;
d = TypeUtils.isRealNull(h.times) || 1 != h.times ? "额外" : "首充";
(u += h.send[0].amount) < e.goods[0].amount ? d += "\n赠送" : d += "\n翻倍";
}
if (t > 0 && !TypeUtils.isRealNull(e.vipMoreGift)) {
u += t * e.goods[0].amount;
if (!this.sprSend.active) {
this.sprSend.active = !0;
d = "VIP\n赠送";
}
}
this.txtDouble.getComponent(cc.Label).string = d;
this.txtDouble.active = this.sprSend.active;
this.sprFlag.active = u > 0 || a;
var p = NumberUtils.toString(u, 2);
this.txtSend.getComponent(cc.Label).string = StringUtils.format("再赠%s", p);
this.txtSend.active = u > 0;
this.txtTimes.stopAllActions();
this.txtTimes.active = !1;
var f = !0, m = function(t) {
var i = s.model.getShopInfoBuyTime(e.id);
if (-1 == t) {
s.txtTimes.active = !0;
s.txtTimes.getComponent(cc.Label).string = "VIP等级不足";
f = !1;
} else if (t > 0 && i > 0) {
var n = i + t - TimeUtils.getServerTime();
if (n > 0) {
s.txtTimes.active = !0;
f = !1;
ActionUtils.timerAct(s.txtTimes, function(e, t, i) {
var o = TimeUtils.getTimeForm3(n - t);
s.txtTimes.getComponent(cc.Label).string = StringUtils.format("%s后可购买", o);
if (i) {
s.txtTimes.active = !1;
f = !0;
}
}, 1, n);
}
}
};
if (TypeUtils.isRealNull(e.coolDown)) {
} else m(e.coolDown);
if (!TypeUtils.isRealNull(e.buyCounting)) {
var g = StringUtils.format("今日可购：%s", 1);
this.sprFlag.active && (this.sprFlag.active = !1);
this.txtTimes.active = !0;
this.txtTimes.getComponent(cc.Label).string = g;
}
this.onClick(this.btnBuy, function() {
if (f) if (!TypeUtils.isRealNull(e.buyCounting) && CountingUtils.getRemainUsingCount(e.buyCounting) <= 0) TipsUtils.showTips("次数不足"); else {
if (!TypeUtils.isRealNull(e.vipLimit) && e.vipLimit > 0) {
if (s._vipModel.getVipInfo().level < e.vipLimit) {
TipsUtils.showTips(StringUtils.format(_LANG("SHOP_BUY_VIP_LIMIT_TIPS", e.vipLimit, e.goodsUnit)));
return;
}
}
e.id == n.Fish_HaoJiaoId && ItemUtils.getItemNum(o.ResourceType.Diamond) < 1e3 ? TipsUtils.showTips("钻石数量≥1000才可购买号角喔") : s.handleTouchBuy();
} else TipsUtils.showTips(s.txtTimes.getComponent(cc.Label).string);
});
if (TypeUtils.isRealNull(e.chargePrice)) {
var _ = e.price;
this.sprTag.scale = .25;
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(_.itemId),
isHide: !0
}, this.sprTag, this);
var T = _.amount;
_.amount >= 1e4 && (T = _.amount / 1e4 + "万");
this.txtPrice.getComponent(cc.Label).string = T;
} else {
this.sprTag.scale = 1;
SpriteUtils.setTexture({
path: "module/fish/texture/fishShop/tag",
isHide: !0
}, this.sprTag, this);
this.txtPrice.getComponent(cc.Label).string = e.chargePrice + (_LANG("SHOP_BUY_UNIT") || e.desc);
}
},
handleTouchBuy: function() {
TypeUtils.isRealNull(this.data) || TypeUtils.isRealNull(this.data.chargePrice) ? ItemUtils.isEnough(this.data.price) && this.ctrl.buyGoods(this.data.id, 1) : AppUtils.addOrder(this.data.id);
},
setCellCB: function(e) {
this.cellCallback = e;
},
onClickCell: function() {
if (TypeUtils.isFunction(this.cellCallback)) {
var e = this.node.convertToWorldSpaceAR(cc.v2(-50, 100));
this.cellCallback(this.idx, e);
}
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
ItemConst: "ItemConst",
ShopConst: "ShopConst"
} ],
greatAnim: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "9bfa5qGUyNOKLJjPJvc1Ou4", "greatAnim");
var s = e("CatchFishConst"), n = e("BaseComponent"), o = e("ItemConst");
cc.Class({
extends: n,
properties: {
spJade: cc.Node,
spineJade: sp.Skeleton,
spCoin: cc.Node,
spineCoin: sp.Skeleton,
txtJade: cc.Node,
txtCoin: cc.Node
},
onLoad: function() {
this.initData();
this.initUI();
},
initData: function() {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
},
initUI: function() {
this.spJade.active = !1;
this.txtJade.getComponent(cc.Label).string = "";
this.txtJade.active = !1;
this.spCoin.active = !1;
this.txtCoin.getComponent(cc.Label).string = "";
this.txtCoin.active = !1;
},
setData: function(e, t) {
var i = this.model.getRoomGroup(), n = null, a = o.ResourceType.Gold;
i == s.RoomGroup.Magic && (a = o.ResourceType.Jade);
for (var r = 0; r < e.dropList.length; r++) {
var l = e.dropList[r];
if (l.itemId == a) {
n = l;
break;
}
}
this.showAnim(n, t);
},
showAnim: function(e, t) {
if (TypeUtils.isRealNull(e)) TypeUtils.isFunction(t) && t(); else {
var i = null, s = null;
if (e.itemId == o.ResourceType.Jade) {
this.spJade.active = !0;
this.spCoin.active = !1;
i = this.spineJade;
s = this.txtJade;
} else {
this.spJade.active = !1;
this.spCoin.active = !0;
i = this.spineCoin;
s = this.txtCoin;
}
SpineUtils.changeAnimation(i, "1", !1, null, !0);
this.playSound("taibangle");
this.node.runAction(cc.sequence(cc.delayTime(.5), cc.callFunc(function() {
s.active = !0;
s.getComponent(cc.Label).string = e.amount;
}), cc.delayTime(3), cc.callFunc(function() {
TypeUtils.isFunction(t) && t();
})));
}
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
CatchFishConst: "CatchFishConst",
ItemConst: "ItemConst"
} ],
gunForgeResultView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "f8617IjGRhMhIqNtqIcLitp", "gunForgeResultView");
cc.Class({
extends: ViewBase,
properties: {
spTitleSucc: cc.Node,
spineTitleSucc: sp.Skeleton,
spTitleFail: cc.Node,
spineTitleFail: sp.Skeleton,
spGun: cc.Node,
spineGun: sp.Skeleton,
sprTitleSucc: cc.Node,
sprTitleFail: cc.Node,
nodeCom: cc.Node,
btnSure: cc.Node,
txtItemName: cc.Node,
txtDesc: cc.Node,
txtGunLevel: cc.Node,
comItem: cc.Prefab
},
onCreate: function(e) {
e = e || {};
this.initData(e);
this.initUI();
},
initData: function(e) {
this.resultData = e;
this.resultViewCallBack = e.resultViewCallBack;
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this.gunUnlockLevelConf = this.model.getGunUnlockLevelConf();
this._currencyModel = app.ctrls.currency.getModel();
this._roleCtrl = app.ctrls.role;
this._roleModel = this._roleCtrl.getModel();
this._roleId = this._roleModel.getRoleId();
this._bagCtrl = app.ctrls.bag;
this._bagModel = this._bagCtrl.getModel();
this.isInRoom = !1;
TypeUtils.isRealNull(e.isInRoom) || (this.isInRoom = e.isInRoom);
},
initUI: function() {
this.onClick(this.btnSure, this.closeSelf.bind(this));
this.btnSure.active = !1;
this.spTitleSucc.active = !1;
this.spTitleFail.active = !1;
this.spGun.active = !1;
this.sprTitleSucc.active = !1;
this.sprTitleFail.active = !1;
this.updateView();
},
updateView: function() {
var e = this;
if (this.resultData.isSucc) {
this.spGun.active = !0;
this.spTitleSucc.active = !0;
this.sprTitleSucc.active = !0;
this.txtItemName.active = !1;
SpineUtils.changeAnimation(this.spineTitleSucc, "1", !0, "2", !0);
this.spineTitleSucc.setCompleteListener(this.onSuccessSpineComplete.bind(this));
var t = UserUtils.getDataStr("CurUseGunType" + this._roleId, 1), i = UserUtils.getDataStr("CurUseGunLevel" + this._roleId, 1), s = ConfigMgr.getGunLevelMap(), n = ConfigMgr.getConfig("gun_skin").findByIndex(s[t][i].skinId);
TypeUtils.isRealNull(n) && (n = ConfigMgr.getConfig("gun_skin").findByIndex(1));
var o = n.gunSpine;
n.fortScale;
SpineUtils.changeSpine(o.sp, function(t, i) {
e.spineGun.skeletonData = i;
e.spineGun.setAnimation(0, o.stay, !0);
});
this.txtDesc.getComponent(cc.Label).string = _LANG("GUN_FORGE_RESULT_01");
this.txtGunLevel.getComponent(cc.Label).string = this.resultData.forgeLevel;
} else {
this.spGun.active = !0;
this.spTitleFail.active = !0;
this.sprTitleFail.active = !0;
this.txtGunLevel.active = !1;
SpineUtils.changeAnimation(this.spineTitleFail, "1", !0, "2", !0);
this.spineTitleFail.setCompleteListener(this.onFailSpineComplete.bind(this));
this.txtDesc.getComponent(cc.Label).string = _LANG("GUN_FORGE_RESULT_02");
if (!TypeUtils.isRealNull(this.resultData.recovery)) for (var a = this.resultData.recovery.length, r = 0; r < this.resultData.recovery.length; r++) {
var l = this.resultData.recovery[r], c = cc.instantiate(this.comItem);
c.parent = this.nodeCom;
c.x = 125 * (r - (a - 1) / 2);
c.y = 0;
c.getComponent("comItem").setData(l);
}
}
},
updateData: function(e) {
this.resultData = e;
this.updateView();
},
onSuccessSpineComplete: function(e) {
if (e && e.animation && "1" == e.animation.name) {
this.showSuccessSpine();
this.closeSelf();
}
},
onFailSpineComplete: function(e) {
e && e.animation && "2" == e.animation.name && this.closeSelf();
},
closeSelf: function() {
TypeUtils.isFunction(this.resultViewCallBack) && this.resultViewCallBack();
ViewManager.closeView(this);
},
showSuccessSpine: function() {
ViewManager.showView("GUN_UP_SUCC_ANIM", null, {
forgeLevel: this.resultData.forgeLevel
});
}
});
cc._RF.pop();
}, {} ],
gunForgeView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "d7069n/VIRGWIYLZmzVxLfD", "gunForgeView");
var s = e("ItemConst");
cc.Class({
extends: ViewBase,
properties: {
spGun: cc.Node,
spStayEffert: cc.Node,
spForge: cc.Node,
spineForge: sp.Skeleton,
sprCurrency: cc.Node,
txtNum: cc.Label,
checkBox: cc.Node,
toggleBox: cc.Toggle,
sprCost: cc.Node,
btnForge: cc.Node,
btnAuto: cc.Node,
txtStoneNum: cc.Node,
txtGunLevel: cc.Label,
txtTarget: cc.Label,
txtTitle: cc.Label,
txtAdd: cc.Label,
txtCurAdd: cc.Node,
txtUseNum: cc.Node,
txtCost: cc.Label,
txtAutoForge: cc.Label,
prefabBg: cc.Prefab
},
onCreate: function(e) {
e = e || {};
this.initData(e);
this.initEvent();
this.initUI();
},
initData: function(e) {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this.gunUnlockLevelConf = this.model.getGunUnlockLevelConf();
this._currencyModel = app.ctrls.currency.getModel();
this._roleCtrl = app.ctrls.role;
this._roleModel = this._roleCtrl.getModel();
this._roleId = this._roleModel.getRoleId();
this._bagCtrl = app.ctrls.bag;
this._bagModel = this._bagCtrl.getModel();
this.isInRoom = !1;
TypeUtils.isRealNull(e.isInRoom) || (this.isInRoom = e.isInRoom);
},
initEvent: function() {
this.eventOn(this._bagModel.EVENT_UPDATE_GUN_FORGE, this.updateGunUnlockInfo, this);
},
initUI: function(e) {
var t = this;
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBaseView").setCloseCallback(function() {
t.isRequested || ViewManager.closeView(t);
});
this.comBg.getComponent("comBaseView").setTitle({
type: 1,
path: "module/fish/texture/gunForge/dz_title_01",
bgType: 1
});
var i = UserUtils.getDataStr("CurUseGunType" + this._roleId, 1), n = UserUtils.getDataStr("CurUseGunLevel" + this._roleId, 1), o = ConfigMgr.getGunLevelMap(), a = ConfigMgr.getConfig("gun_skin").findByIndex(o[i][n].skinId);
TypeUtils.isRealNull(a) && (a = ConfigMgr.getConfig("gun_skin").findByIndex(1));
var r = a.gunSpine, l = a.fortScale;
SpineUtils.changeSpine(r.sp, function(e, i) {
var s = t.spGun.getComponent(sp.Skeleton);
s.skeletonData = i;
s.setAnimation(0, r.stay, !0);
});
this.spGun.scale = l.forge;
var c = cc.sequence(cc.moveBy(1, cc.v2(0, 8)), cc.moveBy(1, cc.v2(0, -8)));
this.spGun.runAction(cc.repeatForever(c));
this.spForge.active = !1;
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(s.ResourceType.ForgeStone),
isHide: !0,
callback: function() {
SpriteUtils.setAdaptContentSize(t.sprCurrency, null, 80);
}
}, this.sprCurrency, this);
this.txtCurAdd.active = !1;
this.checkBox.on("toggle", function() {
t.isRequested || (t.isUseItem = t.toggleBox.isChecked);
});
this.toggleBox.isChecked = !1;
this.onClick(this.btnForge, this.onTouchForge.bind(this));
this.onClick(this.btnAuto, this.onTouchForgeAuto.bind(this));
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(s.ResourceType.Diamond),
isHide: !0,
callback: function() {
SpriteUtils.setAdaptContentSize(t.sprCost, null, 45);
}
}, this.sprCost, this);
this.updateGunUnlockInfo({});
},
update: function(e) {
this.isAutoForge && this.onTouchForge();
},
onTouchForge: function() {
if (!this.isRequested) {
this.isRequested = !0;
this.requestForge();
}
},
onTouchForgeAuto: function(e) {
this.isAutoForge ? this.cancelAutoForge() : this.setAutoForge();
},
requestForge: function() {
if (TypeUtils.isRealNull(this.nextUnlockInfo)) {
this.cancelAutoForge();
TipsUtils.showTips(_LANG("GUN_FORGE_MAX_LEVEL"));
} else {
for (var e = this.nextUnlockInfo.cost, t = 0; t < e.length; t++) {
var i = e[t], n = ItemUtils.getItemNum(i.itemId);
if (i.amount > n) {
var o = s.ResourceType.ForgeStone == i.itemId, a = o ? "，可通过活动获得喔~" : "";
this.showErrorMsg(i.itemId, a);
this.cancelAutoForge();
return;
}
}
if (this.isUseItem) {
var r = this.nextUnlockInfo.extra, l = this._bagModel.getItemNum(r.itemId);
if (r.amount > l) {
this.showErrorMsg(r.itemId);
this.cancelAutoForge();
return;
}
}
this.toggleBox.interactable = !0;
this.playSound("fish_upgrade_succ");
this.spStayEffert.active = !1;
this.spForge.active = !0;
SpineUtils.changeAnimation(this.spineForge, "1", !1, null, !0);
this.spineForge.setCompleteListener(this.spineCompleteHandle.bind(this));
}
},
showErrorMsg: function(e, t) {
t = t || "";
var i = ItemUtils.getItemName(e);
TipsUtils.showTips(StringUtils.format(_LANG("SOMETHING_NOTENOUGH") + t, i));
},
spineCompleteHandle: function(e) {
this._bagCtrl.requestGunForge(this.isUseItem);
},
setAutoForge: function() {
this.isRequested = !1;
if (!this.isAutoForge) {
this.isAutoForge = !0;
this.txtAutoForge.string = "停止自动锻造";
this.btnForge.getComponent(cc.Button).interactable = !1;
this.toggleBox.interactable = !1;
}
},
cancelAutoForge: function() {
this.isRequested = !1;
if (this.isAutoForge) {
this.isAutoForge = !1;
this.txtAutoForge.string = "自动锻造";
this.btnForge.getComponent(cc.Button).interactable = !0;
this.toggleBox.interactable = !0;
}
},
updateGunUnlockInfo: function(e) {
var t = this;
this.handleGunForgeResult(e);
for (var i = this._bagModel.getGunForgeLevel(), n = null, o = 0; o < this.gunUnlockLevelConf.length; o++) {
var a = this.gunUnlockLevelConf[o];
if (a.level > i) {
n = a;
break;
}
}
this.nextUnlockInfo = n;
this.txtGunLevel.string = i;
var r = this._bagModel.getItemNum(s.ResourceType.ForgeStone), l = this._bagModel.getItemNum(s.ResourceType.StoneElite);
if (TypeUtils.isRealNull(n)) {
for (var c = null, h = 0; h < this.gunUnlockLevelConf.length; h++) {
var u = this.gunUnlockLevelConf[h];
if (u.level == i) {
c = u;
break;
}
}
if (TypeUtils.isRealNull(c)) logger.error("找不到对应跑塔的配置表:curUnlockLevel = %s", i); else {
this.txtTarget.string = _LANG("GUN_FORGE_MAX_LEVEL");
this.txtStoneNum.getComponent(cc.Label).string = r + "/0";
this.txtStoneNum.color = cc.color(0, 255, 0, 255);
this.txtNum.string = l;
this.txtAdd.string = c.effectDesc;
this.txtTitle.string = _LANG("GUN_FORGE_TIPS_2");
}
} else {
this.txtTitle.string = _LANG("GUN_FORGE_TIPS_3");
for (var d = 0; d < n.cost.length; d++) {
var p = n.cost[d];
if (p.itemId == s.ResourceType.ForgeStone) {
this.txtStoneNum.getComponent(cc.Label).string = r + "/" + p.amount;
var f = r >= p.amount ? cc.color(0, 255, 0, 255) : cc.color(255, 0, 0, 255);
this.txtStoneNum.color = f;
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(p.itemId),
isHide: !0,
callback: function() {
SpriteUtils.setAdaptContentSize(t.sprCurrency, null, 80);
}
}, this.sprCurrency, this);
} else p.itemId == s.ResourceType.Diamond && (this.txtCost.string = p.amount);
}
this.txtTarget.string = StringUtils.format(_LANG("GUN_FORGE_TIPS_1"), n.level);
this.txtAdd.string = n.effectDesc;
var m = ConfigMgr.getConfig("gun_unlock_level_config").findByIndex(i);
TypeUtils.isRealNull(m) || (this.txtCurAdd.getComponent(cc.Label).string = m.effectDesc);
var g = n.extra;
if (!TypeUtils.isRealNull(g)) {
var _ = this._bagModel.getItemNum(g.itemId);
this.txtNum.string = _;
var T = _ >= g.amount ? cc.color(0, 255, 0, 255) : cc.color(255, 0, 0, 255);
this.txtUseNum.getComponent(cc.Label).string = g.amount;
this.txtUseNum.color = T;
}
}
},
handleGunForgeResult: function(e) {
var t = this;
if (!TypeUtils.isRealNull(e) && !TypeUtils.isRealNull(e.data)) {
this.spForge.active = !1;
this.spStayEffert.active = !0;
this.isAutoForge || (this.toggleBox.interactable = !0);
e.data.isSucc && this.cancelAutoForge();
this.node.stopAllActions();
var i = ViewManager.getView("GUN_FORGE_RESULT_VIEW");
if (TypeUtils.isRealNull(i)) {
e.data.isInRoom = this.isInRoom;
e.data.resultViewCallBack = this.handleResultViewClose.bind(this);
ViewManager.showView("GUN_FORGE_RESULT_VIEW", null, e.data);
} else TypeUtils.isRealNull(i.script) || i.script.updateData(e.data);
var s = e.data.isSucc ? 5 : 2;
ActionUtils.callOnce(this.node, function() {
ViewManager.closeView("GUN_FORGE_RESULT_VIEW");
t.handleResultViewClose();
}, s);
}
},
handleResultViewClose: function(e) {
this.isRequested = !1;
}
});
cc._RF.pop();
}, {
ItemConst: "ItemConst"
} ],
gunSwitchItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "6fa76etAudGn4Vqcy3MzoPN", "gunSwitchItem");
var s = e("BaseComponent"), n = e("ShopConst");
cc.Class({
extends: s,
properties: {
seletBg: cc.Node,
sprName: cc.Node,
spGun: cc.Node,
btnPlay: cc.Node,
txtExpired: cc.Node,
btnObtain: cc.Node,
txtBtnDes: cc.Node
},
ctor: function() {},
onLoad: function() {
s.prototype.onLoad.call(this);
this.initData();
this.initUI();
},
initData: function() {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this._bagCtrl = app.ctrls.bag;
this._bagModel = this._bagCtrl.getModel();
this.gunList = this._bagModel.getGuns();
},
initUI: function() {
this.seletBg.active = !1;
},
updateView: function(e, t) {
var i = this;
this.gunCfg = e;
SpriteUtils.setTexture({
path: "module/fish/texture/gunSwitch/" + e.nameRes
}, this.sprName, this);
this.onClick(this.btnObtain, this.onTouchGunSwitch.bind(this));
this.txtExpired.active = !1;
this.onClick(this.btnPlay, function() {
if (TypeUtils.isFunction(i.playCallback)) {
var e = i.btnPlay.convertToWorldSpaceAR(cc.v2(0, 0));
i.playCallback(e, i.gunCfg.desc);
}
});
this.btnPlay.active = !TypeUtils.isAllNull(e.desc);
if (!TypeUtils.isRealNull(t)) {
var s = t.gunSpine;
this.spGun.stopAllActions();
this.spGun.y = 0;
SpineUtils.changeSpine(s.sp, function(e, t) {
var n = i.spGun.getComponent(sp.Skeleton);
n.skeletonData = t;
n.setAnimation(0, s.stay, !0);
});
var n = cc.sequence(cc.moveBy(1, cc.v2(0, 8)), cc.moveBy(1, cc.v2(0, -8)));
this.spGun.runAction(cc.repeatForever(n));
}
},
setPlayCallback: function(e) {
this.playCallback = e;
},
onTouchGunSwitch: function() {
var e = this.model.getPlayerInfo(RoleUtils.getRoleId());
if (e.gunType != this.gunCfg.type) {
var t = this.gunList[this.gunCfg.type];
if (!TypeUtils.isRealNull(t)) {
var i = TimeUtils.getServerTime();
if (-1 == t.expiredAt || t.expiredAt > i) {
this.model.isAimGoldFish() || this.ctrl.updateGun({
roleId: RoleUtils.getRoleId(),
gunLevel: e.gunLevel,
gunType: this.gunCfg.type
});
return;
}
}
SystemUtils.checkIsClose(20025) ? TipsUtils.showTips("敬请期待") : 1 == this.gunCfg.showType ? ViewManager.showView("SHOP_VIEW") : ViewManager.showView("SHOP_VIEW", null, {
id: n.Shop_Gun
});
}
},
updateUI: function() {
var e = this.model.getPlayerInfo(RoleUtils.getRoleId()), t = "module/fish/texture/fishCommon/btn_cm_2";
this.seletBg.active = !1;
var i = "获取", s = cc.color(15, 76, 169, 255), n = this.gunList[this.gunCfg.type];
if (e.gunType == this.gunCfg.type) {
this.seletBg.active = !0;
t = "module/fish/texture/fishCommon/btn_cm_3";
i = "使用中";
s = cc.color(204, 96, 0, 255);
} else if (!TypeUtils.isRealNull(n)) {
var o = TimeUtils.getServerTime();
if (-1 == n.expiredAt || n.expiredAt > o) {
i = "更换";
t = "module/fish/texture/fishCommon/btn_cm_3_2";
s = cc.color(23, 139, 78, 255);
}
}
SpriteUtils.setTexture({
path: t
}, this.btnObtain, this);
this.txtBtnDes.getComponent(cc.Label).string = i;
this.txtBtnDes.getComponent(cc.LabelOutline).color = s;
},
update: function(e) {
var t = this.gunList[this.gunCfg.type];
if (!TypeUtils.isRealNull(t) && t.expiredAt > 0) {
var i = TimeUtils.getServerTime(), s = t.expiredAt - i;
this.txtExpired.active = !0;
this.txtExpired.getComponent(cc.Label).string = s > 0 ? "剩余:" + TimeUtils.getTimeForm3(Math.floor(s)) : "已过期";
} else this.txtExpired.active = !1;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
ShopConst: "ShopConst"
} ],
gunSwitchView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "227b9QkL+1KWZDOw9p883AT", "gunSwitchView");
var s = null, n = null, o = null, a = e("List");
cc.Class({
extends: ViewBase,
properties: {
btnClose: cc.Node,
toggleLeft: cc.Node,
toggleRight: cc.Node,
listView: a,
gunSwitch: cc.Prefab,
tipsScroll: cc.Prefab
},
onCreate: function() {
this.initConfig();
this.initData();
this.initEvent();
this.initUI();
},
initConfig: function() {
s = ConfigMgr.getConfig("gun_level");
n = ConfigMgr.getConfig("gun_skin");
o = ConfigMgr.getConfig("gun_config");
},
initData: function() {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this._bagCtrl = app.ctrls.bag;
this._bagModel = this._bagCtrl.getModel();
this._itemsData = {};
},
initEvent: function() {
this.eventOn(this.model.EVENT_UPDATE_GUN, this.handleUpdateGunList, this);
this.eventOn(this._bagModel.EVENT_UPDATE_BAG_GUN, this.handleUpdateGunList, this);
},
initUI: function() {
var e = this;
this.itemList = [];
this.onClick(this.btnClose, function() {
ViewManager.closeView(e);
});
this.toggleLeft.on("toggle", function() {
e.switchChannel(1);
});
this.toggleRight.on("toggle", function() {
e.switchChannel(2);
});
this.tipsView = cc.instantiate(this.tipsScroll);
this.tipsView.script = this.tipsView.getComponent("tipsScrollView");
this.tipsView.parent = this.node;
this.tipsView.zIndex = 999;
this.toggleRight.getComponent(cc.Toggle).isChecked = !0;
this.switchChannel(2);
},
switchChannel: function(e) {
if (e != this.seleIndex) {
this.seleIndex = e;
if (TypeUtils.isRealNull(this._itemsData[e])) {
this._itemsData[e] = o.findAll(function(t) {
if (t.showType == e) return !0;
});
ArrayUtils.sort(this._itemsData[e], function(e, t) {
return e.type - t.type;
});
}
this.updateList();
this.handleUpdateGunList();
}
},
handleUpdateGunList: function(e) {
this.gunList = this._bagModel.getGuns();
TypeUtils.isRealNull(this.gunList) || this.updateList();
},
updateList: function() {
this.listView.numItems = this._itemsData[this.seleIndex].length;
this.listView.scrollTo(0, .02);
},
onRenderEvent: function(e, t) {
var i = this, o = this._itemsData[this.seleIndex][t];
if (TypeUtils.isRealNull(e.script)) {
e.script = e.getComponent("gunSwitchItem");
e.script.setPlayCallback(function(e, t) {
i.tipsView.script.onClickBtnPlay(e, t);
});
}
var a = s.findFirst(function(e) {
return e.type == o.type;
}), r = null;
TypeUtils.isRealNull(a.skinId) || (r = n.findByIndex(a.skinId));
e.script.updateView(o, r);
e.script.updateUI();
}
});
cc._RF.pop();
}, {
List: "List"
} ],
gunUpSuccAnim: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "97ef0m+O2hPwJdB8TRAnifG", "gunUpSuccAnim");
cc.Class({
extends: ViewBase,
properties: {
spUpSucc: cc.Node,
spineUpSucc: sp.Skeleton,
txtLevel: cc.Label
},
onCreate: function(e) {
this.data = e || {};
this.initUI();
},
initUI: function() {
SpineUtils.changeAnimation(this.spineUpSucc, "1", !1, "2", !0);
this.spineUpSucc.setCompleteListener(this.onSpineComplete.bind(this));
this.txtLevel.string = this.data.forgeLevel;
},
onSpineComplete: function(e) {
var t = this;
if (e && e.animation && "1" == e.animation.name) ActionUtils.callOnce(this.node, function() {
t.txtLevel.string = "";
}, .2); else if (e && e.animation && "2" == e.animation.name) {
TypeUtils.isFunction(this.data.callback) && this.data.callback();
ViewManager.closeView(this);
}
}
});
cc._RF.pop();
}, {} ],
gunUpgrade: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "5230drRymBJKa7TPr+xBcs9", "gunUpgrade");
var s = e("BaseComponent");
cc.Class({
extends: s,
ctor: function() {},
onLoad: function() {
s.prototype.onLoad.call(this);
this.initData();
this.initUI();
},
initData: function() {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this._turnForgeLevel = this.model.getTurnForgeLevel();
this._bagModel = app.ctrls.bag.getModel();
},
initUI: function() {
var e = this;
this._gunUnlockNode1 = this.getC("node1");
this.sprIcon1 = this.seekC(this._gunUnlockNode1, "sprIcon");
this._gunUnlockProgress = this.seekC(this._gunUnlockNode1, "txtStoneProg");
this.txtTips1 = this.seekC(this._gunUnlockNode1, "txtTips");
this._gunUnlockLevel = this.seekC(this._gunUnlockNode1, "txtUnlockLv");
this._gunUnlockNode2 = this.getC("node2");
this.sprIcon2 = this.seekC(this._gunUnlockNode2, "sprIcon");
this._gunUnlockReward = this.seekC(this._gunUnlockNode2, "txtRewardNum");
this.txtTips2 = this.seekC(this._gunUnlockNode2, "txtTips");
this._gunUnlockLevel2 = this.seekC(this._gunUnlockNode2, "txtUnlockLv");
this.sprTips = this.seekC(this._gunUnlockNode2, "sprTips");
this._gunUnlockNode2.active = !1;
this._gunUnlockNode3 = this.getC("node3");
this.txtTips31 = this.seekC(this._gunUnlockNode3, "txtTips1");
this.txtTips32 = this.seekC(this._gunUnlockNode3, "txtTips2");
this.txtFishLevel = this.seekC(this._gunUnlockNode3, "txtFishLevel");
this.txtForgeLevel = this.seekC(this._gunUnlockNode3, "txtForgeLevel");
this._gunUnlockNode3.active = !1;
this.spGunLevel = this.getC("spGunLevel");
this.txtFinishDesc = this.getC("txtFinishDesc");
this.txtFinishDesc.getComponent(cc.Label).string = "";
this.onClick(this.node, function() {
TypeUtils.isFunction(e.clickCB) && e.clickCB();
});
},
setClickCB: function(e) {
this.clickCB = e;
},
updateInfo: function(e) {
if (!(this._bagModel.getGunForgeLevel() >= this._turnForgeLevel)) {
var t = e.cost[0];
if (!TypeUtils.isRealNull(t)) {
this._gunUnlockCostItem = t;
var i = ItemUtils.getItemNum(t.itemId);
this._gunUnlockProgress.getComponent(cc.Label).string = i + "/" + t.amount;
this._gunUnlockLevel.getComponent(cc.Label).string = e.level;
this._gunUnlockLevel2.getComponent(cc.Label).string = e.level;
var s = e.award[0];
TypeUtils.isRealNull(s) || TypeUtils.isRealNull(s.amount) ? this._gunUnlockReward.getComponent(cc.Label).string = 0 : this._gunUnlockReward.getComponent(cc.Label).string = s.amount;
var n = i >= t.amount;
this.spGunLevel.active = n;
this._gunUnlockNode1.active = !n;
this._gunUnlockNode2.active = n;
}
}
},
update: function(e) {},
setBulletSpeed: function(e) {}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
headScrollView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "086c0xPZudC04KOcV6ieOmP", "headScrollView");
var s = e("List"), n = e("BaseComponent");
cc.Class({
extends: n,
properties: {
nodeSwallo: cc.Node,
nodeScroll: cc.Node,
scrollView: s
},
ctor: function() {},
onLoad: function() {
n.prototype.onLoad.call(this);
this.onClick(this.nodeSwallo, this.onClickToHide.bind(this));
this.nodeSwallo.active = !1;
this.nodeScroll.scale = 0;
this.nodeScroll.active = !1;
this.isRefresh = !1;
},
onClickToHide: function() {
this.nodeSwallo.active = !1;
this.nodeScroll.scale = 0;
this.nodeScroll.stopAllActions();
this.nodeScroll.active = !1;
},
onClickHead: function(e) {
this.nodeSwallo.active = !0;
this.nodeScroll.active = !0;
var t = this.nodeScroll.parent.convertToNodeSpaceAR(e);
this.nodeScroll.x = t.x;
this.nodeScroll.y = t.y;
ActionUtils.sequence(this.nodeScroll, cc.scaleTo(.08, 1.1), cc.scaleTo(.03, 1));
},
setData: function(e, t) {
this.headList = e;
this.scrollView.numItems = this.headList.length;
this.scrollView.scrollTo(0, .02);
this.isRefresh = !0;
TypeUtils.isRealNull(t) || (this.scrollView.selectedId = t);
},
onListRender: function(e, t) {
var i = this.headList[t];
i.isCom ? SpriteUtils.setTexture({
path: i.image
}, e, this) : LoadUtils.loadImg(i.image, function(t, i) {
e.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(i);
});
},
onListSelected: function(e, t, i, s) {
if (this.isRefresh) this.isRefresh = !1; else {
TypeUtils.isFunction(this.selectCb) && this.selectCb(t);
this.onClickToHide();
}
},
setSelectCb: function(e) {
this.selectCb = e;
this.isRefresh = !1;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
List: "List"
} ],
hitAwardNum: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "65cf3UV/1hFkZIQtgfC4+UV", "hitAwardNum");
var s = e("BaseComponent"), n = e("ItemConst");
cc.Class({
extends: s,
properties: {
txtOther: cc.Node,
txtMySilver: cc.Node,
txtMyJade: cc.Node
},
onLoad: function() {
this.initUI();
},
initUI: function() {
this.txtOther.active = !1;
this.txtMySilver.active = !1;
this.txtMyJade.active = !1;
},
setData: function(e) {
this.initUI();
var t = null;
(t = RoleUtils.getRoleId() == e.roleId ? e.itemId == n.ResourceType.Jade ? this.txtMyJade : this.txtMySilver : this.txtOther).active = !0;
t.getComponent(cc.Label).string = "+" + e.gold;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
ItemConst: "ItemConst"
} ],
httpErrorCode: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "45c49kJ3mZKTotzcxsgmDge", "httpErrorCode");
var s;
function n(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}
var o = e("LangOfCN"), a = function(e) {
return o[e];
};
window.httpErrorCode = (n(s = {
EC_SUCCESS: 0,
EC_PWD_IS_ERROR: 1004
}, 1, a("INVALID_ARG")), n(s, 4, a("INVALID_ARG")), n(s, 5, a("API_METHOD_NOT_SUPPORT")), 
n(s, 13, a("HTTP_METHOD_ERROR")), n(s, 21, a("LOGIN_IDENTIFY_ERROR")), n(s, 51, a("LOGIN_ACCOUNT_MISMATCH")), 
n(s, 53, a("LOGIN_MODIFY_FAIL")), n(s, 1002, a("LOGIN_EXIST_PLAYER")), n(s, 1003, a("LOGIN_NOEXIST_PLAYER")), 
n(s, 1006, a("USERNAME_IS_NULL")), n(s, 1007, a("PWD_IS_NULL")), n(s, 1008, a("EC_NOBIND_PHONE")), 
n(s, 1009, a("LOGIN_GETIDEN_FAIL")), n(s, 1010, a("LOGIN_BUSY_IDENTIFY")), n(s, 300007, a("HTTP_ERROR_CODE_300007")), 
n(s, 100002, a("HTTP_ADD_ADDRESS_ERROR")), n(s, 100008, a("PHONE_NUM_IS_BOUND")), 
n(s, 101009, "已超出可购买的数量"), n(s, 100200, "设备号为空"), n(s, 100201, "账号名称不能为空"), n(s, 100202, "密码不能为空"), 
n(s, 100203, "账号已经被注册"), n(s, 100204, "注册失败"), n(s, 100300, "设备号为空"), n(s, 100301, "账号名称不能为空"), 
n(s, 100302, "密码不能为空"), n(s, 100303, "账号未注册"), n(s, 100304, "密码不正确"), n(s, 101001, a("VERIFY_CODE_NULL")), 
n(s, 101002, a("INPUT_PHONE_NUM")), n(s, 101003, a("NO_CODE_INFO")), n(s, 101004, a("CODE_BE_OVERDUE")), 
n(s, 101005, a("VERIFY_CODE_CORRECT")), n(s, 101006, a("PHONE_NUM_ATYPISM")), n(s, 101007, a("BIND_PHONE_FAIL")), 
n(s, 101008, a("PLAYER_HAD_BIND_PHONE")), n(s, 101012, a("PHONE_NUM_HAS_BOUND")), 
n(s, 102001, a("HAS_CERTIFIED")), n(s, 102002, a("INVALID_ID_CARD")), n(s, 102003, a("CARD_NUMBER_IS_ERROR")), 
n(s, 102004, a("ID_CARD_HAD_BOUND")), n(s, 103001, "用户快速注册失败"), n(s, 103002, "该账号已被注册，请重新输入~"), 
n(s, 103003, "账号不存在~"), n(s, 103004, "密码错误"), n(s, 103014, "设备注册达到上限"), n(s, 108001, "错误手机号"), 
n(s, 108002, "输入手机号和当前绑定手机号不一致"), n(s, 108003, "已经超出当天发送短信验证码的次数\t"), n(s, 108004, "发送验证码失败\t"), 
n(s, 108005, "没有验证码信息\t"), n(s, 108006, "绑定手机号失败"), n(s, 108007, "非法身份证号"), n(s, 108008, "该身份证号码已被绑定"), 
n(s, 108009, "无效身份证"), n(s, 108010, "实名认证失败"), n(s, 108011, "当前身份证与绑定的身份证号不一致"), 
n(s, 108012, "修改登录密码失败"), n(s, 108013, "修改二级密码失败"), n(s, 108014, "验证码已过期"), n(s, 108015, "验证码错误"), 
n(s, 108016, "获取验证码过于频繁"), n(s, 108017, "角色不存在"), n(s, 108018, "账号不存在~"), n(s, 108019, "用户已绑定此手机号"), 
n(s, 108020, "此手机号已被绑定"), n(s, 108021, "已超出绑定手机号上限"), n(s, 108022, "设置密码失败"), s);
cc._RF.pop();
}, {
LangOfCN: "LangOfCN"
} ],
init: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "6f06cLccqNF3r46efqMTgr/", "init");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
var s = {
login: "LoginCtrl",
game: "GameCtrl",
role: "RoleCtrl",
games: "GamesCtrl",
currency: "CurrencyCtrl",
mail: "MailCtrl",
bag: "BagCtrl",
channel: "ChannelCtrl",
shop: "ShopCtrl",
task: "TaskCtrl",
counting: "CountingCtrl",
vip: "VipCtrl",
ranking: "RankingCtrl",
marquee: "MarqueeCtrl",
betTreasure: "BetTreasureCtrl",
system: "SystemCtrl",
debug: "DebugCtrl",
welfare: "WelfareCtrl",
club: "ClubCtrl"
}, n = s;
i.default = n;
t.exports = i.default;
cc._RF.pop();
}, {} ],
introItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "4fe90u4BNtEjbk3oHlkoYFm", "introItem");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
sprRed: cc.Node,
sprYellow: cc.Node,
sprFish: cc.Node,
txtName: cc.Label,
txtMult: cc.Label
},
ctor: function() {},
onLoad: function() {
s.prototype.onLoad.call(this);
this.sprRed.active = !1;
this.sprYellow.active = !1;
},
setData: function(e) {
var t = this;
this.sprRed.active = !1;
this.sprYellow.active = !1;
TypeUtils.isRealNull(e.goldfish) || 1 != e.goldfish ? 5 == e.groupType && (this.sprRed.active = !0) : this.sprYellow.active = !0;
SpriteUtils.setTexture({
path: "module/fish/texture/fishIntroduce/fish/" + e.icon,
isHide: !0,
callback: function() {
SpriteUtils.setAdaptContentSize(t.sprFish, null, 100);
}
}, this.sprFish, this);
this.txtName.string = e.name || "";
var i = "";
TypeUtils.isAllNull(e.multipleShow) ? TypeUtils.isRealNull(e.goldRange) ? TypeUtils.isRealNull(e.goldDrop) || (i = e.goldDrop) : i = e.goldRange[0] + "-" + e.goldRange[1] : i = e.multipleShow;
this.txtMult.string = i;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
introduceView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "8484fP/JXVGDpXrbJ4KMYaf", "introduceView");
var s = e("List"), n = [ {
paths: {
enable: "module/fish/texture/fishIntroduce/menu_txt_11",
sele: "module/fish/texture/fishIntroduce/menu_txt_12"
},
scale: .8
}, {
paths: {
enable: "module/fish/texture/fishIntroduce/menu_txt_21",
sele: "module/fish/texture/fishIntroduce/menu_txt_22"
},
scale: .8
}, {
paths: {
enable: "module/fish/texture/fishIntroduce/menu_txt_31",
sele: "module/fish/texture/fishIntroduce/menu_txt_32"
},
scale: .8
}, {
paths: {
enable: "module/fish/texture/fishIntroduce/menu_txt_41",
sele: "module/fish/texture/fishIntroduce/menu_txt_42"
},
scale: .8
}, {
paths: {
enable: "module/fish/texture/fishIntroduce/menu_txt_51",
sele: "module/fish/texture/fishIntroduce/menu_txt_52"
},
scale: .8
} ];
cc.Class({
extends: ViewBase,
properties: {
sprContent: cc.Node,
scrollview: cc.Node,
fishList: s,
prefabBg: cc.Prefab
},
onCreate: function(e) {
e = e || {};
this.initData();
this.initEvent();
this.initUI(e);
},
initData: function() {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
var e = this.model.getRoomType();
this.tFishPond = ConfigMgr.getConfig("fish_room_config").findByIndex(e).fishpond;
},
initEvent: function() {},
initUI: function(e) {
var t = this;
this.tabIndex = -1;
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBaseView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBaseView").setTitle({
type: 1,
path: "module/fish/texture/fishIntroduce/sm_title",
bgType: 1
});
this.comBg.getComponent("comBaseView").showTabStyle({
tabCfg: n,
callFunc: this.seleIndex.bind(this),
defaultIdx: 0,
scale: .9
});
this.updateList();
},
seleIndex: function(e) {
if (this.tabIndex != e) {
this.tabIndex = e;
this.scrollview.active = 0 == this.tabIndex;
this.sprContent.active = 0 != this.tabIndex;
0 == this.tabIndex ? this.updateList() : SpriteUtils.setTexture({
path: "module/fish/texture/picture/sm_img_" + (e + 1),
isHide: !0
}, this.sprContent, this);
}
},
updateList: function() {
this.canAction = !0;
this.fishList.numItems = this.tFishPond.length;
this.fishList.scrollTo(0, .02);
},
onRenderEvent: function(e, t) {
var i = this, s = this.tFishPond[t], n = ConfigMgr.getConfig("fish").findByIndex(s);
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("introItem"));
e.script.setData(n);
e.stopAllActions();
e.scale = 1;
if (this.canAction) {
e.scale = 0;
ActionUtils.sequence(e, cc.delayTime(.02 * t), cc.scaleTo(.1, 1.1), cc.scaleTo(.05, 1), cc.callFunc(function() {
i.canAction = !1;
}));
}
}
});
cc._RF.pop();
}, {
List: "List"
} ],
itemScrollView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "a1624lrR+NAPJqAkY0DfvpZ", "itemScrollView");
var s = e("List"), n = e("BaseComponent");
cc.Class({
extends: n,
properties: {
nodeSwallo: cc.Node,
nodeScroll: cc.Node,
scrollView: s
},
ctor: function() {},
onLoad: function() {
n.prototype.onLoad.call(this);
this.onClick(this.nodeSwallo, this.onClickToHide.bind(this));
this.nodeSwallo.active = !1;
this.nodeScroll.scale = 0;
this.nodeScroll.active = !1;
this.isRefresh = !1;
},
onClickToHide: function() {
this.nodeSwallo.active = !1;
this.nodeScroll.scale = 0;
this.nodeScroll.stopAllActions();
this.nodeScroll.active = !1;
},
onShowView: function(e) {
this.nodeSwallo.active = !0;
this.nodeScroll.active = !0;
var t = this.nodeScroll.parent.convertToNodeSpaceAR(e);
this.nodeScroll.x = t.x;
this.nodeScroll.y = t.y;
this.nodeScroll.runAction(cc.scaleTo(.1, 1).easing(cc.easeBackOut()));
},
setSize: function(e) {
e = e || cc.size(183, 207);
this.nodeScroll.width = e.width;
this.nodeScroll.height = e.height;
this.nodeScroll.width > 183 ? this.nodeScroll.anchorX = 91 / this.nodeScroll.width : this.nodeScroll.anchorX = .5;
},
setData: function(e) {
this.datas = e;
this.scrollView.numItems = this.datas.length;
this.scrollView.scrollTo(0, .02);
},
onListRender: function(e, t) {
var i = this, s = this.datas[t];
if (TypeUtils.isRealNull(e.txt)) {
e.txt = this.seekChild(e, "txtName").getComponent(cc.Label);
e.btn = this.seekChild(e, "btnDel");
}
e.txt.string = s.desc;
e.btn.active = 1 == s.isShow;
this.onClick(e, function() {
i.onSelected(t);
});
e.btn.active && this.onClick(e.btn, function() {
i.deleteItem(t);
});
},
onListSelected: function(e, t, i, s) {
TypeUtils.isFunction(this.selectCb) && this.selectCb(t);
this.onClickToHide();
},
onSelected: function(e) {
TypeUtils.isFunction(this.selectCb) && this.selectCb(e);
this.onClickToHide();
},
setSelectCb: function(e) {
this.selectCb = e;
},
setDeleteCb: function(e) {
this.deleteCb = e;
},
deleteItem: function(e) {
TypeUtils.isFunction(this.deleteCb) && this.deleteCb(e);
ArrayUtils.remove(this.datas, e);
this.scrollView.numItems = this.datas.length;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
List: "List"
} ],
jadeExchangeItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "cef46QLAdNN94SHPAOGN8ag", "jadeExchangeItem");
var s;
function n(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}
var o = e("BaseComponent"), a = e("ItemConst"), r = (n(s = {}, a.ResourceType.Jade, "module/fish/texture/fishCommon/icon_jade"), 
n(s, a.ResourceType.WarheadPlatinum, "module/fish/texture/fishCommon/icon_dd2"), 
n(s, a.ResourceType.WarheadGold, "module/fish/texture/fishCommon/icon_dd1"), n(s, a.ResourceType.WarheadSilver, "module/fish/texture/fishCommon/icon_dd3"), 
s);
cc.Class({
extends: o,
properties: {
btnExAll: cc.Node,
btnEx: cc.Node,
txtAll: cc.Label,
txtEx: cc.Label,
txtCostNum: cc.Label,
txtExNum: cc.Label,
sprIcon1: cc.Node,
sprIcon2: cc.Node,
sprBg1: cc.Node,
sprBg2: cc.Node
},
onLoad: function() {
this.initData();
this.initUI();
},
initData: function() {
this._shopCtrl = app.ctrls.shop;
this._shopModel = this._shopCtrl.getModel();
},
initUI: function() {
this.onClick(this.btnExAll, this.onExchangeAll.bind(this));
this.onClick(this.btnEx, this.onExchange.bind(this));
this.txtCostNum.string = "";
this.txtExNum.string = "";
},
setData: function(e) {
var t = this;
this.data = e;
var i = e.price, s = r[i.itemId];
TypeUtils.isAllNull(s) && (s = ItemUtils.getItemPng(i.itemId));
SpriteUtils.setTexture({
path: s,
isHide: !0,
callback: function() {
SpriteUtils.setAdaptContentSize(t.sprIcon1, null, 70);
}
}, this.sprIcon1, this);
this.txtCostNum.string = "x" + (i.amount || 0);
var n = e.goods[0], o = r[n.itemId];
TypeUtils.isAllNull(o) && (o = ItemUtils.getItemPng(n.itemId));
SpriteUtils.setTexture({
path: o,
isHide: !0,
callback: function() {
SpriteUtils.setAdaptContentSize(t.sprIcon1, null, 70);
}
}, this.sprIcon2, this);
this.txtExNum.string = "x" + (n.amount || 0);
},
onExchangeAll: function() {
TypeUtils.isRealNull(this.data) || this.requestExchange(this.data.price, this.data.id);
},
onExchange: function() {
TypeUtils.isRealNull(this.data) || this.requestExchange(this.data.price, this.data.id, 1);
},
requestExchange: function(e, t, i) {
var s = ItemUtils.getItemNum(e.itemId) || 0, n = Math.floor(s / e.amount);
TypeUtils.isRealNull(i) || (n = n > 0 ? 1 : 0);
s < 1 || n < 1 ? TipsUtils.showTips(StringUtils.format(_LANG("SOMETHING_NOTENOUGH"), ItemUtils.getItemName(e.itemId))) : this._shopCtrl.buyGoods(t, n);
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
ItemConst: "ItemConst"
} ],
jadeExchangeView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "9c2aaiG3yVCzKo1oaWKF13I", "jadeExchangeView");
var s = e("List"), n = e("ShopConst"), o = e("ItemConst");
cc.Class({
extends: ViewBase,
properties: {
sprJade: cc.Node,
sprBJ: cc.Node,
sprHJ: cc.Node,
sprBY: cc.Node,
txtJadeNum: cc.Label,
txtBJNum: cc.Label,
txtHJNum: cc.Label,
txtBYNum: cc.Label,
exchangeList: s,
prefabBg: cc.Prefab
},
onCreate: function(e) {
e = e || {};
this.initData(e);
this.initEvent();
this.initUI(e);
},
initData: function(e) {
this._bagModel = app.ctrls.bag.getModel();
this._shopCtrl = app.ctrls.shop;
this._shopModel = this._shopCtrl.getModel();
this._currencyModel = app.ctrls.currency.getModel();
},
initEvent: function() {
this.eventOn(this._currencyModel.EVENT_UPDATE_JADE, this.handleUpdateRoleJade, this);
this.eventOn(this._bagModel.EVENT_UPDATE_BAG_INFO, this.updateBagItemInfo, this);
},
initUI: function(e) {
var t = this;
this.tabIndex = -1;
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBaseView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBaseView").setTitle({
type: 1,
path: "module/fish/texture/fishCommon/title/ysdh_title",
bgType: 1
});
this.upTopItemNum();
this.shopData = this._shopModel.getShopData(n.Shop_Jade);
this.canAction = !0;
this.updateList();
},
updateList: function() {
this.exchangeList.numItems = this.shopData.length;
this.exchangeList.scrollTo(0, .02);
},
onRenderEvent: function(e, t) {
var i = this, s = this.shopData[t];
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("jadeExchangeItem"));
e.script.setData(s);
e.stopAllActions();
e.scale = 1;
if (this.canAction) {
e.scale = 0;
ActionUtils.sequence(e, cc.delayTime(.02 * t), cc.scaleTo(.1, 1.1), cc.scaleTo(.05, 1), cc.callFunc(function() {
i.canAction = !1;
}));
}
},
handleUpdateRoleJade: function() {
this.upTopItemNum();
},
updateBagItemInfo: function() {
this.upTopItemNum();
},
upTopItemNum: function() {
this.txtJadeNum.string = this._currencyModel.getJade();
this.txtBJNum.string = this._bagModel.getItemNum(o.ResourceType.WarheadPlatinum);
this.txtHJNum.string = this._bagModel.getItemNum(o.ResourceType.WarheadGold);
this.txtBYNum.string = this._bagModel.getItemNum(o.ResourceType.WarheadSilver);
}
});
cc._RF.pop();
}, {
ItemConst: "ItemConst",
List: "List",
ShopConst: "ShopConst"
} ],
loadingView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "d4aa1u+qMBJAqX7PdyxfBES", "loadingView");
var s = e("ResConst"), n = e("HotUpdateHelper");
cc.Class({
extends: ViewBase,
properties: {},
onAdapt: function() {
AdaptUtils.AdaptNodeToFullAdapt(this.node);
},
onCreate: function(e) {
ViewBase.prototype.onCreate.call(this);
this.data = e || {};
this.initData();
this.initView();
if (this.data.isUpdate) this.hotUpdate(); else {
this.initConfig();
ViewManager.closeView("ACCOUNT_VIEW");
}
TimeMgr.on(this.updateTime, this, 1);
},
initData: function() {
this.jsonPrecent = 0;
this.prefabPrecent = 0;
this.timer = 3;
this.isInitPrefab = !1;
this.isInitJson = !1;
},
initView: function() {
this.sprBg = this.getC("sprBg");
this.progressBar = this.getC("progressBar");
this.loadProgress = this.progressBar.getComponent(cc.ProgressBar);
this.txtProg = this.getC("txtProg");
this.txtTip = this.getC("txtTip");
this.barEffect = this.getC("barEffect");
this.loadProgress.progress = 0;
this.txtProg.getComponent(cc.Label).string = "";
this.txtTip.getComponent(cc.Label).string = "";
},
hotUpdate: function() {
var e = this;
this.txtTip.getComponent(cc.Label).string = "更新中....";
this.barEffect.x = -400;
n.getInstance().hotUpdate(function(t) {
if (t.state == GlobalEnum.UpdateState.Updating) {
e.txtProg.getComponent(cc.Label).string = "[byte:" + t.downBytes + "/" + t.totalBytes + ", file:" + t.downFiles + "/" + t.totalFiles + "]";
var i = (isNaN(t.bytePer) ? 0 : t.bytePer) / 2 + (isNaN(t.filePer) ? 0 : t.filePer) / 2;
e.loadProgress.progress = i;
e.barEffect.x = 800 * i - 400;
} else if (t.state == GlobalEnum.UpdateState.Finish) {
cc.audioEngine.stopAll();
cc.game.restart();
} else if (t.state == GlobalEnum.UpdateState.Failed) {
ViewManager.showView("LOGIN_VIEW");
ViewManager.closeView(e);
} else t.state == GlobalEnum.UpdateState.Error && TipsUtils.showTipsBox({
title: "更新",
desc: "更新文件失败，请稍后再试！",
signBtn: !0,
isHideCloce: !0,
sureCallBack: function() {
cc.game.end();
}
});
});
},
initConfig: function() {
var e = this;
this.tipList = ConfigMgr.getConfig("loading_tip").findAll(function(t) {
return t.gameId === e.data.gameId;
});
this.setJsonPrecent(0);
this.isInitJson = !0;
this.loadAllFinish();
this.initPrefab();
TypeUtils.isFunction(this.data.cfgCompleted) && this.data.cfgCompleted();
},
initPrefab: function() {
var e = this, t = 0, i = s.resload.preload2.length;
LoadUtils.preload(s.resload.preload2, !0, function(s, n) {
t++;
e.setPrefabPrecent(t / i);
if (t >= i) {
e.isInitPrefab = !0;
e.loadAllFinish();
ViewManager.showView("FISH_HALL_VIEW");
}
});
},
setJsonPrecent: function(e) {
this.jsonPrecent = e;
this.refreshAllPrecent();
},
setPrefabPrecent: function(e) {
this.prefabPrecent = e;
this.refreshAllPrecent();
},
refreshAllPrecent: function() {
var e = this.jsonPrecent + this.prefabPrecent;
if (!(e < this.loadProgress.progress)) {
this.loadProgress.progress = e;
this.barEffect.x = 800 * e - 400;
this.txtProg.getComponent(cc.Label).string = "加载资源中..." + Math.floor(100 * e) + "%";
}
},
loadAllFinish: function() {
this.isInitJson && this.isInitPrefab && TypeUtils.isFunction(this.data.completed) && this.data.completed();
},
showTip: function() {
if (!(this.tipList.length <= 0)) {
var e = RandomUtils.randInt(0, this.tipList.length), t = this.tipList[e];
this.txtTip.getComponent(cc.Label).string = t.content;
}
},
updateTime: function(e) {
if (!this.data.isUpdate) {
this.timer += e;
if (this.timer >= 3) {
this.timer = 0;
this.showTip();
}
}
},
onDestroy: function() {
ViewBase.prototype.onDestroy.call(this);
TimeMgr.off(this.updateTime);
}
});
cc._RF.pop();
}, {
HotUpdateHelper: "HotUpdateHelper",
ResConst: "ResConst"
} ],
loginView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "5ec97GedyJI8r03Yz5qE4vy", "loginView");
var s = e("ResConst");
cc.Class({
extends: ViewBase,
properties: {
btnCustom: cc.Node,
btnNotice: cc.Node,
nodeLogin: cc.Node,
btnWechat: cc.Node,
btnAccount: cc.Node,
btnQuick: cc.Node,
btnQuickRegister: cc.Node,
nodeBot: cc.Node,
checkBox: cc.Node,
toggleBox: cc.Toggle,
richText: cc.Node,
txtVersion: cc.Node
},
onAdapt: function() {
AdaptUtils.AdaptNodeToFullAdapt(this.node);
},
onCreate: function() {
ViewBase.prototype.onCreate.call(this);
this.initData();
this.initEvent();
this.initView();
},
initData: function() {
this.ctrl = app.ctrls.login;
this.model = this.ctrl.getModel();
},
initEvent: function() {
this.eventOn(AppEvent.AllowUserProtocol, this.handlerAllowUserProtocol, this);
this.eventOn(this.model.EVENT_CHANGE_LOGIN_TYPE, this.handleChangeLoginType, this);
},
initView: function() {
var e = this;
this.btnCustom.active = !1;
this.btnAccount.active = !1;
this.btnQuickRegister.active = !1;
if (GlobalUtils.isExamine()) {
this.btnAccount.active = !0;
this.btnQuick.active = !1;
this.btnWechat.x = -150;
this.btnAccount.x = 150;
} else if (GlobalUtils.isDebug()) {
this.btnWechat.y = 0;
this.btnWechat.x = 150;
this.btnQuick.y = 0;
} else {
this.btnQuick.active = !1;
this.btnWechat.y = 0;
this.btnWechat.x = 0;
}
this.txtVersion.getComponent(cc.Label).string = GlobalUtils.getVersion();
this.checkBox.on("toggle", this.onClickAllow, this);
this.handlerAllowUserProtocol();
this.playHallMusic();
this.onClick(this.btnCustom, function() {});
this.onClick(this.btnNotice, function() {
ViewManager.showView("NOTICE_VIEW");
});
this.onClick(this.btnWechat, function() {
e.isAgreeDisclaimer() && AppUtils.login();
});
this.onClick(this.btnAccount, function() {
e.isAgreeDisclaimer() && ViewManager.showView("ACCOUNT_VIEW");
});
this.onClick(this.btnQuick, function() {
e.isAgreeDisclaimer() && e.quickStartGame();
});
this.onClick(this.btnQuickRegister, function() {
e.isAgreeDisclaimer() && e.getCountAndPwd();
});
LoadUtils.preload(s.resload.preload1, !1);
},
saveForWebBrowser: function(e, t) {
var i = JSON.stringify(e);
if (cc.sys.isBrowser) {
var s = new Blob([ i ]), n = document.createElement("a");
n.download = t;
n.innerHTML = "Download File";
if (null != window.URL) n.href = window.URL.createObjectURL(s); else {
n.href = window.URL.createObjectURL(s);
n.onclick = function() {
document.body.removeChild(n);
};
n.style.display = "none";
document.body.appendChild(n);
}
n.click();
}
},
onClickAllow: function(e) {
UserUtils.setFloatVal(UserDefaultConst.AllowUserProtocol, e.isChecked ? 1 : 0);
},
getCountAndPwd: function() {
this.ctrl.getAccountAndPwd(function() {
console.log("获取账号和密码请求错误！");
});
},
quickStartGame: function() {
if (!this._isLogining && this.isAgreeDisclaimer()) {
var e = UserUtils.getDataStr(UserDefaultConst.UserAccountData, "{}"), t = JsonUtils.json2Data(e);
TypeUtils.isAllNull(t.account) || TypeUtils.isAllNull(t.pwd) ? this.getCountAndPwd() : this.ctrl.noSdkLogin(t.account, t.pwd);
}
},
isAgreeDisclaimer: function() {
if (1 == UserUtils.getFloatVal(UserDefaultConst.AllowUserProtocol)) return !0;
TipsUtils.showTips("需同意用户协议才能进入游戏");
ViewManager.showView("DISCLAIMER_VIEW");
return !1;
},
handlerAllowUserProtocol: function() {
var e = UserUtils.getFloatVal(UserDefaultConst.AllowUserProtocol);
this.toggleBox.isChecked = 1 == e;
},
handleChangeLoginType: function(e) {
this._isLogining = e.status;
}
});
cc._RF.pop();
}, {
ResConst: "ResConst"
} ],
mailItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "bbab3DxYsBIToVG5mASBgQt", "mailItem");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
sprSee: cc.Node,
sprNormal: cc.Node,
sprBox: cc.Node,
txtTitle: cc.Label,
txtDate: cc.Label
},
ctor: function() {},
onLoad: function() {
s.prototype.onLoad.call(this);
this.initUI();
},
initUI: function() {
this.sprSee.active = !1;
this.sprNormal.active = !1;
this.sprBox.active = !1;
this.txtTitle.string = "";
this.txtDate.string = "";
},
setData: function(e) {
this.initUI();
var t = e.time;
TypeUtils.isRealNull(e.sendTime) || (t = TimeUtils.dateFormat("YYYY-mm-dd HH:MM", e.sendTime));
this.txtDate.string = t;
this.txtTitle.string = e.title;
this.sprBox.active = 1 == e.iconStatus;
this.sprSee.active = 2 == e.iconStatus;
this.sprNormal.active = 3 == e.iconStatus;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
mailView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "61d00bIukBJpaiZvstsWbu6", "mailView");
var s = e("List");
e("ShopConst");
cc.Class({
extends: ViewBase,
properties: {
sprNoMail: cc.Node,
nodeMail: cc.Node,
listMail: s,
nodeDetail: cc.Node,
listAttach: cc.Node,
listItem: s,
btnGet: cc.Node,
btnDelete: cc.Node,
contentView: cc.Node,
scrollDetail: cc.Node,
txtContent: cc.Node,
txtDesc: cc.Node,
btnGetAll: cc.Node,
btnDeleteAll: cc.Node,
prefabBg: cc.Prefab
},
onCreate: function(e) {
e = e || {};
this.initData();
this.initEvent();
this.initUI(e);
},
initData: function() {
this.ctrl = app.ctrls.mail;
this.model = this.ctrl.getModel();
this._bagCtrl = app.ctrls.bag;
this._bagModel = this._bagCtrl.getModel();
this.selectItem = {};
},
initEvent: function() {
this.eventOn(this.model.EVENT_READ_MAIL, this.handleReadMail.bind(this));
this.eventOn(this.model.EVENT_NEW_MAIL, this.handleNewMail.bind(this));
this.eventOn(this.model.EVENT_GET_ATTACH, this.handleGetMail.bind(this));
this.eventOn(this.model.EVENT_DEL_MAIL, this.handleDelMail.bind(this));
},
initUI: function(e) {
var t = this;
this.tabIndex = -1;
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBaseView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBaseView").setTitle({
type: 1,
path: "module/fish/texture/fishCommon/title/yj_title",
bgType: 1
});
this.onClick(this.btnGet, this.onClickGet.bind(this));
this.onClick(this.btnGetAll, this.onClickGetAll.bind(this));
this.onClick(this.btnDelete, this.onClickDelete.bind(this));
this.onClick(this.btnDeleteAll, this.onClickDeleteAll.bind(this));
this.updateMailInfo();
this.showItemDetail();
this.listMail.selectedId = -1;
},
updateMailInfo: function() {
this.mailList = ArrayUtils.concat(this.model.getMailList(this.model.MailType.SYSTEM), this.model.getMailList(this.model.MailType.PROTAL));
ArrayUtils.sort(this.mailList, function(e, t) {
return TypeUtils.isRealNull(e.sendTime) || TypeUtils.isRealNull(t.sendTime) ? t.status - e.status : e.sendTime - t.sendTime;
});
this.sprNoMail.active = this.mailList.length <= 0;
this.nodeMail.active = this.mailList.length > 0;
this.mailList.length > 0 && (this.listMail.numItems = this.mailList.length);
},
onListRender: function(e, t) {
var i = this.mailList[t];
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("mailItem"));
i.iconStatus = 3;
i.mailType == this.model.AnnexType.YES ? i.iconStatus = 1 : i.status == this.model.ReadState.YES && (i.iconStatus = 2);
e.script.setData(i);
},
onListSelected: function(e, t, i, s) {
if (!(t < 0)) {
var n = this.mailList[t] || {};
if (TypeUtils.isRealNull(this.selectItem) || this.selectItem.mailId != n.mailId) {
(this.model.ReadState.NO == n.status || TypeUtils.isRealNull(n.content)) && this.ctrl.readMail(n.pageType, n.mailId);
this.showItemDetail(n);
}
}
},
onListItemRender: function(e, t) {
e.scale = .8;
var i = this.selectItem.attach[t];
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("comItem"));
e.script.setData(i);
},
showItemDetail: function(e) {
var t = this;
this.listAttach.active = !1;
this.btnGet.active = !1;
this.btnDelete.active = !1;
this.txtContent.getComponent(cc.RichText).string = "暂无查看";
this.txtDesc.active = !0;
if (TypeUtils.isRealNull(e) || TypeUtils.isRealNull(e.content)) {
ActionUtils.callOnce(this.contentView, function() {
t.contentView.height = t.txtContent.height;
}, .5);
this.selectItem = null;
} else {
this.selectItem = e;
var i = TimeUtils.dateFormat("YY/mm/dd", Number(e.sendTime)), s = StringUtils.getHtmlStr([ {
str: "发送时间:",
color: "#4586E0"
}, {
br: !0
}, {
str: i,
color: "#FFFFFF",
outline: "#1F599A",
lineSize: 2
}, {
br: !0
}, {
str: e.content,
color: "#4586E0"
} ]);
this.txtContent.getComponent(cc.RichText).string = s;
this.scrollDetail.getComponent(cc.ScrollView).scrollToTop();
ActionUtils.callOnce(this.contentView, function() {
t.contentView.height = t.txtContent.height;
}, .5);
if (TypeUtils.isEmptyArray(e.attach)) this.btnDelete.active = !0; else {
this.btnGet.active = !0;
this.listAttach.active = !0;
this.listItem.numItems = e.attach.length;
}
this.txtDesc.active = !1;
}
},
onClickGet: function() {
TypeUtils.isRealNull(this.selectItem) || this.ctrl.getAttachment(this.selectItem.pageType, this.selectItem.mailId);
},
onClickGetAll: function() {
var e = this;
if (TypeUtils.isEmptyArray(this.mailList)) TipsUtils.showTips("没有邮件可领取！"); else {
for (var t = !1, i = 0; i < this.mailList.length; i++) {
if (this.mailList[i].mailType == this.model.AnnexType.YES) {
t = !0;
break;
}
}
t ? TipsUtils.showTipsBox({
desc: "是否全部领取？",
isHideCloce: !0,
sureCallBack: function() {
e.ctrl.recvAllAttach(e.model.MailType.SYSTEM);
e.ctrl.recvAllAttach(e.model.MailType.PROTAL);
}
}) : TipsUtils.showTips("没有邮件可领取！");
}
},
onClickDelete: function() {
var e = this;
TypeUtils.isRealNull(this.selectItem) || TipsUtils.showTipsBox({
desc: "是否确定删除该邮件？",
isHideCloce: !0,
sureCallBack: function() {
e.ctrl.delMail(e.selectItem.pageType, e.selectItem.mailId);
}
});
},
onClickDeleteAll: function() {
var e = this;
if (TypeUtils.isEmptyArray(this.mailList)) TipsUtils.showTips("没有邮件可删除！"); else {
for (var t = "是否删除全部邮件？", i = 0; i < this.mailList.length; i++) {
if (this.mailList[i].mailType == this.model.AnnexType.YES) {
t = "有邮件未领取，是否删除全部邮件？";
break;
}
}
TipsUtils.showTipsBox({
desc: t,
isHideCloce: !0,
sureCallBack: function() {
e.ctrl.delAllMail(e.model.MailType.SYSTEM);
e.ctrl.delAllMail(e.model.MailType.PROTAL);
}
});
}
},
handleReadMail: function(e) {
this.updateMailInfo();
this.showItemDetail(e.data);
},
handleNewMail: function(e) {
this.updateMailInfo();
},
handleGetMail: function(e) {
this.updateMailInfo();
var t = this.mailList[this.listMail.selectedId] || {};
this.showItemDetail(t);
},
handleDelMail: function(e) {
this.updateMailInfo();
this.listMail.selectedId = -1;
this.showItemDetail();
}
});
cc._RF.pop();
}, {
List: "List",
ShopConst: "ShopConst"
} ],
marqueeView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "baa292MxAtLLpb//Gy22m4Z", "marqueeView");
var s;
function n(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}
var o = cc.size(860, 55), a = cc.size(630, 40), r = 130 - o.height / 2, l = e("MarqueeConst"), c = [ "MARQUEE_VIEW", "GAME_LOADING_VIEW", "FISH_AWARDS_VIEW", "FISH_COM_TIPS_VIEW", "FISH_CONFIRM_VIEW", "FISH_SHOP_SELECT_PAY_TYPE", "FISH_INTRODUCE_VIEW" ], h = (n(s = {}, "SHARE_HIT_BOSS", 0), 
n(s, "CATCH_FISH_VIEW", 145), n(s, "GOLD_FISH_VIEW", 130), s);
cc.Class({
extends: ViewBase,
properties: {
nodeMain: cc.Node,
sprBody: cc.Node,
nodeRich: cc.Node
},
onCreate: function(e) {
this.marginTop = r;
this.controller = app.ctrls.marquee;
this.model = this.controller.getModel();
this.m_showType = l.ShowType.All;
this.count = 0;
this.initEvent();
this.controller.getMessage();
},
initEvent: function() {
this.eventOn(AppEvent.GameRemoveView, this.OBGameRemoveView, this);
this.eventOn(AppEvent.GameOpenView, this.OBGameOpenView, this);
},
setMarQueePos: function(e, t) {},
moveToPos: function(e, t) {
if (!TypeUtils.isRealNull(e)) {
t || (e = display.height / 2 - e);
this.marginTop = e + o.height / 2;
}
this.nodeMain.stopAllActions();
this.nodeMain.runAction(cc.moveTo(.3, cc.v2(0, display.height / 2 - this.marginTop)));
},
refreshCurPos: function() {
this.nodeMain.y = display.height / 2 - this.marginTop;
},
refreshToPos: function() {
this.nodeMain.stopAllActions();
this.marginTop = r;
this.nodeMain.runAction(cc.moveTo(.3, cc.v2(0, display.height / 2 - this.marginTop)));
},
hasChange: function() {
return !1;
},
checkNewMarquee: function(e) {
if (!this.isPlaying) {
this.marqueeInfo = this.model.checkNewMarquee(e);
this.showView(null != this.marqueeInfo);
this.nodeMain.active = null != this.marqueeInfo && (this.marqueeInfo.type == this.m_showType || 1 == this.marqueeInfo.type);
}
},
showView: function(e) {
if (e) {
this.isPlaying = !0;
this.nodeMain.active = !0;
this.createText(this.marqueeInfo.content);
} else {
this.isPlaying = !1;
this.nodeMain.active = !1;
}
},
createText: function(e) {
var t = this;
if (TypeUtils.isRealNull(e)) this.showView(!1); else {
this.nodeRich.getComponent(cc.RichText).string = e;
this.nodeRich.x = 315;
var i, s;
ActionUtils.sequence(this.node, cc.delayTime(.1), cc.callFunc(function() {
i = t.nodeRich.width + a.width;
s = Math.abs(i / 150);
ActionUtils.sequence(t.nodeRich, cc.moveBy(s, cc.v2(-i, 0)), cc.callFunc(function() {
t.marqueeInfo = t.model.checkNewMarquee(t.m_showType);
var e = !1;
TypeUtils.isRealNull(t.marqueeInfo) || t.marqueeInfo.type != t.m_showType && 1 != t.marqueeInfo.type || (e = !0);
t.nodeMain.active = e;
TypeUtils.isRealNull(t.marqueeInfo) ? t.showView(!1) : t.createText(t.marqueeInfo.content);
}));
}));
}
},
OBMarqueeCurType: function(e) {},
OBGameRemoveView: function(e) {
this.refreshMarQueePos(e, !0);
},
OBGameOpenView: function(e) {
this.refreshMarQueePos(e, !1);
},
refreshMarQueePos: function(e, t) {
this.hasChange() && this.refreshCurPos();
var i = ViewManager.getViewQueue();
if (!TypeUtils.isEmptyArray(i) && !TypeUtils.isAllNull(e)) {
for (var s = i.length - 1; s >= 0; s--) if (!(this.isIgnoreView(i[s]) || i[s] == e && t)) {
var n = this.getPosByView(i[s]);
TypeUtils.isRealNull(n) ? this.refreshToPos() : this.moveToPos(n, !0);
return;
}
this.refreshToPos();
}
},
isIgnoreView: function(e) {
for (var t = 0; t < c.length; t++) if (c[t] == e) return !0;
return !1;
},
getPosByView: function(e) {
return h[e];
},
update: function(e) {
this.count += e;
if (this.count >= 1) {
this.count = 0;
this.checkNewMarquee(this.m_showType);
}
}
});
cc._RF.pop();
}, {
MarqueeConst: "MarqueeConst"
} ],
modifyView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "c3c5f13xh9Aabb5YWkhwuYD", "modifyView");
var s = e("ItemConst"), n = e("ShopConst");
cc.Class({
extends: ViewBase,
properties: {
btnSure: cc.Node,
nodeModify: cc.Node,
richDesc: cc.RichText,
nameEdit: cc.EditBox,
nodeNoCard: cc.Node,
txtNoCard: cc.Label,
txtGo: cc.Label,
prefabBg: cc.Prefab
},
onCreate: function(e) {
var t = this;
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(620, 440)
});
this.comBg.getComponent("comBasePopView").setTitle("修改昵称");
this.initData();
this.initEvent();
this.initUI();
},
initData: function() {
this.ctrl = app.ctrls.role;
this.model = this.ctrl.getModel();
this.lastStr = this.model.getNickName();
},
initEvent: function() {
this.eventOn(this.model.EVENT_UPDATE_ROLEINFO, this.handleUpdateRoleInfo, this);
},
initUI: function() {
this.onClick(this.btnSure, this.handleSure.bind(this));
var e = ItemUtils.getItemNum(s.ResourceType.ChangeNameCard), t = StringUtils.getHtmlStr([ {
str: "本次修改需要消耗",
color: "#FFFFFF",
outline: "#1F599A",
lineSize: 2
}, {
str: "改名卡X1",
color: "#FFFFFF",
outline: "#CC6000",
lineSize: 2
}, {
str: "，现有：",
color: "#FFFFFF",
outline: "#1F599A",
lineSize: 2
}, {
str: e + "张",
color: "#FFFFFF",
outline: "#CC6000",
lineSize: 2
} ]);
this.richDesc.string = t;
this.nodeModify.active = e > 0;
this.nodeNoCard.active = e <= 0;
},
handleSure: function() {
if (this.nodeModify.active) {
var e = this.nameEdit.string;
if (TypeUtils.isAllNull(e)) {
TipsUtils.showTips(_LANG("NICKNAME_IS_NULL"));
return;
}
var t = e.match(/[\d|\~|\`|\!|\@|\#|\$|\%|\^|\&|\*|\(|\)|\_|\"|\=|\+|\[|\{|\}|\]|\;|\:|\'|\,|\.|\<|\>|\?|\/|\。|\？|\！|\，|\、|\；|\：|\“|\”|\‘|\'|\（|\）|\《|\》|\〈|\〉|\【|\】|\『|\』|\「|\」|\﹃|\﹄|\〔|\〕|\…|\—|\～|\﹏|\￥]+/);
if (!isNaN(Number(e)) || t == e) {
TipsUtils.showTips("不能为纯数字或符号！");
return;
}
if (this.model.getNickName() == e) {
TipsUtils.showTips(_LANG("NICKNAME_NOT_CHANGE"));
return;
}
this.ctrl.changeRoleInfo({
nickname: e
});
this.lastStr = e;
} else if (SystemUtils.checkIsClose(20025)) TipsUtils.showTips("敬请期待"); else {
ViewManager.showView("SHOP_VIEW", null, {
id: n.Shop_FishItem
});
ViewManager.closeView("ROLE_VIEW");
ViewManager.closeView(this);
}
},
handleUpdateRoleInfo: function() {
ViewManager.closeView(this);
},
onEditingReturn: function(e, t) {
var i = e.string;
if (TxtFilterUtils.getInstance().isValid(i)) ; else {
TipsUtils.showTips(_LANG("NICKNAME_IS_VALID"));
e.string = this.lastStr;
}
}
});
cc._RF.pop();
}, {
ItemConst: "ItemConst",
ShopConst: "ShopConst"
} ],
monsterBattleResultView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "33d9dKSlBlPW5GrBCozTdOh", "monsterBattleResultView");
cc.Class({
extends: ViewBase,
properties: {
mask: cc.Node,
sprWinTitle: cc.Node,
sprLoseTitle: cc.Node,
sprFail: cc.Node,
sprWinTips: cc.Node,
sprFailTips: cc.Node,
nodeItems: cc.Node,
sprBgs: [ cc.Node ],
sprIcons: [ cc.Node ],
txtNums: [ cc.Label ],
txtTimer: cc.Label
},
onAdapt: function() {
AdaptUtils.AdaptNodeToFullAdapt(this.node);
},
onCreate: function(e) {
ViewBase.prototype.onCreate.call(this);
this.data = e || {};
this.initData(this.data);
this.initEvent();
this.initUI();
},
initData: function(e) {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this.battleInfo = e.info;
this.closeFunc = e.callback;
this.countdownTime = 10;
},
initEvent: function() {},
initUI: function() {
this.onClick(this.mask, this.handleCloseEvent.bind(this));
this.isSucc = this.battleInfo.multiple > 0;
this.sprWinTitle.active = this.isSucc;
this.sprWinTips.active = this.isSucc;
this.nodeItems.active = this.isSucc;
this.sprLoseTitle.active = !this.isSucc;
this.sprFail.active = !this.isSucc;
this.sprFailTips.active = !this.isSucc;
this.updateItems();
},
updateItems: function() {
for (var e = this, t = this.battleInfo.multiple, i = this.battleInfo.itemList, s = function(s) {
var n = i[s];
e.sprBgs[s].active = !1;
e.sprIcons[s].active = !1;
e.txtNums[s].string = "";
if (!TypeUtils.isRealNull(n)) {
e.sprBgs[s].active = !0;
e.sprIcons[s].active = !0;
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(n.itemId),
isHide: !0,
callback: function() {
SpriteUtils.setAdaptContentSize(e.sprIcons[s], null, 80);
}
}, e.sprIcons[s], e);
e.txtNums[s].string = n.amount * t;
}
}, n = 0; n < 4; n++) s(n);
},
update: function(e) {
this.countdownTime = this.countdownTime - e;
this.txtTimer.string = Math.ceil(this.countdownTime) + "S";
this.countdownTime <= 0 && this.onEndPlay();
},
handleCloseEvent: function() {
ViewManager.closeView(this);
},
onEndPlay: function() {
this.ctrl.requestEndMonsterBattle();
ViewManager.closeView(this);
ViewManager.closeView("MONSTER_BATTLE_VIEW");
},
onDestroy: function() {
TypeUtils.isFunction(this.closeFunc) && this.closeFunc();
ViewBase.prototype.onDestroy.call(this);
}
});
cc._RF.pop();
}, {} ],
monsterBattleView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "4f5fcO9UdRD5ZIpbBgXAeBk", "monsterBattleView");
cc.Class({
extends: ViewBase,
properties: {
nodeLightOff: cc.Node,
nodeLightOn: cc.Node,
txtNum1: cc.Label,
txtNum2: cc.Label,
btnDouble: cc.Node,
btnSingle: cc.Node,
btnClose: cc.Node,
sprBgs: [ cc.Node ],
sprIcons: [ cc.Node ],
txtNums: [ cc.Label ],
txtTimer: cc.Label,
txtTimes: cc.Label
},
onAdapt: function() {
AdaptUtils.AdaptNodeToFullAdapt(this.node);
},
onCreate: function(e) {
ViewBase.prototype.onCreate.call(this);
this.data = e || {};
this.initData(this.data);
this.initEvent();
this.initUI();
},
initData: function(e) {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this.battleInfo = e.data;
this.curNum = 0;
this.curRound = 1;
this.rewardItems = {};
this.runTime = 0;
this.model.pauseAutoFire();
},
initEvent: function() {
this.eventOn(this.model.EVENT_UPDATE_MONSTER_BATTLE, this.handleUpdateMonsterBattle, this);
},
initUI: function() {
var e = this;
this.onClick(this.btnClose, this.onClickBtnClose.bind(this));
this.onClick(this.btnDouble, function() {
e.onClickBtnGuess(2);
});
this.onClick(this.btnSingle, function() {
e.onClickBtnGuess(1);
});
this.initLight();
this.updateItems();
},
initLight: function() {
for (var e = [], t = 0; t < 20; t++) {
var i = this.seekChild(this.nodeLightOff, "light_" + (t + 1)), s = this.seekChild(this.nodeLightOn, "light_" + (t + 1));
e.push({
offLigt: i,
onLigt: s
});
}
ActionUtils.timerAct(this.nodeLightOff, function(t, i) {
for (var s = 0; s < e.length; s++) {
var n = e[s].offLigt, o = e[s].onLigt;
n.active = i % 2 == 0 && s % 2 == 0 || i % 2 == 1 && s % 2 == 1;
o.active = i % 2 == 1 && s % 2 == 0 || i % 2 == 0 && s % 2 == 1;
}
}, 1);
},
updateItems: function() {
for (var e = this, t = this.battleInfo.itemList, i = this.battleInfo.multiple, s = function(s) {
var n = t[s];
e.sprBgs[s].active = !1;
e.sprIcons[s].active = !1;
e.txtNums[s].string = "";
if (!TypeUtils.isRealNull(n)) {
e.sprBgs[s].active = !0;
e.sprIcons[s].active = !0;
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(n.itemId),
callback: function() {
SpriteUtils.setAdaptContentSize(e.sprIcons[s], null, 80);
}
}, e.sprIcons[s], e);
e.txtNums[s].string = n.amount * i;
}
}, n = 0; n < 4; n++) s(n);
},
update: function(e) {
var t = 10 * (Number(this.txtNum1.string) || 0) + (Number(this.txtNum2.string) || 0);
if (TypeUtils.isRealNull(this.resultNum) || this.resultNum % 2 != t % 2) {
t = t >= 99 ? 0 : t + 1;
this.txtNum1.string = Math.floor(t / 10);
this.txtNum2.string = t % 10;
} else this.playResult();
this.updateCountDown(e);
},
updateCountDown: function(e) {
this.runTime = this.runTime + e;
var t = Math.floor(10 - this.runTime);
t >= 0 && (this.txtTimer.string = t + "S");
t <= 0 && !this.isInBattle && this.closethis();
},
onClickBtnGuess: function(e) {
if (!this.isInBattle) if (this.curRound > 3 || this.battleInfo.multiple <= 0) this.closethis(); else {
this.btnDouble.getComponent(cc.Button).interactable = this.curRound < 3;
this.btnSingle.getComponent(cc.Button).interactable = this.curRound < 3;
this.battleType = e;
this.isInBattle = !0;
this.ctrl.requestStartMonsterBattle(this.battleType);
}
},
handleUpdateMonsterBattle: function(e) {
if (TypeUtils.isRealNull(e) || TypeUtils.isRealNull(e.data)) this.isInBattle = !1; else {
this.curRound = this.curRound + 1;
this.txtTimes.string = StringUtils.format("第%s/%s轮", this.curRound > 3 ? 3 : this.curRound, 3);
this.battleInfo = e.data;
this.resultNum = this.battleInfo.randNum;
}
},
playResult: function() {
var e = this;
if (!this.isPlaying) {
this.isPlaying = !0;
this.updateItems();
var t = function() {
e.isPlaying = !1;
e.isInBattle = !1;
e.runTime = 0;
e.resultNum = null;
e.battleInfo.multiple <= 0 && e.closethis();
}, i = [];
i.push(cc.delayTime(1));
i.push(cc.callFunc(function() {
var i = {
info: e.battleInfo,
callback: t
};
ViewManager.showView("MONSTER_BATTLE_RESULT_VIEW", null, i);
}));
if (this.battleInfo.multiple <= 0 || this.curRound > 3) {
i.push(cc.delayTime(5));
i.push(cc.callFunc(function() {
ViewManager.closeView("MONSTER_BATTLE_RESULT_VIEW");
e.closethis();
}));
}
this.node.runAction(cc.sequence(i));
}
},
onClickBtnClose: function() {
this.closethis();
},
closethis: function() {
this.requestRewards();
ViewManager.closeView(this);
},
requestRewards: function() {
this.battleInfo && this.battleInfo.multiple > 0 && this.ctrl.requestEndMonsterBattle();
},
onDestroy: function() {
this.model.resumeAutoFire();
ViewBase.prototype.onDestroy.call(this);
}
});
cc._RF.pop();
}, {} ],
myRewardItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "584808vusBLq6lmdkdo4L6a", "myRewardItem");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
sprIcon: cc.Node,
txtTitle: cc.Label,
txtDate: cc.Label,
btnStatus: cc.Node,
txtStatus: cc.Label
},
onLoad: function() {
this.initData();
this.initEvent();
this.initUI();
},
initData: function() {},
initEvent: function() {},
initUI: function() {},
setData: function(e) {
var t = this;
this.config = e;
this.txtTitle.string = e.good_name;
var i = TimeUtils.dateFormat("YYYY/mm/dd   HH:MM", e.add_time);
this.txtDate.string = i;
var s = "处理中";
if (e.status && 5 == Number(e.status)) {
s = "已发放";
e.mode_type && (1 == Number(e.mode_type) ? s = "奖励已发放" : 2 == Number(e.mode_type) ? s = "已充值 " + (e.phone || "") : 3 == Number(e.mode_type) ? s = "已发放至邮件" : 4 == Number(e.mode_type) && (s = "详情联系客服"));
}
this.txtStatus.string = s;
var n = function() {
SpriteUtils.setTexture({
path: "module/fish/texture/icon/icon_a_100",
callback: function() {
SpriteUtils.setAdaptContentSize(t.sprIcon, 80);
}
}, t.sprIcon, t);
};
LoadUtils.loadImg(e.icon, function(i, s) {
if (null == i) try {
t.sprIcon.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(s);
SpriteUtils.setAdaptContentSize(t.sprIcon, 80);
} catch (t) {
logger.error("load url error:", t, e.icon);
n();
} else n();
});
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
myRewardView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "723fb1Y47pPlZ4vtSEIZFHu", "myRewardView");
var s = e("List");
cc.Class({
extends: ViewBase,
properties: {
tabToggle: cc.Node,
toggleEx: cc.Node,
toggleDraw: cc.Node,
sprNoItem: cc.Node,
txtTips: cc.Node,
listAward: s,
btnSure: cc.Node,
txtMyInfo: cc.Node,
prefabBg: cc.Prefab
},
onCreate: function(e) {
var t = this;
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(840, 580)
});
this.comBg.getComponent("comBasePopView").setTitle("我的领奖");
this.initData();
this.initEvent();
this.initUI();
},
initData: function() {
this.ctrl = app.ctrls.betTreasure;
this.model = this.ctrl.getModel();
this.itemsData = {};
this.ctrl.requestGetExchangeRecord();
},
initEvent: function() {
this.eventOn(AppEvent.BetTreasureRecordForExchange, this.OBBetTreasureRecordForExchange, this);
},
initUI: function() {
var e = this;
this.onClick(this.btnSure, function() {
ViewManager.closeView(e);
});
this.onClick(this.txtMyInfo, function() {
ViewManager.showView("PLAYER_INFO_VIEW");
});
this.toggleEx.on("toggle", function() {
e.switchChannel(1);
});
this.toggleDraw.on("toggle", function() {
e.switchChannel(2);
});
this.txtTips.active = !1;
this.sprNoItem.active = !1;
this.toggleEx.getComponent(cc.Toggle).isChecked = !0;
this.switchChannel(1);
},
switchChannel: function(e) {
if (e != this.seleIndex) {
this.seleIndex = e;
this.txtTips.active = 1 != e;
if (1 == this.seleIndex) {
this.updateList(this.itemsData[this.seleIndex]);
this.ctrl.requestGetExchangeRecord();
} else {
this.updateList([]);
this.sprNoItem.active = !1;
}
}
},
updateList: function(e) {
this.itemsData[this.seleIndex] = e || [];
this.sprNoItem.active = this.itemsData[this.seleIndex].length <= 0;
this.listAward.numItems = this.itemsData[this.seleIndex].length;
this.listAward.scrollTo(0, .02);
},
onRenderEvent: function(e, t) {
var i = this.itemsData[this.seleIndex][t];
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("myRewardItem"));
e.script.setData(i);
},
OBBetTreasureRecordForExchange: function(e) {
this.updateList(e);
}
});
cc._RF.pop();
}, {
List: "List"
} ],
najiaPlayView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "4cca1e44rVNx5q/fXR2SlHv", "najiaPlayView");
var s = e("CatchFishConst"), n = e("MarqueeConst"), o = s.WarheadGunType;
cc.Class({
extends: ViewBase,
properties: {
sprBg: cc.Node,
spBase: cc.Node,
spineBase: sp.Skeleton,
spBox: cc.Node,
spineBox: sp.Skeleton,
spCen: cc.Node,
spineCen: sp.Skeleton,
spDragon: cc.Node,
spineDragon: sp.Skeleton,
nodeBtns: cc.Node,
seleBtns: [ cc.Node ],
nodeLabs: cc.Node,
numLabs: [ cc.Node ],
resultLabs: [ cc.Node ],
txtTime: cc.Label,
dropItem: cc.Prefab
},
onAdapt: function() {
AdaptUtils.AdaptNodeToFullAdapt(this.node);
},
onCreate: function(e) {
ViewBase.prototype.onCreate.call(this);
this.data = e || {};
this.initData(this.data);
this.initUI();
},
initData: function(e) {
this.catchInfo = e.catchInfo;
this.bulletLevel = e.bulletLevel;
this.catchFishUI = e.catchFishUI;
this.isInit = !1;
this.dropItemList = [];
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this.marqueeCtr = app.ctrls.marquee;
this.marqueeModel = this.marqueeCtr.getModel();
this.model.pauseAutoFire();
},
initUI: function() {
var e = this;
ViewManager.showMarqueeLayer(!1);
this.initNumbers();
this.spCen.active = !1;
this.nodeBtns.active = !1;
this.nodeLabs.active = !1;
this.spDragon.active = !1;
this.txtTime.string = "";
this.spBase.active = !0;
this.spBox.active = !0;
SpineUtils.changeAnimation(this.spineBase, "1", !0, "2", !0);
this.spineBase.setCompleteListener(this.onSpineComplete.bind(this));
SpineUtils.changeAnimation(this.spineBox, "1", !1, null, !0);
this.delayTimer(function() {
e.initBtnAndLab();
}, 6);
},
initBtnAndLab: function() {
var e = this;
if (!this.isInit) {
this.nodeBtns.active = !0;
this.nodeLabs.active = !0;
this.isInit = !0;
for (var t = function(t) {
e.numLabs[t].getComponent(cc.Label).string = "";
var i = e.seleBtns[t];
e.onClick(i, function() {
e.onClickNumbtn(t);
});
}, i = 0; i < 10; i++) t(i);
for (var s = 0; s < this.resultLabs.length; s++) {
this.resultLabs[s].getComponent(cc.Label).string = "";
}
ActionUtils.timerAct(this.spBase, function(t, i, s) {
e.txtTime.string = 10 - i + "s";
s && e.playResult();
}, 1, 10);
}
},
onSpineComplete: function(e) {
e && e.animation && "1" == e.animation.name && this.initBtnAndLab();
},
initNumbers: function() {
this.curIdx = 0;
this.numChars = [];
for (var e = this.catchInfo.dropMultiple, t = 0; t < 4; t++) {
var i = Math.floor(e % 10);
e = Math.floor(e / 10);
var s = this.resultLabs[t];
this.numChars.push({
mult: i,
x: s.x,
y: s.y
});
}
},
onClickNumbtn: function(e) {
var t = this;
if (this.isInit) {
var i = this.numChars[this.curIdx], s = this.resultLabs[this.curIdx];
this.curIdx = this.curIdx + 1;
if (!TypeUtils.isRealNull(i)) {
this.numLabs[e].getComponent(cc.Label).string = i.mult;
s.getComponent(cc.Label).string = i.mult;
this.seleBtns[e].active = !1;
s.x = this.numLabs[e].x;
s.y = this.numLabs[e].y;
var n = cc.jumpTo(.4, cc.v2(i.x, i.y), 175, 1).easing(cc.easeSineInOut()), o = cc.rotateBy(.4, -360), a = [];
a.push(cc.spawn(n, o));
this.curIdx >= 4 && a.push(cc.callFunc(function() {
SpineUtils.changeAnimation(t.spineBox, "2", !1, null, !0);
t.playResult();
}));
a.push(cc.callFunc(function() {}));
s.runAction(cc.sequence(a));
}
}
},
playResult: function() {
this.marqueeModel.changeWaitState(n.WaitType.NaJia, !1);
var e = this.catchInfo;
TypeUtils.isRealNull(e) ? this.closeSelf() : e.isHaveWarhead ? this.playWarheadEffect() : this.playLongWangEffect(e.longWangBox, e.juShouDuiJueInfo);
},
playLongWangEffect: function(e, t) {
var i = this;
if (t && t.multiple && t.multiple > 0) this.delayTimer(function() {
ViewManager.showView("MONSTER_BATTLE_VIEW", null, {
data: t
});
i.closeSelf();
}, .5); else {
var s = [];
s.push(cc.delayTime(2));
if (!TypeUtils.isRealNull(e) && e.multiple && e.multiple > 0) {
s.push(cc.callFunc(function() {
for (var e = 0; e < i.dropItemList.length; e++) {
i.dropItemList[e].destroy();
}
i.dropItemList = [];
i.sprBg.active = !1;
i.spDragon.active = !0;
SpineUtils.changeAnimation(i.spineDragon, "show", !1, null, !0);
}));
s.push(cc.delayTime(2));
s.push(cc.callFunc(function() {
ViewManager.showView("DRAGON_TREASURE_VIEW", null, {
data: e
});
i.closeSelf();
}));
} else s.push(cc.callFunc(function() {
i.closeSelf();
}));
this.node.runAction(cc.sequence(s));
}
},
playWarheadEffect: function() {
var e = this;
ViewManager.showMarqueeLayer(!0);
for (var t = this.catchInfo.dropList, i = [], s = 0, n = 0; n < t.length; n++) {
var a = t[n];
if (!TypeUtils.isRealNull(o[a.itemId])) {
i.push(a);
s += a.amount;
}
}
for (var r, l = 0, c = 0; c < s; c++) {
if (c * (c + 2) >= s) {
l = c;
break;
}
}
for (var h = 100 * (r = l + 2), u = 100 * l, d = 1, p = 0, f = 0; f < i.length; f++) {
for (var m = i[f], g = 0; g < m.amount; g++) {
var _ = 0 - h / 2 + 50 + ((p += 1) - 1) % r * 100, T = 0 + u / 2 - 50 - 100 * Math.floor((p - .5) / r), C = cc.instantiate(this.dropItem);
C.parent = this.node;
this.dropItemList.push(C);
C.getComponent("catchAwardDrop").init({
x: 0 + CC_DESIGN_RESOLUTION.width / 2,
y: CC_DESIGN_RESOLUTION.height / 2 - 0,
itemId: m.itemId,
icon: ItemUtils.getItemPng(m.itemId),
amount: m.amount
});
var y = [], I = .2 + .02 * p, v = cc.fadeIn(I), E = cc.moveTo(I, cc.v2(_, T)).easing(cc.easeBackIn());
y.push(cc.spawn(v, E));
y.push(cc.delayTime(3.5));
p == s && y.push(cc.callFunc(function() {
e.sprBg.active = !1;
TypeUtils.isRealNull(e.catchInfo) || e.playLongWangEffect(e.catchInfo.longWangBox, e.catchInfo.juShouDuiJueInfo);
}));
C.runAction(cc.sequence(y));
}
this.catchFishUI.showGainWarheadsNumEffect(m, 105 * (d - 1));
d += 1;
}
},
closeSelf: function() {
ViewManager.closeView(this);
},
onDestroy: function() {
this.model.resumeAutoFire();
ViewBase.prototype.onDestroy.call(this);
}
});
cc._RF.pop();
}, {
CatchFishConst: "CatchFishConst",
MarqueeConst: "MarqueeConst"
} ],
newerTaskItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "637567WJSxK6Kyik6Dn/EOu", "newerTaskItem");
var s = e("BaseComponent"), n = e("TaskConst");
cc.Class({
extends: s,
properties: {
txtDesc: cc.Node,
progressBar: cc.Node,
txtProg: cc.Label,
btnGet: cc.Node,
btnGo: cc.Node,
txtGetDesc: cc.Node,
txtGotDesc: cc.Node,
comItem: cc.Prefab
},
onLoad: function() {},
setData: function(e) {
var t = this;
this.data = e;
this.txtDesc.getComponent(cc.Label).string = e.name;
this.progressBar.getComponent(cc.ProgressBar).progress = e.progress / e.num;
this.txtProg.string = e.progress + "/" + e.num;
var i = e.award[0];
if (TypeUtils.isRealNull(this.itemCom)) {
this.itemCom = cc.instantiate(this.comItem);
this.itemCom.parent = this.node;
this.itemCom.x = 50;
this.itemCom.y = 0;
this.itemCom.script = this.itemCom.getComponent("comItem");
this.itemCom.scale = .8;
}
this.itemCom.script.setData(i);
this.btnGet.active = e.status == n.FinishStatus.Finish;
this.txtGetDesc.active = this.btnGet.active;
this.btnGo.active = e.status != n.FinishStatus.Finish;
this.txtGotDesc.active = this.btnGo.active;
this.onClick(this.btnGet, function() {
t.clCallback(t.data);
});
this.onClick(this.btnGo, function() {
t.clCallback(t.data);
});
this.txtGotDesc.getComponent(cc.Label).string = e.status == n.FinishStatus.NotFinish ? "未完成" : "已完成";
},
setClickCb: function(e) {
this.clCallback = e;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
TaskConst: "TaskConst"
} ],
newerTaskView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "76b0cafLvxM8YImcgZBP8WG", "newerTaskView");
var s = e("TaskConst"), n = e("List"), o = null, a = null;
cc.Class({
extends: ViewBase,
properties: {
scrollTask: cc.Node,
taskContent: cc.Node,
hierarchyContents: {
default: [],
type: [ cc.Node ]
},
progressBar: cc.Node,
boxs: {
default: [],
type: [ cc.Node ]
},
txtTips: {
default: [],
type: [ cc.Label ]
},
locks: {
default: [],
type: [ cc.Node ]
},
btnGet: cc.Node,
txtDesc: cc.Node,
listView: n,
taskItem: cc.Prefab,
prefabBg: cc.Prefab
},
onCreate: function(e) {
var t = this;
e = e || {};
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
t.canFetchBoxReward ? TipsUtils.showTipsBox({
desc: "您有阶段任务奖励未领取，确定关闭吗？",
needCheckBox: !1,
sureCallBack: function() {
ViewManager.closeView("NEWER_TASK_VIEW");
}
}) : ViewManager.closeView(t);
});
this.comBg.getComponent("comBasePopView").showBgType(1);
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(830, 630)
});
this.comBg.getComponent("comBasePopView").setTitle("");
this.initConfig();
this.initData();
this.initEvent();
this.initUI();
},
initConfig: function() {
ConfigMgr.getConfig("item_config");
o = ConfigMgr.getConfig("fish_room_config");
a = ConfigMgr.getConfig("task_class_config");
},
initData: function() {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this._taskCtrl = app.ctrls.task;
this._taskModel = this._taskCtrl.getModel();
this.canFetchBoxReward = !1;
this.roomType = this.model.getRoomType();
},
initEvent: function() {
this.eventOn(this._taskModel.EVENT_UPDATE_TASK_INFO, this.onUpdateTaskInfo, this);
this.eventOn(this._taskModel.EVENT_UPDATE_TASK_CLASS, this.onUpdateTaskBox, this);
},
initUI: function() {
var e = o.findByIndex(this.roomType);
this.comBg.getComponent("comBasePopView").setTitle(e.name || "新手任务");
this.onClick(this.btnGet, this.handleBtnJieDuanAward.bind(this));
this.countBox = 0;
this.onUpdateTaskInfo();
this.onUpdateTaskBox();
},
updateList: function() {
this.listView.numItems = this.taskInfos.length;
this.listView.scrollTo(0, .02);
},
onUpdateTaskInfo: function() {
var e = o.findByIndex(this.roomType).taskClassId;
this.taskInfos = this._taskModel.getFishTaskInfo(e);
ArrayUtils.sort(this.taskInfos, function(e, t) {
return e.status == t.status ? e.taskId - t.taskId : e.status <= s.FinishStatus.Finish && t.status <= s.FinishStatus.Finish ? t.status - e.status : e.status - t.status;
});
this.progressBar.getComponent(cc.ProgressBar).progress = (this.countBox - 1) / 3;
this.updateList();
},
onUpdateList: function(e, t) {
var i = this, s = this.taskInfos[t];
if (TypeUtils.isRealNull(e.script)) {
e.script = e.getComponent("newerTaskItem");
e.script.setClickCb(function(e) {
i.handleTouchFetch(e);
});
}
e.script.setData(s);
},
onUpdateTaskBox: function() {
var e = this._taskModel.getClassInfo();
this.canFetchBoxReward = !1;
this.countBox = 0;
for (var t = 0; t < this.boxs.length; t++) {
var i = this.boxs[t], n = this.txtTips[t], o = this.locks[t], a = e[t + 1];
a == s.FinishStatus.Finish && (this.canFetchBoxReward = !0);
i.getComponent(cc.Button).interactable = a == s.FinishStatus.NotFinish;
var r = a == s.FinishStatus.Finish ? "可领取" : a == s.FinishStatus.HasReceive ? "已领取" : "";
n.getComponent(cc.Label).string = r;
o.active = a == s.FinishStatus.NotFinish;
a != s.FinishStatus.Finish && a != s.FinishStatus.HasReceive || this.countBox++;
}
this.updateList();
},
handleBtnJieDuanAward: function() {
var e = this, t = this._taskModel.getClassInfo(), i = function(i) {
if (t.hasOwnProperty(i)) {
var n = t[i], o = a.findFirst(function(e) {
return e.classId == i;
});
if (!TypeUtils.isRealNull(o) && n == s.FinishStatus.Finish) {
var r = o.award;
e._taskCtrl.receiveClassAward(i, r);
}
}
};
for (var n in t) i(n);
},
handleTouchFetch: function(e) {
if (TypeUtils.isRealNull(e) || e.status != s.FinishStatus.Finish) ViewManager.closeView("NEWER_TASK_VIEW"); else {
var t = e.award[0];
this._taskCtrl.getTaskAward(e.taskId, t);
}
}
});
cc._RF.pop();
}, {
List: "List",
TaskConst: "TaskConst"
} ],
nodeSector: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "b89e2Vp8rNH7YuhKNcrQPjQ", "nodeSector");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
sprBg: cc.Node,
txtNum: cc.Node,
sprIcon: cc.Node
},
onLoad: function() {},
setData: function(e) {
var t = this, i = e.path;
i = TypeUtils.isAllNull(i) && !TypeUtils.isRealNull(e.itemId) ? ItemUtils.getItemPngByCfg(e) : ItemUtils.getItemDefaultPng();
SpriteUtils.setTexture({
path: "module/fish/texture/vipTurntable/vipcj_img_0" + (0 == e.type ? 8 : 9),
isHide: !0
}, this.sprBg, this);
SpriteUtils.setTexture({
path: i,
isHide: !0,
callback: function() {
SpriteUtils.setAdaptContentSize(t.sprIcon, null, 70);
}
}, this.sprIcon, this);
var s = "X" + NumberUtils.toString(Number(e.amount), 2);
TypeUtils.isAllNull(e.desc) || (s = e.desc);
this.txtNum.getComponent(cc.Label).string = s;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
noticeView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "18650IshKdKWK7jRTk/pS4s", "noticeView");
var s = e("List");
cc.Class({
extends: ViewBase,
properties: {
sprNoNotice: cc.Node,
nodeNotice: cc.Node,
listNotice: s,
nodeDetail: cc.Node,
scrollDetail: cc.Node,
contentView: cc.Node,
txtContent: cc.Node,
prefabBg: cc.Prefab
},
onCreate: function(e) {
e = e || {};
this.initData();
this.initConfig();
this.initEvent();
this.initUI(e);
},
initData: function() {
this.ctrl = app.ctrls.login;
this.model = this.ctrl.getModel();
this.ctrl.getNoticeInfo();
},
initConfig: function() {
this.titleList = [];
this.noticeInfo = {};
var e = this.model.getNoticeInfo();
if (!TypeUtils.isRealNull(e) && TypeUtils.isNotEmptyArray(e.announce)) {
this.noticeInfo = e;
for (var t = 0; t < e.announce.length; t++) {
var i = e.announce[t], s = {
title: i.title,
content: i.content,
time: i.announceTime || ""
};
this.titleList.push(s);
}
}
},
initEvent: function() {
this.eventOn(this.model.EVENT_NOTICE_INFO, this.onNoticInfo.bind(this));
},
initUI: function(e) {
var t = this;
this.tabIndex = -1;
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBaseView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBaseView").setTitle({
type: 1,
path: "module/fish/texture/fishCommon/title/gg_title",
bgType: 1
});
this.updateNoticeInfo();
},
updateNoticeInfo: function() {
this.sprNoNotice.active = this.titleList.length <= 0;
this.nodeNotice.active = this.titleList.length > 0;
if (this.titleList.length > 0) {
this.listNotice.numItems = this.titleList.length;
this.listNotice.selectedId = 0;
}
},
onListRender: function(e, t) {
var i = this.titleList[t];
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("mailItem"));
i.iconStatus = 2;
e.script.setData(i);
},
onListSelected: function(e, t, i, s) {
var n = this.titleList[t] || {};
this.showItemDetail(n);
},
showItemDetail: function(e) {
var t = this;
this.txtContent.getComponent(cc.RichText).string = "暂无查看";
if (TypeUtils.isRealNull(e) || TypeUtils.isRealNull(e.content)) {
ActionUtils.callOnce(this.contentView, function() {
t.contentView.height = t.txtContent.height;
}, .5);
this.selectItem = null;
} else {
this.selectItem = e;
this.txtContent.getComponent(cc.RichText).string = e.content;
this.scrollDetail.getComponent(cc.ScrollView).scrollToTop();
ActionUtils.callOnce(this.contentView, function() {
t.contentView.height = t.txtContent.height;
}, .5);
}
},
onNoticInfo: function() {
this.initConfig();
this.updateNoticeInfo();
}
});
cc._RF.pop();
}, {
List: "List"
} ],
onlineView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "33802dl4lBAb7c+8I/tKwP8", "onlineView");
var s = e("List"), n = e("WelfareConst");
cc.Class({
extends: ViewBase,
properties: {
progSignTime: cc.Node,
txtTimeList: [ cc.Node ],
listSign: s,
bubbleItem: cc.Prefab
},
onCreate: function() {
this.initData();
this.initEvent();
this.initUI();
},
onAdapt: function() {},
initData: function() {
var e = this;
this.ctrl = app.ctrls.welfare;
this.model = this.ctrl.getModel();
this.signList = [];
this.minSignTime = 24;
this.maxSignTime = 0;
ConfigMgr.getConfig("online_sign_config").forEach(function(t) {
var i = StringUtils.stringSplit(t.startTime, ":"), s = StringUtils.stringSplit(t.stopTime, ":"), n = DicUtils.copy(t);
n.staTime = i[0];
n.endEnd = s[0];
n.award = t.awardItemList;
n.staTime < e.minSignTime && (e.minSignTime = n.staTime);
n.staTime > e.maxSignTime && (e.maxSignTime = n.staTime);
e.signList.push(n);
});
this.freshConfig();
},
freshConfig: function() {
var e = this, t = this.model.getOnLineInfo(), i = this.model.getOnLineTime();
this.onlineList = [];
ConfigMgr.getConfig("online_award").forEach(function(s) {
for (var o = 0; o < t.length; o++) {
var a = t[o];
if (a.id == s.id) {
var r = DicUtils.copy(s);
r.type = n.TypeState.Online;
r.status = a.status;
r.award = r.awardItemList;
r.progress = i;
r.num = r.time;
r.desc = "在线时长达" + r.time + "min";
e.onlineList.push(r);
break;
}
}
});
ArrayUtils.sort(this.onlineList, function(e, t) {
return e.status == t.status ? e.id - t.id : e.status == n.OnLineAwardState.CAN_GET ? -1 : t.status == n.OnLineAwardState.CAN_GET ? 1 : e.status - t.status;
});
},
initEvent: function() {
this.eventOn(this.model.EVENT_UPDATE_SIGN_AWRAD_INFO, this.updateOnlineInfo, this);
this.eventOn(this.model.EVENT_UPDATE_ON_LINE_INFO, this.updateOnlineInfo, this);
this.eventOn(this.model.EVENT_GET_AWRAD_INFO, this.updateOnlineInfo, this);
},
initUI: function() {
this.canAction = !0;
this.initBubbleItem();
this.updateList();
this.updateOnlineInfo();
},
initBubbleItem: function() {
this.bubbleList = [];
if (this.minSignTime > this.maxSignTime) {
this.minSignTime = 0;
this.maxSignTime = 24;
}
for (var e = 0; e < this.signList.length; e++) {
var t = cc.instantiate(this.bubbleItem);
t.parent = this.progSignTime;
t.x = this.progSignTime.width * ((this.signList[e].staTime - this.minSignTime + 2) / (this.maxSignTime - this.minSignTime + 2) - .5);
t.y = 60;
t.scale = .8;
t.script = t.getComponent("bubbleItem");
t.script.setClickCB(this.onClickBubble.bind(this));
this.bubbleList.push(t);
}
for (var i = 0; i < this.txtTimeList.length; i++) {
var s = this.txtTimeList[i], n = this.signList[i];
if (TypeUtils.isRealNull(n)) s.getComponent(cc.Label).string = ""; else {
s.x = this.progSignTime.width * ((n.staTime - this.minSignTime + 2) / (this.maxSignTime - this.minSignTime + 2) - .5);
s.getComponent(cc.Label).string = StringUtils.format("%s点~%s点", n.staTime, n.endEnd);
}
}
},
onClickBubble: function() {
this.ctrl.getOnlineSignAward();
},
updateList: function() {
this.listSign.numItems = this.onlineList.length;
this.listSign.scrollTo(0, .02);
},
onRenderEvent: function(e, t) {
var i = this, s = this.onlineList[t];
if (TypeUtils.isRealNull(e.script)) {
e.script = e.getComponent("taskItem");
e.script.setClickCB(this.onClickTask.bind(this));
}
e.script.setData(s);
e.stopAllActions();
e.scale = 1;
if (this.canAction) {
e.scale = 0;
ActionUtils.sequence(e, cc.delayTime(.02 * t), cc.scaleTo(.1, 1.1), cc.scaleTo(.05, 1), cc.callFunc(function() {
i.canAction = !1;
}));
}
},
onClickTask: function(e) {
this.ctrl.getOnlineAward(e.id);
},
updateOnlineInfo: function() {
for (var e = TimeUtils.getServerTime(), t = new Date(1e3 * e).getHours(), i = 0; i < this.bubbleList.length; i++) {
var s = this.bubbleList[i], o = this.signList[i];
o.type = n.TypeState.Online;
if (this.model.isMissOnLineSign(o.id)) {
o.isMiss = !0;
o.desc = "已错过";
} else o.isGet = this.model.isGetOnLineSign(o.id);
s.script.setData(o);
}
this.progSignTime.getComponent(cc.ProgressBar).progress = (t - this.minSignTime + 2) / (this.maxSignTime - this.minSignTime + 2);
this.freshConfig();
this.updateList();
}
});
cc._RF.pop();
}, {
List: "List",
WelfareConst: "WelfareConst"
} ],
playGuideView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "947f8120B1BZr1zZ/v8PZit", "playGuideView");
var s;
function n(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}
var o = (n(s = {}, 100, [ {
itemId: 3,
amount: 1
}, {
itemId: 21004,
amount: 300
}, {
itemId: 21014,
amount: 1
}, {
itemId: 21013,
amount: 1
} ]), n(s, 1e3, [ {
itemId: 3,
amount: 1
}, {
itemId: 21004,
amount: 300
}, {
itemId: 21014,
amount: 1
}, {
itemId: 21015,
amount: 1
} ]), s);
cc.Class({
extends: ViewBase,
properties: {
sprBoss: cc.Node,
sprTitle: cc.Node,
nodeBox: cc.Node,
sprIcons: [ cc.Node ],
btnSure: cc.Node
},
onCreate: function(e) {
this.initData(e);
this.initUI();
},
initData: function(e) {
this.forgeLevel = e;
},
initUI: function() {
var e = this;
this.onClick(this.btnSure, function() {
ViewManager.closeView(e);
});
var t = 100 == this.forgeLevel ? "img_01" : "img_02";
SpriteUtils.setTexture({
path: "module/games/texture/fishPlayGuide/" + t
}, this.sprBoss, this);
var i = 100 == this.forgeLevel ? "img_title_02" : "img_title_01";
SpriteUtils.setTexture({
path: "module/games/texture/fishPlayGuide/" + i
}, this.sprTitle, this);
for (var s = function(t) {
var i = e.sprIcons[t], s = o[e.forgeLevel][t];
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(s.itemId),
callback: function() {
SpriteUtils.setAdaptContentSize(i, null, 90);
}
}, i, e);
}, n = 0; n < this.sprIcons.length; n++) s(n);
},
updateUI: function() {
this.spLight.active = !1;
this.txtNum.active = !1;
this.sprIcon.active = !1;
this.enabledDark(!1);
SpineUtils.changeAnimation(this.spineMfcj, "2", !1, null, !0);
},
enabledDark: function(e) {
this.sprIcon.color = e ? cc.color(100, 100, 100) : cc.color(255, 255, 255);
},
showLight: function(e) {
e ? SpineUtils.changeAnimation(this.spineMfcj, "3", !0, null, !0) : SpineUtils.changeAnimation(this.spineMfcj, "4", !1, null, !0);
},
updateData: function(e, t) {
var i = this;
this.data = e;
this.index = t;
var s = e.content.replace("×", "");
this.txtNum.getComponent(cc.Label).string = s;
SpriteUtils.setTexture({
path: ItemUtils.getItemPngByCfg(e.award),
callback: function() {
SpriteUtils.setAdaptContentSize(i.sprIcon, null, 80);
}
}, this.sprIcon, this);
this.updateUI();
},
spineCompleteHanlde: function(e) {
if (e && e.animation && "2" == e.animation.name) {
this.spLight.active = !0;
this.txtNum.active = !0;
this.sprIcon.active = !0;
1 == this.index && TypeUtils.isFunction(this.showCallBack) && this.showCallBack();
}
},
setShowFinishCb: function(e) {
this.showCallBack = e;
}
});
cc._RF.pop();
}, {} ],
playerInfoObject: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "720bf+6DIRKQrbW/ZlsLHER", "playerInfoObject");
e("CatchFishConst");
var s = e("ItemConst");
cc.Class({
extends: BaseComponent,
properties: {
sprOther: cc.Node,
sprMine: cc.Node,
sprNameBg: cc.Node,
txtName: cc.Node,
sprDiamond: cc.Node,
sprTicket: cc.Node,
txtTopNum: cc.Node,
sprCurrencyBg: cc.Node,
sprSilver: cc.Node,
sprJade: cc.Node,
txtBotNum: cc.Node,
expBar: cc.Node,
txtSlider: cc.Node,
nodeHead: cc.Node,
sprHeadBox: cc.Node,
sprHead: cc.Node,
sprOffline: cc.Node,
txtLevel: cc.Node
},
ctor: function() {},
onLoad: function() {
BaseComponent.prototype.onLoad.call(this);
this.initView();
},
initView: function() {
this.sprDiamond.active = !1;
this.txtSlider.getComponent(cc.Label).string = "";
this.sprOffline.active = !1;
this.isTicket = !0;
},
isMySelf: function(e, t) {
this.isMe = e;
this.sprOther.active = !e;
this.txtName.active = !e;
this.sprMine.active = e;
this.expBar.active = e;
this.txtTopNum.active = e;
if (e) {
this.sprNameBg.y = 72;
this.sprCurrencyBg.y = 40;
this.nodeHead.y = 55;
this.txtLevel.y = -40;
} else {
this.sprNameBg.y = 55;
this.sprCurrencyBg.y = 23;
this.nodeHead.y = 38;
this.txtLevel.y = -20;
}
if (2 == t || 3 == t) {
this.sprOther.scaleX = 1;
this.sprMine.scaleX = 1;
this.sprNameBg.x = -27;
this.sprCurrencyBg.x = -27;
this.expBar.x = -27;
this.nodeHead.x = 68.8;
} else {
this.sprOther.scaleX = -1;
this.sprMine.scaleX = -1;
this.sprNameBg.x = 37;
this.sprCurrencyBg.x = 37;
this.expBar.x = 37;
this.nodeHead.x = -68.8;
}
},
isJadeChang: function(e) {
this.isJade = e;
this.sprSilver.active = !e;
this.sprJade.active = e;
},
setCurrency: function(e, t) {
if (0 == e) {
if (!this.isMe) {
this.txtName.getComponent(cc.Label).string = t;
this.sprTicket.active = !1;
}
} else if (e == s.ResourceType.Gold) this.isJade || (this.txtBotNum.getComponent(cc.Label).string = t); else if (e == s.ResourceType.Jade) this.isJade && (this.txtBotNum.getComponent(cc.Label).string = t); else if (e == s.ResourceType.Diamond) this.isTicket || (this.txtTopNum.getComponent(cc.Label).string = t); else if (e == s.ResourceType.Ticket && this.isTicket) {
this.sprTicket.active = !0;
this.txtTopNum.getComponent(cc.Label).string = t;
}
},
loadHead: function(e) {
HeadManager.loadHead(this.sprHead, e);
},
setRoleLevel: function(e) {
this.txtLevel.getComponent(cc.Label).string = "Lv." + e;
},
setVipInfo: function(e) {},
setOffline: function(e) {
this.sprOffline.active = e;
},
setLevelPer: function(e) {
this.expBar.getComponent(cc.ProgressBar).progress = e.exp / e.needExp;
},
update: function(e) {}
});
cc._RF.pop();
}, {
CatchFishConst: "CatchFishConst",
ItemConst: "ItemConst"
} ],
playerInfoView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "8ed9aAG92NPTZcoc934vtSr", "playerInfoView");
cc.Class({
extends: ViewBase,
properties: {
editPhone: cc.Node,
editWechat: cc.Node,
editName: cc.Node,
editAddr: cc.Node,
btnSure: cc.Node,
prefabBg: cc.Prefab
},
onCreate: function(e) {
var t = this;
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(650, 550)
});
this.comBg.getComponent("comBasePopView").setTitle("我的信息");
this.initData();
this.initEvent();
this.initView();
},
initData: function() {
var e = this;
this.ctrl = app.ctrls.betTreasure;
this.model = this.ctrl.getModel();
this._roleModel = app.ctrls.role.getModel();
this.ctrl.requestGetPlayerAddr(function(t) {
if (!TypeUtils.isRealNull(t)) {
e.editPhone.getComponent(cc.EditBox).string = t.phone_num || "";
e.editWechat.getComponent(cc.EditBox).string = t.wechat_num || "";
e.editName.getComponent(cc.EditBox).string = t.name || "";
e.editAddr.getComponent(cc.EditBox).string = t.address || "";
}
});
},
initEvent: function() {},
initView: function() {
var e = this;
this.onClick(this.btnSure, function() {
var t = e.editPhone.getComponent(cc.EditBox).string, i = e.editWechat.getComponent(cc.EditBox).string, s = e.editName.getComponent(cc.EditBox).string, n = e.editAddr.getComponent(cc.EditBox).string;
if (TypeUtils.isAllNull(t) && TypeUtils.isAllNull(i) && TypeUtils.isAllNull(s) && TypeUtils.isAllNull(n)) TipsUtils.showTips("至少填写一个收货信息~"); else {
/^1(3[0-9]|4[5,7]|5[0,1,2,3,5,6,7,8,9]|6[2,5,6,7]|7[0,1,7,8]|8[0-9]|9[1,8,9])\d{8}$/.test(t) ? e.ctrl.requestSetPlayerAddr(t, i, s, n, function() {
TipsUtils.showTips("保存成功~");
}) : TipsUtils.showTips("请输入正确的手机号码~");
}
});
}
});
cc._RF.pop();
}, {} ],
pokerColorView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "bc0e6CZ7uhImpC8QV0cTsRF", "pokerColorView");
cc.Class({
extends: ViewBase,
properties: {
toggleExchange: cc.Node,
toggleRank: cc.Node,
btnTIps: cc.Node,
exchangeLay: cc.Prefab,
rankLayer: cc.Prefab,
prefabBg: cc.Prefab
},
onCreate: function(e) {
e = e || {};
this.initConfig();
this.initData();
this.initEvent();
this.initUI(e);
},
initConfig: function() {},
initData: function() {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this._roleModel = app.ctrls.role.getModel();
this._roleId = this._roleModel.getRoleId();
this._bagCtrl = app.ctrls.bag;
this._bagModel = this._bagCtrl.getModel();
},
initEvent: function() {},
initUI: function(e) {
var t = this;
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBaseView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBaseView").setTitle({
type: 1,
path: "module/fish/texture/pokerColors/hssl_title"
});
this.exchangeView = cc.instantiate(this.exchangeLay);
this.exchangeView.parent = this.node;
this.exchangeView.x = 0;
this.exchangeView.y = -60;
this.exchangeView.active = !1;
this.rankView = cc.instantiate(this.rankLayer);
this.rankView.parent = this.node;
this.rankView.x = 0;
this.rankView.y = -60;
this.rankView.active = !1;
this.onClick(this.btnTIps, this.onTouchTips.bind(this));
this.toggleExchange.on("toggle", function() {
t.switchChannel(1);
});
this.toggleRank.on("toggle", function() {
t.switchChannel(2);
});
this.toggleExchange.getComponent(cc.Toggle).isChecked = !0;
this.switchChannel(1);
},
switchChannel: function(e) {
if (this.curIndex != e) {
this.curIndex = e;
this.exchangeView.active = 1 == e;
this.rankView.active = 1 != e;
1 == e ? this.updateExchangeContent() : this.requestRankInfo();
}
},
updateExchangeContent: function() {
TypeUtils.isRealNull(this.exchangeView.script) && (this.exchangeView.script = this.exchangeView.getComponent("pokerExchange"));
this.exchangeView.script.updateExchange();
},
requestRankInfo: function() {
TypeUtils.isRealNull(this.rankView.script) && (this.rankView.script = this.rankView.getComponent("pokerRank"));
this.rankView.script.requestRankInfo();
},
onTouchTips: function() {
var e = ConfigMgr.getConfig("rule_config").findByIndex(color_exchange), t = {
title: e.name,
content: e.content
};
ViewManager.showView("FISH_RULE_VIEW", null, t);
}
});
cc._RF.pop();
}, {} ],
pokerExchangeItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "bcc64ZgFv1Fx7uJ0i9OEYL5", "pokerExchangeItem");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
sprItems: [ cc.Node ],
txtNums: [ cc.Label ],
sprIcons: [ cc.Node ],
sprAdds: [ cc.Node ],
btnExchange: cc.Node,
txtBtnDesc: cc.Label,
sprAwardItems: [ cc.Node ],
txtAwardNums: [ cc.Label ],
sprAwardIcons: [ cc.Node ]
},
onLoad: function() {
this.initData();
this.initEvent();
this.initUI();
},
initData: function() {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this._bagCtrl = app.ctrls.bag;
this._bagModel = this._bagCtrl.getModel();
},
initEvent: function() {
this.eventOn(this._bagModel.EVENT_UPDATE_BAG_INFO, this.onBagItemInfoChange, this);
},
initUI: function() {
for (var e = 0; e < this.sprItems.length; e++) {
this.sprItems[e].active = !1;
this.sprIcons[e].active = !1;
this.sprAdds[e].active = !1;
}
for (var t = 0; t < this.sprAwardItems.length; t++) {
this.sprAwardItems[t].active = !1;
this.sprAwardIcons[t].active = !1;
}
},
updateItem: function(e) {
var t = this;
this.data = e;
var i = !0, s = e.colorGroup.length;
this.initUI();
for (var n = function(n) {
var o = e.colorGroup[n], a = t.sprItems[n];
a.active = !0;
var r = t.sprIcons[n];
r.active = !0;
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(o.itemId),
callback: function() {
SpriteUtils.setAdaptContentSize(r, null, 55);
}
}, r, t);
r.x = 95 * (n - (s - 1) / 2) - 230;
a.x = 95 * (n - (s - 1) / 2) - 230;
if (s > 1 && n < s - 1) {
var l = t.sprAdds[n];
l.active = !0;
l.x = 95 * (n - (s - 2) / 2) - 230;
}
t.txtNums[n].string = "X" + o.amount;
ItemUtils.getItemNum(o.itemId) < o.amount && (i = !1);
}, o = 0; o < s; o++) n(o);
var a = 0;
this.createItemBox(a, e.exchangItem);
if (!TypeUtils.isRealNull(e.reward)) {
a++;
this.createItemBox(a, e.reward, 570);
}
if (!TypeUtils.isRealNull(e.scoreRange)) {
a++;
this.createItemBox(a, e.scoreRange, 665);
}
this.onClick(this.btnExchange, function() {
t.ctrl.exchangeColor(e.id);
});
this.btnExchange.getComponent(cc.Button).interactable = i;
},
createItemBox: function(e, t, i, s) {
this.sprAwardItems[e].active = !0;
var n = this.txtAwardNums[e], o = this.sprAwardIcons[e];
o.active = !0;
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(t.itemId),
callback: function() {
SpriteUtils.setAdaptContentSize(o, null, 55);
}
}, o, this);
TypeUtils.isRealNull(t.amount) ? n.string = t.random[0] + "~" + t.random[1] : n.string = "X" + t.amount;
},
onBagItemInfoChange: function(e) {
var t = e.data;
TypeUtils.isRealNull(t) || TypeUtils.isRealNull(t.bagInfo) || TypeUtils.isRealNull(t.updateList) || this.updateItem(this.data);
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
pokerExchange: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "099e6a7t01F26KoeEZVLTUS", "pokerExchange");
var s = e("BaseComponent"), n = e("List"), o = e("ItemConst");
cc.Class({
extends: s,
properties: {
listView: n,
btnExchange: cc.Node,
txtPokerNums: [ cc.Label ],
txtFetch: cc.Node
},
onLoad: function() {
this.initData();
this.initEvent();
this.initUI();
},
initData: function() {
var e = this;
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this._bagCtrl = app.ctrls.bag;
this._bagModel = this._bagCtrl.getModel();
this.tConfig = [];
ConfigMgr.getConfig("color_exchange_config").forEach(function(t) {
e.tConfig.push(t);
});
ArrayUtils.sort(this.tConfig, function(e, t) {
return e.priority - t.priority;
});
this.colors_item = [ o.ResourceType.PokerJoker, o.ResourceType.PokerSpade, o.ResourceType.PokerHeart, o.ResourceType.PokerClub, o.ResourceType.PokerDiamond ];
},
initEvent: function() {
this.eventOn(this._bagModel.EVENT_UPDATE_BAG_INFO, this.onBagItemInfoChange, this);
},
initUI: function() {
this.onClick(this.btnExchange, this.requestYiJian.bind(this));
this.updateExchange();
},
updateExchange: function() {
for (var e = 0; e < this.txtPokerNums.length; e++) {
this.txtPokerNums[e].string = ItemUtils.getItemNum(this.colors_item[e]);
}
this.btnExchange.getComponent(cc.Button).interactable = this.canExchange();
this.updateList();
},
canExchange: function() {
for (var e = !1, t = 0; t < this.tConfig.length; t++) {
for (var i = this.tConfig[t], s = !0, n = 0; n < i.colorGroup.length; n++) {
var o = i.colorGroup[n];
ItemUtils.getItemNum(o.itemId) < o.amount && (s = !1);
}
if (s) {
e = !0;
break;
}
}
return e;
},
updateList: function() {
this.listView.numItems = this.tConfig.length;
this.listView.scrollTo(0, .02);
},
requestYiJian: function() {
for (var e = 0; e < this.tConfig.length; e++) {
for (var t = this.tConfig[e], i = !0, s = 0; s < t.colorGroup.length; s++) {
var n = t.colorGroup[s];
if (ItemUtils.getItemNum(n.itemId) < n.amount) {
i = !1;
break;
}
}
i && this.ctrl.exchangeColor(t.id);
}
},
onRenderEvent: function(e, t) {
var i = this.tConfig[t];
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("pokerExchangeItem"));
e.script.updateItem(i);
},
onBagItemInfoChange: function(e) {
var t = e.data;
if (!(TypeUtils.isRealNull(t) || TypeUtils.isRealNull(t.bagInfo) || TypeUtils.isRealNull(t.updateList))) {
for (var i = {}, s = 0; s < t.bagInfo.length; s++) {
var n = t.bagInfo[s];
TypeUtils.isRealNull(i[n.itemId]) ? i[n.itemId] = n.amount : i[n.itemId] = i[n.itemId] + n.amount;
}
for (var o = 0; o < this.txtPokerNums.length; o++) {
var a = this.colors_item[o];
this.txtPokerNums[o].string = i[a] || 0;
}
this.btnExchange.getComponent(cc.Button).interactable = this.canExchange();
}
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
ItemConst: "ItemConst",
List: "List"
} ],
pokerRankItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "0c016x0GX5GqIaVX7cwKE6G", "pokerRankItem");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
txtScore: cc.Label,
sprItems: [ cc.Node ],
txtNums: [ cc.Label ],
sprIcons: [ cc.Node ],
txtRank: cc.Label,
txtName: cc.Label,
sprRank: cc.Node
},
onLoad: function() {
this.initData();
this.initEvent();
this.initUI();
},
initData: function() {},
initEvent: function() {},
initUI: function() {
for (var e = 0; e < this.sprItems.length; e++) {
this.sprItems[e].active = !1;
this.sprIcons[e].active = !1;
}
},
updateItem: function(e, t, i) {
if (e <= 3) {
this.sprRank.active = !0;
this.txtRank.string = "";
SpriteUtils.setTexture({
path: "module/fish/texture/pokerColors/sssc_img_0" + (e + 1)
}, this.sprRank, this);
} else {
this.sprRank.active = !1;
this.txtRank.string = e;
}
if (TypeUtils.isRealNull(t)) {
this.txtName.string = "虚位以待";
this.txtScore.string = "0";
} else {
this.txtScore.string = t.score || 0;
this.txtName.string = t.nickname || "无名";
}
for (var s = [], n = 0; n < i.length; n++) {
var o = i[n];
if (e >= Number(o.rankMin) && e <= Number(o.rankMax)) {
s = o.itemList;
break;
}
}
for (var a = 0; a < this.sprItems.length; a++) {
var r = this.sprItems[a], l = this.txtNums[a], c = this.sprIcons[a], h = s[a];
if (TypeUtils.isRealNull(h)) {
r.active = !1;
c.active = !1;
} else {
r.active = !0;
c.active = !0;
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(h.itemId)
}, c, this);
l.string = h.amount;
}
}
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
pokerRank: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "cc6e9QyhaRK0qF7YcDOgweL", "pokerRank");
var s = e("BaseComponent"), n = e("List");
cc.Class({
extends: s,
properties: {
listLuckView: n,
listGreatView: n,
txtNoLuck: cc.Node,
txtLuckScore: cc.Label,
txtLuckRank: cc.Label,
txtNoGreat: cc.Node,
txtGreatScore: cc.Label,
txtGreatRank: cc.Label
},
onLoad: function() {
this.initData();
this.initEvent();
this.initUI();
},
initData: function() {},
initEvent: function() {},
initUI: function() {
this.requestRankInfo();
},
requestRankInfo: function() {
var e = this;
HttpUtils.post({
method: "getColorGiftRank",
data: {
roleId: RoleUtils.getRoleId()
},
callback: function(t) {
e.updateRankContent(t);
},
failCallback: function() {
logger.info("http getColorGiftRank 请求失败");
e.updateRankContent({});
}
});
},
updateLuckList: function() {
this.listLuckView.numItems = this.dayRankList.rankInfo.length;
this.listLuckView.scrollTo(0, .02);
},
updateGreatList: function() {
this.listGreatView.numItems = this.weekRankList.rankInfo.length;
this.listGreatView.scrollTo(0, .02);
},
updateRankContent: function(e) {
this.dayRankList = e.dayRankInfo || {};
this.weekRankList = e.weekRankInfo || {};
this.updateView();
this.updateLuckList();
this.updateGreatList();
},
onDayRenderEvent: function(e, t) {
var i = this.dayRankList.rankInfo[t];
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("pokerRankItem"));
e.script.updateItem(t, i, this.dayRankList.awardInfo);
},
onWeekRenderEvent: function(e, t) {
var i = this.weekRankList.rankInfo[t];
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("pokerRankItem"));
e.script.updateItem(t, i, this.weekRankList.awardInfo);
},
updateView: function() {
this.txtNoLuck.active = this.dayRankList.rankInfo.length <= 0;
this.txtLuckScore.string = this.dayRankList.roleScore;
this.txtLuckRank.string = this.dayRankList.roleRank >= 99 ? "未上榜" : this.dayRankList.roleRank;
this.txtNoGreat.active = this.weekRankList.rankInfo.length <= 0;
this.txtGreatScore.string = this.weekRankList.roleScore;
this.txtGreatRank.string = this.weekRankList.roleRank >= 99 ? "未上榜" : this.weekRankList.roleRank;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
List: "List"
} ],
protoMap: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "7c4a6oQh5JAVbiV2W20Kz7c", "protoMap");
Object.defineProperty(i, "__esModule", {
value: !0
});
i.default = void 0;
window.PROTO_LOG = {
NONE: 0,
REQUEST: 1,
EC: 2,
ALL: 3
};
var s = {};
window.PROTO_TYPE = {
C2S: 1,
S2C: 2
};
window.M_Game = {
module: "game",
ping: {
id: 1,
type: 1,
request: null,
response: "game.Timestamp"
}
};
s.Game = M_Game;
window.M_Auth = {
module: "auth",
service: "AUTH",
login: {
id: 257,
type: 1,
request: "auth.LoginRequest",
response: "auth.LoginResponse",
log: 0,
desc: "登录"
},
createRole: {
id: 258,
type: 1,
request: "auth.CreateRoleInfo",
response: null,
log: 1,
desc: "创建角色"
},
heartbeat: {
id: 259,
type: 1,
request: null,
response: null,
log: 0,
desc: "心跳"
},
onOffline: {
id: 260,
type: 2,
response: "auth.OfflineReason",
log: 1,
desc: "离线"
},
getServerTime: {
id: 261,
type: 1,
response: "auth.ServerTime",
log: 0,
desc: "获取服务器时间"
}
};
s.Auth = M_Auth;
window.M_Role = {
module: "role",
getRoleInfo: {
id: 513,
type: 1,
request: null,
response: "role.RoleInfo",
log: 0,
desc: "获取角色信息"
},
getOtherRoleBaseInfo: {
id: 514,
type: 1,
request: "integer",
response: "role.RoleBaseInfo",
log: 0,
desc: "获得制定玩家信息"
},
changeRoleInfo: {
id: 515,
type: 1,
request: "role.SetInfo",
response: "role.RoleInfo",
log: 0,
desc: "玩家修改信息"
},
loadOver: {
id: 516,
type: 1,
log: 0,
desc: "界面加载完成"
},
getSeting: {
id: 517,
type: 1,
response: "role.String",
log: 0,
desc: "获取前端保存数据"
},
saveSeting: {
id: 518,
type: 1,
request: "role.String",
log: 0,
desc: "前端保存数据"
},
getBindAward: {
id: 519,
type: 1,
request: "integer",
log: 0,
desc: "领取绑定奖励"
},
shareToFriend: {
id: 520,
type: 1,
request: "integer",
log: 0,
desc: "分享"
},
addCustomerService: {
id: 521,
type: 1,
request: "string",
log: 0,
desc: "添加客服微信（参数：微信号）"
},
secondPwdAuth: {
id: 522,
type: 1,
request: "string",
log: 0,
desc: "二级密码认证"
},
inputExchangeCode: {
id: 523,
type: 1,
request: "string",
response: "role.ItemList",
log: 0,
desc: "输入兑换码"
},
updateRoleInfo: {
id: 673,
type: 2,
response: "role.RoleInfo",
log: 0,
desc: "更新玩家信息"
},
syncShareAward: {
id: 674,
type: 2,
response: "role.ItemList",
log: 0,
desc: "同步分享获得奖励"
}
};
s.Role = M_Role;
window.M_SystemOpen = {
module: "system_open",
getSystemOpenInfo: {
id: 1025,
type: 1,
request: "integer",
response: "system_open.SystemOpenList",
log: 2,
desc: "获取系统开放信息"
},
onSystemOpenChange: {
id: 1185,
type: 2,
request: null,
response: "system_open.SystemOpenList",
log: 2,
desc: "通知系统开放信息改变"
}
};
s.SystemOpen = M_SystemOpen;
window.M_Title = {
module: "title",
getTitle: {
id: 1281,
type: 1,
request: null,
response: "title.Info",
log: 2,
desc: "获取称号信息"
},
setShowStatus: {
id: 1282,
type: 1,
request: "bool",
response: "title.Info",
log: 2,
desc: "设置称号显示状态 true:显示，false:不显示"
},
syncTitle: {
id: 1441,
type: 2,
request: null,
response: "title.Info",
log: 2,
desc: "更新称号状态"
}
};
s.Title = M_Title;
window.M_Statistics = {
module: "statistics",
getStatisticsInfo: {
id: 1537,
type: 1,
request: null,
response: "statistics.StatisticsInfo",
log: 2,
desc: "获取统计信息"
}
};
s.Statistics = M_Statistics;
window.M_Debug = {
module: "debug",
receiveItemList: {
id: 1793,
type: 1,
request: "debug.Item",
response: null,
log: 2,
desc: "添加道具"
},
removeItemList: {
id: 1794,
type: 1,
request: "debug.Item",
response: null,
log: 2,
desc: "删除道具"
},
dealGmCommand: {
id: 1795,
type: 1,
request: "string",
response: null,
log: 2,
desc: "添加Gm指令"
},
enterDebugState: {
id: 1796,
type: 1,
request: "integer",
response: null,
log: 2,
desc: "进入调试模式"
},
leaveDebugState: {
id: 1797,
type: 1,
request: null,
response: null,
log: 2,
desc: "离开调试模式"
},
syncDebugInfo: {
id: 1953,
type: 2,
response: "debug.DebugInfo",
log: 2,
desc: "更新调试信息"
}
};
s.Debug = M_Debug;
window.M_Guide = {
module: "guide",
getInfo: {
id: 2049,
type: 1,
response: "guide.Info",
log: 2,
desc: "获取新手引导信息"
},
complete: {
id: 2050,
type: 1,
request: "integer",
response: "guide.Info",
log: 2,
desc: "完成新手引导"
}
};
s.Guide = M_Guide;
window.M_OnlineAward = {
module: "online_award",
getOnlineInfo: {
id: 2305,
type: 1,
response: "online_award.onlineInfo",
log: 2,
desc: "获取在线奖励信息"
},
getOnlineAward: {
id: 2306,
type: 1,
request: "integer",
response: "online_award.awardInfo",
log: 2,
desc: "在线奖励抽奖"
},
getOnlineSignInfo: {
id: 2307,
type: 1,
response: "online_award.onlineSignInfo",
log: 2,
desc: "定时登录信息"
},
getOnlineSignAward: {
id: 2308,
type: 1,
response: "online_award.awardInfo",
log: 2,
desc: "定时登录奖励"
},
syncOnlineInfo: {
id: 2320,
type: 2,
response: "online_award.onlineInfo",
log: 2,
desc: "同步在线奖励信息"
}
};
s.OnlineAward = M_OnlineAward;
window.M_Channel = {
module: "channel",
join: {
id: 4097,
type: 1,
request: "channel.ID",
response: "channel.Msg",
log: 2,
desc: "加入频道"
},
leave: {
id: 4098,
type: 1,
request: "channel.ID",
response: null,
log: 2,
desc: "离开频道"
},
syncMsg: {
id: 4257,
type: 2,
response: "channel.Msg",
log: 0,
desc: "广播频道消息"
}
};
s.M_Channel = M_Channel;
window.M_Chat = {
module: "chat",
speakToRoom: {
id: 4353,
type: 1,
request: "chat.MessageInfo",
response: null,
log: 0,
desc: "房间聊天"
},
speak: {
id: 4514,
type: 1,
request: "chat.ChatInfo",
response: null,
log: 0,
desc: "发送聊天信息"
},
getChatRecordInfo: {
id: 4516,
type: 1,
request: null,
response: "chat.ChatRecordInfo",
log: 0,
desc: "最近聊天信息"
},
syncChatInfo: {
id: 4515,
type: 2,
request: null,
response: "chat.ChatInfo",
log: 0,
desc: "广播聊天信息"
},
handleSpeakToRoom: {
id: 4513,
type: 2,
request: null,
response: "chat.MessageInfo",
log: 0,
desc: "推送房间聊天消息"
}
};
s.Chat = M_Chat;
window.M_RedPoint = {
module: "red_point",
handleActive: {
id: 4609,
type: 2,
response: "role.String",
log: 0,
desc: "红点激活"
}
};
s.RedPoint = M_RedPoint;
window.M_Marquee = {
module: "marquee",
getMessage: {
id: 4865,
type: 1,
request: null,
response: "marquee.MarqueeInfos",
log: 0
},
handleSendMsgByKeyWord: {
id: 5025,
type: 2,
request: null,
response: "marquee.MarqueeKeyWord",
log: 0
},
handleSendMsgBySentence: {
id: 5026,
type: 2,
request: null,
response: "marquee.MarqueeInfo",
log: 0
},
handleAltMsg: {
id: 5027,
type: 2,
request: null,
response: "marquee.MarqueeInfo",
log: 0
},
handleDelMsg: {
id: 5028,
type: 2,
request: null,
response: "integer",
log: 0
}
};
s.Marquee = M_Marquee;
window.M_Mail = {
module: "mail",
getAllMailsStatus: {
id: 5121,
type: 1,
response: "mail.GetAllMailsStateResponse",
log: 2,
desc: "获取所有邮件状态"
},
readMail: {
id: 5122,
type: 1,
request: "integer",
response: "mail.ReadMailResponse",
log: 2,
desc: "阅读邮件"
},
getAttachment: {
id: 5123,
type: 1,
request: "integer",
response: "mail.RecvAllAttachResponse",
log: 2,
desc: "获取附件"
},
recvAllAttach: {
id: 5124,
type: 1,
request: "integer",
response: "mail.RecvAllAttachResponse",
log: 2,
desc: "获取附件"
},
delMail: {
id: 5125,
type: 1,
request: "integer",
response: "integer",
log: 2,
desc: "删除邮件"
},
delAllMail: {
id: 5126,
type: 1,
request: "integer",
response: "mail.RecvAllAttachResponse",
log: 2,
desc: "删除全部邮件"
},
handleRecvMail: {
id: 5281,
type: 2,
response: "mail.RecvMail",
log: 2,
desc: "推送玩家新收到的邮件"
}
};
s.Mail = M_Mail;
window.M_Kefu = {
module: "kefu",
getInfo: {
id: 5377,
type: 1,
response: "kefu.Info",
log: 2,
desc: "获取客服豪礼信息"
},
syncLuckInfo: {
id: 5537,
type: 1,
response: "kefu.LuckInfo",
log: 2,
desc: "同步中奖信息"
}
};
s.Kefu = M_Kefu;
window.M_Achievement = {
module: "achievement",
getInfo: {
id: 8194,
type: 1,
response: "achievement.AchievementList",
log: 0,
desc: "获取成就信息"
},
getAward: {
id: 8195,
type: 1,
request: "integer",
log: 0,
desc: "领取成就奖励"
},
getScoreAward: {
id: 8196,
type: 1,
request: "integer",
log: 0,
desc: "领取成就积分奖励"
},
onAchieved: {
id: 8353,
type: 2,
response: "achievement.AchievementInfo",
log: 0,
desc: "成就达成"
}
};
s.M_Achievement = M_Achievement;
window.M_Task = {
module: "task",
getTaskList: {
id: 8449,
type: 1,
request: null,
response: "task.TaskList",
log: 2,
desc: "获取任务列表"
},
receiveAward: {
id: 8450,
type: 1,
request: "integer",
response: "task.Task",
log: 2,
desc: "领取奖励"
},
getClassList: {
id: 8451,
type: 1,
request: null,
response: "task.ClassList",
log: 2,
desc: "获取任务组列表"
},
receiveClassAward: {
id: 8452,
type: 1,
request: "integer",
response: "task.TaskClass",
log: 2,
desc: "领取奖励"
},
handleTaskUpdate: {
id: 8609,
type: 2,
response: "task.TaskList",
log: 2,
desc: "任务状态改变"
},
handleClassUpdate: {
id: 8611,
type: 2,
response: "task.ClassList",
log: 2,
desc: "任务组状态改变"
}
};
s.Task = M_Task;
window.M_Counting = {
module: "counting",
getList: {
id: 14849,
type: 1,
request: null,
response: "counting.CountingList",
log: 2,
desc: "获取次数列表"
},
exchange: {
id: 14850,
type: 1,
request: "integer",
response: null,
log: 2,
desc: "兑换次数"
},
reset: {
id: 14851,
type: 1,
request: "counting.ResetInfo",
response: "counting.ResetInfo",
log: 2,
desc: "重置次数"
},
syncCounting: {
id: 15009,
type: 2,
response: "counting.CountingInfo",
log: 2,
desc: "更新次数"
}
};
s.Counting = M_Counting;
window.M_Progress = {
module: "progress",
getList: {
id: 15105,
type: 1,
request: null,
response: "progress.ProgressList",
log: 2,
desc: "获取进度列表"
},
syncProgress: {
id: 15265,
type: 2,
response: "progress.ProgressInfo",
log: 2,
desc: "更新进度"
}
};
s.Progress = M_Progress;
window.M_Bag = {
module: "bag",
getBagInfo: {
id: 12545,
type: 1,
request: null,
response: "bag.ItemList",
log: 0,
desc: "获得道具信息"
},
useItem: {
id: 12546,
type: 1,
request: "bag.UseItem",
response: "bag.ItemList",
log: 0,
desc: "使用道具"
},
randomItem: {
id: 12547,
type: 1,
request: "integer",
response: "integer",
log: 0,
desc: "随机物品（参数：itemId。返回：随机道具表ID）"
},
giveItem: {
id: 12549,
type: 1,
request: "bag.GiveInfo",
response: null,
log: 0,
desc: "赠送道具"
},
save: {
id: 12550,
type: 1,
request: "string",
response: "string",
log: 0,
desc: "存金币"
},
take: {
id: 12551,
type: 1,
request: "string",
response: "string",
log: 0,
desc: "取金币"
},
withdraw: {
id: 12552,
type: 1,
request: "integer",
response: null,
log: 0,
desc: "红包提现"
},
getGiveItemRemainCount: {
id: 12553,
type: 1,
request: "integer",
response: "integer",
log: 0,
desc: "获取赠送余额"
},
syncItems: {
id: 12705,
type: 2,
response: "bag.ItemList",
log: 0,
desc: "同步背包格子信息（只同步改变了的格子）"
},
showAwards: {
id: 12706,
type: 2,
response: "bag.ShowAwards",
log: 0,
desc: "客户端展示获取物品"
}
};
s.Bag = M_Bag;
window.M_Currency = {
module: "currency",
getCurrencyList: {
id: 12801,
type: 1,
request: null,
response: "bag.CurrencyList",
log: 0,
desc: "获取货币信息"
},
updateCurrencyList: {
id: 12961,
type: 2,
response: "bag.CurrencyList",
log: 0,
desc: "更新货币信息（只更新改变了的货币）"
}
};
s.Currency = M_Currency;
window.M_Gun = {
module: "gun",
getGunInfo: {
id: 13057,
type: 1,
request: null,
response: "gun.GunInfo",
log: 0,
desc: "获取炮台信息"
},
forge: {
id: 13058,
type: 1,
request: "boolean",
response: "gun.ForgeInfo",
log: 0,
desc: "锻造"
},
updateGunList: {
id: 13217,
type: 2,
response: "gun.GunInfo",
log: 0,
desc: "更新炮台信息（只更新改变了的炮台）"
}
};
s.Gun = M_Gun;
window.M_VIP = {
module: "vip",
getInfo: {
id: 16385,
type: 1,
response: "vip.VipInfo",
log: 0,
desc: "获取vip信息"
},
getAward: {
id: 16386,
type: 1,
request: "integer",
response: "vip.VipInfo",
log: 0,
desc: "领取奖励"
},
getDailyAward: {
id: 16387,
type: 1,
request: null,
response: "vip.DailyAward",
log: 0,
desc: "领取每日奖励"
},
activate: {
id: 16388,
type: 1,
request: null,
response: "vip.VipInfo",
log: 0,
desc: "激活VIP"
},
onVipChange: {
id: 16545,
type: 2,
response: "vip.VipInfo",
log: 0,
desc: "vip信息改变"
}
};
s.M_VIP = M_VIP;
window.M_Shop = {
module: "shop",
getShopInfo: {
id: 16641,
type: 1,
response: "shop.ShopInfo",
log: 0,
desc: "获取超值商城"
},
getGiftInfoList: {
id: 16643,
type: 1,
response: "shop.GiftInfoList",
log: 0,
desc: "获取礼包剩余天数"
},
buyGoods: {
id: 16644,
type: 1,
request: "shop.BuyGoodsInfo",
response: null,
log: 0,
desc: "购买商品（非充值类）"
},
addOrder: {
id: 16645,
type: 1,
request: "shop.AddOrder",
response: "shop.OrderInfo",
log: 0,
desc: "下订单（充值类）"
},
onChargeSuccess: {
id: 16801,
type: 2,
response: "shop.ChargeInfo",
log: 0,
desc: "充值成功"
},
onSale: {
id: 16802,
type: 2,
response: "shop.SaleInfo",
log: 0,
desc: "同步商场特卖信息"
}
};
s.Shop = M_Shop;
window.M_Misc = {
module: "misc",
getMiscOnlineInfo: {
id: 16898,
type: 1,
request: null,
response: "misc.MiscOnlineList",
log: 2,
desc: "获得兑换码在线任务"
},
getMiscOnlineAward: {
id: 16899,
type: 1,
request: "misc.AwardRequest",
response: "misc.MiscOnlineAward",
log: 2,
desc: "兑换码在线任务奖励"
}
};
s.Misc = M_Misc;
window.M_FishVIP = {
module: "fish_vip",
getInfo: {
id: 17153,
type: 1,
response: "fish_vip.VipInfo",
log: 0,
desc: "获取vip信息"
},
getAward: {
id: 17154,
type: 1,
request: "integer",
response: "fish_vip.VipInfo",
log: 0,
desc: "领取奖励"
},
onVipChange: {
id: 17313,
type: 2,
response: "fish_vip.VipInfo",
log: 0,
desc: "vip信息改变"
},
onSupplementGold: {
id: 17314,
type: 2,
response: "integer",
log: 0,
desc: "补足金币通知"
}
};
s.M_FishVIP = M_FishVIP;
window.M_GameCenter = {
module: "game_center",
getPlayingStatus: {
id: 20481,
type: 1,
request: null,
response: "game_center.PlayingStatus",
log: 2,
desc: "获得玩家游戏状态"
},
startMatch: {
id: 20497,
type: 1,
request: "game_center.MatchRequest",
response: null,
log: 2,
desc: "匹配玩家"
},
unmatch: {
id: 20498,
type: 1,
request: null,
response: null,
log: 2,
desc: "取消匹配"
},
syncMatchSucc: {
id: 20500,
type: 2,
response: "game_center.PlayingStatus",
log: 0,
desc: "匹配成功"
},
syncMatchEnd: {
id: 20501,
type: 2,
response: "integer",
log: 0,
desc: "匹配结束"
},
syncMatching: {
id: 20502,
type: 2,
response: "integer",
log: 0,
desc: "匹配中"
}
};
s.GameCenter = M_GameCenter;
window.M_club = {
module: "club",
getAllClubs: {
id: 20737,
type: 1,
request: null,
response: "club.allClubs",
log: 0,
desc: "获取所有俱乐部信息"
},
createClub: {
id: 20738,
type: 1,
request: "club.createClub",
response: "club.clubInfo",
log: 0,
desc: "创建俱乐部"
},
searchClub: {
id: 20739,
type: 1,
request: "integer",
response: "club.clubInfo",
log: 0,
desc: "搜索俱乐部"
},
joinClub: {
id: 20740,
type: 1,
request: "integer",
response: "club.clubInfo",
log: 0,
desc: "加入俱乐部"
},
exitClub: {
id: 20741,
type: 1,
request: "integer",
response: "integer",
log: 0,
desc: "退出俱乐部"
},
kickMember: {
id: 20742,
type: 1,
request: "club.memberParam",
response: "club.memberParam",
log: 0,
desc: "踢出俱乐部"
},
dismissClub: {
id: 20743,
type: 1,
request: "integer",
response: "integer",
log: 0,
desc: "解散俱乐部"
},
getClubMembers: {
id: 20744,
type: 1,
request: "integer",
response: "club.memberList",
log: 0,
desc: "获取俱乐部成员列表信息"
},
getClubGames: {
id: 20745,
type: 1,
request: "integer",
response: "club.gameList",
log: 0,
desc: "获取俱乐部所有牌局信息"
},
createClubGame: {
id: 20746,
type: 1,
request: "club.createRoom",
response: "ddz.DeskInfo",
log: 0,
desc: "创建俱乐部牌局"
},
getClubApplicants: {
id: 20747,
type: 1,
request: "integer",
response: "club.memberList",
log: 0,
desc: "获取俱乐部申请列表"
},
approveMember: {
id: 20748,
type: 1,
request: "club.approveParam",
response: "club.approveParam",
log: 0,
desc: "批准加入俱乐部"
},
enterClubGame: {
id: 20749,
type: 1,
request: "club.enterClubGame",
response: "ddz.DeskInfo",
log: 0,
desc: "进入俱乐部游戏"
},
upgradeClub: {
id: 20750,
type: 1,
request: "integer",
response: null,
log: 0,
desc: "升级俱乐部"
},
updateClubCheckId: {
id: 20752,
type: 1,
request: "club.checkInfo",
response: "club.checkInfo",
log: 0,
desc: "更新俱乐部审核条件"
},
contributeClub: {
id: 20753,
type: 1,
request: "club.contributeInfo",
response: "club.contributeInfo",
log: 0,
desc: "贡献俱乐部"
},
quickApprove: {
id: 20754,
type: 1,
request: "integer",
response: null,
log: 0,
desc: "一键批准加入俱乐部"
},
updateIntroduction: {
id: 20755,
type: 1,
request: "club.introductionInfo",
response: "club.introductionInfo",
log: 0,
desc: "更新俱乐部简介"
},
syncUserJoin: {
id: 20896,
type: 2,
response: "club.clubInfo",
log: 0,
desc: "玩家进入俱乐部"
},
syncDismissClub: {
id: 20897,
type: 2,
response: "club.dismissClub",
log: 0,
desc: "解散俱乐部通知"
},
syncFundInfo: {
id: 20898,
type: 2,
response: "club.fundInfo",
log: 0,
desc: "俱乐部基金通知"
}
};
s.club = M_club;
window.M_union = {
module: "union",
getUnionList: {
id: 20993,
type: 1,
request: null,
response: "union.unionList",
log: 0,
desc: "获取所有公会信息"
},
createUnion: {
id: 20994,
type: 1,
request: "union.createUnion",
response: "union.unionInfo",
log: 0,
desc: "创建公会"
},
searchUnion: {
id: 20995,
type: 1,
request: "integer",
response: "union.unionInfo",
log: 0,
desc: "搜索公会"
},
joinUnion: {
id: 20996,
type: 1,
request: "union.JoinInfo",
response: "union.unionInfo",
log: 0,
desc: "加入公会"
},
exitUnion: {
id: 20997,
type: 1,
request: "integer",
response: "integer",
log: 0,
desc: "退出公会"
},
kickMember: {
id: 20998,
type: 1,
request: "union.memberParam",
response: "union.memberParam",
log: 0,
desc: "踢出公会"
},
dismissUnion: {
id: 20999,
type: 1,
request: "integer",
response: "integer",
log: 0,
desc: "解散公会"
},
getUnionMembers: {
id: 21e3,
type: 1,
request: "integer",
response: "union.memberList",
log: 0,
desc: "获取公会成员列表信息"
},
getUnionGames: {
id: 21001,
type: 1,
request: "integer",
response: "union.gameList",
log: 0,
desc: "获取公会游戏房间"
},
getUnionApplicants: {
id: 21003,
type: 1,
request: "integer",
response: "union.memberList",
log: 0,
desc: "获取公会申请列表"
},
approveMember: {
id: 21004,
type: 1,
request: "union.approveParam",
response: "union.approveParam",
log: 0,
desc: "批准加入公会"
},
enterUnionGame: {
id: 21005,
type: 1,
request: "union.roomInfo",
response: "catch_fish.RoomInfo",
log: 0,
desc: "进入公会游戏"
},
upgradeUnion: {
id: 21006,
type: 1,
request: "integer",
response: null,
log: 0,
desc: "升级公会"
},
getUnionInfo: {
id: 21008,
type: 1,
request: null,
response: "union.unionInfo",
log: 0,
desc: "获取我的公会信息"
},
upUnionMaxMember: {
id: 21009,
type: 1,
request: "union.upMemberCountInfo",
response: "integer",
log: 0,
desc: "升级公会最大人数"
},
updateIntroduction: {
id: 21011,
type: 1,
request: "union.introductionInfo",
response: "union.introductionInfo",
log: 0,
desc: "更新公会简介"
},
updateUnionAvatar: {
id: 21012,
type: 1,
request: "union.unionAvatarInfo",
response: "union.unionAvatarInfo",
log: 0,
desc: "更新公会头像"
},
getUnionScoreInfo: {
id: 21013,
type: 1,
request: "union.middlemanInfo",
response: "union.unionScoreInfo",
log: 0,
desc: "获取公会积分信息"
},
settingMembershipLevel: {
id: 21014,
type: 1,
request: "union.membershipLevelInfo",
response: null,
log: 0,
desc: "设置会员等级"
},
inputInvitationCode: {
id: 21015,
type: 1,
request: "string",
response: "union.unionInfo",
log: 0,
desc: "输入邀请码"
},
getUnionInfoByCode: {
id: 21016,
type: 1,
request: "string",
response: "union.unionInfo",
log: 0,
desc: "根据邀请码获取工会信息"
},
searchUnionMember: {
id: 21017,
type: 1,
request: "union.memberParam",
response: "union.memberInfo",
log: 0,
desc: "搜索工会成员"
},
getUnionWarehouse: {
id: 21018,
type: 1,
request: null,
response: "union.warehouseItemList",
log: 0,
desc: "获取工会仓库物品"
},
putIntoUnionWarehouse: {
id: 21019,
type: 1,
request: "union.putIntoInfo",
response: "union.warehouseItem",
log: 0,
desc: "放入公会仓库"
},
takeOutUnionWarehouse: {
id: 21020,
type: 1,
request: "union.takeOutInfo",
response: "union.warehouseItem",
log: 0,
desc: "从工会中仓库取出"
},
getUnionWarehouseRecord: {
id: 21021,
type: 1,
request: "union.recordParam",
response: "union.takeRecordList",
log: 0,
desc: "仓库存取日志"
},
getWarehouseRedPoint: {
id: 21022,
type: 1,
request: null,
response: null,
log: 0,
desc: "获取工会红点"
},
getLatelyRecord: {
id: 21024,
type: 1,
request: null,
response: "union.latelyRecordList",
log: 0,
desc: "仓库放入日志"
},
getPutinRemainCount: {
id: 21025,
type: 1,
request: "union.putIntoInfo",
response: "union.putInRemain",
log: 0,
desc: "获取放入剩余数量"
},
getTakeRemainCount: {
id: 21026,
type: 1,
request: "integer",
response: "integer",
log: 0,
desc: "获取取出剩余数量"
},
getUnionApplyRecord: {
id: 21027,
type: 1,
request: "integer",
response: "union.ApplyRecord",
log: 0,
desc: "获取申请记录"
},
syncUserJoin: {
id: 21152,
type: 2,
response: "union.unionInfo",
log: 0,
desc: "玩家进入公会"
},
syncDismissUnion: {
id: 21153,
type: 2,
response: "union.dismissUnion",
log: 0,
desc: "解散公会通知"
},
syncMyContribution: {
id: 21154,
type: 2,
response: "union.myContribution",
log: 0,
desc: "同步公会贡献信息"
},
syncMembershipLevel: {
id: 21155,
type: 2,
response: "integer",
log: 0,
desc: "同步会员等级"
},
syncWarehouseRedPoint: {
id: 21156,
type: 2,
response: "union.RedPoint",
log: 0,
desc: "工会仓库红点"
}
};
s.union = M_union;
window.M_Ddz = {
module: "ddz",
getLobbyInfo: {
id: 24577,
type: 1,
response: "ddz.LobbyInfo",
log: 0,
desc: "获得斗地主大厅数据"
},
getRoomInfo: {
id: 24578,
type: 1,
request: null,
response: "ddz.DeskInfo",
log: 0,
desc: "获得游戏信息"
},
enterRoom: {
id: 24579,
type: 1,
request: "ddz.EnterInfo",
response: "ddz.DeskInfo",
log: 0,
desc: "进入房间（房间类型和房间ID二选一）"
},
leaveRoom: {
id: 24580,
type: 1,
request: null,
response: null,
log: 0,
desc: "离开房间"
},
changeRoom: {
id: 24581,
type: 1,
request: "integer",
response: "ddz.DeskInfo",
log: 0,
desc: "更换房间"
},
ready: {
id: 24593,
type: 1,
request: null,
response: null,
log: 0,
desc: "准备"
},
callScore: {
id: 24594,
type: 1,
request: "integer",
response: null,
log: 0,
desc: "叫分"
},
double: {
id: 24595,
type: 1,
request: "integer",
response: null,
log: 0,
desc: "加倍"
},
bright: {
id: 24596,
type: 1,
request: null,
response: null,
log: 0,
desc: "明牌"
},
outCard: {
id: 24597,
type: 1,
request: "ddz.CardList",
response: null,
log: 0,
desc: "出牌"
},
trusteeship: {
id: 24598,
type: 1,
request: "boolean",
response: null,
log: 0,
desc: "托管"
},
passCard: {
id: 24599,
type: 1,
request: null,
response: null,
log: 0,
desc: "不出"
},
callBanker: {
id: 24600,
type: 1,
request: "boolean",
response: null,
log: 0,
desc: "是否叫地主"
},
getOutCardRecord: {
id: 24601,
type: 1,
request: null,
response: "ddz.CardList",
log: 0,
desc: "获取出牌记录(记牌器)"
},
syncPlayerEnter: {
id: 24737,
type: 2,
response: "ddz.DDZPlayer",
log: 0,
desc: "玩家进入房间"
},
syncPlayerLeave: {
id: 24738,
type: 2,
response: "ddz.userLeave",
log: 0,
desc: "玩家离开房间"
},
syncReady: {
id: 24739,
type: 2,
response: "integer",
log: 0,
desc: "同步准备信息"
},
syncCallScore: {
id: 24740,
type: 2,
response: "ddz.CallScore",
log: 0,
desc: "同步叫分信息"
},
syncDouble: {
id: 24741,
type: 2,
response: "ddz.Double",
log: 0,
desc: "同步加倍信息"
},
syncBright: {
id: 24742,
type: 2,
response: "ddz.HandCards",
log: 0,
desc: "同步明牌信息"
},
syncOutCardsInfo: {
id: 24743,
type: 2,
response: "ddz.OutCardsInfo",
log: 0,
desc: "同步出牌信息"
},
syncTrusteeship: {
id: 24744,
type: 2,
response: "ddz.Trusteeship",
log: 0,
desc: "同步托管信息"
},
syncPassCard: {
id: 24745,
type: 2,
response: "ddz.PassCardInfo",
log: 0,
desc: "同步过牌信息"
},
syncGameStart: {
id: 24746,
type: 2,
response: "ddz.GameStart",
log: 0,
desc: "同步游戏开始信息"
},
syncMultipleInfo: {
id: 24747,
type: 2,
response: "integer",
log: 0,
desc: "同步倍数信息"
},
syncCardRecorder: {
id: 24748,
type: 2,
response: "ddz.CardList",
log: 0,
desc: "同步记牌器"
},
syncCountingInfo: {
id: 24749,
type: 2,
response: "ddz.CountingInfo",
log: 0,
desc: "同步结算信息"
},
syncBankerInfo: {
id: 24750,
type: 2,
response: "ddz.BankerInfo",
log: 0,
desc: "同步庄家（地主）信息"
},
syncNoticOutCard: {
id: 24751,
type: 2,
response: "ddz.NoticOutCard",
log: 0,
desc: "通知玩家出牌"
},
syncOutCard: {
id: 24752,
type: 2,
response: "ddz.OutCard",
log: 0,
desc: "同步出牌"
},
syncLastCardInfo: {
id: 24753,
type: 2,
response: "ddz.LastCardInfo",
log: 0,
desc: "同步最后牌桌信息"
},
syncPlayerCurrency: {
id: 24754,
type: 2,
response: "ddz.PlayerCurrency",
log: 0,
desc: "同步玩家货币"
},
syncPlayerInfo: {
id: 24755,
type: 2,
response: "ddz.PlayerInfo",
log: 0,
desc: "同步玩家信息"
},
syncGameStatus: {
id: 24756,
type: 2,
response: "integer",
log: 0,
desc: "同步游戏状态"
},
syncCallBanker: {
id: 24757,
type: 2,
response: "ddz.CallBanker",
log: 0,
desc: "同步玩家叫地主"
},
syncMultiple: {
id: 24758,
type: 2,
response: "ddz.MultipleList",
log: 0,
desc: "同步玩家倍数信息"
},
syncRoomFeels: {
id: 24759,
type: 2,
response: "string",
log: 0,
desc: "同步房间抽水/手续费"
},
syncTreasureCountingResult: {
id: 24760,
type: 2,
response: "snatch_treasure.CountingResult",
log: 0,
desc: "同步夺宝结算信息"
}
};
s.Ddz = M_Ddz;
window.M_Prix = {
module: "prix",
getPrixListInfo: {
id: 24833,
type: 1,
request: null,
response: "prix.prixListInfo",
log: 0,
desc: "获取大奖赛所有比赛信息"
},
signUp: {
id: 24834,
type: 1,
request: "integer",
response: "integer",
log: 0,
desc: "大奖赛报名,参数是大奖赛ID"
},
unSignUp: {
id: 24835,
type: 1,
request: "integer",
response: "integer",
log: 0,
desc: "大奖赛取消报名,参数是大奖赛ID"
},
syncPrixInfo: {
id: 24992,
type: 2,
response: "prix.prixInfo",
log: 0,
desc: "大奖赛开赛信息"
},
syncWaitEnd: {
id: 24993,
type: 2,
response: "prix.WaitEnd",
log: 0,
desc: "同步等待结束"
},
syncGameReady: {
id: 24994,
type: 2,
response: "prix.GameReady",
log: 0,
desc: "同步游戏准备"
},
syncGameReslut: {
id: 24995,
type: 2,
response: "prix.GameReslut",
log: 0,
desc: "同步游戏结果"
},
syncGameAward: {
id: 24996,
type: 2,
response: "prix.GameAward",
log: 0,
desc: "同步游戏奖品信息"
}
};
s.prix = M_Prix;
window.M_SnatchTreasure = {
module: "snatch_treasure",
getTreasureInfo: {
id: 25089,
type: 1,
request: null,
response: "snatch_treasure.TreasureInfo",
log: 0,
desc: "获取夺宝赛信息"
},
startMatch: {
id: 25090,
type: 1,
request: null,
response: null,
log: 0,
desc: "夺宝赛匹配"
},
stopMatch: {
id: 25091,
type: 1,
request: null,
response: null,
log: 0,
desc: "夺宝赛取消匹配 "
},
buyTciket: {
id: 25092,
type: 1,
request: null,
response: "integer",
log: 0,
desc: "购买夺宝赛次数"
},
getLastAnnouncedResult: {
id: 25093,
type: 1,
request: null,
response: "snatch_treasure.AnnouncedResult",
log: 0,
desc: "获取上一次夺宝赛开奖结果"
},
syncMatching: {
id: 25249,
type: 2,
response: "integer",
log: 0,
desc: "同步匹配中"
},
syncMatchEnd: {
id: 25250,
type: 2,
response: "integer",
log: 0,
desc: "同步匹配结束"
},
syncAnnouncedResult: {
id: 25251,
type: 2,
response: "snatch_treasure.AnnouncedResult",
log: 0,
desc: "同步夺宝赛开奖结果"
}
};
s.snatch_treasure = M_SnatchTreasure;
window.M_CatchFish = {
module: "catch_fish",
getInfo: {
id: 28673,
type: 1,
request: null,
response: "catch_fish.CathFishInfo",
log: 2,
desc: "捕鱼信息"
},
getFishLevelAward: {
id: 28674,
type: 1,
request: "integer",
log: 2,
desc: "领取捕鱼等级奖励"
},
getGunLevelAward: {
id: 28675,
type: 1,
request: "string",
response: "catch_fish.CathFishInfo",
log: 2,
desc: "领取炮倍等级奖励"
},
randomGoldFishAward: {
id: 28677,
type: 1,
request: "integer",
response: "integer",
log: 2,
desc: "获得黄金鱼奖励"
},
getGunLevelBoxAward: {
id: 28678,
type: 1,
request: "integer",
response: "catch_fish.CathFishInfo",
log: 2,
desc: "领取炮倍等级宝箱奖励"
},
enterRoom: {
id: 28689,
type: 1,
request: "catch_fish.EnterInfo",
response: "catch_fish.RoomInfo",
log: 2,
desc: "进入捕鱼房间"
},
leaveRoom: {
id: 28690,
type: 1,
request: null,
response: null,
log: 0,
desc: "离开"
},
getRoomList: {
id: 28691,
type: 1,
request: "integer",
response: "catch_fish.RoomList",
log: 2,
desc: "获取房间列表"
},
fire: {
id: 28705,
type: 1,
request: "catch_fish.FireRequest",
response: "catch_fish.FireInfo",
log: 0,
desc: "开炮"
},
hit: {
id: 28706,
type: 1,
request: "catch_fish.HitRequest",
response: null,
log: 0,
desc: "命中"
},
aim: {
id: 28707,
type: 1,
request: "catch_fish.AimInfo",
response: null,
log: 0,
desc: "瞄准"
},
stopAim: {
id: 28708,
type: 1,
request: null,
response: null,
log: 0,
desc: "停止瞄准"
},
updateGun: {
id: 28709,
type: 1,
request: "catch_fish.UpdateGunInfo",
response: null,
log: 0,
desc: "更换炮倍数"
},
robotHit: {
id: 28710,
type: 1,
request: "catch_fish.HitRequest",
log: 0,
desc: "机器人命中通知信息"
},
crazy: {
id: 28721,
type: 1,
request: "integer",
response: null,
log: 0,
desc: "进入狂暴状态"
},
freeze: {
id: 28722,
type: 1,
request: null,
response: null,
log: 0,
desc: "冰冻"
},
shenDeng: {
id: 28723,
type: 1,
request: null,
response: null,
log: 0,
desc: "神灯"
},
haoJiao: {
id: 28724,
type: 1,
request: null,
response: null,
log: 0,
desc: "号角"
},
fanBei: {
id: 28725,
type: 1,
request: null,
response: null,
log: 0,
desc: "翻倍"
},
exchangeColor: {
id: 28737,
type: 1,
request: "integer",
response: "bag.ItemList",
log: 0,
desc: "花色兑换"
},
openLongWangBox: {
id: 28738,
type: 1,
request: null,
response: "catch_fish.LongWangBox",
log: 0,
desc: "开启龙王宝箱"
},
takeAwayLongWangBox: {
id: 28739,
type: 1,
request: null,
response: "bag.ItemList",
log: 0,
desc: "取走龙王宝箱"
},
startJuShouDuiJue: {
id: 28740,
type: 1,
request: "integer",
response: "catch_fish.JuShouDuiJueInfo",
log: 0,
desc: "开始巨兽对决"
},
endJuShouDuiJue: {
id: 28741,
type: 1,
request: null,
response: "bag.ItemList",
log: 0,
desc: "结束巨兽对决"
},
startCaiQuan: {
id: 28742,
type: 1,
request: null,
response: "catch_fish.CaiQuanInfo",
log: 0,
desc: "开始猜拳"
},
endCaiQuan: {
id: 28743,
type: 1,
request: null,
response: "bag.ItemList",
log: 0,
desc: "结束猜拳"
},
startZaJinDan: {
id: 28744,
type: 1,
request: "integer",
response: "catch_fish.ZaJinDanInfo",
log: 0,
desc: "开始砸金蛋"
},
endZaJinDan: {
id: 28745,
type: 1,
request: null,
response: "bag.ItemList",
log: 0,
desc: "结束砸金蛋"
},
startSanGuo: {
id: 28746,
type: 1,
request: "integer",
response: "catch_fish.SanGuoInfo",
log: 0,
desc: "开始三国征战"
},
endSanGuo: {
id: 28747,
type: 1,
request: null,
response: "bag.ItemList",
log: 0,
desc: "结束三国征战"
},
startPangXie: {
id: 28748,
type: 1,
request: "integer",
response: "catch_fish.PangXieInfo",
log: 0,
desc: "开始宝藏螃蟹"
},
endPangXie: {
id: 28749,
type: 1,
request: null,
response: "bag.ItemList",
log: 0,
desc: "结束宝藏螃蟹"
},
startShanCai: {
id: 28750,
type: 1,
request: "integer",
response: "catch_fish.ShanCaiInfo",
log: 0,
desc: "开始善财童子"
},
endShanCai: {
id: 28751,
type: 1,
request: null,
response: "bag.ItemList",
log: 0,
desc: "结束善财童子"
},
startQiLinBaoDian: {
id: 28752,
type: 1,
request: "catch_fish.QiLinBaoDianTarge",
response: "catch_fish.QiLinBaoDianInfo",
log: 0,
desc: "开始麒麟爆点"
},
endQiLinBaoDian: {
id: 28753,
type: 1,
request: "catch_fish.QiLinBaoDianTarge",
response: "catch_fish.QiLinBaoDianInfo",
log: 0,
desc: "结束麒麟爆点"
},
launchRocketBit: {
id: 28754,
type: 1,
request: "catch_fish.BitLaunchInfo",
response: null,
log: 0,
desc: "发射火箭钻头"
},
rocketBitHit: {
id: 28755,
type: 1,
request: "catch_fish.HitRequest",
response: null,
log: 0,
desc: "火箭钻头命中"
},
syncGoldFishInfo: {
id: 31233,
type: 2,
response: "catch_fish.GoldFishInfo",
log: 0,
desc: "同步黄金鱼信息"
},
syncTianJiangInfo: {
id: 31234,
type: 2,
response: "catch_fish.TianJiangInfo",
log: 2,
desc: "更新天降爆发金信息"
},
handleFishBorn: {
id: 31249,
type: 2,
response: "catch_fish.FishBornInfo",
log: 0,
desc: "鱼群进入"
},
handleFishStrikes: {
id: 31250,
type: 2,
response: "catch_fish.FishStrikesInfo",
log: 0,
desc: "鱼群来袭"
},
handleFishChange: {
id: 31251,
type: 2,
response: "catch_fish.FishChangeInfo",
log: 0,
desc: "更新鱼的信息"
},
handlePlayerEnter: {
id: 31265,
type: 2,
response: "catch_fish.Player",
log: 0,
desc: "玩家进入房间"
},
handlePlayerLeave: {
id: 31266,
type: 2,
response: "integer",
log: 0,
desc: "玩家离开房间"
},
handlePlayerInfoUpdate: {
id: 31267,
type: 2,
response: "catch_fish.Player",
log: 0,
desc: "更新玩家信息"
},
handlePlayerItemUpdate: {
id: 31268,
type: 2,
response: "catch_fish.UpdatePlayerItem",
log: 0,
desc: "其他玩家金币更新（捕鱼场外导致金币变化，全量更新）"
},
handleKickOutPlayer: {
id: 31269,
type: 2,
log: 0,
desc: "玩家被踢出房间"
},
handleFire: {
id: 31281,
type: 2,
response: "catch_fish.FireInfo",
log: 0,
desc: "开炮通知信息"
},
handleHit: {
id: 31282,
type: 2,
response: "catch_fish.HitInfo",
log: 0,
desc: "命中通知信息"
},
handleAim: {
id: 31283,
type: 2,
response: "catch_fish.AimInfo",
log: 0,
desc: "瞄准通知信息"
},
handleStopAim: {
id: 31284,
type: 2,
response: "integer",
log: 0,
desc: "停止瞄准"
},
handleUpdateGun: {
id: 31285,
type: 2,
response: "catch_fish.UpdateGunInfo",
log: 0,
desc: "更换炮通知信息"
},
syncLongWangBoxInfo: {
id: 31286,
type: 2,
response: "catch_fish.LongWangBox",
log: 0,
desc: "同步龙王宝箱信息"
},
syncJuShouDuiJueInfo: {
id: 31287,
type: 2,
response: "catch_fish.JuShouDuiJueInfo",
log: 0,
desc: "同步巨兽对决信息"
},
syncCaiQuanInfo: {
id: 31288,
type: 2,
response: "catch_fish.CaiQuanInfo",
log: 0,
desc: "同步猜拳信息"
},
syncZaJinDanInfo: {
id: 31289,
type: 2,
response: "catch_fish.ZaJinDanInfo",
log: 0,
desc: "同步砸金蛋信息"
},
syncSanGuoInfo: {
id: 31290,
type: 2,
response: "catch_fish.SanGuoInfo",
log: 0,
desc: "同步三国征战信息"
},
syncPangXieInfo: {
id: 31291,
type: 2,
response: "catch_fish.PangXieInfo",
log: 0,
desc: "同步宝藏螃蟹信息"
},
syncCompetitionInfo: {
id: 31292,
type: 2,
response: "catch_fish.CompetitionInfo",
log: 0,
desc: "同步竞赛结算信息"
},
syncCompetitionScore: {
id: 31293,
type: 2,
response: "catch_fish.ScoreInfo",
log: 0,
desc: "同步竞赛积分"
},
syncShanCaiInfo: {
id: 31294,
type: 2,
response: "catch_fish.ShanCaiInfo",
log: 0,
desc: "同步宝藏螃蟹信息"
},
syncQiLinBaoDian: {
id: 31295,
type: 2,
response: "catch_fish.QiLinBaoDianInfo",
log: 0,
desc: "同步麒麟爆点信息"
},
handleStartCrazy: {
id: 31296,
type: 2,
response: "catch_fish.CrazyInfo",
log: 0,
desc: "开始狂暴状态"
},
handleStopCrazy: {
id: 31297,
type: 2,
response: "integer",
log: 0,
desc: "停止狂暴状态"
},
handleFreeze: {
id: 31298,
type: 2,
response: "catch_fish.FreezeInfo",
log: 0,
desc: "冰冻事件"
},
handleUnfreeze: {
id: 31299,
type: 2,
response: null,
log: 0,
desc: "解冻事件"
},
handleHaoJiao: {
id: 31300,
type: 2,
response: "integer",
log: 0,
desc: "号角事件"
},
handleFanBei: {
id: 31301,
type: 2,
response: "catch_fish.FanBeiInfo",
log: 0,
desc: "翻倍事件"
},
syncRewardTask: {
id: 31302,
type: 2,
response: "catch_fish.RewardTaskData",
log: 0,
desc: "同步悬赏任务数据"
}
};
s.CatchFish = M_CatchFish;
window.M_Pinshi = {
module: "pinshi",
getLobbyInfo: {
id: 32770,
type: 1,
response: "niuniu.LobbyInfo",
log: 0,
desc: "获得牛牛大厅数据"
},
enterRoom: {
id: 32771,
type: 1,
request: "niuniu.EnterInfo",
response: "niuniu.RoomInfo",
log: 0,
desc: "进入房间（房间类型和房间ID二选一）"
},
leaveRoom: {
id: 32772,
type: 1,
request: null,
response: null,
log: 0,
desc: "离开房间"
},
changeRoom: {
id: 32773,
type: 1,
request: "integer",
response: "niuniu.RoomInfo",
log: 0,
desc: "更换房间"
},
getRecord: {
id: 32774,
type: 1,
request: null,
response: "niuniu.RecordInfoList",
log: 0,
desc: "获得走势图"
},
getPlayerList: {
id: 32775,
type: 1,
request: null,
response: "niuniu.PlayerList",
log: 0,
desc: "获得玩家列表"
},
getDealerList: {
id: 32776,
type: 1,
request: null,
response: "niuniu.DealerList",
log: 0,
desc: "获得庄家列表"
},
deal: {
id: 32777,
type: 1,
request: "integer",
response: null,
log: 0,
desc: "上庄"
},
unDeal: {
id: 32778,
type: 1,
request: null,
response: null,
log: 0,
desc: "取消上庄"
},
wager: {
id: 32779,
type: 1,
request: "niuniu.WagerInfo",
response: "niuniu.CurrencyInfo",
log: 0,
desc: "下注"
},
sitDown: {
id: 32780,
type: 1,
request: "integer",
response: null,
log: 0,
desc: "坐下"
},
standUp: {
id: 32781,
type: 1,
request: null,
response: null,
log: 0,
desc: "站起"
},
getPoolInfo: {
id: 32782,
type: 1,
request: null,
response: "niuniu.PoolInfo",
log: 0,
desc: "获取奖池信息"
},
addDealerDeposit: {
id: 32783,
type: 1,
request: "integer",
response: null,
log: 0,
desc: "追加庄家押金"
},
syncStatusInfo: {
id: 32929,
type: 2,
response: "niuniu.StatusInfo",
log: 0,
desc: "同步状态信息"
},
syncSeatInfo: {
id: 32930,
type: 2,
response: "niuniu.SeatInfo",
log: 0,
desc: "同步座位信息"
},
syncBetInfo: {
id: 32931,
type: 2,
response: "niuniu.PlayerBetList",
log: 2,
desc: "同步赌注信息"
},
syncCountingInfo: {
id: 32932,
type: 2,
response: "niuniu.CountingInfo",
log: 2,
desc: "同步结算信息"
},
syncOpenCard: {
id: 32933,
type: 2,
response: "niuniu.SplittingInfo",
log: 2,
desc: "同步开牌信息"
},
syncRotationDeal: {
id: 32934,
type: 2,
response: "niuniu.NiuNiuPlayer",
log: 2,
desc: "同步轮换庄家"
},
syncPlayerEnter: {
id: 32935,
type: 2,
response: "niuniu.NiuNiuPlayer",
log: 2,
desc: "同步玩家进入"
},
syncPlayerExit: {
id: 32936,
type: 2,
response: "niuniu.ExitInfo",
log: 2,
desc: "同步玩家退出"
},
syncOpenPool: {
id: 32937,
type: 2,
response: "niuniu.OpenPoolData",
log: 2,
desc: "同步奖池开奖"
},
syncShowCurrency: {
id: 32938,
type: 2,
response: "niuniu.ShowCurrencyInfo",
log: 2,
desc: "同步显示货币信息"
},
syncDealerDeposit: {
id: 32939,
type: 2,
response: "integer",
log: 2,
desc: "同步庄上货币"
},
syncStandupReason: {
id: 32940,
type: 2,
response: "integer",
log: 2,
desc: "同步个人站起原因"
}
};
s.Pinshi = M_Pinshi;
window.M_CountryWar = {
module: "country_war",
getLobbyInfo: {
id: 33026,
type: 1,
response: "niuniu.LobbyInfo",
log: 0,
desc: "获得牛牛大厅数据"
},
enterRoom: {
id: 33027,
type: 1,
request: "niuniu.EnterInfo",
response: "niuniu.RoomInfo",
log: 0,
desc: "进入房间（房间类型和房间ID二选一）"
},
leaveRoom: {
id: 33028,
type: 1,
request: null,
response: null,
log: 0,
desc: "离开房间"
},
changeRoom: {
id: 33029,
type: 1,
request: "integer",
response: "niuniu.RoomInfo",
log: 0,
desc: "更换房间"
},
getRecord: {
id: 33030,
type: 1,
request: null,
response: "niuniu.RecordInfoList",
log: 0,
desc: "获得走势图"
},
getPlayerList: {
id: 33031,
type: 1,
request: null,
response: "niuniu.PlayerList",
log: 0,
desc: "获得玩家列表"
},
getDealerList: {
id: 33032,
type: 1,
request: null,
response: "niuniu.DealerList",
log: 0,
desc: "获得庄家列表"
},
deal: {
id: 33033,
type: 1,
request: "integer",
response: null,
log: 0,
desc: "上庄"
},
unDeal: {
id: 33034,
type: 1,
request: null,
response: null,
log: 0,
desc: "取消上庄"
},
wager: {
id: 33035,
type: 1,
request: "niuniu.WagerInfo",
response: "niuniu.CurrencyInfo",
log: 0,
desc: "下注"
},
sitDown: {
id: 33036,
type: 1,
request: "integer",
response: null,
log: 0,
desc: "坐下"
},
standUp: {
id: 33037,
type: 1,
request: null,
response: null,
log: 0,
desc: "站起"
},
getPoolInfo: {
id: 33038,
type: 1,
request: null,
response: "niuniu.PoolInfo",
log: 0,
desc: "获取奖池信息"
},
addDealerDeposit: {
id: 33039,
type: 1,
request: "integer",
response: null,
log: 0,
desc: "追加庄家押金"
},
syncStatusInfo: {
id: 33185,
type: 2,
response: "niuniu.StatusInfo",
log: 0,
desc: "同步状态信息"
},
syncSeatInfo: {
id: 33186,
type: 2,
response: "niuniu.SeatInfo",
log: 0,
desc: "同步座位信息"
},
syncBetInfo: {
id: 33187,
type: 2,
response: "niuniu.PlayerBetList",
log: 2,
desc: "同步赌注信息"
},
syncCountingInfo: {
id: 33188,
type: 2,
response: "niuniu.CountingInfo",
log: 2,
desc: "同步结算信息"
},
syncOpenCard: {
id: 33189,
type: 2,
response: "niuniu.SplittingInfo",
log: 2,
desc: "同步开牌信息"
},
syncRotationDeal: {
id: 33190,
type: 2,
response: "niuniu.NiuNiuPlayer",
log: 2,
desc: "同步轮换庄家"
},
syncPlayerEnter: {
id: 33191,
type: 2,
response: "niuniu.NiuNiuPlayer",
log: 2,
desc: "同步玩家进入"
},
syncPlayerExit: {
id: 33192,
type: 2,
response: "niuniu.ExitInfo",
log: 2,
desc: "同步玩家退出"
},
syncOpenPool: {
id: 33193,
type: 2,
response: "niuniu.OpenPoolData",
log: 2,
desc: "同步奖池开奖"
},
syncShowCurrency: {
id: 33194,
type: 2,
response: "niuniu.ShowCurrencyInfo",
log: 2,
desc: "同步显示货币信息"
},
syncDealerDeposit: {
id: 33195,
type: 2,
response: "integer",
log: 2,
desc: "同步庄上货币"
},
syncStandupReason: {
id: 33196,
type: 2,
response: "integer",
log: 2,
desc: "同步个人站起原因"
}
};
s.CountryWar = M_CountryWar;
window.M_Fruit = {
module: "fruit",
getInfo: {
id: 36865,
type: 1,
request: null,
response: "fruit.TableInfo",
log: 0,
desc: "获得游戏信息"
},
start: {
id: 36866,
type: 1,
request: "fruit.WagerInfo",
response: "fruit.TableInfo",
log: 0,
desc: "转动水果机"
},
compare: {
id: 36867,
type: 1,
request: "fruit.CompareInfo",
response: "fruit.TableInfo",
log: 0,
desc: "比较大小"
}
};
s.Fruit = M_Fruit;
window.M_ShuiHu = {
module: "shui_hu",
start: {
id: 40961,
type: 1,
request: "shui_hu.StartInfo",
response: "shui_hu.TableInfo",
log: 0,
desc: "转动"
},
getRecord: {
id: 40962,
type: 1,
request: null,
response: "shui_hu.RecordList",
log: 0,
desc: "获得记录信息"
}
};
s.ShuiHu = M_ShuiHu;
window.M_Gemstone = {
module: "gemstone",
getGemstoneInfo: {
id: 45057,
type: 1,
request: "integer",
response: "gemstone.GemstoneInfo",
log: 0,
desc: "获取宝石迷城信息"
},
start: {
id: 45058,
type: 1,
request: "integer",
response: "gemstone.GemstoneZoneInfo",
log: 0,
desc: "开始宝石迷城"
},
eliminateGemstone: {
id: 45059,
type: 1,
request: "gemstone.EliminateGemstoneList",
response: "gemstone.EliminateGemstoneResult",
log: 0,
desc: "消除宝石"
},
eliminateBomb: {
id: 45060,
type: 1,
request: "gemstone.EliminateBombList",
response: "gemstone.EliminateBombResult",
log: 0,
desc: "消除炸弹"
},
getPassReward: {
id: 45061,
type: 1,
request: null,
response: "integer",
log: 0,
desc: "获取通关奖励"
},
getRewardRecord: {
id: 45062,
type: 1,
request: null,
response: "gemstone.RewardRecordList",
log: 0,
desc: "获取大奖记录"
},
handleProgress: {
id: 45312,
type: 2,
log: 0,
response: "gemstone.GemstoneInfo",
desc: "同步进度信息"
}
};
s.Gemstone = M_Gemstone;
window.M_Activity = {
module: "activity",
getRollInfo: {
id: 65793,
type: 1,
response: "activity.diskInfo",
log: 0,
desc: "获取转盘信息"
},
rollDisk: {
id: 65794,
type: 1,
response: "integer",
log: 2,
desc: "转转盘"
},
shareSuccess: {
id: 65795,
type: 1,
response: "activity.award",
log: 2,
desc: "分享成功"
},
getDailyRechargeInfo: {
id: 65796,
type: 1,
response: "activity.rechargeInfo",
log: 0,
desc: "获取每日累积充值活动信息"
},
getDailyRechargeAward: {
id: 65797,
type: 1,
request: "integer",
log: 2,
desc: "领取每日累积充值活动奖励"
},
getRoundRechargeInfo: {
id: 65798,
type: 1,
response: "activity.rechargeInfo",
log: 0,
desc: "获取一期累积充值活动信息"
},
getRoundRechargeAward: {
id: 65799,
type: 1,
request: "integer",
log: 2,
desc: "领取每日累积充值活动奖励"
},
getActivityTime: {
id: 65800,
type: 1,
response: "activity.timeInfo",
log: 0,
desc: "获取活动开启时间信息"
},
getRebateInfo: {
id: 65801,
type: 1,
request: "integer",
response: "activity.rebateInfo",
log: 0,
desc: "获取充值返利信息"
},
getRebateAward: {
id: 65802,
type: 1,
request: "activity.rebateAwardInfo",
log: 0,
desc: "领取返利奖励"
},
getTenThousandInfo: {
id: 65803,
type: 1,
response: "activity.tenThousandInfo",
log: 0,
desc: "获取万炮大作战信息"
},
receiveTenThousandAward: {
id: 65804,
type: 1,
response: null,
log: 0,
desc: "获取万炮大作战奖励"
},
getWholePeopleInfo: {
id: 65805,
type: 1,
request: null,
response: "activity.wholePeopleInfoList",
log: 0,
desc: "获取全民打卡信息"
},
wholePeopleSignUp: {
id: 65806,
type: 1,
request: "integer",
response: "activity.wholePeopleInfo",
log: 0,
desc: "全民打卡报名"
},
wholePeopleReceiveAward: {
id: 65807,
type: 1,
request: "integer",
response: "activity.wholePeopleInfo",
log: 0,
desc: "全民打卡签到领奖"
},
buyFreeItem: {
id: 65808,
type: 1,
request: "integer",
response: null,
log: 0,
desc: "全民大放送购买"
},
openCrazyBox: {
id: 65809,
type: 1,
request: "integer",
response: "activity.CrazyBoxAward",
log: 0,
desc: "开启疯狂宝箱"
},
handleDaySendAward: {
id: 65953,
type: 2,
log: 0,
desc: "自动发送每日奖励"
},
handleRoundSendAward: {
id: 65954,
type: 2,
log: 0,
desc: "自动发送没轮奖励"
},
handleRollInfoUpdate: {
id: 65955,
type: 2,
response: "activity.diskInfo",
log: 0,
desc: "装盘信息变更"
},
handleActivityTimeUpdate: {
id: 65956,
type: 2,
response: "activity.activityInfo",
log: 0,
desc: "活动时间变化"
},
handleTenThousandInfo: {
id: 65957,
type: 2,
response: "activity.tenThousandInfo",
log: 0,
desc: "自动发送每日奖励"
}
};
s.Activity = M_Activity;
window.M_SignIn = {
module: "sign_in",
getInfo: {
id: 66049,
type: 1,
request: null,
response: "sign_in.Info",
log: 0,
desc: "获取界面信息"
},
getAward: {
id: 66050,
type: 1,
request: "integer",
response: "sign_in.Info",
log: 2,
desc: "领取奖励"
},
openBox: {
id: 66051,
type: 1,
request: "integer",
response: "sign_in.Info",
log: 2,
desc: "开启签到宝箱"
}
};
s.SignIn = M_SignIn;
window.M_Broke = {
module: "broke",
getInfo: {
id: 66305,
type: 1,
request: "integer",
response: "integer",
log: 2,
desc: "获取已领取破产补助次数"
},
getAward: {
id: 66306,
type: 1,
request: "integer",
response: "integer",
log: 2,
desc: "领取破产补助，返回当前已经领取的破产补助次数"
}
};
s.Broke = M_Broke;
window.M_PrizeClaw = {
module: "prize_claw",
hold: {
id: 66561,
type: 1,
request: "prize_claw.holdInfo",
response: "prize_claw.holdResult",
log: 0,
desc: "抓娃娃"
},
syncHeldSucc: {
id: 66721,
type: 2,
response: "prize_claw.LuckyInfo",
log: 2,
desc: "抓娃娃信息广播"
}
};
s.PrizeClaw = M_PrizeClaw;
window.M_RedMoney = {
module: "red_money",
openBag: {
id: 66817,
type: 1,
response: "red_money.bagInfo",
log: 2,
desc: "玩家抢红包"
},
getActivityStatus: {
id: 66818,
type: 1,
response: "integer",
log: 0,
desc: "获取活动是否进行中"
},
handleStart: {
id: 66977,
type: 2,
log: 0,
desc: "抢红包活动开始"
},
handleEnd: {
id: 66978,
type: 2,
log: 0,
desc: "抢红包活动结束"
},
handleMoneySend: {
id: 66979,
type: 2,
log: 0,
desc: "系统红包发放"
}
};
s.RedMoney = M_RedMoney;
window.M_Fund = {
module: "fund",
getLuckyInfo: {
id: 67073,
type: 1,
request: "integer",
response: "fund.PrizeList",
log: 2,
desc: "获得幸运机物品列表"
},
join: {
id: 67074,
type: 1,
request: "fund.JoinInfo",
response: "fund.JoinResult",
log: 2,
desc: "参加夺宝"
},
getExchangeInfo: {
id: 67075,
type: 1,
request: "integer",
response: "fund.ExchangeList",
log: 2,
desc: "获取兑换商品信息"
},
exchangeGoods: {
id: 67076,
type: 1,
request: "fund.ExchangeData",
response: null,
log: 2,
desc: "兑换商品"
},
syncFundResultInfo: {
id: 67233,
type: 2,
request: null,
response: "fund.FundResultInfo",
log: 2,
desc: "同步开奖结果"
}
};
s.Fund = M_Fund;
window.M_LuckyBag = {
module: "lucky_bag",
getInfo: {
id: 67329,
type: 1,
response: "lucky_bag.info",
log: 0,
desc: "获取界面信息"
},
getGoodsRecords: {
id: 67330,
type: 1,
response: "lucky_bag.prizeRcord",
log: 0,
desc: "获取玩家实物记录"
},
open: {
id: 67331,
type: 1,
request: "integer",
response: "lucky_bag.awardInfo",
log: 2,
desc: "开福袋"
},
handleSysBagOpen: {
id: 67489,
type: 2,
response: "lucky_bag.record",
log: 0,
desc: "推送玩家开出系统记录"
}
};
s.LuckyBag = M_LuckyBag;
window.M_WishPool = {
module: "wish_pool",
getInfo: {
id: 67585,
type: 1,
response: "wish_pool.info",
log: 0,
desc: "获取界面信息"
},
getGoodsRecords: {
id: 67586,
type: 1,
response: "wish_pool.goodsRecord",
log: 0,
desc: "获取玩家实物记录"
},
makeWish: {
id: 67587,
type: 1,
request: "integer",
response: "wish_pool.awardInfo",
log: 2,
desc: "许愿"
}
};
s.WishPool = M_WishPool;
window.M_SevenDayTask = {
module: "seven_day_task",
getInfo: {
id: 67841,
type: 1,
response: "seven_day_task.Info",
log: 0,
desc: "获取界面信息"
}
};
s.SevenDayTask = M_SevenDayTask;
window.M_Disk = {
module: "disk",
getDiskCount: {
id: 68098,
type: 1,
request: "integer",
response: "integer",
log: 0,
desc: "获取转盘次数"
},
useDisk: {
id: 68099,
type: 1,
request: "integer",
response: "integer",
log: 0,
desc: "使用转盘"
},
danTouDisk: {
id: 68100,
type: 1,
request: "integer",
response: "disk.luckIndexList",
log: 0,
desc: "弹头夺宝"
},
syncRandomRedEnvelope: {
id: 68257,
type: 2,
response: "disk.RandomInfo",
log: 0,
desc: "同步随机红包券"
},
syncStopRedEnvelope: {
id: 68258,
type: 2,
response: null,
log: 0,
desc: "同步停止发送随机红包券"
},
syncDiskStatus: {
id: 68259,
type: 2,
response: "disk.DiskInfo",
log: 0,
desc: "同步红包转盘状态"
}
};
s.Disk = M_Disk;
window.M_FishSevenDayTask = {
module: "fish_seven_day_task",
getInfo: {
id: 68353,
type: 1,
response: "fish_seven_day_task.Info",
log: 0,
desc: "获取界面信息"
}
};
s.FishSevenDayTask = M_FishSevenDayTask;
window.M_Advertisement = {
module: "advertisement",
previewReward: {
id: 68609,
type: 1,
response: "advertisement.rewardInfo",
log: 0,
desc: "预览广告奖励"
},
activateReward: {
id: 68610,
type: 1,
response: "advertisement.rewardInfo",
log: 0,
desc: "激活广告奖励"
}
};
s.Advertisement = M_Advertisement;
window.M_FishSignIn = {
module: "fish_sign_in",
getInfo: {
id: 68865,
type: 1,
request: null,
response: "sign_in.Info",
log: 0,
desc: "获取界面信息"
},
getAward: {
id: 68866,
type: 1,
request: "integer",
response: "sign_in.Info",
log: 2,
desc: "领取奖励"
},
openBox: {
id: 68867,
type: 1,
request: "integer",
response: "sign_in.Info",
log: 2,
desc: "开启签到宝箱"
}
};
s.FishSignIn = M_FishSignIn;
window.M_PirateTreasure = {
module: "pirate_treasure",
getInfo: {
id: 69121,
type: 1,
request: null,
response: "pirate_treasure.Info",
log: 0,
desc: "获得海盗宝藏信息"
},
puzzle: {
id: 69122,
type: 1,
request: null,
response: "pirate_treasure.Info",
log: 2,
desc: "合成藏宝图"
},
hunt: {
id: 69123,
type: 1,
request: "integer",
response: "pirate_treasure.HuntInfo",
log: 2,
desc: "寻宝"
}
};
s.PirateTreasure = M_PirateTreasure;
window.M_OpenServiceActivity = {
module: "open_service_activity",
getActivityInfo: {
id: 69633,
type: 1,
request: null,
response: "open_service_activity.ActivityInfo",
log: 0,
desc: "获取开服活动信息"
},
getSignGifInfo: {
id: 69634,
type: 1,
response: "open_service_activity.onlineSignInfo",
log: 2,
desc: "开服赠礼信息"
},
getActivitySignAward: {
id: 69635,
type: 1,
response: "open_service_activity.awardInfo",
log: 2,
desc: "开服狂欢定时登录奖励"
},
hitGoldenEggs: {
id: 69636,
type: 1,
request: "integer",
response: "open_service_activity.awardInfo",
log: 2,
desc: "砸金蛋"
},
getChallengeInfo: {
id: 69637,
type: 1,
response: "open_service_activity.ChallengeList",
log: 2,
desc: "获取开服挑战信息"
},
getChallengeAward: {
id: 69638,
type: 1,
response: "open_service_activity.awardInfo",
log: 2,
desc: "领取开服挑战奖励"
},
getExchangeInfo: {
id: 69639,
type: 1,
response: "open_service_activity.ExchangeInfo",
log: 2,
desc: "获取开服兑换信息"
},
exchangeItems: {
id: 69640,
type: 1,
request: "integer",
response: "open_service_activity.awardInfo",
log: 2,
desc: "兑换物品"
},
getRechargeRebateInfo: {
id: 69641,
type: 1,
response: "open_service_activity.RechargeRebateInfo",
log: 2,
desc: "获取充值返利活动信息"
},
getRechargeRebateAward: {
id: 69642,
type: 1,
request: "integer",
response: "open_service_activity.awardInfo",
log: 2,
desc: "领取充值返利活动奖励"
},
handleActivityEnd: {
id: 69792,
type: 2,
response: null,
log: 2,
desc: "通知开服活动结束"
},
handleChallengeUpdate: {
id: 69793,
type: 2,
response: "open_service_activity.ChallengeList",
log: 2,
desc: "开服挑战更新"
},
handleSignGifInfo: {
id: 69794,
type: 2,
response: "open_service_activity.onlineSignInfo",
log: 2,
desc: "开服赠礼领取通知"
},
handleRechargeRebateAward: {
id: 69795,
type: 2,
response: "open_service_activity.RechargeRebateInfo",
log: 2,
desc: "充值返利领取通知"
}
};
s.M_OpenServiceActivity = M_OpenServiceActivity;
var n = {};
for (var o in s) if (s.hasOwnProperty(o)) {
var a = s[o];
for (var r in a) if (a.hasOwnProperty(r) && "module" != o && "service" != o) {
var l = a[r];
n[l.id] = {
id: l.id,
type: l.type,
request: l.request,
response: l.response,
module: a.module,
service: l.service || a.service,
name: o,
fullname: a.module + "." + r,
desc: l.desc || o,
log: l.log || PROTO_LOG.NONE
};
}
}
s.protos = n;
s.files = [ "base", "achievement", "activity", "advertisement", "auth", "bag", "catch_fish", "channel", "chat", "club", "counting", "ddz", "debug", "disk", "fish_seven_day_task", "fish_vip", "fruit", "fund", "game_center", "gemstone", "guide", "gun", "kefu", "lucky_bag", "mail", "marquee", "misc", "niuniu", "online_award", "pirate_treasure", "prix", "prize_claw", "progress", "red_money", "role", "seven_day_task", "shop", "shui_hu", "sign_in", "snatch_treasure", "statistics", "system_open", "task", "title", "union", "vip", "wish_pool", "open_service_activity" ];
var c = s;
i.default = c;
t.exports = i.default;
cc._RF.pop();
}, {} ],
rankingItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "15fdfy9mGxFNq6nuSWezGwm", "rankingItem");
var s = e("BaseComponent"), n = e("RankingConst");
cc.Class({
extends: s,
properties: {
nodeCurrency: cc.Node,
txtNum: cc.Label,
sprIcon: cc.Node,
nodeItems: cc.Node,
sprIcons: [ cc.Node ],
txtNums: [ cc.Node ],
txtRank: cc.Node,
txtName: cc.Label,
sprHead: cc.Node,
txtVip: cc.Node,
sprRank: cc.Node
},
onLoad: function() {
this.nodeCurrency.active = !1;
this.nodeItems.active = !1;
this.txtRank.active = !1;
this.sprRank.active = !1;
},
setData: function(e, t, i) {
var s = this;
this.txtRank.active = t >= 3;
this.sprRank.active = t < 3;
t < 3 ? SpriteUtils.setTexture({
path: "module/fish/texture/fishRank/hssl_icon_0" + (t + 1),
isHide: !0
}, this.sprRank, this) : this.txtRank.getComponent(cc.Label).string = t + 1;
this.txtName.string = (e.nickname || "").substring(0, 6);
this.nodeCurrency.active = !1;
this.nodeItems.active = !1;
if (i == n.RankType.Diamond) {
this.nodeCurrency.active = !0;
var o = NumberUtils.toString(Number(e.score), 2);
this.txtNum.string = o;
} else {
this.nodeItems.active = !0;
var a = {};
TypeUtils.isAllNull(e.display) || (a = JsonUtils.json2Data(e.display));
for (var r = a.itemList || [], l = function(e) {
var t = s.sprIcons[e], i = s.txtNums[e];
t.active = !1;
i.active = !1;
if (!TypeUtils.isRealNull(r[e])) {
t.active = !0;
i.active = !0;
SpriteUtils.setTexture({
path: ItemUtils.getItemPngByCfg(r[e]),
isHide: !0,
callback: function() {
SpriteUtils.setAdaptContentSize(t, null, 65);
}
}, t, s);
i.getComponent(cc.Label).string = r[e].amount;
}
}, c = 0; c < 4; c++) l(c);
}
TypeUtils.isRealNull(e.image) || TypeUtils.isRealNull(e.md5) ? TypeUtils.isRealNull(e.role_id) ? SpriteUtils.setTexture({
path: "module/fish/texture/fishCommon/common_box_04",
isHide: !0
}, this.sprHead, this) : HeadManager.loadHead(this.sprHead, {
roleId: e.role_id
}) : HeadManager.loadHead(this.sprHead, {
url: e.image,
md5: e.md5
});
this.txtVip.active = e.vip_level && e.vip_level > 0;
this.txtVip.getComponent(cc.Label).string = "VIP" + (e.vip_level || 0);
},
getHeadWPos: function() {
return this.sprHead.convertToWorldSpaceAR(cc.v2(0, 0));
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
RankingConst: "RankingConst"
} ],
rankingView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "0d333QxY5BG4Jf3LCERDUZq", "rankingView");
var s;
function n(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}
var o = e("List"), a = e("RankingConst"), r = [ a.RankType.BaiJinDanTouScore, a.RankType.Diamond, a.RankType.QiangHuaShiScore ], l = (n(s = {}, 0, 4), 
n(s, 2, 2), [ {
paths: {
enable: "module/fish/texture/fishRank/phb_txt_01_disable",
sele: "module/fish/texture/fishRank/phb_txt_01_enable"
},
icon: "module/fish/texture/fishRank/icon_44"
}, {
paths: {
enable: "module/fish/texture/fishRank/phb_txt_03_disable",
sele: "module/fish/texture/fishRank/phb_txt_03_enable"
},
icon: "module/fish/texture/fishRank/icon_25"
}, {
paths: {
enable: "module/fish/texture/fishRank/phb_txt_02_disable",
sele: "module/fish/texture/fishRank/phb_txt_02_enable"
},
icon: "module/fish/texture/fishRank/icon_4"
} ]);
cc.Class({
extends: ViewBase,
properties: {
txtRank: cc.Node,
txtNoRank: cc.Node,
rankList: o,
nodeSwallo: cc.Node,
prefabBg: cc.Prefab
},
onCreate: function(e) {
e = e || {};
this.initData();
this.initEvent();
this.initUI(e);
},
initData: function() {
this.ctrl = app.ctrls.ranking;
this.model = this.ctrl.getModel();
this.roleCtrl = app.ctrls.role;
this.m_tab = [];
for (var e = 0; e < 3; e++) this.m_tab.push(!1);
this.rankDatas = [];
},
initEvent: function() {
this.eventOn(this.model.EVENT_GET_RANK_INFO, this.handleGetRankingInfo, this);
},
initUI: function(e) {
var t = this;
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBaseView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBaseView").setTitle({
type: 1,
path: "module/fish/texture/fishRank/phb_title",
bgType: 1
});
this.comBg.getComponent("comBaseView").showTabStyle({
tabCfg: l,
callFunc: this.seleIndex.bind(this),
defaultIdx: 0,
scale: 1.1
});
this.onClick(this.nodeSwallo, this.onOpenRoleView.bind(this));
this.txtRank.active = !1;
this.nodeSwallo.active = !1;
},
seleIndex: function(e) {
var t = this;
if (this.tabIndex != e) {
var i = this.tabIndex;
this.tabIndex = e;
if (this.m_tab[this.tabIndex]) this.updateList(); else {
this.m_tab[this.tabIndex] = !0;
this.ctrl.getRankInfo(r[e] || 2, function() {
if (t.isValid) {
TipsUtils.showTips("获取排行榜信息失败！");
t.m_tab[t.tabIndex] = !1;
t.tabIndex = i;
t.comBg.getComponent("comBaseView").doSelect(t.tabIndex);
}
});
}
}
},
updateList: function() {
var e = this.model.getRankInfo(r[this.tabIndex]) || [];
this.rankDatas = [];
for (var t = 0; t < e.length && !(t >= 30); t++) this.rankDatas.push(e[t]);
this.canAction = !0;
this.rankList.numItems = this.rankDatas.length;
this.rankList.scrollTo(0, .02);
var i = this.model.getOwnRankInfo(r[this.tabIndex]);
this.txtRank.active = !1;
this.txtNoRank.getComponent(cc.Label).string = "我的排名：未上榜";
if (!TypeUtils.isRealNull(i.userAllRank) && i.userAllRank <= 30) {
this.txtRank.active = !0;
this.txtNoRank.getComponent(cc.Label).string = "我的排名：";
this.txtRank.getComponent(cc.Label).string = i.userAllRank;
}
},
onRenderEvent: function(e, t) {
var i = this, s = this.rankDatas[t];
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("rankingItem"));
e.script.setData(s, t, r[this.tabIndex]);
e.stopAllActions();
e.scale = 1;
if (this.canAction) {
e.scale = 0;
ActionUtils.sequence(e, cc.delayTime(.05 * t), cc.scaleTo(.1, 1.1), cc.scaleTo(.05, 1), cc.callFunc(function() {
i.canAction = !1;
}));
}
},
onListSelected: function(e, t, i, s) {},
onOpenRoleInfo: function(e, t) {
var i = this;
this.roleCtrl.getOtherInfo(t, {
callback: function(t) {
i.onOpenRoleView(e);
i.roleTips.script.setData(t);
}
});
},
onOpenRoleView: function(e) {
var t = this;
this.roleTips.stopAllActions();
if (this.roleTips.active) ActionUtils.sequence(this.roleTips, cc.scaleTo(.1, 1.1), cc.scaleTo(.05, 0), cc.callFunc(function() {
t.roleTips.active = !1;
t.nodeSwallo.active = !1;
})); else {
this.roleTips.active = !0;
this.nodeSwallo.active = !0;
e.y > display.cy ? this.roleTips.anchorY = .975 : this.roleTips.anchorY = .025;
this.roleTips.script.setTopBg(e.y > display.cy);
this.roleTips.scale = 0;
var i = this.node.convertToNodeSpaceAR(e);
this.roleTips.x = i.x;
this.roleTips.y = i.y;
ActionUtils.sequence(this.roleTips, cc.scaleTo(.1, 1.1), cc.scaleTo(.05, 1));
}
},
handleGetRankingInfo: function() {
this.updateList();
}
});
cc._RF.pop();
}, {
List: "List",
RankingConst: "RankingConst"
} ],
redPoint: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "6c97aeFmP9PJr6bEPBwCrPD", "redPoint");
var s = e("RemindEnum"), n = cc.Enum({
NONE: 0,
ALL: 1,
NODE: 2,
SPRITE: 3
}), o = cc.Enum({
NONE: 0,
SCALE: 1,
FADE_IN_OUT: 2,
BUBBLE: 3
});
cc.Class({
extends: BaseComponent,
properties: {
_spriteFrame: cc.SpriteFrame,
_redNode: cc.Node,
_type: n.ALL,
type: {
get: function() {
return this._type;
},
set: function(e) {
this._type !== e && (this._type = e);
},
type: n,
animatable: !1,
tooltip: !1
},
redPointFrame: {
get: function() {
return this._spriteFrame;
},
set: function(e) {
this.type !== n.NODE && (this._spriteFrame = e);
},
visible: function() {
var e = this._type == n.NODE || this._type == n.NONE;
e && (this._spriteFrame = null);
return !e;
},
tooltip: !1,
type: cc.SpriteFrame
},
redNode: {
get: function() {
return this._redNode;
},
set: function(e) {
this.type !== n.SPRITE && (this._redNode = e);
},
visible: function() {
var e = this._type == n.SPRITE || this._type == n.NONE;
e && (this.redNode = null);
return !e;
},
tooltip: !1,
type: cc.Node
},
redPointTypes: {
default: [],
tooltip: !1,
type: [ s.RedPointEnum ]
},
actionType: {
default: o.SCALE,
tooltip: !1,
type: o
},
delyTime: {
default: -1,
tooltip: !1,
type: cc.Integer
},
anchor: {
default: cc.v2(1, 1),
tooltip: !1
},
pos: {
default: cc.v2(0, 0),
tooltip: !1
},
isOutRange: {
default: !0,
tooltip: !1
}
},
onLoad: function() {
this.countTime = 0;
this.remindList = {};
this.createRedPoint();
this.updateData();
this.initEvent();
},
updateReminds: function() {
for (var e = 0; e < this.redPointTypes.length; e++) {
var t = s.RedPointToRemindEnum[this.redPointTypes[e]];
this.remindList[t] = !0;
}
},
addRemind: function(e) {
e = e || [];
this.remindList = this.remindList || {};
for (var t = 0; t < e.length; t++) {
var i = e[t];
this.remindList[i] = !0;
}
this.updateData();
},
setRemind: function(e) {
this.remindList = e || {};
this.updateData();
},
updateData: function() {
var e = 0;
for (var t in this.remindList) if (this.remindList.hasOwnProperty(t) && this.remindList[t] && RedRemindManager.getRemind(t)) {
e = 1;
break;
}
this.type !== n.NODE && this.redPoint && (this.redPoint.active = e > 0);
this.type !== n.SPRITE && this.redNode && (this.redNode.active = e > 0);
},
createRedPoint: function() {
var e = this;
if (this.type != n.NODE) {
this.redPoint = new cc.Node();
var t = this.redPoint.addComponent(cc.Sprite);
if (TypeUtils.isRealNull(this.redPointFrame)) SpriteUtils.getSpriteFrame("module/fish/texture/fishCommon/img_red_point", function(i) {
t.spriteFrame = i;
e.updatePointPos();
}, this); else {
t.spriteFrame = this.redPointFrame;
this.updatePointPos();
}
this.node.addChild(this.redPoint);
}
this.updatePointAction();
},
updatePointPos: function() {
var e = this.node.getContentSize(), t = this.pos.x + (this.anchor.x - this.node.anchorX) * e.width, i = this.pos.y + (this.anchor.y - this.node.anchorY) * e.height;
if (!this.isOutRange) {
var s = this.redPoint.getContentSize();
t > e.width * this.node.anchorX - s.width / 2 ? t = e.width * this.node.anchorX - s.width / 2 : t < e.width * (1 - this.node.anchorX) + s.width / 2 && (t = e.width * (1 - this.node.anchorX) + s.width / 2);
i > e.height * this.node.anchorY - s.height / 2 ? i = e.height * this.node.anchorY - s.height / 2 : i < e.height * (1 - this.node.anchorY) + s.height / 2 && (i = e.height * (1 - this.node.anchorY) + s.height / 2);
}
this.redPoint.setPosition(t, i);
},
updatePointAction: function() {
var e = this.redPoint;
this.type == n.NODE && (e = this.redNode);
if (!TypeUtils.isRealNull(e)) switch (this.actionType) {
case o.SCALE:
e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1, .9), cc.delayTime(.2), cc.scaleTo(1, 1.1))));
break;

case o.FADE_IN_OUT:
e.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(1.5), cc.delayTime(.2), cc.fadeIn(1.5))));
break;

case o.BUBBLE:
e.scale = 0;
e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.2, 1).easing(cc.easeBackOut()), cc.delayTime(3), cc.scaleTo(.2, 0).easing(cc.easeBackIn()), cc.delayTime(2))));
}
},
initEvent: function() {
this.eventOn(AppEvent.RemindsChange, this.updateRedPoint, this);
},
updateRedPoint: function(e) {
1 == this.remindList[e.name] && this.updateData();
},
update: function(e) {
if (!(this.delyTime < 0)) {
this.countTime += e;
if (this.countTime >= this.delyTime) {
this.countTime = 0;
this.updateRedPoint();
}
}
}
});
cc._RF.pop();
}, {
RemindEnum: "RemindEnum"
} ],
requestView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "51660utKNhEC7qjODl1J1N0", "requestView");
cc.Class({
extends: ViewBase,
properties: {
rootNode: cc.Node,
sprMask: cc.Node,
sprBg: cc.Node,
sprAni: cc.Node,
txtDesc: cc.Node,
btnTips: cc.Node
},
onCreate: function(e) {
this.initUI();
},
initUI: function() {
this.show();
this.onClick(this.btnTips, function() {
ViewManager.logRequest();
});
},
show: function(e) {
if (!this.rootNode.active) {
this.sprBg.active = !0;
this.sprMask.active = !0;
TypeUtils.isAllNull(e);
this.rootNode.active = !0;
this.sprAni.runAction(cc.repeatForever(cc.rotateBy(1.2, 360)));
}
},
hide: function() {
this.rootNode.active && (this.rootNode.active = !1);
this.sprAni.stopAllActions();
}
});
cc._RF.pop();
}, {} ],
richText: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "3887cyMjdBAQ5pKDIQVghWA", "richText");
cc.Class({
extends: cc.Component,
properties: {},
start: function() {},
userProto: function() {
ViewManager.showView("DISCLAIMER_VIEW");
}
});
cc._RF.pop();
}, {} ],
roleInfoTips: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "1e3a1BZswVOhbZtfiHunNt0", "roleInfoTips");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
sprTop: cc.Node,
sprBot: cc.Node,
nodeCen: cc.Node,
txtRoleID: cc.Label,
txtRoleName: cc.Label,
txtClubName: cc.Label,
txtRoleSign: cc.Label,
sprHead: cc.Node,
txtVip: cc.Node
},
onLoad: function() {
this.sprTop.active = !1;
this.sprBot.active = !1;
},
setData: function(e) {
HeadManager.loadHead(this.sprHead, {
roleId: e.roleId
});
this.txtVip.active = !1;
this.txtVip.getComponent(cc.Label).string = "VIP" + (e.fishVipLevel || 0);
var t = (e.nickname || "无").substring(0, 6);
this.txtRoleID.string = "ID:" + e.roleId;
this.txtRoleName.string = "昵称:" + t;
this.txtClubName.string = "公会:" + (e.unionName || "无");
this.txtRoleSign.string = "个性签名:" + (e.signature || "无");
},
setTopBg: function(e) {
this.sprTop.active = e;
this.sprBot.active = !e;
this.nodeCen.y = (.5 - this.node.anchorY) * this.node.height;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
roleView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "57098AXjXtGN6YYX+dT1+U9", "roleView");
e("List");
var s = e("ItemConst"), n = e("SystemConst");
cc.Class({
extends: ViewBase,
properties: {
nodeHead: cc.Node,
btnSex: cc.Node,
btnExchange: cc.Node,
nodeName: cc.Node,
txtName: cc.Label,
btnModify: cc.Node,
txtRoleId: cc.Node,
nodeAccount: cc.Node,
txtAccount: cc.Label,
progExp: cc.Node,
txtProg: cc.Label,
txtLeve: cc.Label,
nodeCard: cc.Node,
txtDay: cc.Label,
btnBuy: cc.Node,
nodeVip: cc.Node,
txtVip: cc.Label,
btnVip: cc.Node,
nodeCoin: cc.Node,
txtCoin: cc.Label,
nodeDiamond: cc.Node,
txtDiamond: cc.Label,
nodeSignature: cc.Node,
signEdit: cc.Node,
btnSignature: cc.Node,
btnSafe: cc.Node,
headSelet: cc.Prefab,
prefabHead: cc.Prefab,
prefabBg: cc.Prefab
},
onCreate: function(e) {
var t = this;
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(640, 590)
});
this.comBg.getComponent("comBasePopView").setTitle("个人信息");
this.initData();
this.initEvent();
this.initUI();
},
initData: function() {
this.ctrl = app.ctrls.role;
this.model = this.ctrl.getModel();
this._vipCtrl = app.ctrls.vip;
this._vipModel = this._vipCtrl.getModel();
this._fishCtrl = app.fishCtrls.catchFish;
this._fishModel = this._fishCtrl.getModel();
this._currencyModel = app.ctrls.currency.getModel();
this._shopCtrl = app.ctrls.shop;
this._shopModel = this._shopCtrl.getModel();
this._loginCtrl = app.ctrls.login;
this._loginModel = this._loginCtrl.getModel();
if (TypeUtils.isRealNull(this.model.getHeadList())) {
this.updateHeadList();
this._loginCtrl.getDefaultFace();
}
},
initEvent: function() {
this.eventOn(this.model.EVENT_UPDATE_ROLEINFO, this.handleUpdateRoleInfo, this);
this.eventOn(this.model.EVENT_CHANGE_HEAD_SUCCESS, this.handleUpdateRoleHead, this);
this.eventOn(this.model.EVENT_GET_BIND_AWARD_STATUS, this.handleUpdateRoleInfo, this);
this.eventOn(this._currencyModel.EVENT_UPDATE_GOLD, this.updateCurrency, this);
this.eventOn(this._currencyModel.EVENT_UPDATE_DIAMOND, this.updateCurrency, this);
this.eventOn(this._shopModel.EVENT_SHOP_INFO_UPDATE, this.updateCardDay, this);
this.eventOn(this._loginModel.EVENT_GET_HEAD_IMG_SUCCESS, this.updateHeadList, this);
},
initUI: function() {
this.playerHead = cc.instantiate(this.prefabHead);
this.playerHead.parent = this.nodeHead;
this.playerHead.zIndex = -1;
this.playerHead.getComponent("comHead").setRoleData({
roleId: RoleUtils.getRoleId(),
vip: VipUtils.getFishVipLevel()
});
this.playerHead.getComponent("comHead").setClickCB(this.onClickHeadSele.bind(this));
this.onClick(this.txtRoleId, this.onClickCopy.bind(this));
this.onClick(this.btnSex, this.onClickChangeGender.bind(this));
this.onClick(this.btnExchange, this.onClickHeadSele.bind(this));
this.onClick(this.btnModify, this.onClickChangeName.bind(this));
this.nodeAccount.active = !1;
this.btnModify.active = !1;
this.progExp.y = 100;
this.onClick(this.btnBuy, this.onClickCard.bind(this));
this.nodeCard.active = !SystemUtils.checkIsClose(n.SystemId.Card);
this.onClick(this.btnVip, this.onClickVIP.bind(this));
this.btnSignature.active = !1;
this.signEdit.getComponent(cc.EditBox).enabled = !1;
this.onClick(this.btnSafe, this.onClickSafe.bind(this));
this.headSeleView = cc.instantiate(this.headSelet);
this.headSeleView.parent = this.node;
this.headSeleView.zIndex = 999;
this.headSeleView.script = this.headSeleView.getComponent("headScrollView");
this.freshHead();
this.freshHeadList();
this.freshRoleInfo();
this.updateCurrency();
},
freshHead: function() {
var e = 1 == this.model.getRoleGender() ? "icon_28" : "icon_29";
SpriteUtils.setTexture({
path: "module/fish/texture/fishRole/" + e
}, this.btnSex, this);
},
freshHeadList: function() {
var e = this;
this.headList = this.freshHeadData(this.model.getAvatar());
this.headSeleView.script.setData(this.headList, 0);
this.headSeleView.script.setSelectCb(function(t) {
e.ctrl.changeRoleInfo({
avatar: e.headList[t].image
});
});
},
freshRoleInfo: function() {
var e = this.model.getNickName(), t = this.model.getRoleId(), i = (this.model.getAccountId(), 
this.model.getSignature()), s = this._vipModel.getVipLevel(), n = this._fishModel.getCatchInfo() || {}, o = n.fishLevel || 1;
this.txtName.string = e;
this.txtRoleId.getComponent(cc.Label).string = "ID:" + t;
TypeUtils.isAllNull(i) && (i = _LANG("SIGNATURE_DEFAULT"));
this.signEdit.getComponent(cc.EditBox).string = i;
this.txtVip.string = "VIP" + s;
this.txtLeve.string = "LV" + o;
var a = 1, r = 1, l = ConfigMgr.getConfig("fish_level_config").findByIndex(o + 1);
if (!TypeUtils.isRealNull(l)) {
a = l.exp;
r = n.fishExp || 0;
TypeUtils.isRealNull(n.fishExp) && logger.error("catchInfo.fishExp == nil : ", n);
}
this.txtProg.string = r + "/" + a;
this.progExp.getComponent(cc.ProgressBar).progress = r / a;
this.freshCardDay();
},
freshCardDay: function() {
var e = this._shopModel.getGiftInfoById(s.GiftType.FishCard);
this.txtDay.string = e > 0 ? StringUtils.format("剩余%s天", e) : "非月卡贵族";
},
onClickHeadSele: function(e) {
var t = this.nodeHead.convertToWorldSpaceAR(cc.v2(0, -60));
this.headSeleView.script.onClickHead(t);
},
onClickCopy: function() {},
onClickChangeGender: function() {
var e = this.model.getRoleGender();
this.ctrl.changeRoleInfo({
gender: 1 == Number(e) ? 2 : 1
});
},
onClickChangeName: function() {
ViewManager.showView("MODIFY_VIEW");
},
onClickCard: function() {
ViewManager.showView("CARD_GIFT_VIEW");
},
onClickVIP: function() {
ViewManager.showView("VIP_VIEW");
},
onClickSafe: function() {
ViewManager.showView("SAFE_CENTER_VIEW");
},
freshHeadData: function(e) {
for (var t = this.model.getHeadList() || [], i = null, s = 0; s < t.length; s++) if (t[s].image == e) {
i = ArrayUtils.remove(t, s);
break;
}
if (!TypeUtils.isRealNull(i)) {
ArrayUtils.insert(t, 0, i[0]);
this.model.setHeadList(t);
}
return t;
},
onEditingReturn: function(e, t) {
var i = this, s = e.string;
TypeUtils.isAllNull(s) && (s = _LANG("SIGNATURE_DEFAULT"));
TxtFilterUtils.getInstance().checkIsValid(s, function() {
i.isValid && s != i.model.getSignature() && i.ctrl.changeRoleInfo({
signature: s
}, {
errorCb: function() {
e.string = i.model.getSignature();
}
});
}, function() {
i.isValid && (e.string = i.model.getSignature());
});
},
updateCurrency: function() {
this.txtCoin.string = ItemUtils.getItemNum(s.ResourceType.Gold);
this.txtDiamond.string = ItemUtils.getItemNum(s.ResourceType.Diamond);
},
updateCardDay: function() {
this.freshCardDay();
},
handleUpdateRoleHead: function(e) {
this.freshHeadList();
},
updateHeadList: function() {
var e = this._loginModel.getHeadImgList();
if (!TypeUtils.isRealNull(e)) {
this.model.setHeadList(e);
this.freshHeadList();
}
},
handleUpdateRoleInfo: function() {
this.freshHead();
this.freshRoleInfo();
}
});
cc._RF.pop();
}, {
ItemConst: "ItemConst",
List: "List",
SystemConst: "SystemConst"
} ],
roomIntroduceView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "9359dg7uSVDXpjQuLef7AQ4", "roomIntroduceView");
var s = e("List");
cc.Class({
extends: ViewBase,
properties: {
btnEnter: cc.Node,
txtAwards: [ cc.Label ],
txtDesc: cc.Label,
txtOpenState: cc.Node,
txtGunLimit: cc.Node,
nodeSp: cc.Node,
fishList: s,
sprIcons: [ cc.Node ],
prefabBg: cc.Prefab
},
onCreate: function(e) {
e = e || {};
this.initData(e);
this.initEvent();
this.initUI(e);
},
initData: function(e) {
this.fishCtrls = app.fishCtrls.catchFish;
this.fishModel = this.fishCtrls.getModel();
this.roomInfo = e;
this._bagCtrl = app.ctrls.bag;
this._bagModel = this._bagCtrl.getModel();
this._curForgeLevel = this._bagModel.getGunForgeLevel();
},
initEvent: function() {},
initUI: function() {
var e = this;
this.tabIndex = -1;
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
ViewManager.closeView(e);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(925, 585)
});
this.comBg.getComponent("comBasePopView").setTitle("渔场介绍");
this.comBg.getComponent("comBasePopView").showBgType(3);
this.txtOpenState.getComponent(cc.Label).string = "已开启";
this.txtOpenState.color = cc.color(0, 245, 0, 255);
this.txtDesc.string = this.roomInfo.roomDesc;
var t = this.roomInfo.forgeLevelLimit, i = t[0], s = t[1];
this.txtGunLimit.getComponent(cc.Label).string = StringUtils.format(_LANG("FISH_ROOM_ENTRY_CONDITION"), i, s);
var n = this._curForgeLevel >= i && this._curForgeLevel <= s;
this.txtGunLimit.color = n ? cc.color(0, 245, 0, 255) : cc.color(246, 58, 58, 255);
this.btnEnter.getComponent(cc.Button).interactable = n;
this.onClick(this.btnEnter, function() {
e.fishCtrls.enterRoom(e.roomInfo.roomType, e.roomInfo.group);
});
this.initRoomRewards();
this.updateList();
},
updateList: function() {
this.fishList.numItems = this.roomInfo.roomFish.length;
this.fishList.scrollTo(0, .02);
},
onRenderEvent: function(e, t) {
var i = this.roomInfo.roomFish[t];
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("fishTypeItem"));
e.script.setData(i);
},
initRoomRewards: function() {
for (var e = this, t = function(t) {
var i = e.roomInfo.roomRewards[t], s = ItemUtils.getItemConfig(i.itemId), n = e.sprIcons[t];
TypeUtils.isRealNull(n) || SpriteUtils.setTexture({
path: ItemUtils.toItemPngPath(s.icon),
callback: function() {
SpriteUtils.setAdaptContentSize(n, null, 90);
}
}, n, e);
var o = e.txtAwards[t];
TypeUtils.isRealNull(o) || (o.string = s.name);
}, i = 0; i < this.roomInfo.roomRewards.length; i++) t(i);
}
});
cc._RF.pop();
}, {
List: "List"
} ],
roomItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "51c70PpDalDIpqdPT6IsLCL", "roomItem");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
btnSele: cc.Node,
btnRoom: cc.Node,
btnHelp: cc.Node,
txtCondtion: cc.Label,
txtOnlineNum: cc.Label,
nodeLand: cc.Node
},
onLoad: function() {
this.initUI();
},
initUI: function() {
this.onClick(this.btnSele, this.onSeleRoom.bind(this));
this.onClick(this.btnHelp, this.onClickHelp.bind(this));
this.onClick(this.btnRoom, this.onClickSeat.bind(this));
},
setData: function(e, t) {
this.landData = e;
this.roomInfo = t;
this.btnRoom.active = !TypeUtils.isRealNull(e.seatArea);
this.txtCondtion.string = e.forgeLevelLimit[0] + "-" + e.forgeLevelLimit[1] + "倍";
},
hideSele: function() {
this.btnSele.active = !1;
},
onClickSeat: function() {
ViewManager.showView("ROOM_SEAT_VIEW", null, this.landData);
},
onClickHelp: function() {
ViewManager.showView("ROOM_INTRODUCE_VIEW", null, this.roomInfo);
},
setOnline: function(e) {
this.txtOnlineNum.string = "在线人数：" + e;
},
loadSpine: function(e) {
var t = this;
this.nodeLand.x = e.x || 0;
this.nodeLand.y = e.y || 0;
SpineUtils.changeSpine(e.path, function(i, s) {
if (t.isValid) {
var n = t.nodeLand.getComponent(sp.Skeleton);
n.skeletonData = s;
n.setAnimation(0, e.ani, e.isLoop);
}
});
},
changeSpine: function(e, t) {
this.nodeLand.getComponent(sp.Skeleton).setAnimation(0, e, t);
},
onSeleRoom: function() {
var e = this.node.posId || 2;
TypeUtils.isFunction(this.seleCallback) && this.seleCallback(e, this.landData);
},
setSeleCallback: function(e) {
this.seleCallback = e;
},
update: function(e) {}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
roomSeatItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "aa2c2/XkHZOFaeIEqPe4kUA", "roomSeatItem");
var s = e("BaseComponent");
e("ChannelConst");
cc.Class({
extends: s,
properties: {
peopleProg: cc.ProgressBar,
txtIdx: cc.Label,
txtProg: cc.Label,
txtNum: cc.Label
},
onLoad: function() {
this.initData();
this.initEvent();
this.initUI();
},
initData: function() {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
},
initEvent: function() {},
initUI: function() {
this.onClick(this.node, this.onSeleRoom.bind(this));
},
setData: function(e) {
this.data = e;
var t = e.idx || e.roomId;
this.txtIdx.string = t;
this.playerNum = e.playerNum || 0;
this.peopleProg.progress = this.playerNum / 4;
this.txtProg.string = this.playerNum + "/4";
},
onSeleRoom: function() {
this.ctrl.enterRoom(this.data.roomType, null, this.data.roomId);
},
update: function(e) {}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
ChannelConst: "ChannelConst"
} ],
roomSeatView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "10cfblw8BBNlbKRajaVtDHL", "roomSeatView");
var s = e("List"), n = e("CatchFishConst"), o = e("ChannelConst");
cc.Class({
extends: ViewBase,
properties: {
btnQuick: cc.Node,
seatList: s,
prefabBg: cc.Prefab
},
onCreate: function(e) {
e = e || {};
this.initData(e);
this.initEvent();
this.initUI(e);
this.setChannel([ {
enterChannel: {
channelId: o.Type.FishRoomSeatList,
param1: this.roomType
},
exitChannel: {
channelId: o.Type.FishRoomSeatList,
param1: this.roomType
}
} ]);
},
initData: function(e) {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this.roomType = e.roomType || 0;
this.roomList = {};
},
initEvent: function() {
this.eventOn(this.model.EVENT_ROOM_LIST_UPDATE, this.handleRoomListUpdate, this);
},
initUI: function(e) {
var t = this;
this.tabIndex = -1;
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBaseView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBaseView").setTitle({
type: 1,
path: "module/fish/texture/fishRoom/sdxz_title",
bgType: 1
});
for (var i = e.seatArea, s = [], n = 1; n <= i.num; n++) s.push({
name: StringUtils.format(i.str, n)
});
this.comBg.getComponent("comBaseView").showTabStyle({
tabCfg: s,
callFunc: this.seleIndex.bind(this),
defaultIdx: 0,
scale: 1.1
});
},
seleIndex: function(e) {
if (this.tabIndex != e) {
this.tabIndex = e;
this.canAction = !0;
this.updateList();
}
},
updateList: function() {
this.seatList.numItems = n.SeatNum;
this.seatList.scrollTo(0, .02);
},
onRenderEvent: function(e, t) {
var i = this, s = this.tabIndex * n.SeatNum + t + 1;
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("roomSeatItem"));
e.script.setData({
roomId: s,
roomType: this.roomType,
playerNum: this.roomList[s]
});
e.stopAllActions();
e.scale = 1;
if (this.canAction) {
e.scale = 0;
ActionUtils.sequence(e, cc.delayTime(.02 * t), cc.scaleTo(.1, 1.1), cc.scaleTo(.05, 1), cc.callFunc(function() {
i.canAction = !1;
}));
}
},
handleRoomListUpdate: function(e) {
var t = e.data || {};
TypeUtils.isRealNull(t) || this.data.roomType != t.roomType || this.updateSeatPlayers(t.list);
},
updateSeatPlayers: function(e) {
this.roomList = {};
for (var t = 0; t < e.length; t++) this.roomList[e[t].roomId] = e[t].playerNum;
this.seatList.numItems = n.SeatNum;
},
channelSyncDataFishRoomSeatList: function(e) {
TypeUtils.isRealNull(e) || TypeUtils.isRealNull(e.fishRoomList) || TypeUtils.isRealNull(e.fishRoomList.list) || this.updateSeatPlayers(e.fishRoomList.list);
}
});
cc._RF.pop();
}, {
CatchFishConst: "CatchFishConst",
ChannelConst: "ChannelConst",
List: "List"
} ],
safeCenterView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "bd775sD/KhA2puZ506l9Xex", "safeCenterView");
var s = 1, n = 2, o = 3, a = 4, r = 5, l = 6, c = 7, h = 2, u = 3, d = 4, p = 5, f = 1, m = 2, g = 3, _ = 4, T = 5, C = 6;
cc.Class({
extends: ViewBase,
properties: {
txtTopDesc: cc.Label,
nodeClause: cc.Node,
checkBox: cc.Node,
content: cc.Node,
txtDes: cc.Node,
nodeCenter: cc.Node,
btnModify: cc.Node,
btnSetOrModify: cc.Node,
btnChangeBind: cc.Node,
nodeSuccess: cc.Node,
txtDesc1: cc.Label,
txtDesc2: cc.Label,
nodeInput: cc.Node,
btnSure: cc.Node,
txtSure: cc.Node,
btnBack: cc.Node,
editBoxP: cc.Prefab,
prefabBg: cc.Prefab
},
onCreate: function(e) {
var t = this;
e = e || {};
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(830, 588)
});
this.comBg.getComponent("comBasePopView").setTitle("安全中心");
this.initData();
this.initEvent();
this.initUI(e);
},
initData: function() {
this.ctrl = app.ctrls.role;
this.model = this.ctrl.getModel();
},
initEvent: function() {
this.eventOn(this.model.EVENT_SEND_VERIFY_CODE_SUCCESS, this.handleSendCodeSuccess, this);
this.eventOn(this.model.EVENT_FISH_BIND_INFO_SUCCESS, this.handleBindInfoSuccess, this);
this.eventOn(this.model.EVENT_FISH_CHECK_INFO_SUCCESS, this.handleCheckInfoSuccess, this);
this.eventOn(this.model.EVENT_FISH_CHANGE_PWD_SUCCESS, this.handleChangePwdSuccess, this);
this.eventOn(this.model.EVENT_FISH_SET_SECOND_PWD_SUCCESS, this.handleSetSecondPwdSuccess, this);
},
initUI: function(e) {
var t = this, i = e.type || s, a = UserUtils.getRoleVal("AGREE_BIND") || "NO";
i == s && "YES" == a && (i = o);
this.checkIsBind(this.model.getRolePhone()) && this.checkIsBind(this.model.getRoleCertification()) || "YES" != a || (i = n);
this.editBoxList = [];
for (var r = 0; r < 4; r++) {
var l = cc.instantiate(this.editBoxP);
l.parent = this.nodeInput;
l.script = l.getComponent("comInputItem");
l.script.setChangeCB(this.onEditChange.bind(this));
l.active = !1;
this.editBoxList.push(l);
}
this.onClick(this.btnBack, function() {
t.showPnl(o);
});
this.showPnl(i);
},
checkIsBind: function(e) {
return !TypeUtils.isAllNull(e);
},
showPnl: function(e, t) {
this.nodeClause.active = !1;
this.nodeCenter.active = !1;
this.nodeSuccess.active = !1;
this.nodeInput.active = !1;
this.btnSure.active = !0;
this.btnBack.active = !1;
this.viewType = e;
this.freshBindBtn(!1);
if (e == s) this.initClauseView(); else if (e == n) this.initBindView(); else if (e == o) {
this.btnSure.active = !1;
this.initCenterView();
} else if (e == a) {
this.btnBack.active = !0;
this.initModifyView();
} else if (e == r) {
this.btnBack.active = !0;
this.initSecondView();
} else if (e == l) {
this.btnBack.active = !0;
this.initCheckView();
} else e == c && this.initSuccessView(t);
},
initClauseView: function() {
var e = this;
this.nodeClause.active = !0;
var t = UserUtils.getRoleVal("AGREE_BIND") || "NO";
this.checkBox.on("toggle", this.onClickAllow, this);
this.toggleBox = this.checkBox.getComponent(cc.Toggle);
this.toggleBox.isChecked = "YES" == t;
this.freshBindBtn("YES" == t);
var i = ConfigMgr.getConfig("rule_config").findByIndex("acount");
this.txtDes.getComponent(cc.RichText).string = i.content;
this.txtDes.getComponent(cc.RichText)._updateRichText();
this.content.height = this.txtDes.height;
this.txtSure.getComponent(cc.Label).string = "确 定";
this.onClick(this.btnSure, function() {
UserUtils.setRoleVal("AGREE_BIND", e.toggleBox.isChecked ? "YES" : "NO");
e.showPnl(n);
});
this.txtTopDesc.string = "账号绑定用户协议";
},
onClickAllow: function(e) {
this.freshBindBtn(e.isChecked);
},
initBindView: function() {
this.nodeInput.active = !0;
this.txtSure.getComponent(cc.Label).string = "绑 定";
for (var e = this.editBoxList.length, t = 0; t < e; t++) {
this.editBoxList[t].active = !0;
this.editBoxList[t].y = 70 * (e / 2 - t - .5);
}
this.editBoxList[0].script.setConfig(this.getInputCfg(f));
this.editBoxList[1].script.setConfig(this.getInputCfg(m));
this.editBoxList[2].script.setConfig(this.getInputCfg(g));
this.editBoxList[3].script.setConfig(this.getInputCfg(C, {
edBox: this.editBoxList[2],
codeType: h
}));
this.onClick(this.btnSure, this.onClickToBind.bind(this));
this.txtTopDesc.string = "您的账号还没进行绑定，账号存在一定的安全风险。\n绑定后才可以使用“密码登陆”和“设置/修改二级密码”等功能";
},
onClickToBind: function() {
var e = this.editBoxList[0].script.getString(), t = this.editBoxList[1].script.getString(), i = this.editBoxList[2].script.getString(), s = this.editBoxList[3].script.getString();
this.ctrl.bindPersonalInfo(s, i, e, t);
},
initCenterView: function() {
var e = this;
this.nodeCenter.active = !0;
this.onClick(this.btnModify, function() {
e.showPnl(a);
});
this.onClick(this.btnSetOrModify, function() {
e.showPnl(r);
});
this.onClick(this.btnChangeBind, function() {
e.showPnl(l);
});
var t = this.model.getRolePhone();
this.txtTopDesc.string = cc.js.formatStr("亲爱的%s，您当前绑定的手机号是\n%s****%s", this.model.getNickName(), t.substring(0, 3), t.substring(7, 11));
},
initModifyInput: function() {
this.nodeInput.active = !0;
this.txtSure.getComponent(cc.Label).string = "确定修改";
for (var e = this.editBoxList.length, t = 0; t < e; t++) {
this.editBoxList[t].active = !0;
this.editBoxList[t].y = 70 * (e / 2 - t - .5);
}
this.editBoxList[0].script.setConfig(this.getInputCfg(_, {
name: "请输入登陆密码"
}));
this.editBoxList[1].script.setConfig(this.getInputCfg(T));
this.editBoxList[2].script.setConfig(this.getInputCfg(g));
},
initModifyView: function() {
this.initModifyInput();
this.txtTopDesc.string = "请通过以下方式修改“登陆密码”";
this.editBoxList[3].script.setConfig(this.getInputCfg(C, {
edBox: this.editBoxList[2],
codeType: d
}));
this.onClick(this.btnSure, this.onClickToModify.bind(this));
},
onClickToModify: function() {
var e = this.editBoxList[0].script.getString(), t = this.editBoxList[2].script.getString(), i = this.editBoxList[3].script.getString();
this.ctrl.changeLoginPwd(i, t, e);
},
initSecondView: function() {
this.initModifyInput();
this.txtTopDesc.string = "请通过以下方式修改“二级密码”";
this.editBoxList[3].script.setConfig(this.getInputCfg(C, {
edBox: this.editBoxList[2],
codeType: p
}));
this.onClick(this.btnSure, this.onClickToTwoModify.bind(this));
},
onClickToTwoModify: function() {
var e = this.editBoxList[0].script.getString(), t = this.editBoxList[2].script.getString(), i = this.editBoxList[3].script.getString();
this.ctrl.setSecondPwd(i, t, e);
},
initCheckView: function() {
this.nodeInput.active = !0;
this.txtSure.getComponent(cc.Label).string = "下一步";
this.txtTopDesc.string = "请输入当前账号的绑定信息";
for (var e = this.editBoxList.length, t = 0; t < e; t++) {
this.editBoxList[t].active = !0;
this.editBoxList[t].y = 90 * (e / 2 - t - 1);
this.editBoxList[t].x = 20;
t >= e - 1 && (this.editBoxList[t].active = !1);
}
this.editBoxList[0].script.setConfig(this.getInputCfg(m, {
name: "当前绑定的身份证号"
}));
this.editBoxList[1].script.setConfig(this.getInputCfg(g, {
name: "当前绑定的手机号码"
}));
this.editBoxList[2].script.setConfig(this.getInputCfg(C, {
edBox: this.editBoxList[1],
codeType: u
}));
this.editBoxList[3].script.setConfig(null);
this.onClick(this.btnSure, this.onClickToNext.bind(this));
},
onClickToNext: function() {
var e = this.editBoxList[0].script.getString(), t = this.editBoxList[1].script.getString(), i = this.editBoxList[2].script.getString();
this.ctrl.checkPersonalInfo(i, t, e);
},
initSuccessView: function(e) {
this.freshBindBtn(!0);
this.nodeSuccess.active = !0;
this.txtSure.getComponent(cc.Label).string = "确 定";
this.txtTopDesc.string = "";
this.txtDesc1.string = e || "恭喜您，账号绑定成功";
this.onClick(this.btnSure, this.onClickSure.bind(this));
if (this.model.checkPhoneBindAward() && this.model.checkIdentificationAward()) {
var t = ConfigMgr.getCommon("catchFishBindAward") || [];
this.ctrl.getBindAward(4, t);
}
},
onClickSure: function() {
this.showPnl(o);
},
onEditChange: function() {
for (var e = 0; e < this.editBoxList.length; e++) {
if (!this.editBoxList[e].script.getState()) {
this.freshBindBtn(!1);
return;
}
}
this.freshBindBtn(!0);
},
freshBindBtn: function(e) {
this.btnSure.getComponent(cc.Button).interactable = e;
this.txtSure.getComponent(cc.LabelOutline).color = e ? cc.color(204, 96, 0, 255) : cc.color(102, 71, 125, 255);
},
getInputCfg: function(e, t) {
var i = this;
t = t || {};
var s = {};
e == f ? s = {
name: t.name || "真实姓名",
hasBtn: !1,
placeHolder: "请入真实姓名",
maxLength: t.maxLen || 12,
callback: this.inputNameJudge.bind(this)
} : e == m ? s = {
name: t.name || "身份证号",
hasBtn: !1,
placeHolder: "请入身份证号",
maxLength: t.maxLen || 18,
callback: this.inputCertificJudge.bind(this)
} : e == g ? s = {
name: t.name || "手机号码",
hasBtn: !1,
placeHolder: "请入手机号码",
maxLength: t.maxLen || 11,
nputMode: cc.EditBox.InputMode.PHONE_NUMBER,
callback: this.inputPhoneJudge.bind(this)
} : e == _ ? s = {
name: t.name || "请输入密码",
hasBtn: !1,
placeHolder: "请输入密码",
maxLength: t.maxLen || 10,
inputFlag: cc.EditBox.InputFlag.PASSWORD,
callback: this.inputPwdJudge.bind(this)
} : e == T ? s = {
name: t.name || "请再次输入",
hasBtn: !1,
placeHolder: "再次输入密码",
maxLength: t.maxLen || 10,
inputFlag: cc.EditBox.InputFlag.PASSWORD,
callback: this.inputRePwdJudge.bind(this)
} : e == C && (s = {
name: t.name || "验证码",
hasBtn: !0,
placeHolder: "请输入验证码",
maxLength: t.maxLen || 6,
inputMode: cc.EditBox.InputMode.NUMERIC,
codeTime: 30,
clickCB: function() {
TypeUtils.isFunction(t.callback) && t.callback();
if (!TypeUtils.isRealNull(t.edBox)) {
var e = t.edBox.script.getStateData();
if (!e.state) {
TipsUtils.showTips(e.tips);
return;
}
i.ctrl.getValidateCode(t.codeType, e.input);
}
},
callback: this.inputCodeJudge.bind(this)
});
return s;
},
inputNameJudge: function(e) {
if (TypeUtils.isAllNull(e)) return {
state: !1,
tips: "名字不能为空"
};
if (!/^[\u4e00-\u9fa5]{2,6}$/.test(e)) return {
state: !1,
tips: "真实姓名填写有误"
};
return /^[\u4E00-\u9FA5]+$/.test(e) ? e.length < 2 ? {
state: !1,
tips: "名字长度不正确"
} : {
state: !0
} : {
state: !1,
tips: "名字须为汉字"
};
},
inputCertificJudge: function(e) {
if (TypeUtils.isAllNull(e)) return {
state: !1,
tips: "身份证不能为空"
};
if (16 != e.length && 18 != e.length) return {
state: !1,
tips: "号码长度不正确"
};
return /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(e) ? {
state: !0
} : {
state: !1,
tips: "身份证号不正确"
};
},
inputPhoneJudge: function(e) {
if (TypeUtils.isAllNull(e)) return {
state: !1,
tips: "手机号不能为空"
};
if (11 != e.length) return {
state: !1,
tips: "手机号长度不正确"
};
return /^1(3[0-9]|4[5,7]|5[0,1,2,3,5,6,7,8,9]|6[2,5,6,7]|7[0,1,7,8]|8[0-9]|9[1,8,9])\d{8}$/.test(e) ? {
state: !0
} : {
state: !1,
tips: "手机号不正确"
};
},
inputCodeJudge: function(e) {
return TypeUtils.isAllNull(e) ? {
state: !1,
tips: "验证码不能为空"
} : 6 != e.length ? {
state: !1,
tips: "验证码长度不正确"
} : {
state: !0
};
},
inputPwdJudge: function(e) {
if (TypeUtils.isAllNull(e)) return {
state: !1,
tips: "密码不能为空"
};
if (e.length < 6) return {
state: !1,
tips: "长度须为6-10位"
};
return /\w+|\d+/.test(e) ? {
state: !0
} : {
state: !1,
tips: "须为字母或数字"
};
},
inputRePwdJudge: function(e) {
var t = this.inputPwdJudge(e);
return t.state ? e != this.editBoxList[0].script.getString() ? {
state: !1,
tips: "密码不一致"
} : {
state: !0
} : t;
},
handleSendCodeSuccess: function() {
for (var e = 0; e < this.editBoxList.length; e++) {
this.editBoxList[e].script.getWaitTime();
}
},
handleBindInfoSuccess: function() {
this.showPnl(c, "恭喜您，账号绑定成功");
},
handleCheckInfoSuccess: function() {
this.showPnl(n);
},
handleChangePwdSuccess: function() {
this.showPnl(c, "恭喜您，修改登陆密码成功");
},
handleSetSecondPwdSuccess: function() {
this.showPnl(c, "恭喜您，修改/设置二级密码成功");
}
});
cc._RF.pop();
}, {} ],
scene: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "e3e29EE6D9HG5PlMXLvahEk", "scene");
var s = e("MyApp");
e("ManagerEnum");
cc.Class(function(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}({
extends: ViewBase,
properties: {
sprBg: cc.Node,
sceneLayer: cc.Node,
viewLayerBot: cc.Node,
viewLayerCen: cc.Node,
viewLayerTop: cc.Node,
awardLayer: cc.Node,
alertLayer: cc.Node,
tipsLayer: cc.Node
},
onLoad: function() {
this.layouts = [];
this.layouts.scene = this.sceneLayer;
this.layouts.bot = this.viewLayerBot;
this.layouts.cen = this.viewLayerCen;
this.layouts.top = this.viewLayerTop;
this.layouts.award = this.awardLayer;
this.layouts.alert = this.alertLayer;
this.layouts.tips = this.tipsLayer;
},
start: function() {
new s();
TimeUtils.testTime(0, "InitDuration");
AdaptUtils.AdaptNodeToFullAdapt(this.sprBg);
ViewManager.initScene(this.layouts);
ViewManager.showView("FLASH_VIEW", "award");
cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE);
this.initConfig();
},
initConfig: function() {
ConfigMgr.initConfig("module/fish/config/", function(e, t) {}, function() {});
},
getLayouts: function() {
return this.nodes;
},
update: function(e) {
TimeMgr.update(e);
}
}, "getLayouts", function() {}));
cc._RF.pop();
}, {
ManagerEnum: "ManagerEnum",
MyApp: "MyApp"
} ],
seamanRollItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "8a2c280FndKmJ/9HEnO9Mvo", "seamanRollItem");
var s = e("ItemConst"), n = e("CatchFishConst").ShuiShouCards, o = 1, a = 2, r = 3, l = 4, c = 5, h = 6;
cc.Class({
extends: BaseComponent,
properties: {
spRoll: cc.Node,
spineRoll: sp.Skeleton,
sprCardBgs: [ cc.Node ],
sprCards: [ cc.Node ],
sprCardType: cc.Node,
dropItem: cc.Prefab
},
onLoad: function() {
this.initData();
this.initUI();
},
initData: function() {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this.dropList = [];
},
initUI: function() {
for (var e = 0; e < this.sprCardBgs.length; e++) {
this.sprCardBgs[e].active = !1;
this.sprCards[e].active = !1;
}
},
setData: function(e, t) {
var i = this;
this.callback = t;
for (var o = [], a = [], r = 0; r < e.dropList.length; r++) {
var l = e.dropList[r];
if (l.itemId == s.ResourceType.Gold) {
l.amount;
e.isMe && this.model.setNotAddGoldNum(l.amount);
} else TypeUtils.isRealNull(n[l.itemId]) ? a.push(l) : o.push(l);
}
SpineUtils.changeAnimation(this.spineRoll, "1", !0, "2", !0);
var c = this.judeCardsType(o);
SpriteUtils.setTexture({
path: "module/fish/texture/fishPlay/seamanReward/sssc_style_" + c,
isHide: !0,
callback: function() {
i.sprCardType.active = !1;
}
}, this.sprCardType, this);
for (var h = function(t) {
var s = o[t], n = i.sprCardBgs[t], r = i.sprCards[t];
if (!TypeUtils.isRealNull(n)) {
n.active = !1;
r.active = !1;
var l = [];
l.push(cc.scaleTo(.5, 0, 1));
l.push(cc.callFunc(function() {
r.active = !0;
i.sprCardType.active = !0;
var e = ItemUtils.getItemPng(s.itemId);
if (ItemUtils.isSSCCCardItem(s.itemId)) {
e = "module/fish/texture/fishPlay/seamanReward/" + ItemUtils.getItemConfig(s.itemId).icon;
}
SpriteUtils.setTexture({
path: e,
isHide: !0
}, r, i);
}));
l.push(cc.scaleTo(.5, 1));
if (t == o.length - 1) {
l.push(cc.delayTime(1));
l.push(cc.callFunc(function() {
i.showGainItemEffect(a, e.pos);
}));
}
i.delayTimer(function() {
n.active = !0;
n.stopAllActions();
n.runAction(cc.sequence(l));
}, 1.5);
}
}, u = 0; u < o.length; u++) h(u);
},
showGainItemEffect: function(e, t) {
for (var i = this, s = !1, n = function(n) {
var o = e[n];
o.hideBg = !0;
var a = i.dropList[n];
if (TypeUtils.isRealNull(a)) {
(a = cc.instantiate(i.dropItem)).parent = i.node;
a.scale = .8;
i.dropList.push(a);
}
a.stopAllActions();
a.x = 50 * (n - (e.length - 1) / 2);
a.y = 0;
a.getComponent("dropAwardItem").setData(o);
var r = cc.fadeIn(.1), l = cc.moveBy(.2, cc.v2(0, t > 2 ? 120 : -120)), c = [];
c.push(cc.spawn(r, l));
c.push(cc.delayTime(1));
c.push(cc.fadeOut(.1));
c.push(cc.callFunc(function() {
0 == n && TypeUtils.isFunction(i.callback) && i.callback();
}));
a.runAction(cc.sequence(c));
s = !0;
}, o = 0; o < e.length; o++) n(o);
!s && TypeUtils.isFunction(this.callback) && this.callback();
},
judeCardsType: function(e) {
ArrayUtils.sort(e, function(e, t) {
var i = n[e.itemId], s = n[t.itemId];
return i.type == s.type ? i.color - s.color : s.type - i.type;
});
for (var t = e.length, i = 0, s = 0, u = 0; u < e.length; u++) {
for (var d = e[u], p = 1, f = 1, m = n[d.itemId], g = 0; g < e.length; g++) {
e[g];
var _ = n[e[g].itemId];
u != g && m.type == _.type && (p += 1);
u != g && m.color == _.color && (f += 1);
}
p > i && (i = p);
f > s && (s = f);
}
if (i >= 3) return h;
if (i >= 2) return a;
var T = n[e[0].itemId].type;
return n[e[t - 1].itemId].type - T == t - 2 ? s >= 3 ? c : r : s >= 3 ? l : o;
}
});
cc._RF.pop();
}, {
CatchFishConst: "CatchFishConst",
ItemConst: "ItemConst"
} ],
selectPayView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "c6b6ftR3KlATKX3jSCksS5V", "selectPayView");
var s = e("ShopConst");
cc.Class({
extends: ViewBase,
properties: {
btnWechat: cc.Node,
btnZhiFuBao: cc.Node,
prefabBg: cc.Prefab
},
onCreate: function(e) {
var t = this;
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(550, 310)
});
this.comBg.getComponent("comBasePopView").setTitle("支付台");
this.initData(e);
this.initEvent();
this.initUI();
},
initData: function(e) {
this.ctrl = app.ctrls.shop;
this.model = this.ctrl.getModel();
this.payList = e.payList;
this.goodsId = e.goodsId;
},
initEvent: function() {},
initUI: function() {
this.onClick(this.btnWechat, this.payWechat.bind(this));
this.onClick(this.btnZhiFuBao, this.payZhiFuBao.bind(this));
this.btnWechat.active = !1;
this.btnZhiFuBao.active = !1;
var e = [];
for (var t in this.payList) if (this.payList.hasOwnProperty.call(this.payList, t)) {
var i = Number(this.payList[t]);
if (i == s.PayType.AiBei || i == s.PayType.miniWechatPay) {
this.btnWechat.active = !0;
this.wxPayType = i;
e.push(this.btnWechat);
} else if (i == s.PayType.Alipay) {
this.btnZhiFuBao.active = !0;
this.zfbPayType = i;
e.push(this.btnZhiFuBao);
}
}
1 == e.length && (e[0].x = 0);
},
payWechat: function() {
this.ctrl.requireServerAddOrder(this.goodsId, this.wxPayType);
},
payZhiFuBao: function() {
this.ctrl.requireServerAddOrder(this.goodsId, s.PayType.Alipay);
},
update: function(e) {}
});
cc._RF.pop();
}, {
ShopConst: "ShopConst"
} ],
sendRecordView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "876ceBttW9EFJiGlfpWYuN2", "sendRecordView");
var s = e("List");
cc.Class({
extends: ViewBase,
properties: {
maskBtn: cc.Node,
toggleLeft: cc.Node,
toggleRight: cc.Node,
txtNoRecord: cc.Node,
listView: s
},
onCreate: function() {
this.initData();
this.initEvent();
this.initUI();
},
initData: function() {
this.ctrl = app.ctrls.bag;
this.model = this.ctrl.getModel();
this.records = this.model.getGiftRecord();
this.ctrl.getGiftRecordByRoleId();
},
initEvent: function() {
this.eventOn(this.model.EVENT_GET_RECORD_SUCCESS, this.handleGetRecordSuccess, this);
},
initUI: function() {
var e = this;
this.itemList = [];
this.onClick(this.maskBtn, function() {
ViewManager.closeView(e);
});
this.toggleLeft.on("toggle", function() {
e.switchChannel(1);
});
this.toggleRight.on("toggle", function() {
e.switchChannel(2);
});
this.toggleLeft.getComponent(cc.Toggle).isChecked = !0;
this.switchChannel(1);
},
switchChannel: function(e) {
if (e != this.seleIndex) {
this.seleIndex = e;
this.freshSendRecord();
}
},
freshSendRecord: function() {
this.configs = this.records[this.seleIndex] || [];
ArrayUtils.sort(this.configs, function(e, t) {
return e.id - t.id;
});
this.txtNoRecord.active = this.configs.length <= 0;
this.listView.numItems = this.configs.length;
this.listView.scrollTo(0, .02);
},
onRenderEvent: function(e, t) {
var i = this.configs[t];
TypeUtils.isRealNull(e.txtTime) && (e.txtTime = this.seekChild(e, "txtTime"));
TypeUtils.isRealNull(e.txtDesc) && (e.txtDesc = this.seekChild(e, "txtDesc"));
var s = StringUtils.getHtmlStr([ {
str: "你给【",
color: "#2D70CD"
}, {
str: i.receiver_name,
color: "#0B356D"
}, {
str: "ID:",
color: "#2D70CD"
}, {
str: i.receiver_id,
color: "#0B356D"
}, {
str: "】赠送了",
color: "#2D70CD"
}, {
br: !0
}, {
str: "【",
color: "#2D70CD"
}, {
str: ItemUtils.getItemName(i.itemId) + "*" + i.amount,
color: "#DB38E1"
}, {
str: "】",
color: "#2D70CD"
} ]);
2 == this.seleIndex && (s = StringUtils.getHtmlStr([ {
str: "【",
color: "#2D70CD"
}, {
str: i.sender_name,
color: "#0B356D"
}, {
str: "ID:",
color: "#2D70CD"
}, {
str: i.sender_id,
color: "#0B356D"
}, {
str: "】给你赠送了",
color: "#2D70CD"
}, {
br: !0
}, {
str: "【",
color: "#2D70CD"
}, {
str: ItemUtils.getItemName(i.item_id) + "*" + i.amount,
color: "#DB38E1"
}, {
str: "】",
color: "#2D70CD"
} ]));
var n = TimeUtils.dateFormat("YYYY-mm-dd\nHH:MM:SS", i.addTime);
e.txtTime.getComponent(cc.Label).string = n;
e.txtDesc.getComponent(cc.RichText).string = s;
},
onListSelected: function(e, t, i, s) {
var n = this, o = this.configs[t], a = ItemUtils.getItemGiveConfig(o.item_id);
o.amount <= 0 ? TipsUtils.showTips("你没有该物品") : this.ctrl.getGiveItemCount(o.item_id, {
callback: function(e) {
if (!isNaN(Number(e)) && Number(e) > 0) {
a.canSendNum = Number(e);
var t = {};
t.itemId = o.item_id;
t.amount = ItemUtils.getItemNum(o.item_id);
var i = o.receiver_id;
2 == n.seleIndex && (i = o.sender_id);
RoleUtils.checkSecondPwd(function() {
a.canSendNum = Number(e);
ViewManager.showView("BAG_SEND_VIEW", null, {
itemData: o,
giveCfg: a,
roleId: i
});
});
} else TipsUtils.showTips("赠送已达上限");
}
});
},
handleGetRecordSuccess: function() {
this.records = this.model.getGiftRecord();
this.freshSendRecord();
}
});
cc._RF.pop();
}, {
List: "List"
} ],
settingView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "51420uQjrRHOI9ZybW9HepY", "settingView");
cc.Class({
extends: ViewBase,
properties: {
nodeMusic: cc.Node,
nodeEffect: cc.Node,
toggleMusic: cc.Toggle,
toggleEffect: cc.Toggle,
nodeBox: cc.Node,
toggleBox: cc.Toggle,
txtVersion: cc.Label,
btnExit: cc.Node,
prefabBg: cc.Prefab
},
onCreate: function() {
var e = this;
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
ViewManager.closeView(e);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(650, 440)
});
this.comBg.getComponent("comBasePopView").setTitle("设 置");
this.txtVersion.string = "版本：" + GlobalUtils.getVersion();
this.nodeMusic.on("toggle", this.onClickMusic, this);
this.toggleMusic.isChecked = AudioMusicManager.getMusicVolume() > 0;
this.nodeEffect.on("toggle", this.onClickEffect, this);
this.toggleEffect.isChecked = AudioMusicManager.getSoundVolume() > 0;
this.nodeBox.on("toggle", this.onClickLiuHai, this);
var t = UserUtils.getFloatVal(UserDefaultConst.UserSettingIsLiuHai, 0);
this.toggleBox.isChecked = t > 0;
this.time = 0;
this.onClick(this.btnExit, this.onClickExit.bind(this));
},
onClickMusic: function(e) {
AudioMusicManager.setMusicVolume(e.isChecked ? 1 : 0);
},
onClickEffect: function(e) {
AudioMusicManager.setSoundVolume(e.isChecked ? 1 : 0);
},
onClickLiuHai: function(e) {
var t = this;
if (this.time > 0) {
e.isChecked = UserUtils.getFloatVal(UserDefaultConst.UserSettingIsLiuHai, 0) > 0;
TipsUtils.showTips("操作太频繁,请稍后");
} else {
this.time = 3;
UserUtils.setFloatVal(UserDefaultConst.UserSettingIsLiuHai, e.isChecked ? 1 : 0);
this.emit(AppEvent.AdaptLiuHaiUI);
ActionUtils.callOnce(this.nodeBox, function() {
t.time = 0;
}, 3);
}
},
onClickExit: function() {
app.ctrls.game.resetData();
ViewManager.showView("LOGIN_VIEW");
}
});
cc._RF.pop();
}, {} ],
sevenDayItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "a8274klJadEeK2SZUFG5OcS", "sevenDayItem");
var s = e("BaseComponent"), n = e("TaskConst");
cc.Class({
extends: s,
properties: {
sprIcon: cc.Node,
rateProgress: cc.Node,
sprLingQu: cc.Node,
txtDay: cc.Label,
txtDesc: cc.Label,
txtRate: cc.Label,
comItem: cc.Prefab
},
onLoad: function() {
this.initUI();
},
initUI: function() {
this.itemList = [];
for (var e = 0; e < 4; e++) {
var t = cc.instantiate(this.comItem);
t.parent = this.node;
t.x = e % 2 == 0 ? -60 : 60;
t.y = -50 - 80 * Math.floor(e / 2);
t.script = t.getComponent("comItem");
t.scale = .7;
this.itemList.push(t);
}
},
setData: function(e) {
this.txtDay.string = StringUtils.format(_LANG("SEVEN_DAY_TITLE"), e.rank);
this.txtDesc.string = StringUtils.format(_LANG("SEVEN_DAY_TITLE"), e.name);
SpriteUtils.setTexture({
path: "module/fish/texture/sevenDay/" + e.icon,
isHide: !0
}, this.sprIcon, this);
for (var t = 0; t < this.itemList.length; t++) {
var i = e.award[t];
this.itemList[t].script.setData(i);
}
if (TypeUtils.isRealNull(e.status)) {
this.rateProgress.getComponent(cc.ProgressBar).progress = 0;
this.txtRate.string = "0/" + e.num;
this.sprLingQu.active = !1;
} else {
this.rateProgress.getComponent(cc.ProgressBar).progress = e.progress / e.num;
this.txtRate.string = e.progress + "/" + e.num;
this.sprLingQu.active = e.status == n.FinishStatus.HasReceive;
}
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
TaskConst: "TaskConst"
} ],
sevenDayView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "392cd6H2+VHkK0rvgS6oUSS", "sevenDayView");
var s = e("TaskConst"), n = e("List");
cc.Class({
extends: ViewBase,
properties: {
btnClose: cc.Node,
listView: n,
btnSure: cc.Node,
spBtn: cc.Node
},
onCreate: function() {
this.initData();
this.initEvent();
this.initUI();
},
initData: function() {
this.ctrl = app.fishCtrls.catchFish;
this.model = this.ctrl.getModel();
this._taskCtrl = app.ctrls.task;
this._taskModel = this._taskCtrl.getModel();
},
initEvent: function() {
this.eventOn(this._taskModel.EVENT_UPDATE_TASK_INFO, this.handleUpdateTaskInfo, this);
},
initUI: function() {
var e = this;
this.onClick(this.btnClose, function() {
ViewManager.closeView(e);
});
this.onClick(this.btnSure, this.hanldeTouchFetch.bind(this));
this.spBtn.active = !1;
var t = 0;
this.taskInfos = this._taskModel.getFishSevenDayTask();
for (var i = 0; i < this.taskInfos.length; i++) {
var n = this.taskInfos[i];
!TypeUtils.isRealNull(n.status) && n.status < s.FinishStatus.HasReceive && (t = i);
}
var o = t > 0 ? t - 1 : 0;
this.updateList(o);
this.onUpdateTaskInfo();
FishUtils.showOpenSpine(this.node);
},
updateList: function(e) {
e = e || 0;
this.listView.numItems = this.taskInfos.length;
this.listView.scrollTo(e, .02);
},
onRenderEvent: function(e, t) {
var i = this.taskInfos[t];
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("sevenDayItem"));
e.script.setData(i);
},
hanldeTouchFetch: function() {
for (var e = 0; e < this.taskInfos.length; e++) {
var t = this.taskInfos[e];
TypeUtils.isRealNull(t.status) || t.status != s.FinishStatus.Finish || this._taskCtrl.getTaskAward(t.id, t.award);
}
},
handleUpdateTaskInfo: function() {
this.onUpdateTaskInfo();
this.updateList();
},
onUpdateTaskInfo: function() {
var e = !1;
this.taskInfos = this._taskModel.getFishSevenDayTask();
for (var t = 0; t < this.taskInfos.length; t++) {
var i = this.taskInfos[t];
if (!TypeUtils.isRealNull(i.status) && i.status == s.FinishStatus.Finish) {
e = !0;
break;
}
}
this.spBtn.active = e;
},
setShowFinishCb: function(e) {
this.showCallBack = e;
}
});
cc._RF.pop();
}, {
List: "List",
TaskConst: "TaskConst"
} ],
shareHitBoss: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "19d6c0V/wJKTJPbj36y6LUt", "shareHitBoss");
var s = e("CommonConst");
cc.Class({
extends: ViewBase,
properties: {
mask: cc.Node,
sprBg: cc.Node,
sprBoss: cc.Node,
txtGunLv: cc.Label,
txtAwardLv: cc.Label,
sprBossName: cc.Node,
QrCode: cc.Node,
sprTip: cc.Node,
txtTip: cc.Label,
btnPYQ: cc.Node,
btnWX: cc.Node,
comItem: cc.Prefab
},
onCreate: function(e) {
ViewBase.prototype.onCreate.call(this);
this.data = e || {
items: [ {
itemId: 2,
amount: 1e6
}, {
itemId: 5,
amount: 1e3
} ],
bossId: 80,
myGunRadio: 1e4,
bossRadio: 564
};
this.initData();
this.initView();
},
initData: function() {},
initView: function() {
var e = this;
this.onClick(this.btnWX, this.shareToFriend.bind(this));
this.onClick(this.btnPYQ, this.shareToCircle.bind(this));
this.onClick(this.mask, function() {
ViewManager.closeView(e);
});
var t = TableUtils.filter(this.data.items, function(e, t) {
return 1 != ItemUtils.getItemConfig(t.itemId).noShow;
});
this.itemList = [];
for (var i = 0; i < t.length && !(i > 1); i++) {
var s = cc.instantiate(this.comItem);
s.parent = this.sprBg;
s.x = 20 + 150 * i;
s.y = -50;
s.getComponent("comItem").setData(t[i]);
this.itemList.push(s);
}
1 == t.length && (this.itemList[0].x = 105);
SpriteUtils.setTexture({
path: "module/fish/texture/fishShare/fish_" + this.data.bossId
}, this.sprBoss, this);
SpriteUtils.setTexture({
path: "module/fish/texture/fishShare/txt_fish_" + this.data.bossId
}, this.sprBossName, this);
this.txtGunLv.string = this.data.myGunRadio;
this.txtAwardLv.string = this.data.bossRadio;
},
shareToFriend: function() {
SpriteUtils.getScreenPic(this.sprBg, "bossShare.png", function(e, t) {
TypeUtils.isRealNull(t) || AppUtils.getPlatform().shareImageToWX(t, !1, function(e) {
app.ctrls.role.shareToFriend(s.ShareTarget.WeChatFriends);
TipsUtils.showTips(_LANG("SHARE_IMAGE_SUCCESS"));
});
});
},
shareToCircle: function() {
SpriteUtils.getScreenPic(this.sprBg, "bossShare.png", function(e, t) {
TypeUtils.isRealNull(t) || AppUtils.getPlatform().shareImageToWX(t, !0, function(e) {
app.ctrls.role.shareToFriend(s.ShareTarget.Moments);
TipsUtils.showTips(_LANG("SHARE_IMAGE_SUCCESS"));
});
});
}
});
cc._RF.pop();
}, {
CommonConst: "CommonConst"
} ],
shareView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "c4a55B1Wv9D+7nZ4bZ4wfDh", "shareView");
var s = e("ItemConst"), n = e("CommonConst");
cc.Class({
extends: ViewBase,
properties: {
btnWechat: cc.Node,
btnPYQ: cc.Node,
sprIcon: cc.Node,
obtainNum: cc.Label,
prefabBg: cc.Prefab
},
onCreate: function(e) {
var t = this;
this.param = e || {};
this.shareType = this.param.type || n.ShareType.Hall;
ViewBase.prototype.onCreate.call(this);
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBasePopView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBasePopView").setBgContentsize({
size: cc.size(570, 320)
});
this.comBg.getComponent("comBasePopView").setTitle("分 享");
this.comBg.getComponent("comBasePopView").showBgType(1);
this.comBg.getComponent("comBasePopView").setCenterWidget(70, "top");
this.comBg.getComponent("comBasePopView").setCenterWidget(70, "bottom");
this.initData(e);
this.initEvent();
this.initUI();
},
initData: function(e) {
this.ctrl = app.ctrls.role;
this.model = this.ctrl.getModel();
},
initEvent: function() {},
initUI: function() {
var e = this;
this.onClick(this.btnWechat, this.shareWeChat.bind(this));
this.onClick(this.btnPYQ, this.sharePYQ.bind(this));
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(s.ResourceType.Gold),
callback: function() {
SpriteUtils.setAdaptContentSize(e.sprIcon, null, 45);
}
}, this.sprIcon, this);
},
shareWeChat: function() {
var e = this;
this.shareType == n.ShareType.Hall ? this.ctrl.getCommShare(function(t) {
e.shareToWX(t, !1);
}) : app.ctrls.club.httpGetShareImage(this.param.clubId, this.param.roleId, function(t) {
e.shareToWX(t, !1);
});
},
sharePYQ: function() {
var e = this;
this.shareType == n.ShareType.Hall ? this.ctrl.getCommShare(function(t) {
e.shareToWX(t, !0);
}) : app.ctrls.club.httpGetShareImage(this.param.clubId, this.param.roleId, function(t) {
e.shareToWX(t, !0);
});
},
shareToWX: function(e, t) {
AppUtils.getPlatform().shareImageToWX(e, t, function(e) {
app.ctrls.role.shareToFriend(t ? n.ShareType.Moments : n.ShareType.WeChatFriends);
TipsUtils.showTips(_LANG("SHARE_IMAGE_SUCCESS"));
});
},
update: function(e) {}
});
cc._RF.pop();
}, {
CommonConst: "CommonConst",
ItemConst: "ItemConst"
} ],
shopView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "9f0f7A9C3NBuoF0RYXXsZ5u", "shopView");
var s = e("List"), n = e("ShopConst"), o = null, a = null, r = [ {
id: n.Shop_Diamond,
paths: {
enable: "module/fish/texture/fishShop/by_shop_txt_05_disable",
sele: "module/fish/texture/fishShop/by_shop_txt_05_enable"
},
icon: "module/fish/texture/fishShop/by_shop_icon_pao",
scale: .8
}, {
id: n.Shop_Stone,
paths: {
enable: "module/fish/texture/fishShop/by_shop_txt_02_disable",
sele: "module/fish/texture/fishShop/by_shop_txt_02_enable"
},
icon: "module/fish/texture/fishShop/by_shop_icon_jinzuan",
scale: .8
}, {
id: n.Shop_Gun,
paths: {
enable: "module/fish/texture/fishShop/by_shop_txt_06_disable",
sele: "module/fish/texture/fishShop/by_shop_txt_06_enable"
},
icon: "module/fish/texture/fishShop/by_shop_icon_pifu"
}, {
id: n.Shop_FishItem,
paths: {
enable: "module/fish/texture/fishShop/by_shop_txt_03_disable",
sele: "module/fish/texture/fishShop/by_shop_txt_03_enable"
},
icon: "module/fish/texture/fishShop/by_shop_icon_item",
scale: .6
} ];
cc.Class({
extends: ViewBase,
properties: {
goodsList: s,
nodeBot: cc.Node,
richDesc: cc.RichText,
sprCurVip: cc.Node,
vipProgress: cc.ProgressBar,
richExp: cc.RichText,
sprNextVip: cc.Node,
btnVip: cc.Node,
txtBtnDesc: cc.Node,
prefabBg: cc.Prefab,
tipsScroll: cc.Prefab,
goodsItem: cc.Prefab
},
onCreate: function(e) {
e = e || {};
this.initConfig();
this.initData();
this.initEvent();
this.initUI(e);
"true" == UserUtils.getVal(UserDefaultConst.Shop_isOrderNotFinish) && AppUtils.getPlatform().checkRecoverOrder();
},
initConfig: function() {
ConfigMgr.getConfig("shop_config");
ConfigMgr.getConfig("item_config");
o = ConfigMgr.getConfig("fish_vip_config");
a = ConfigMgr.getConfig("shop_give_config");
},
initData: function() {
this.ctrl = app.ctrls.shop;
this.model = this.ctrl.getModel();
this._vipCtrl = app.ctrls.vip;
this._vipModel = this._vipCtrl.getModel();
this._vipCtrl.getVipInfo();
},
initEvent: function() {
this.eventOn(this.model.EVENT_SHOP_INFO_UPDATE, this.updateShopInfo, this);
this.eventOn(this._vipModel.EVENT_UPDATE_VIP_INFO, this.handleUpdateVipInfo, this);
},
initUI: function(e) {
var t = this;
this.playSound("welcome");
this.tabIndex = 0;
if (TypeUtils.isRealNull(e.id)) this.tabIndex = e.index || 0; else for (var i = 0; i < r.length; i++) if (e.id == r[i].id) {
this.tabIndex = i;
break;
}
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBaseView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBaseView").setTitle({
type: 1,
path: "module/fish/texture/fishShop/title",
bgType: 2
});
this.comBg.getComponent("comBaseView").showTabStyle({
tabCfg: r,
callFunc: this.seleIndex.bind(this),
defaultIdx: this.tabIndex,
scale: 1.1
});
this.comBg.getComponent("comBaseView").showTitleSp();
this.tipsView = cc.instantiate(this.tipsScroll);
this.tipsView.script = this.tipsView.getComponent("tipsScrollView");
this.tipsView.parent = this.node;
this.tipsView.zIndex = 999;
this.itemList = [];
this.updateList();
this.initVipInfo();
FishUtils.showOpenSpine(this.node);
},
seleIndex: function(e) {
if (this.tabIndex != e) {
this.tabIndex = e;
this.updateList();
}
},
updateList: function(e) {
var t = r[this.tabIndex];
this.shopData = this.model.getShopData(t.id);
e || (this.canAction = !0);
this.goodsList.numItems = this.shopData.length;
this.goodsList.scrollTo(0, .02);
},
onRenderEvent: function(e, t) {
var i = this, s = this.shopData[t], n = this._vipModel.getVipLevel(), a = o.findByIndex(n).giftRatio;
if (TypeUtils.isRealNull(e.script)) {
e.script = e.getComponent("goodsItem");
e.script.setCellCB(this.onClickCell.bind(this));
}
e.script.setData(s, a, t);
e.stopAllActions();
e.scale = 1;
if (this.canAction) {
e.scale = 0;
ActionUtils.sequence(e, cc.delayTime(.05 * t), cc.scaleTo(.1, 1.1), cc.scaleTo(.05, 1), cc.callFunc(function() {
i.canAction = !1;
}));
}
},
initVipInfo: function() {
this.onClick(this.btnVip, function() {
TipsUtils.showTips("敬请期待");
});
this.nodeBot.active = !1;
},
updateShopInfo: function() {
this.updateList(!0);
},
handleUpdateVipInfo: function() {
this.updateList(!0);
this.updateVipInfo();
},
updateVipInfo: function() {
var e = this._vipModel.getVipLevel(), t = e, i = this._vipModel.getVipExp(), s = o.findByIndex(e + 1);
SpriteUtils.setTexture({
path: "module/fish/texture/fishShop/tq_txt_type_b_" + e,
isHide: !0
}, this.sprCurVip, this);
var n = StringUtils.getHtmlStr([ {
str: "已达到最高VIP等级！",
color: "#FFFFFF",
outline: "#1F599A",
lineSize: 2
} ]), a = StringUtils.getHtmlStr([ {
str: "再充值",
color: "#FFFFFF",
outline: "#1F599A",
lineSize: 2
}, {
str: " %s ",
color: "#DCC741",
outline: "#C1542A",
lineSize: 2
}, {
str: "元即可成为",
color: "#FFFFFF",
outline: "#1F599A",
lineSize: 2
}, {
str: " VIP%s",
color: "#DCC741",
outline: "#C1542A",
lineSize: 2
}, {
str: ",高级VIP可同时享有低级特权",
color: "#FFFFFF",
outline: "#1F599A",
lineSize: 2
} ]), r = StringUtils.getHtmlStr([ {
str: "%s/%s",
color: "#FFFFFF",
outline: "#CC6000",
lineSize: 2
} ]), l = StringUtils.format(r, 0, 0), c = 1;
if (!TypeUtils.isRealNull(s)) {
n = StringUtils.format(a, s.exp - i, e + 1);
l = StringUtils.format(r, i, s.exp);
c = i / s.exp;
t += 1;
}
SpriteUtils.setTexture({
path: "module/fish/texture/fishShop/tq_txt_type_b_" + t,
isHide: !0
}, this.sprNextVip, this);
this.richDesc.string = n;
this.richExp.string = l;
this.vipProgress.progress = c;
},
onClickCell: function(e, t) {
var i = this.shopData[e], s = this.getGiveContent(i);
TypeUtils.isAllNull(s) || this.tipsView.script.onClickBtnPlay(t, s);
},
getGiveContent: function(e) {
var t = this.model.getShopInfo(), i = 1;
for (var s in t) if (t.hasOwnProperty(s)) {
if (t[s].shopIndex == e.id) {
i = v.buyNums + 1;
break;
}
}
var n = i <= 1 ? "首充赠送:" : "额外赠送:", r = !1;
a.forEach(function(t) {
if (t.id == e.id) {
var s = t.send[0];
if (t.range[0] <= i && (t.range[1] >= i || -1 == t.range[1])) {
n = n + NumberUtils.toString(s.amount, 2) + ItemUtils.getItemName(s.itemId) + "<br />";
r = !0;
}
}
});
var l = this._vipModel.getVipLevel(), c = o.findByIndex(l).giftRatio;
if (c > 0 && e.vipMoreGift) {
var h = e.goods[0];
n = n + "VIP赠送:" + NumberUtils.toString(c * h.amount, 2) + ItemUtils.getItemName(h.itemId);
r = !0;
}
r || (n = "");
return n;
}
});
cc._RF.pop();
}, {
List: "List",
ShopConst: "ShopConst"
} ],
signDayItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "4738eN1chlD57542JFgNhPG", "signDayItem");
var s = e("BaseComponent"), n = e("ItemConst");
cc.Class({
extends: s,
properties: {
sprHasLQ: cc.Node,
sprLQ: cc.Node,
sprIcon: cc.Node,
sprGou: cc.Node,
sprTips: cc.Node,
txtTips: cc.Label,
txtNum: cc.Node,
txtDay: cc.Node
},
ctor: function() {},
onLoad: function() {
s.prototype.onLoad.call(this);
this.initData();
this.initUI();
},
initData: function() {
this.ctrl = app.ctrls.welfare;
this.model = this.ctrl.getModel();
},
initUI: function() {
this.sprHasLQ.active = !1;
this.sprLQ.active = !1;
this.sprGou.active = !1;
this.sprTips.active = !1;
this.txtNum.getComponent(cc.Label).string = "";
this.txtDay.getComponent(cc.Label).string = "";
},
setData: function(e, t) {
var i = this;
this.initUI();
this.txtDay.getComponent(cc.Label).string = StringUtils.format("第%s天", e.id);
var s = cc.color(31, 89, 154, 255), o = cc.color(24, 56, 147, 255);
if (this.model.isGetWeekSignAward(e.id)) {
this.sprGou.active = !0;
this.sprHasLQ.active = !0;
} else if (e.id <= t) {
s = cc.color(195, 112, 38, 255);
o = cc.color(195, 112, 38, 255);
this.sprLQ.active = !0;
}
var a = 1;
app.ctrls.shop.getModel().getGiftInfoById(n.GiftType.FishCard) > 0 && (a = e.monthCardDouble || 1);
this.sprTips.active = a > 1;
SpriteUtils.setTexture({
path: ItemUtils.getItemPngByCfg(e.award),
callback: function() {
SpriteUtils.setAdaptContentSize(i.sprIcon, 100);
}
}, this.sprIcon, this);
var r = NumberUtils.toString(e.award.amount * a, 2);
this.txtNum.getComponent(cc.Label).string = ItemUtils.getItemName(e.award.itemId) + "X" + r;
this.txtNum.getComponent(cc.LabelOutline).color = s;
this.txtDay.color = o;
this.onClick(this.node, function() {
var t = ItemUtils.getItemConfig(e.award.itemId), s = {
itemId: e.award.itemId,
amount: e.award.amount * a
};
t.autoUse && (s = null);
i.ctrl.getWeekSignAward(e.id, s);
});
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
ItemConst: "ItemConst"
} ],
signUpView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "728b7Ab5s9DZaYXB8ALHkLz", "signUpView");
var s = [ 3, 7, 10, 15 ];
cc.Class({
extends: ViewBase,
properties: {
sprBg: cc.Node,
sprTipsBg: cc.Node,
txtDay: cc.Label,
nodePnl: cc.Node,
btnSign: cc.Node,
progSignDay: cc.Node,
txtDays: [ cc.Node ],
signDayItem: cc.Prefab,
signMonthItem: cc.Prefab
},
onCreate: function(e) {
ViewBase.prototype.onCreate.call(this, e);
this.initData();
this.initEvent();
this.initUI();
},
onAdapt: function() {},
initData: function() {
var e = this;
this.ctrl = app.ctrls.welfare;
this.model = this.ctrl.getModel();
this.m_monthSignConfig = [];
ConfigMgr.getConfig("fish_sign_box_config").forEach(function(t) {
e.m_monthSignConfig.push(t);
});
ArrayUtils.sort(this.m_monthSignConfig, function(e, t) {
return e.day - t.day;
});
this.m_daySignConfig = [];
ConfigMgr.getConfig("fish_sign_in_config").forEach(function(t) {
e.m_daySignConfig.push(t);
});
ArrayUtils.sort(this.m_daySignConfig, function(e, t) {
return e.id - t.id;
});
},
initEvent: function() {
this.eventOn(this.model.EVENT_GET_MONTH_AWARD, this.handleGetMonthAward, this);
this.eventOn(this.model.EVENT_GET_WEEK_AWARD, this.handleGetWeekAward, this);
this.eventOn(this.model.EVENT_GET_SIGN_INFO_SUCCESS, this.handleGetSignInfo, this);
RedRemindManager.doRemind(AppEvent.RedPointFishSignUp);
},
initUI: function() {
this.onClick(this.btnSign, this.onClickGetAll.bind(this));
this.initDayItem();
this.initMonthItem();
this.handleGetSignInfo();
this.doEnterAction();
},
initDayItem: function() {
this.dayItemList = [];
for (var e = 0; e < 7; e++) {
var t = cc.instantiate(this.signDayItem);
t.parent = this.nodePnl;
t.x = (e - 3) * this.nodePnl.width / 7;
t.y = 0;
t.script = t.getComponent("signDayItem");
this.dayItemList.push(t);
}
},
initMonthItem: function() {
this.monthItemList = [];
for (var e = 0; e < 4; e++) {
var t = cc.instantiate(this.signMonthItem);
t.parent = this.progSignDay;
t.x = this.progSignDay.width * (s[e] / 15 - .5);
t.y = 70;
t.script = t.getComponent("bubbleItem");
t.script.setClickCB(this.onClickBubble.bind(this));
this.monthItemList.push(t);
}
for (var i = 0; i < this.txtDays.length; i++) {
var n = this.txtDays[i];
n.x = this.progSignDay.width * (s[i] / 15 - .5);
n.getComponent(cc.Label).string = s[i] + "天";
}
},
onClickBubble: function(e) {
var t = ItemUtils.getItemConfig(e.award[0].itemId), i = 1;
app.ctrls.shop.getModel().getGiftInfoById(ItemConst.GiftType.FishCard) > 0 && (i = e.monthCardDouble || 1);
for (var s = [], n = 0; n < e.award.length; n++) {
var o = e.award[n];
s.push({
itemId: o.itemId,
amount: o.amount * i
});
}
t.autoUse && (s = null);
this.ctrl.getMonthSignAward(e.day, s);
},
onClickGetAll: function() {
for (var e = this.model.getSignUpWeekDay(), t = this.model.getSignUpMonthDay(), i = (this._vipModel.getVipLevel(), 
!1), s = app.ctrls.shop.getModel().getGiftInfoById(ItemConst.GiftType.FishCard), n = 0; n < this.m_daySignConfig.length; n++) {
var o = 1;
s > 0 && (o = config.monthCardDouble || 1);
if (!this.model.isGetWeekSignAward(config.id) && config.id <= e) {
var a = ItemUtils.getItemConfig(config.award.itemId), r = {
itemId: config.award.itemId,
amount: config.award.amount * o
};
a.autoUse && (r = null);
this.ctrl.getWeekSignAward(config.id, r);
i = !0;
}
}
for (var l = 0; l < this.m_monthSignConfig.length; l++) {
var c = this.m_monthSignConfig[l], h = 1;
s > 0 && (h = c.monthCardDouble || 1);
if (!this.model.isGetMonthSignAward(c.day) && c.day <= t) {
for (var u = ItemUtils.getItemConfig(c.award[0].itemId), d = [], p = 0; p < c.award.length; p++) {
var f = c.award[p];
d.push({
itemId: f.itemId,
amount: f.amount * h
});
}
u.autoUse && (d = null);
this.ctrl.getMonthSignAward(c.day, d);
i = !0;
}
}
i || TipsUtils.showTips("无可领取奖励");
},
freshDayList: function() {
for (var e = this.model.getSignUpWeekDay(), t = 0; t < this.dayItemList.length; t++) {
this.dayItemList[t].script.setData(this.m_daySignConfig[t], e);
}
},
freshMonthList: function() {
var e = this.model.getSignUpMonthDay();
this.progSignDay.getComponent(cc.ProgressBar).progress = e / 15;
this.txtDay.string = e;
for (var t = 0; t < this.monthItemList.length; t++) {
var i = this.monthItemList[t], s = this.m_monthSignConfig[t];
s.isGet = this.model.isGetMonthSignAward(s.day);
i.script.setData(s);
}
},
handleGetMonthAward: function() {
this.freshMonthList();
},
handleGetWeekAward: function() {
this.freshDayList();
},
handleGetSignInfo: function() {
this.freshDayList();
this.freshMonthList();
},
doEnterAction: function() {
var e = this;
this.dayItemList.length > 0 && (this.btnSign.scale = 0);
for (var t = function(t) {
var i = e.dayItemList[t];
i.stopAllActions();
i.scale = 0;
ActionUtils.sequence(i, cc.delayTime(.03 * t), function() {
if (t == e.dayItemList.length - 1) {
e.btnSign.stopAllActions();
e.btnSign.scale = 0;
e.btnSign.runAction(cc.scaleTo(.2, 1).easing(cc.easeBackOut()));
}
}, cc.scaleTo(.2, 1).easing(cc.easeBackOut()));
}, i = 0; i < this.dayItemList.length; i++) t(i);
}
});
cc._RF.pop();
}, {} ],
socket: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "5e89eZdB+tCm5CROzxQPEpx", "socket");
var s = e("BaseManager"), n = e("sproto"), o = e("utils"), a = {};
cc.Class({
extends: s,
properties: {
data: 1e3,
isInit: !1,
EVENT_ERROR: "NetError",
EVENT_CLOSED: "NetClose"
},
ctor: function() {
this.initData();
},
initData: function() {
var e = this;
this.maxMsgSize = 65535;
this.requestTb = [];
this.requestId = 0;
this.connectTime = 0;
this.m_requsetViewData = {};
this.buffer = null;
this.connectCallback = null;
this.m_isLockAllEvent = !1;
this.m_tryConnect = !1;
this.m_lockEventCache = [];
this.frozenEvents = [];
this.dispatcherList = {};
this.latestResponseTime = 0;
this.expireInterval = 0;
this.openTime = new Date().getTime();
LoadUtils.loadResWithType("sproto/cacert", cc.Asset, function(t, i) {
TypeUtils.isRealNull(t) && (e.wssCacert = i);
});
},
registerAllProtos: function(e) {
this.protosById = e.protos;
var t = cc.url.raw("resources/sproto/sprotos.spb");
cc.loader.load({
url: t,
type: "binary"
}, function(e, t) {
if (e) console.error("加载失败", e); else {
t instanceof ArrayBuffer && (t = o.arraybuffer2array(t));
a = n.createNew(t);
}
});
},
connect: function(e, t, i) {
var s = this;
console.log("Network connetSocket...");
this.isInit;
this.connectCallback = i;
var n = function(e) {
if (TypeUtils.isFunction(s.connectCallback)) {
s.connectCallback(e);
s.connectCallback = null;
}
};
this.socket = new WebSocket("wss://dafuhao.wss.test.threegame.cn", [], this.wssCacert.url);
this.socket.binaryType = "arraybuffer";
this.socket.onopen = function(e) {
e = e || {};
console.log("Network onopen...");
s.isInit = !0;
s.openTime = new Date().getTime();
s.m_tryConnect = !1;
e.type = e.type || "open";
n(e);
};
this.socket.onmessage = function(e) {
s.handleData(e);
};
this.socket.onerror = function(e) {
e = e || {};
console.log("Network onerror...");
if (s.m_tryConnect) s.tryReconnect(); else {
e.type = e.type || "error";
n(e);
EventManager.emit(s.EVENT_ERROR, e);
}
};
this.socket.onclose = function(e) {
if (!(new Date().getTime() - s.openTime < 500)) {
e = e || {};
s.isInit = !1;
if (!s.m_tryConnect) {
e.type = e.type || "close";
n(e);
EventManager.emit(s.EVENT_CLOSED, e);
s._resetAll();
}
}
};
},
isConnected: function() {
return !(!this.socket || !cc.sys.isObjectValid(this.socket)) && this.socket.readyState === WebSocket.OPEN;
},
isConnecting: function() {
return !(!this.socket || !cc.sys.isObjectValid(this.socket)) && this.socket.readyState === WebSocket.CONNECTING;
},
_hasRequest: function(e) {
for (var t = 0; t < this.requestTb.length; t++) if (this.requestTb[t].id == e) return !0;
return !1;
},
_pushRequest: function(e, t, i) {
this.requestId >= 32767 ? this.requestId = 1 : this.requestId = this.requestId + 1;
if (TypeUtils.isFunction(t)) {
var s = {
id: e,
requestId: this.requestId,
callback: function(e, i) {
t(e);
},
param: i,
time: new Date().getTime()
};
this.requestTb.push(s);
return s;
}
},
_popRequest: function(e) {
for (var t = 0; t < this.requestTb.length; t++) {
var i = this.requestTb[t];
if (i.requestId == e) {
this.requestTb.splice(t, 1);
return i;
}
}
},
request: function(e, t, i, s, n, a) {
n = !(0 == n);
if (this.isConnected()) {
if (!a || !this._hasRequest(e.id)) {
var r = this._pushRequest(e.id, i, s), l = {
protoId: e.id,
requestId: this.requestId,
ec: 0
}, c = this.encode("base.HeaderPack", l), h = [ 0, 0 ];
h[0] = c.length << 8;
h[1] = 255 & c.length;
var u = this.encode(e.request, t), d = o.arrayconcat(c, u || ""), p = [ 0, 0 ];
p[0] = d.length + 2 << 8;
p[1] = d.length + 2 & 255;
d = o.arrayconcat(h, d);
d = o.arrayconcat(p, d);
var f = o.array2arraybuffer(d);
this.socket.send(f);
if (n) {
r.hasView = !0;
ViewManager.showRequest(null, ViewManager.TypeSocket, {
id: e.id,
name: e.desc
});
this.m_requsetViewData[e.id] = e.desc;
}
}
} else TypeUtils.isFunction(i) && i({
errorCode: SystemError.network
});
},
encode: function(e, t) {
if (!TypeUtils.isRealNull(e) && !TypeUtils.isRealNull(t)) {
var i;
if ("integer" == e) {
var s = {
number: t
};
i = a.pencode("base.BasicType", s);
} else if ("string" == e) {
var n = {
string: t
};
i = a.pencode("base.BasicType", n);
} else if ("bool" == e || "boolean" == e) {
var o = {
bool: t
};
i = a.pencode("base.BasicType", o);
} else (i = a.pencode(e, t)) && 0 != i.length || console.assert(!1);
return i;
}
},
decode: function(e, t) {
if (!TypeUtils.isRealNull(e) && !TypeUtils.isRealNull(t)) {
return "integer" == e ? a.pdecode("base.BasicType", t).number : "string" == e ? a.pdecode("base.BasicType", t).string : "bool" == e || "boolean" == e ? a.pdecode("base.BasicType", t).bool : a.pdecode(e, t);
}
},
handleData: function(e) {
if (this.isConnected()) {
this.resetBeatTime();
var t = this.buffer;
t = (t || "") + o.arraybuffer2str(e.data);
for (;t.length >= 2; ) {
var i = o.stringToBytes(t), s = o.arraybuffer2array(i), n = new DataView(i), a = n.getUint16(0);
if (a + 2 > t.length) {
this.buffer = t;
return;
}
t = t.substring(a + 2);
this.buffer = t;
var r = n.getUint16(2), l = s.slice(4, r + 4), c = s.slice(r + 4, a + 2), h = this.decode("base.HeaderPack", l), u = this.protosById[h.protoId];
if (TypeUtils.isRealNull(u)) console.error("id[0x" + h.protoId.toString(16) + "] of proto is invalid"); else {
var d = void 0;
u.response && h.ec == SystemError.success && (d = this.decode(u.response, c));
var p = !1;
if (this.m_isLockAllEvent && this.isLockProtoType(u)) {
this.m_lockEventCache.push({
header: h,
requestId: h.requestId,
proto: u,
ec: h.ec,
data: d
});
p = !0;
}
p || this._toDispatchProto(h, h.requestId, u, h.ec, d);
}
}
}
},
_toDispatchProto: function(e, t, i, s, n) {
if (i.type == PROTO_TYPE.C2S) this._dispatchC2S(t, i, s, n); else if (i.type == PROTO_TYPE.S2C) this._dispatchS2C(i, n); else {
console.log("type[0x" + i.type.toString(16) + "] of message is invalid");
this.close();
}
},
_dispatchC2S: function(e, t, i, s) {
this.latestResponseTime = new Date().getTime();
this.resetBeatTime();
var n = this._popRequest(e);
if (TypeUtils.isRealNull(n)) console.error("the response has not matched request[" + e + "], proto:" + t.fullname); else {
if (n.hasView) {
this.m_requsetViewData[t.id] = null;
ViewManager.hideRequest(ViewManager.TypeSocket, {
id: n.id,
name: t.desc
});
}
var o = {
errorCode: i,
data: s,
param: n.param
};
if (TypeUtils.isFunction(n.callback)) try {
n.callback(o);
} catch (e) {
console.error("session错误信息  result:", o, " msg:", e, "proto:", t);
} else console.error("error ： request.callback == null");
}
},
_dispatchS2C: function(e, t) {
var i = this.frozenEvents[e.fullname];
i ? i.keepLast ? i.datas[0] = t : i.datas[i.datas.length] = t || !0 : EventManager.emit(e.fullname, {
data: t
});
},
_getEventName: function(e) {
if (TypeUtils.isString(e)) return e;
var t = this.protosById[e.id];
if (!TypeUtils.isRealNull(t)) return t.fullname;
console.error("Session:_getEventName id[0x" + e.id.toString(16) + "] of proto is invalid");
},
addEventListener: function(e, t) {
var i = this._getEventName(e);
this.dispatcherList[i] = !0;
EventManager.on(i, t);
},
removeEventListener: function(e) {},
removeEventListenersByEvent: function(e) {
e && EventManager.offByType(e);
},
removeAllEventListeners: function() {
for (var e in this.dispatcherList) this.dispatcherList.hasOwnProperty(e) && EventManager.offByType(e);
this.dispatcherList = {};
},
getExpireInterval: function() {
return this.expireInterval;
},
setExpireInterval: function(e) {
this.expireInterval = e;
},
heartbeat: function(e) {
if (this.isConnected() && !this.isHbHandler) {
this.hbInterval = e;
this.resetBeatTime(this.hbInterval);
if (this.hbInterval > 0) {
this.isHbHandler = !0;
TimeMgr.on(this.handleHBTimeout, this, 1);
}
}
},
resetBeatTime: function() {
this.releaseHBTime = this.hbInterval + 5;
},
reset: function() {
this._resetAll();
},
close: function() {
this.socket.readyState === WebSocket.OPEN && this.socket.close();
},
handleHBTimeout: function(e) {
this.releaseHBTime = this.releaseHBTime - e;
if (this.releaseHBTime <= 0) {
console.log("****************************************");
console.log("==================断线==================");
console.log("****************************************");
TipsUtils.showTips("请求连接中！");
GameManager.isEnterToPlayGame() ? this.gotoTryNetWorkClose() : this.gotoTryReconnect();
} else {
new Date().getTime() - this.latestResponseTime > this.hbInterval && this.request(M_Auth.heartbeat, null, this.handleHeartbeat.bind(this), null, !1);
}
},
setConnectState: function(e) {
this.m_tryConnect = e;
},
gotoTryNetWorkClose: function() {
this.m_tryConnect = !1;
this.close();
this.reset();
app.ctrls.login.netWorkClosed();
},
gotoTryReconnect: function() {
this.close();
this.reset();
this.m_tryConnect = !0;
this.tryReconnect();
},
tryReconnect: function(e) {
e && (this.m_tryConnect = !0);
if (this.m_tryConnect) {
this.connectTime += 1;
if (this.connectTime > 8) {
this.m_tryConnect = !1;
app.ctrls.login.netWorkClosed();
}
ViewManager.hideRequest();
console.log("正在尝试重连.............", this.connectTime);
app.ctrls.login.checkAutoLogin();
}
},
handleHeartbeat: function(e) {},
handleServerTime: function(e) {
console.log("收到服务器时间", e);
},
freezeEvent: function(e, t) {
var i = this.protosById[e.id];
if (TypeUtils.isRealNull(i)) console.warn("freezeEvent,protoId[0x" + e.id.toString(16) + "] is invalid", e.id); else {
var s = this.frozenEvents[i.fullname];
if (TypeUtils.isRealNull(s)) {
s = {
proto: i,
datas: []
};
this.frozenEvents[i.fullname] = s;
}
s.keepLast = t;
}
},
unfreezeEvent: function(e, t) {
var i = this.protosById[e.id];
if (TypeUtils.isRealNull(i)) console.warn("freezeEvent,protoId[0x" + e.id.toString(16) + "] is invalid", e.id); else {
var s = DicUtils.copy(this.frozenEvents[i.fullname]);
if (!TypeUtils.isRealNull(s)) {
this.frozenEvents[i.fullname] = null;
s.datas = s.datas || [];
if (s.datas.length <= 0 || t) return;
for (var n = 0; n < s.datas.length; n++) {
var o = s.datas[n];
1 == o && (o = null);
EventManager.emit(i.fullname, {
data: o
});
if (s.keepLast) break;
}
}
}
},
_resetAll: function() {
this.requestId = 0;
this.connectTime = 0;
this.requestTb = [];
this.frozenEvents = [];
this.m_isLockAllEvent = !1;
this.m_lockEventCache = [];
this.removeAllEventListeners();
this.isHbHandler = !1;
TimeMgr.off(this.handleHBTimeout);
ViewManager.hideRequest(ViewManager.TypeSocket);
ViewManager.closeRequestView();
this.m_requsetViewData = {};
this.m_logicConnectStatus = !1;
},
testSendProto: function() {
var e = M_Channel.syncMsg, t = {
protoId: e.id,
requestId: 1,
ec: 0
}, i = this.encode("base.HeaderPack", t), s = [ 0, 0 ];
s[0] = i.length << 8;
s[1] = 255 & i.length;
var n = this.encode(e.response, {
ID: {
param1: 3,
type: 12
},
fishRoomList: {
list: [ {
playerNum: 0,
roomId: 41
} ]
}
}), a = o.arrayconcat(i, n || ""), r = [ 0, 0 ];
r[0] = a.length + 2 << 8;
r[1] = a.length + 2 & 255;
a = o.arrayconcat(s, a);
a = o.arrayconcat(r, a);
a = o.arraybuffer2str(a);
for (;a.length >= 2; ) {
var l = o.stringToBytes(a), c = o.arraybuffer2array(l), h = new DataView(l), u = h.getUint16(0);
if (u + 2 > a.length) {
this.buffer = a;
return;
}
a = a.substring(u + 2);
var d = h.getUint16(2), p = c.slice(4, d + 4), f = c.slice(d + 4, u + 2), m = this.decode("base.HeaderPack", p);
if (TypeUtils.isRealNull(e)) console.error("id[0x" + m.protoId.toString(16) + "] of proto is invalid"); else {
e.response && m.ec == SystemError.success && this.decode(e.response, f);
}
}
}
});
cc._RF.pop();
}, {
BaseManager: "BaseManager",
sproto: "sproto",
utils: "utils"
} ],
spineFishObject: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "914f3PzfLJCtqTJkIFWP3ZE", "spineFishObject");
var s, n, o;
function a(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}
var r = e("BezierUtils"), l = e("CatchFishConst"), c = e("ItemConst"), h = l.FishBornType, u = l.FishType, d = l.FishGroupType, p = l.GroupTypeAct, f = l.MAX_FISH_TALK_NUM, m = "1", g = "run", _ = "hit", T = "die", C = "idle", y = "ready", I = (a(s = {}, d.BOSS_FISH, "unbelivable"), 
a(s, d.GREAT_FISH, "excellent"), a(s, d.BIG_FISH, "great"), a(s, d.MEDIUM_FISH, "good"), 
s), v = (a(n = {}, c.ResourceType.PokerSpade, "poker_spade"), a(n, c.ResourceType.PokerHeart, "poker_heart"), 
a(n, c.ResourceType.PokerClub, "poker_club"), a(n, c.ResourceType.PokerDiamond, "poker_diamond"), 
a(n, c.ResourceType.PokerJoker, "poker_joker"), n), E = e("BaseComponent");
cc.Class((a(o = {
extends: E,
properties: {
nodeFish: cc.Node,
spineCompo: sp.Skeleton,
spFoot: cc.Node,
spineFoot: sp.Skeleton,
spBody: cc.Node,
spineBody: sp.Skeleton,
nodeFishShadow: cc.Node,
spineShadowCompo: sp.Skeleton,
spBubble: cc.Node,
spineBubble: sp.Skeleton,
txtGoldDrop: cc.Node,
sprFinger: cc.Node,
spPoker: cc.Node,
sprPoker: cc.Node,
talkImg: cc.Node,
talkLab: cc.Label,
spWarhead: cc.Node,
nodeAim: cc.Node,
spineAim: sp.Skeleton
},
ctor: function() {},
init: function(e) {
this.initView();
this.initData(e, !1);
this.createSwimPath();
},
initView: function() {
this.nodeAim.active = !1;
this.spWarhead.active = !1;
this.sprFinger.active = !1;
this.spPoker.active = !1;
this.spBubble.active = !1;
this.spFoot.active = !1;
this.spBody.active = !1;
this.nodeFishShadow.active = !0;
this.txtGoldDrop.active = !1;
this.talkImg.active = !1;
},
initData: function(e, t) {
this.catchFishView = e.view;
this.catchFishUI = this.catchFishView.getUI();
this.model = e.model;
this.fishId = e.fishId;
this.fishType = e.fishType;
this.fishPathId = e.fishPathId;
this.startX = e.startX || 0;
this.startY = e.startY || 0;
this.rotation = e.rotation || 0;
this.endPlayBeSlide = 0;
this.surviveTime = e.surviveTime / 100;
this.children = e.children;
this.goldDrop = e.goldDrop;
this._state = y;
this.bornType = e.bornType;
this.color = e.color;
this.caiQuan = e.caiQuan;
this.isBorn = e.isBorn;
this.isEdit = e.isEdit;
this.isResLoaded = !1;
this.resLoadedIndex = 0;
this.curScaleX = -1;
this.allTextures = {};
this.dieSpineList = [];
this.pathConfig = ConfigMgr.getConfig("fish_path").findByIndex(this.fishPathId) || e.pathConfig;
if (!t) {
this.fishConfig = ConfigMgr.getConfig("fish").findByIndex(this.fishType);
this._file = this.fishConfig.spine;
this._needRotation = TypeUtils.isRealNull(this.fishConfig.needRotate) || 1 == this.fishConfig.needRotate;
this._shadow_file = this.fishConfig.shadow_spine;
this._shadow_offset = this.fishConfig.shadow;
this.initActor();
this.model.isRotate() && !this._needRotation ? this.node.angle = 180 : this.nodeFishShadow.y = -this.nodeFishShadow.y;
var i = this.fishConfig.anchor.length < 2 ? cc.v2(.5, .5) : cc.v2(this.fishConfig.anchor[1], this.fishConfig.anchor[2]);
this.node.anchorX = i.x;
this.node.anchorY = i.y;
this.isEdit;
}
this.speed = e.speed || 1;
this.setPosition(-1500, -1500);
this.isBorn && this.setVisible(!1);
},
setVisible: function(e) {
this.nodeFishShadow.opacity = e ? 120 : 0;
this.nodeFish.opacity = e ? 255 : 0;
this.spFoot.opacity = e ? 255 : 0;
this.spBubble.opacity = e ? 255 : 0;
this.sprPoker.opacity = e ? 255 : 0;
this.sprFinger.opacity = e ? 255 : 0;
this.txtGoldDrop.opacity = e ? 255 : 0;
this.txtGoldDrop.opacity = e ? 255 : 0;
},
setPosition: function(e, t) {
this.node.x = e;
this.node.y = t;
},
initActor: function() {
var e = this;
this.hasLoad = !1;
var t = "module/fish/spine/fish/" + StringUtils.stringSplit(this.fishConfig.icon, "_")[1] + "/" + this.fishConfig.icon;
SpineUtils.changeSpine(t, function(t, i) {
e.hasLoad = !0;
e.spineCompo.skeletonData = i;
e.spineShadowCompo.skeletonData = i;
});
this.playPokerColor(this.color);
this.updateWarheadEffect();
this.updateMatchTaskFlag();
this.playHeadBubble();
this.showGoldFishMultiple();
this.playHeadFinger();
},
resetFish: function(e) {
this.initData(e, !0);
this.createSwimPath();
this.show();
},
createSwimPath: function() {
var e = this.pathConfig.path[0];
this.pathStartX = e.line[0];
this.pathStartY = e.line[1];
this.swimPaths = this.model.getPathObject(this.fishPathId);
if (TypeUtils.isRealNull(this.swimPaths)) {
this.swimPaths = [];
this.model.setPathObject(this.fishPathId, this.swimPaths);
for (var t = this.fishPathId && this.fishPathId > 0, i = 0; i < this.pathConfig.path.length; i++) {
var s = this.pathConfig.path[i].line, n = [];
if (0 == i) {
n.push({
x: s[0],
y: s[1]
});
n.push({
x: s[2],
y: s[3]
});
n.push({
x: s[4],
y: s[5]
});
} else {
var o = this.pathConfig.path[i - 1].line;
n.push({
x: o[o.length - 2],
y: o[o.length - 1]
});
n.push({
x: s[0],
y: s[1]
});
n.push({
x: s[2],
y: s[3]
});
}
var a = new r(n, this.pathConfig.path[i].time, t);
this.swimPaths.push(a);
}
}
this.curPathIndex = 1;
this.swimTime = 0;
this.curX = 0;
this.curY = 0;
},
update: function(e) {
e *= this.speed;
if (!this.statusPause) {
this.surviveTime = this.surviveTime + e;
if (this.isAlive() && !this._lifeEnd) {
if (!this.isActionPlaying) {
this.playMoveAction();
this.isActionPlaying = !0;
}
this.borning || this.stopSummonEffect();
for (var t = this.swimPaths[this.curPathIndex - 1]; !(TypeUtils.isRealNull(t) || this.surviveTime < this.swimTime + t.getTime()); ) {
this.swimTime = this.swimTime + t.getTime();
this.curPathIndex = this.curPathIndex + 1;
t = this.swimPaths[this.curPathIndex - 1];
}
if (TypeUtils.isRealNull(t)) this.isMovedOut = !0; else {
var i = t.getPoint(this.surviveTime - this.swimTime, !0), s = this.changePos(i[0]), n = this.changePos(i[1]);
this.curX = s.x * FISH_PATH_AREA.scaleX;
this.curY = s.y * FISH_PATH_AREA.scaleY;
this.node.setPosition((s.x - FISH_PATH_AREA.width / 2) * FISH_PATH_AREA.scaleX, (FISH_PATH_AREA.height / 2 - s.y) * FISH_PATH_AREA.scaleY);
this.playTalkContent();
if (this._needRotation) {
this.radian = Math.atan2(n.y - s.y, s.x - n.x);
this.nodeFish.angle = DicUtils.deg(this.radian);
this.nodeFishShadow.angle = DicUtils.deg(this.radian);
} else {
var o = n.x > s.x ? -1 : 1;
this.model.isRotate() && (o = n.x > s.x ? 1 : -1);
this.curScaleX = o;
this.nodeFish.scaleX = o;
this.nodeFishShadow.scaleX = o;
this.radian = 0;
}
}
}
}
},
changePos: function(e) {
if (0 != this.rotation) {
var t = e.x - this.pathStartX, i = e.y - this.pathStartY;
e.x = this.pathStartX + t * Math.cos(this.rotation) + i * Math.sin(this.rotation);
e.y = this.pathStartY + i * Math.cos(this.rotation) - t * Math.sin(this.rotation);
}
e.x = e.x + this.startX;
e.y = e.y + this.startY;
return e;
},
playMoveAction: function() {
this._curAni = g;
this._curLoop = !0;
this._curNextAni = null;
this.playFishFootEffect();
this.playFishBodyEffect();
this.changeAnimation(g, !0, null, !0);
this.born();
},
playPokerColor: function(e) {
var t = this, i = v[e];
if (TypeUtils.isRealNull(i)) this.stopPokerColor(); else {
this.spPoker.active = !0;
this.spPoker.y = this.getHeight() / 2 + 65;
this.spPoker.stopAllActions();
var s = [];
s.push(cc.scaleTo(.3, 0, 1));
s.push(cc.callFunc(function() {
SpriteUtils.setTexture({
path: "module/fish/texture/catchFishUi/icons/" + i
}, t.sprPoker, t);
}));
s.push(cc.scaleTo(.3, 1));
this.spPoker.runAction(cc.sequence(s));
}
},
stopPokerColor: function() {
this.spPoker.stopAllActions();
this.spPoker.active = !1;
},
playHeadBubble: function() {
var e = this, t = this.fishConfig.headSpine;
if (!TypeUtils.isRealNull(t)) {
this.spBubble.active = !0;
this.spBubble.scale = .8;
this.spBubble.y = this.getHeight() / 2 + 60;
SpineUtils.changeSpine(t.sp, function(i, s) {
e.spineBubble.skeletonData = s;
e.spineBubble.setAnimation(0, t.ani, !0);
});
}
},
removeHeadBubble: function() {
this.spBubble.active = !1;
},
showGoldFishMultiple: function() {
var e = this.fishConfig;
if (e.goldfish || e.type >= u.WANGLING_JINGYU_FISH && e.type <= u.WANGLING_ZHANGYU_FISH) {
var t = this.getDropGold();
this.txtGoldDrop.active = !0;
this.txtGoldDrop.getComponent(cc.Label).string = t + "倍";
}
},
removeGoldDropLab: function() {
this.txtGoldDrop.active = !1;
},
playHeadFinger: function() {
if (this.caiQuan) {
this.sprFinger.stopAllActions();
this.sprFinger.active = !0;
this.sprFinger.y = this.getHeight() / 2 - 10;
ActionUtils.repeat(this.sprFinger, cc.scaleTo(.5, .95), cc.delayTime(.5), cc.scaleTo(.5, 1.05));
}
},
removeHeadFinger: function() {
this.sprFinger.stopAllActions();
this.sprFinger.active = !1;
},
onBackGroud: function() {
this.bornState = !1;
this.node.stopAllActions();
this.nodeFish.stopAllActions();
},
getFishId: function() {
return this.fishId;
},
getType: function() {
return this.fishType;
},
getIcon: function() {
return this.fishConfig.icon;
},
getAutoFirePrority: function() {
return this.fishConfig.autoFirePrority;
},
isMovedOutView: function() {
return this.isMovedOut;
},
isAlive: function() {
return this.surviveTime > 0;
},
getZOrder: function() {
return this.fishConfig.zorder;
},
getX: function() {
return this.curX;
},
getY: function() {
return this.curY;
},
getDropGold: function() {
return this.goldDrop ? this.goldDrop : this.fishConfig.goldDrop;
},
updateDropGold: function(e) {
e && (this.goldDrop = e);
},
getWidth: function() {
TypeUtils.isRealNull(this.boundingWidth) && (this.boundingWidth = this.fishConfig.boundingBox[0] ? this.fishConfig.boundingBox[0] : 50);
return this.boundingWidth;
},
getHeight: function() {
TypeUtils.isRealNull(this.boundingHeight) && (this.boundingHeight = this.fishConfig.boundingBox[1] ? this.fishConfig.boundingBox[1] : 50);
return this.boundingHeight;
},
canAim: function() {
return this.fishConfig.aim > 0 && !this._lifeEnd;
},
setSpeed: function(e) {
this.speed = e || 1;
},
getRadian: function() {
return this.radian;
},
setDead: function() {
this._lifeEnd = !0;
},
getDead: function() {
return this._lifeEnd;
},
checkCollison: function(e, t, i) {
if (!TypeUtils.isRealNull(this.radian)) {
var s = this.getX(), n = this.getY(), o = this.getWidth(), a = this.getHeight(), r = e - s, l = t - n, c = Math.sqrt(r * r + l * l);
this.model.isRotate() && (l = -l);
var h = Math.atan2(-l, r), u = c * Math.cos(h + this.radian - DicUtils.rad(0)), d = -c * Math.sin(h + this.radian - DicUtils.rad(0)), p = (o + 50) / 2, f = (a + 50) / 2;
return u >= -p && u <= p && d >= -f && d <= f || void 0;
}
},
getFuturePos: function(e) {
for (var t = this.surviveTime + e, i = this.swimTime, s = this.curPathIndex, n = this.swimPaths[s - 1]; !(TypeUtils.isRealNull(n) || t < i + n.getTime()); ) {
i += n.getTime();
s += 1;
n = this.swimPaths[s - 1];
}
if (!TypeUtils.isRealNull(n)) {
var o = n.getPoint(t - i, !1), a = this.changePos(o[0]);
return cc.v2(a.x * FISH_PATH_AREA.scaleX, a.y * FISH_PATH_AREA.scaleY);
}
},
born: function() {
if (!this.isBorn || this.bornType < h.SUMMON_GOLD) this.setVisible(!0); else {
this.borning = !0;
if (this.model.isNanJueFish(this.fishType) || this.model.isNaJiaFish(this.fishType) || this.model.isNaJiaShuiMuFish(this.fishType)) {
this.setVisible(!0);
this.changeAnimation(m, !0, g, !0);
} else if (this.bornType == h.SUMMON_GOLD) {
var e = this.getFuturePos(.1) || cc.v2(0, 0);
this.catchFishView.showSummonEffect(e, this);
} else this.showSummon();
}
},
showSummon: function() {
var e = this;
this._spSummon = FishUtils.playSpine({
ani: "1",
zorder: -1,
x: 0,
y: 0,
isLoop: !1,
scale: .8,
path: "module/fish/spine/summon/by_zhaohuan",
loadCallBack: function(t) {
t.setCompleteListener(e.spineCompleteHanlde.bind(e));
}
}, this.node);
this.delayTimer(function() {
e.setVisible(!0);
}, .5);
},
spineCompleteHanlde: function(e) {
this.borning = !1;
},
playFishFootEffect: function() {
var e = this, t = this.fishConfig.footEffect;
if (!TypeUtils.isRealNull(t)) {
this.spFoot.active = !0;
this.spFoot.y = t.offsety;
SpineUtils.changeSpine(t.sp, function(i, s) {
e.spineFoot.skeletonData = s;
e.spineFoot.setAnimation(0, t.ani, !0);
});
}
},
removeSpineFoot: function() {
this.spFoot.active = !1;
},
playFishBodyEffect: function() {
var e = this, t = this.fishConfig.bodyEffect;
if (!TypeUtils.isRealNull(t)) {
this.spBody.active = !0;
this.spBody.y = t.offsety;
SpineUtils.changeSpine(t.sp, function(i, s) {
e.spineBody.skeletonData = s;
e.spineBody.setAnimation(0, t.ani, !0);
});
}
},
removeSpineBody: function() {
this.spBody.active = !1;
},
stopSummonEffect: function() {
TypeUtils.isRealNull(this._spSummon) || (this._spSummon.active = !1);
},
playBornAction: function() {},
screenTweenEffect: function() {
var e = [ .3, 20, 20, 3 ], t = e[0], i = e[1], s = e[2], n = e[3], o = cc.director.getScene();
o.stopAllActions();
ActionUtils.shake(o, t, i, s, n);
o.scale = 1;
o.stopActionByTag(1034);
var a = cc.sequence(cc.scaleTo(.05, 1.15), cc.scaleTo(.05, 1));
a.setTag(1034);
o.runAction(a);
},
playAimEffect: function() {
if (!this.nodeAim.active) {
this.nodeAim.active = !0;
SpineUtils.changeAnimation(this.spineAim, "1", !1, null, !0);
}
},
stopAimEffect: function() {
this.nodeAim.active = !1;
},
playDie: function(e) {
var t = this.fishConfig.dieSound;
TypeUtils.isRealNull(t) && (t = I[this.fishConfig.groupType]);
TypeUtils.isRealNull(t) && this.playSound(t);
this.catchInfo = e;
this.setDead();
this.stopAimEffect();
this.removeWarheadEffect();
this.removeMatchTaskFlag();
this.changeState(T);
},
playBeHit: function(e) {
this.changeState(_, e);
},
changeState: function(e, t) {
this._state = e;
if (e == T) this.doStateDie(); else if (e == C) {
this.doStateIdle();
return;
}
if (!this._lifeEnd || e != T) {
var i = function(e) {
var t = g, i = !0;
if ((e = e || g) == C) e = null; else if (e == T) {
t = null;
i = !1;
e = T;
} else e == g && (t = null);
return {
state: e,
next: t,
loop: i
};
}(e);
if (!TypeUtils.isRealNull(i.state)) if (i.state == _) {
if (t) {
this.nodeFish.stopAllActions();
this.nodeFish.runAction(cc.sequence(cc.tintTo(.2, 255, 128, 125), cc.tintTo(.2, 255, 255, 255)));
}
} else {
this._curAni = i.state;
this._curLoop = i.loop;
this._curNextAni = i.next;
this.changeAnimation(i.state, i.loop, i.next);
}
if (!i.loop) {
this._state == T && (this._lifeEnd = !0);
this._state = g;
}
}
},
doStateDie: function() {
var e = this;
this.removeTalkImg();
this.removeHeadBubble();
this.removeSpineFoot();
this.removeSpineBody();
this.removeGoldDropLab();
this.removeHeadFinger();
this.nodeFishShadow.active = !1;
var t = function() {
e.changeState(C);
};
if (this.model.isNaJiaFish(this.fishType)) this.playSound("renyu4"); else {
if (this.model.isNanJueFish(this.fishType)) {
this.catchFishUI.playDynjDieEffect(this, this.catchInfo, t);
this.changeAnimation(T, !1, null, !0);
this.playSound("nanjue4");
this.changeBGM();
return;
}
this.model.isChuangZhangFish(this.fishType) && this.playSound("haidao4");
}
var i = this.fishConfig.dieAnim, s = function() {
if (TypeUtils.isNotEmptyArray(i)) for (var t = 0; t < i.length; t++) {
var s = i[t], n = FishUtils.playSpine({
ani: "1",
zorder: -1,
x: 0,
y: 0,
isLoop: !1,
path: s
}, e.node);
e.dieSpineList.push(n);
}
}, n = [], o = this.fishConfig.groupType;
if (o == p.SMALL_FISH) {
s();
n.push(cc.delayTime(.6));
n.push(cc.callFunc(function() {
e.changeAnimation(T, !1, null, !0);
}));
n.push(cc.delayTime(.5));
} else if (o == p.BIG_FISH || o == p.MEDIUM_FISH) {
o == p.BIG_FISH && n.push(cc.scaleTo(.1, 1.5));
for (var a = 0; a < 8; a++) {
n.push(cc.delayTime(.1));
n.push(cc.callFunc(function() {
var t = Math.ceil(6 * Math.random());
e.node.angle = 60 * t;
}));
}
if (TypeUtils.isNotEmptyArray(i)) {
n.push(cc.callFunc(function() {
s();
}));
n.push(cc.delayTime(.8));
}
} else {
s();
this.changeAnimation(T, !1, null, !0);
n.push(cc.delayTime(2));
}
n.push(cc.callFunc(function() {
e.fishConfig.swsl && !e.model.isDragonFish(e.fishType) ? e.catchFishUI.playDieEffect(e.catchInfo, e.fishType) : (e.isGoldFish() || e.isWangLingFish()) && e.catchFishUI.showZhuanPan(e.fishType);
}));
n.push(cc.delayTime(.1));
n.push(cc.callFunc(function() {
for (var i = 0; i < e.dieSpineList.length; i++) {
e.dieSpineList[i].destroy();
}
e.dieSpineList = [];
t();
e.changeBGM();
}));
this.node.runAction(cc.sequence(n));
},
changeBGM: function() {
if (this.model.isNaJiaFish(this.fishType) || this.model.isNanJueFish(this.fishType) || this.model.isChuangZhangFish(this.fishType)) {
this.stopSounds();
var e = RandomUtils.randInt(1, 8);
this.playMusic("bgm_room_" + e);
this.catchFishView.onBossDieOrRun && this.catchFishView.onBossDieOrRun(this.fishType);
}
},
isRewardSpecial: function() {
return !!this.fishConfig.rewardSpecial;
},
changeAnimation: function(e, t, i, s) {
var n = this;
if (this.hasLoad) if (TypeUtils.isRealNull(i)) {
this.spineCompo.setAnimation(0, e, t);
this.spineShadowCompo.setAnimation(0, e, t);
} else {
this.spineCompo.setAnimation(0, e, !1);
this.spineCompo.addAnimation(0, i, t, 0);
this.spineShadowCompo.setAnimation(0, e, !1);
this.spineShadowCompo.addAnimation(0, i, t, 0);
} else {
this.nodeFishShadow.stopAllActions();
ActionUtils.callOnce(this.nodeFishShadow, function() {
n.changeAnimation(e, t, i, s);
}, .5);
}
},
doStateIdle: function() {
this.isActionPlaying = !1;
this.hide();
this.removeActor();
this.node.destroy();
},
playSpineFire: function() {
this._spFire;
},
show: function() {
this.isMovedOut = !1;
this._lifeEnd = !1;
this.resumeAnime();
this.setVisible(!0);
},
hide: function() {
this.setPosition(-1500, -1500);
this.pauseAnime();
this.setVisible(!1);
},
pauseAnime: function() {
this.statusPause = !0;
TypeUtils.isRealNull(this.spineCompo) || (this.spineCompo.paused = !0);
TypeUtils.isRealNull(this.spineShadowCompo) || (this.spineShadowCompo.paused = !0);
},
resumeAnime: function() {
this.statusPause = !1;
TypeUtils.isRealNull(this.spineCompo) || (this.spineCompo.paused = !1);
TypeUtils.isRealNull(this.spineShadowCompo) || (this.spineShadowCompo.paused = !1);
},
isDie: function() {
return this._lifeEnd;
},
playBeSlide: function() {
if (!this._lifeEnd && this.radian) {
this.playSlideEffect();
this.playBeHit();
}
},
checkCollisonSlide: function(e, t) {
if (!this._lifeEnd && this.radian && !(this.surviveTime < this.endPlayBeSlide)) {
var i = this.checkCollison(e, t);
if (i) {
this.playSlideEffect();
this.playBeHit();
}
return i;
}
},
playSlideEffect: function() {
this.endPlayBeSlide = this.surviveTime + .2;
}
}, "getZOrder", function() {
return this.fishConfig.zorder;
}), a(o, "getX", function() {
return this.curX;
}), a(o, "getY", function() {
return this.curY;
}), a(o, "getWPos", function() {
return this.node.convertToWorldSpaceAR(cc.v2(0, 0));
}), a(o, "isGoldFish", function() {
return this.fishConfig.goldfish;
}), a(o, "isWangLingFish", function() {
return this.fishConfig.undeadFish;
}), a(o, "updateWarheadEffect", function() {
this.model.isAimGoldFish() ? (this.isGoldFish() || this.isWangLingFish()) && (this.spWarhead.active || (this.spWarhead.active = !0)) : this.removeWarheadEffect();
}), a(o, "removeWarheadEffect", function() {
this.spWarhead.active = !1;
}), a(o, "updateMatchTaskFlag", function() {
this.model.isMatchTaskFish(this.fishType) ? this._spTaskFlag : this.removeMatchTaskFlag();
}), a(o, "removeMatchTaskFlag", function() {}), a(o, "playTalkContent", function() {
var e = this;
if (!this.sprFinger.active && !this.isPlayedTalk) {
var t = this.fishConfig.talk;
if (!(TypeUtils.isRealNull(t) || this.surviveTime < t.start)) {
if (!(this.model.getFishTalkNum() >= f)) {
this.model.updateFishTalkNum(!0);
var i = RandomUtils.randInt(0, t.ids.length - 1), s = t.ids[i], n = ConfigMgr.getConfig("fish_talk_config").findByIndex(s);
if (!TypeUtils.isRealNull(n)) {
this.talkImg.active = !0;
this.talkLab.string = n.content || "";
this.talkImg.y = this.getHeight() / 2 + 10;
this.talkImg.opacity = 255;
this.talkImg.scale = 0;
this.talkImg.runAction(cc.sequence(cc.scaleTo(.5, 1).easing(cc.easeBackOut()), cc.delayTime(n.time || 3), cc.fadeOut(1), cc.callFunc(function() {
e.removeTalkImg();
})));
this.isPlayedTalk = !0;
}
}
}
}
}), a(o, "removeTalkImg", function() {
this.model.updateFishTalkNum(!1);
this.talkImg.active = !1;
}), a(o, "escape", function() {
this.fishConfig.groupType == d.BOSS_FISH && TipsUtils.showTips("BOSS" + this.fishConfig.name + "溜走了");
this.node.destroy();
}), a(o, "isAlreadyShot", function() {
return !!this.isShot;
}), a(o, "setAlreadyShot", function() {
this.isShot = !0;
}), a(o, "setBodyColor", function(e) {}), a(o, "getBornType", function() {
return this.bornType;
}), a(o, "onExit", function() {}), a(o, "releaseShader", function() {
this.removeActor();
}), a(o, "removeActor", function() {}), o));
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
BezierUtils: "BezierUtils",
CatchFishConst: "CatchFishConst",
ItemConst: "ItemConst"
} ],
spineGoldView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "850c9pvWWpNNaAyiuPHWwsQ", "spineGoldView");
cc.Class({
extends: BaseComponent,
properties: {
spJade: cc.Node,
spineJade: sp.Skeleton,
spCoin: cc.Node,
spineCoin: sp.Skeleton
},
onLoad: function() {
this.removeSpineGold();
},
initData: function(e) {
this.model = e.model;
this.updateSpine(e.drop);
},
updateSpine: function(e) {
this.isMe = this.model.isMe(e.roleId);
this.isJade = this.model.isItemJade(e.itemId);
if (TypeUtils.isRealNull(this.itemInfo) || this.itemInfo.itemId != e.itemId) {
this.removeSpineGold();
this.node.scale = .8;
this.itemInfo = e;
}
},
startAct: function() {
this.spJade.active = this.isJade;
this.spCoin.active = !this.isJade;
if (this.isJade) this.spineJade.setAnimation(0, "play", !0); else {
var e = "silver";
this.isMe && (e = "gold");
this.spineCoin.setAnimation(0, e, !0);
}
},
getSpineNode: function() {
return this._spGold;
},
removeSpineGold: function() {
this.spJade.active = !1;
this.spCoin.active = !1;
}
});
cc._RF.pop();
}, {} ],
splashView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "e3a78i0nyBKEppbny8c7R1V", "splashView");
var s = e("HotUpdateHelper");
cc.Class({
extends: ViewBase,
properties: {
sprSplash: cc.Node,
sprLoginBg: cc.Node,
manifestUrl: {
type: cc.Asset,
default: null
}
},
onAdapt: function() {
AdaptUtils.AdaptNodeToFullAdapt(this.node);
},
onCreate: function() {
var e = this;
if (!TypeUtils.isRealNull(this.manifestUrl)) {
var t = JSON.parse(this.manifestUrl._nativeAsset);
GlobalUtils.setVersion(t.version);
}
app.ctrls.game.modifyIp(function(e) {
GlobalUtils.setExamine(e);
});
this.sprSplash.runAction(cc.sequence(cc.fadeIn(.5), cc.delayTime(1), cc.callFunc(function() {
e.gotoTryLogin();
}), cc.fadeOut(.5), cc.callFunc(function() {
ViewManager.closeView(e);
})));
},
initConfig: function() {
ConfigMgr.initConfig("module/fish/config/", function(e, t) {}, function() {});
},
gotoTryLogin: function() {
app.ctrls.game.showLoginView();
if (GlobalUtils.isCanUpdate()) {
s.getInstance().initData(this.manifestUrl);
s.getInstance().checkUpdate(function(e) {
e ? TipsUtils.showTipsBox({
title: "更新",
desc: "检查到有更新，是否热更？",
isHideCloce: !0,
sureCallBack: function() {
ViewManager.showView("LOADING_VIEW", "alert", {
isUpdate: !0,
bg: "module/fish/texture/picture/loading2"
}, function() {
ViewManager.closeView("LOGIN_VIEW");
});
},
cancelCallback: function() {
cc.game.end();
}
}) : app.ctrls.login.checkAutoLogin();
});
} else app.ctrls.login.checkAutoLogin();
}
});
cc._RF.pop();
}, {
HotUpdateHelper: "HotUpdateHelper"
} ],
sproto: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "f4db8JEkbVB7ayz/TbmOlHJ", "sproto");
function s(e) {
"@babel/helpers - typeof";
return (s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
return typeof e;
} : function(e) {
return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
})(e);
}
var n = e("./utils"), o = function() {
var e = {}, t = {}, i = {}, o = 0, a = 1, r = 0, l = 1, c = 2, h = 3, u = -1, d = -2, p = -3, f = 128, m = 4, g = 2, _ = 2, T = 64;
function C(e) {
var t = e;
0 != (2147483648 & t) && (t = 0 + (4294967295 & t));
return t;
}
function y(e, t) {
return 4294967296 * (4294967295 & t) + e;
}
function I(e, t) {
return Math.floor(e / Math.pow(2, t));
}
function v(e) {
return 255 & e[0] | (255 & e[1]) << 8;
}
function E(e) {
return (255 & e[0] | (255 & e[1]) << 8 | (255 & e[2]) << 16 | (255 & e[3]) << 24) >>> 0;
}
function S(e) {
var t = E(e), i = 0;
e = e.slice(m);
for (;t > 0; ) {
var s;
if (t < m) return -1;
s = E(e);
if ((s += m) > t) return -1;
++i;
e = e.slice(s);
t -= s;
}
return i;
}
function b(e, t) {
var i, s, n, o;
if (t < m) return -1;
s = v(e);
if (t < (n = g + _ * s)) return -1;
i = e.slice(g);
t -= n;
e = e.slice(n);
for (o = 0; o < s; o++) {
var a;
if (0 == v(i.slice(o * _ + g))) {
if (t < m) return -1;
a = E(e);
if (t < m + a) return -1;
e = e.slice(m + a);
t -= m + a;
}
}
return s;
}
function R(e, t) {
for (var i = E(t), s = "", n = t.slice(m, m + i), o = 0; o < n.length; o++) s += String.fromCharCode(n[o]);
return s;
}
function N(e, t) {
if (0 == t) return 1;
var i = N(e * e, Math.floor(t / 2));
0 != (1 & t) && (i *= e);
return i;
}
function w(e, t, i) {
var s, n, o, a = 0, l = -1;
t.tag = -1;
t.type = -1;
t.name = null;
t.st = null;
t.key = -1;
t.extra = 0;
s = E(i);
n = (i = i.slice(m)).slice(s);
if ((o = b(i, s)) < 0) return null;
i = i.slice(g);
for (var u = 0; u < o; u++) {
var d;
++l;
if (!0 & (d = v(i.slice(_ * u)))) l += Math.floor(d / 2); else if (0 != l) {
if (0 == d) return null;
d = Math.floor(d / 2) - 1;
switch (l) {
case 1:
if (d >= h) return null;
t.type = d;
break;

case 2:
if (t.type == r) t.extra = N(10, d); else if (t.type == c) t.extra = d; else {
if (d >= e.type_n) return null;
if (t.type >= 0) return null;
t.type = h;
t.st = d;
}
break;

case 3:
t.tag = d;
break;

case 4:
0 != d && (a = f);
break;

case 5:
t.key = d;
break;

default:
return null;
}
} else {
if (0 != d) return null;
t.name = R(0, i.slice(o * _));
}
}
if (t.tag < 0 || t.type < 0 || null == t.name) return null;
t.type |= a;
return n;
}
function U(e, t, i) {
var s, n, o, a, r, l = E(i);
s = (i = i.slice(m)).slice(l);
if ((n = b(i, l)) <= 0 || n > 2) return null;
for (var c = 0; c < n * _; c += _) {
if (0 != v(i.slice(g + c))) return null;
}
t.name = null;
t.n = 0;
t.base = 0;
t.maxn = 0;
t.f = null;
i = i.slice(g + n * _);
t.name = R(0, i);
if (1 == n) return s;
if ((o = S(i = i.slice(E(i) + m))) < 0) return null;
i = i.slice(m);
a = o;
r = -1;
t.n = o;
t.f = new Array();
for (c = 0; c < o; c++) {
var h;
t.f[c] = new Object();
var u = t.f[c];
if (null == (i = w(e, u, i))) return null;
if ((h = u.tag) <= r) return null;
h > r + 1 && ++a;
r = h;
}
t.maxn = a;
t.base = t.f[0].tag;
(o = t.f[o - 1].tag - t.base + 1) != t.n && (t.base = -1);
return s;
}
function A(e, t, i) {
var s, n, r, l;
n = E(i);
s = (i = i.slice(m)).slice(n);
r = b(i, n);
i = i.slice(g);
t.name = null;
t.tag = -1;
t.p = new Array();
t.p[o] = null;
t.p[a] = null;
t.confirm = 0;
l = 0;
for (var c = 0; c < r; c++, l++) {
var h = v(i.slice(_ * c));
if (!0 & h) l += Math.floor(h - 1) / 2; else {
h = Math.floor(h / 2) - 1;
switch (c) {
case 0:
if (-1 != h) return null;
t.name = R(0, i.slice(_ * r));
break;

case 1:
if (h < 0) return null;
t.tag = h;
break;

case 2:
if (h < 0 || h >= e.type_n) return null;
t.p[o] = e.type[h];
break;

case 3:
if (h < 0 || h > e.type_n) return null;
t.p[a] = e.type[h];
break;

case 4:
t.confirm = h;
break;

default:
return null;
}
}
}
return null == t.name || t.tag < 0 ? null : s;
}
function L(e, t, i) {
var s, n, o, a = b(t, i);
if (a < 0 || a > 2) return null;
s = (t = t.slice(g)).slice(a * _);
for (var r = 0; r < a; r++) {
if (0 != v(t.slice(r * _))) return null;
var l = S(s);
if (l < 0) return null;
if (0 == r) {
n = s.slice(m);
e.type_n = l;
e.type = new Array();
} else {
o = s.slice(m);
e.protocol_n = l;
e.proto = new Array();
}
s = s.slice(E(s) + m);
}
for (r = 0; r < e.type_n; r++) {
e.type[r] = new Object();
if (null == (n = U(e, e.type[r], n))) return null;
}
for (r = 0; r < e.protocol_n; r++) {
e.proto[r] = new Object();
if (null == (o = A(e, e.proto[r], o))) return null;
}
return e;
}
function F(e) {
console.log(e);
}
function M(e, t) {
for (var i = 0; i < e.protocol_n; i++) if (t == e.proto[i].name) return e.proto[i].tag;
return -1;
}
function x(e, t) {
for (var i = 0, s = e.protocol_n; i < s; ) {
var n = Math.floor((i + s) / 2), o = e.proto[n].tag;
if (o == t) return e.proto[n];
t > o ? i = n + 1 : s = n;
}
return null;
}
function B(e, t, i) {
var s;
return i < 0 || i > 1 ? null : (s = x(e, t)) ? s.p[i] : null;
}
function P(e, t) {
var i = x(e, t);
return i ? i.name : null;
}
function k(e, t) {
for (var i = 0; i < e.type_n; i++) if (t == e.type[i].name) return e.type[i];
return null;
}
function D(e, t) {
var i, s;
if (e.base >= 0) return (t -= e.base) < 0 || t > e.n ? null : e.f[t];
i = 0;
s = e.n;
for (;i < s; ) {
var n = Math.floor((i + s) / 2), o = e.f[n], a = o.tag;
if (a == t) return o;
t > a ? i = n + 1 : s = n;
}
return null;
}
function V(e, t, i) {
e[t] = 255 & i;
e[t + 1] = i >> 8 & 255;
e[t + 2] = i >> 16 & 255;
e[t + 3] = i >> 24 & 255;
return i + m;
}
function O(e, t, i, s) {
t[i + 4] = 255 & e;
t[i + 5] = e >> 8 & 255;
t[i + 6] = e >> 16 & 255;
t[i + 7] = e >> 24 & 255;
return V(t, i, 4);
}
function G(e, t, i, s) {
t[i + 4] = 255 & e;
t[i + 5] = 255 & I(e, 8);
t[i + 6] = 255 & I(e, 16);
t[i + 7] = 255 & I(e, 24);
t[i + 8] = 255 & I(e, 32);
t[i + 9] = 255 & I(e, 40);
t[i + 10] = 255 & I(e, 48);
t[i + 11] = 255 & I(e, 56);
return V(t, i, 8);
}
function H(e, t, i, s) {
var n;
t.buffer = i;
t.buffer_idx = s + m;
return (n = e(t)) < 0 ? n == d ? 0 : -1 : V(i, s, n);
}
function W(e, t, i) {
if (e) {
t[i + 4] = 255;
t[i + 5] = 255;
t[i + 6] = 255;
t[i + 7] = 255;
} else {
t[i + 4] = 0;
t[i + 5] = 0;
t[i + 6] = 0;
t[i + 7] = 0;
}
}
function q(e, t, i, s, n) {
var o, a, r = s;
s++;
o = 4;
a = 1;
n.value = 0;
for (;;) {
var l;
t.value = null;
t.length = 8;
t.index = a;
if ((l = e(t)) <= 0) {
if (l == d) break;
if (l == p) {
n.value = 1;
break;
}
return null;
}
if (4 == l) {
var c = t.value;
i[s] = 255 & c;
i[s + 1] = c >> 8 & 255;
i[s + 2] = c >> 16 & 255;
i[s + 3] = c >> 24 & 255;
8 == o && W(2147483648 & c, i, s);
} else {
if (8 != l) return null;
if (4 == o) {
s += 4 * (a - 1);
for (var h = a - 2; h >= 0; h--) {
for (var u = 1 + 8 * h; u < 1 + 8 * h + 4; u++) header[u] = header[u - 4 * h];
W(128 & header[1 + 8 * h + 3], i, s + 1 + 8 * h);
}
o = 8;
}
c = value;
i[s] = 255 & c;
i[s + 1] = c >> 8 & 255;
i[s + 2] = c >> 16 & 255;
i[s + 3] = c >> 24 & 255;
i[s + 4] = c >> 32 & 255;
i[s + 5] = c >> 40 & 255;
i[s + 6] = c >> 48 & 255;
i[s + 7] = c >> 56 & 255;
}
s += o;
a++;
}
if (s == r + 1) return r;
i[r] = 255 & o;
return s;
}
function z(e, t, i, s) {
var n, o = i, a = s + m;
switch (t.type) {
case r:
var c = {
value: 0
};
if (null == (a = q(e, t, o, a, c))) return -1;
if (0 != c.value) return 0;
break;

case l:
t.index = 1;
for (;;) {
t.value = 0;
t.length = 4;
if ((n = e(t)) < 0) {
if (n == d) break;
return n == p ? 0 : -1;
}
if (n < 1) return -1;
o[a] = 1 == t.value ? 1 : 0;
a++;
++t.index;
}
break;

default:
t.index = 1;
for (;;) {
t.buffer = o;
t.buffer_idx = a + m;
if ((n = e(t)) < 0) {
if (n == d) break;
return n == p ? 0 : -1;
}
V(o, a, n);
a += m + n;
++t.index;
}
}
return 0 == (n = a - (s + m)) ? 0 : V(o, s, n);
}
function j(e, t, i, s) {
for (var n, o = 1; s > 0; ) {
if (s < m) return -1;
n = E(i);
i = i.slice(m);
if (n > (s -= m)) return -1;
t.index = o;
t.value = i;
t.length = n;
if (0 != e(t)) return -1;
s -= n;
i = i.slice(n);
++o;
}
return 0;
}
function Y(e, t, i) {
var s = E(i), n = t.type;
if (0 == s) {
t.index = -1;
t.value = null;
t.length = 0;
e(t);
return 0;
}
i = i.slice(m);
switch (n) {
case r:
var o = i[0];
i = i.slice(1);
--s;
if (4 == o) {
if (s % 4 != 0) return -1;
for (var a = 0; a < Math.floor(s / 4); a++) {
var u = C(E(i.slice(4 * a)));
t.index = a + 1;
t.value = u;
t.length = 8;
e(t);
}
} else {
if (8 != o) return -1;
if (s % 8 != 0) return -1;
for (a = 0; a < Math.floor(s / 8); a++) {
u = y(E(i.slice(8 * a)), E(i.slice(8 * a + 4)));
t.index = a + 1;
t.value = u;
t.length = 8;
e(t);
}
}
break;

case l:
for (a = 0; a < s; a++) {
u = i[a];
t.index = a + 1;
t.value = u;
t.length = 8;
e(t);
}
break;

case c:
case h:
return j(e, t, i, s);

default:
return -1;
}
return 0;
}
function J(e, t, i, s, n, o) {
var a = 0, r = 0, l = s;
s++;
--n < 0 && (l = null);
for (var c = 0; c < 8; c++) if (0 != e[t + c]) {
r++;
a |= 1 << c;
if (n > 0) {
i[s] = e[t + c];
++s;
--n;
}
}
(7 == r || 6 == r) && o > 0 && (r = 8);
if (8 == r) return o > 0 ? 8 : 10;
null != l && (i[l] = a);
return r + 1;
}
function K(e, t, i, s, n) {
var o = n + 7 & -8;
i[s] = 255;
i[s + 1] = Math.floor(o / 8) - 1;
for (var a = 0; a < n; a++) i[s + a + 2] = e[t + a];
for (a = 0; a < o - n; a++) i[s + n + 2 + a] = 0;
}
function Q(e, t, i, s) {
for (var n, o, a = new Array(8), r = 0, l = 0, c = 0, h = 0, u = e, d = i, p = e.length, f = 1 << 30, m = 0; m < p; m += 8) {
var g, _ = m + 8 - p;
if (_ > 0) {
for (var T = 0; T < 8 - _; T++) a[T] = u[t + T];
for (T = 0; T < _; T++) a[7 - T] = 0;
u = a;
t = 0;
}
f -= g = J(u, t, d, s, f, c);
if (10 == g) {
n = u;
r = t;
o = d;
l = s;
c = 1;
} else if (8 == g && c > 0) {
if (256 == ++c) {
f >= 0 && K(n, r, o, l, 2048);
c = 0;
}
} else if (c > 0) {
f >= 0 && K(n, r, o, l, 8 * c);
c = 0;
}
t += 8;
s += g;
h += g;
}
if (f >= 0) {
1 == c ? K(n, r, o, l, 8) : c > 1 && K(n, r, o, l, p - r);
if (d.length > h) for (m = h; m < d.length; m++) d[m] = 0;
}
return h;
}
function X(e, t, i, s) {
for (var n = e, o = i, a = 0, r = e.length, l = 1 << 30; r > 0; ) {
var c = n[t];
--r;
++t;
if (255 == c) {
var h;
if (r < 0) return -1;
if (r < (h = 8 * (n[t] + 1)) + 1) return -1;
r -= h + 1;
++t;
if (l >= h) for (var u = 0; u < h; u++) o[s + u] = n[t + u];
l -= h;
s += h;
t += h;
a += h;
} else for (u = 0; u < 8; u++) {
if (0 != (c >>> u & 1)) {
if (r < 0) return -1;
if (l > 0) {
o[s] = n[t];
--l;
++s;
}
++t;
--r;
} else if (l > 0) {
o[s] = 0;
--l;
++s;
}
++a;
}
}
return a;
}
e.pack = function(e) {
var t = new Array();
Q(e, 0, t, 0);
return t;
}, e.unpack = function(e) {
var t = new Array();
X(e, 0, t, 0);
return t;
}, e.createNew = function(S) {
var b = {};
new Object(), new Array();
b.type_n = 0;
b.protocol_n = 0;
b.type = null;
b.proto = null;
b.tcache = {};
b.pcache = {};
var R = L(b, S, S.length);
if (null == R) return null;
function N(e, t, i, s, n) {
var o, a, u, m = new Object(), T = i, C = i, y = g + e.maxn * _;
m.ud = n;
C = T + y;
o = 0;
a = -1;
for (var I = 0; I < e.n; I++) {
var v = e.f[I], E = v.type, S = 0, b = -1;
m.tagname = v.name;
m.tagid = v.tag;
null != v.st ? m.subtype = R.type[v.st] : m.subtype = null;
m.mainindex = v.key;
m.extra = v.extra;
if (0 != (E & f)) {
m.type = E & ~f;
b = z(s, m, t, C);
} else {
m.type = E;
m.index = 0;
switch (E) {
case r:
case l:
m.value = 0;
m.length = 8;
m.buffer = t;
m.buffer_idx = i;
if ((b = s(m)) < 0) {
if (b == d) continue;
return b == p ? 0 : -1;
}
if (4 == b) if (m.value < 32767) {
S = 2 * (m.value + 1);
b = 2;
} else b = O(m.value, t, C); else {
if (8 != b) return -1;
b = G(m.value, t, C);
}
break;

case h:
case c:
b = H(s, m, t, C);
}
}
if (b < 0) return -1;
if (b > 0) {
var N, w;
0 == S && (C += b);
N = T + g + _ * o;
if ((w = v.tag - a - 1) > 0) {
if ((w = 2 * (w - 1) + 1) > 65535) return -1;
t[N] = 255 & w;
t[N + 1] = w >> 8 & 255;
++o;
N += _;
}
++o;
t[N] = 255 & S;
t[N + 1] = S >> 8 & 255;
a = v.tag;
}
}
t[T] = 255 & o;
t[T + 1] = o >> 8 & 255;
u = C - (T + y);
C = T + y;
if (o != e.maxn) {
for (var U = t.slice(C, C + u), A = 0; A < U.length; A++) t[T + g + o * _ + A] = U[A];
t.length, U.length;
t.splice(T + g + o * _ + U.length, t.length);
}
return g + o * _ + u;
}
function w(e) {
var t = e.ud;
if (t.deep >= T) {
alert("table is too deep");
return -1;
}
if (null == t.indata[e.tagname]) return d;
var i = null;
if (e.index > 0) {
if (e.tagname != t.array_tag) {
t.array_tag = e.tagname;
s(t.indata[e.tagname]);
if ("object" != s(t.indata[e.tagname])) {
t.array_index = 0;
return d;
}
if (0 == t.indata[e.tagname].length || null == t.indata[e.tagname].length) {
t.array_index = 0;
return p;
}
}
if (null == (i = t.indata[e.tagname][e.index - 1])) return d;
} else i = t.indata[e.tagname];
switch (e.type) {
case r:
var o, a;
if (e.extra > 0) {
var f = i;
o = Math.floor(f * e.extra + .5);
} else o = i;
if (0 == (a = I(o, 31)) || -1 == a) {
e.value = o >>> 0;
return 4;
}
e.value = o;
return 8;

case l:
1 == i ? e.value = 1 : 0 == i && (e.value = 0);
return 4;

case c:
var m;
if (e.extra) m = i; else {
var g = i;
m = n.string2utf8(g);
}
var _ = m.length;
_ > e.length && (e.length = _);
for (var C = 0; C < m.length; C++) e.buffer[e.buffer_idx + C] = m[C];
return _;

case h:
var y = new Object();
y.st = e.subtype;
y.deep = t.deep + 1;
y.indata = i;
var v = N(e.subtype, e.buffer, e.buffer_idx, w, y);
return v < 0 ? u : v;

default:
alert("Invalid filed type " + e.type);
return u;
}
}
function U(e, t, i, s, n) {
var o, a, u, d, p = new Object(), T = i;
if (i < g) return -1;
u = v(o = t.slice(0));
o = o.slice(g);
if ((i -= g) < u * _) return -1;
a = o.slice(u * _);
i -= u * _;
p.ud = n;
d = -1;
for (var I = 0; I < u; I++) {
var S, b = null, N = v(o.slice(I * _));
++d;
if (!0 & N) d += Math.floor(N / 2); else {
N = Math.floor(N / 2) - 1;
b = a.slice(0);
if (N < 0) {
if (i < m) return -1;
if (i < (U = E(a)) + m) return -1;
a = a.slice(U + m);
i -= U + m;
}
if (null != (S = D(e, d))) {
p.tagname = S.name;
p.tagid = S.tag;
p.type = S.type & ~f;
null != S.st ? p.subtype = R.type[S.st] : p.subtype = null;
p.index = 0;
p.mainindex = S.key;
p.extra = S.extra;
if (N < 0) if (0 != (S.type & f)) {
if (Y(s, p, b)) return -1;
} else switch (S.type) {
case r:
if (4 == (U = E(b))) {
var w = C(E(b.slice(m)));
p.value = w;
p.length = 8;
s(p);
} else {
if (8 != U) return -1;
w = y(E(b.slice(m)), E(b.slice(m + 4)));
p.value = w;
p.length = 8;
s(p);
}
break;

case c:
case h:
var U = E(b);
p.value = b.slice(m);
p.length = U;
if (0 != s(p)) return -1;
break;

default:
return -1;
} else {
if (S.type != r && S.type != l) return -1;
p.value = N;
p.length = 8;
s(p);
}
}
}
}
return T - i;
}
function A(e) {
var t, i = e.ud;
i.deep >= T && alert("the table is too deep");
if (0 != e.index && e.tagname != i.array_tag) {
i.array_tag = e.tagname;
i.result[e.tagname] = new Array();
if (e.index < 0) return 0;
}
switch (e.type) {
case r:
if (e.extra) {
t = e.value / e.extra;
} else t = e.value;
break;

case l:
t = 1 == e.value || 0 != e.value && null;
break;

case c:
for (var s = new Array(), o = 0; o < e.length; o++) s.push(e.value[o]);
t = e.extra ? s : n.utf82string(s);
break;

case h:
var a, d = new Object();
d.deep = i.deep + 1;
d.array_index = 0;
d.array_tag = null;
d.result = new Object();
if (e.mainindex >= 0) {
d.mainindex_tag = e.mainindex;
if ((a = U(e.subtype, e.value, e.length, A, d)) < 0 || a != e.length) return a;
t = d.result;
break;
}
d.mainindex_tag = -1;
d.key_index = 0;
if ((a = U(e.subtype, e.value, e.length, A, d)) < 0) return u;
if (a != e.length) return a;
t = d.result;
break;

default:
alert("Invalid type");
}
e.index > 0 ? i.result[e.tagname][e.index - 1] = t : i.result[e.tagname] = t;
return 0;
}
function x(e, t) {
var i = e.tcache[t];
if (null === i || void 0 === i) {
i = k(e, t);
e.tcache[t] = i;
}
return i;
}
function V(e, t) {
var i = null, s = null;
if ("number" == typeof t) {
i = t;
if (null === (s = P(e, t))) return null;
} else {
s = i = M(e, t);
if (-1 === i) return null;
}
return {
ret1: s,
request: B(e, i, o),
response: B(e, i, a)
};
}
function W(e, t) {
var i = e.pcache[t];
if (null === i || void 0 === i) {
var s = V(e, t), n = s.ret1, o = s.request, a = s.response;
if ("number" == typeof t) {
var r = n;
n = t;
t = r;
}
i = {
request: o,
response: a,
name: t,
tag: n
};
e.pcache[t] = i;
e.pcache[n] = i;
}
return i;
}
R.dump = function() {
console.log("========== sproto dump ==========");
F(this);
console.log("=================================");
};
R.objlen = function(e, t) {
var i = null;
if ("string" == typeof e || "number" == typeof e) {
if (null == (i = x(R, e))) return null;
} else i = e;
var s = new Object();
s.array_tag = null;
s.deep = 0;
s.result = new Object();
return U(i, t, t.length, A, s);
};
R.encode = function(e, t) {
var i = new Object(), s = null;
if ("string" == typeof e || "number" == typeof e) {
if (null == (s = x(R, e))) return null;
} else s = e;
var n = new Array();
i.st = s;
i.tbl_index = 2;
i.indata = t;
for (;;) {
i.array_tag = null;
i.array_index = 0;
i.deep = 0;
i.iter_index = 3;
return N(s, n, 0, w, i) < 0 ? null : n;
}
};
R.decode = function(e, t) {
var i = null;
if ("string" == typeof e || "number" == typeof e) {
if (null == (i = x(R, e))) return null;
} else i = e;
var s = t, n = t.length, o = new Object();
o.array_tag = null;
o.deep = 0;
o.result = new Object();
return U(i, s, n, A, o) < 0 ? null : o.result;
};
R.pack = function(t) {
return e.pack(t);
};
R.unpack = function(t) {
return e.unpack(t);
};
R.pencode = function(e, t) {
var i = R.encode(e, t);
return null == i ? null : R.pack(i);
};
R.pdecode = function(e, t) {
var i = R.unpack(t);
return null == i ? null : R.decode(e, i);
};
R.host = function(e) {
function i(e) {
e = e || "package";
this.proto = R;
this.package = x(R, e);
this.package = this.package ? this.package : "package";
this.session = {};
}
i.prototype = t;
return new i(e);
};
t.attach = function(e) {
this.attachsp = e;
var t = this;
return function(s, o, a) {
var r = W(e, s);
i.type = r.tag;
i.session = a;
var l = e.encode(t.package, i);
a && (t.session[a] = !r.response || r.response);
if (o) {
var c = e.encode(r.request, o);
return e.pack(n.arrayconcat(l, c));
}
return e.pack(l);
};
};
function q(e, t, s) {
return function(o) {
i.type = null;
i.session = s;
var a = e.proto.encode(e.package, i);
if (t) {
var r = e.proto.encode(t, o);
return e.proto.pack(n.arrayconcat(a, r));
}
return e.proto.pack(a);
};
}
t.dispatch = function(e) {
var t = this.proto, s = t.unpack(e);
i.type = null;
i.session = null;
i = t.decode(this.package, s);
var n = t.objlen(this.package, s), o = s.slice(n, s.length);
if (i.type) {
var a = W(t, i.type);
a.request && (r = t.decode(a.request, o));
return i.session ? {
type: "REQUEST",
pname: a.name,
result: r,
responseFunc: q(this, a.response, i.session),
session: i.session
} : {
type: "REQUEST",
pname: a.name,
result: r
};
}
t = this.attachsp;
var r, l = i.session, c = this.session[l];
delete this.session[l];
return !0 === c ? {
type: "RESPONSE",
session: l
} : {
type: "RESPONSE",
session: l,
result: r = t.decode(c, o)
};
};
return R;
};
return e;
}();
t.exports = o;
cc._RF.pop();
}, {
"./utils": "utils"
} ],
tabItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "46093CTqlBHIZO7LgLJE/0i", "tabItem");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
sprTitle: cc.Node,
txtTitle: cc.Node,
nodeSelect: cc.Node,
sprSeleTitle: cc.Node,
txtSeleTitle: cc.Node,
sprIcon: cc.Node
},
onLoad: function() {
this.initUI();
},
initUI: function() {
this.sprTitle.active = !1;
this.txtTitle.active = !1;
this.nodeSelect.active = !1;
this.sprSeleTitle.active = !1;
this.txtSeleTitle.active = !1;
this.sprIcon.active = !1;
},
setData: function(e, t) {
var i = this;
this.index = e;
this.type = 0;
if (TypeUtils.isRealNull(t.icon)) {
this.sprTitle.x = 0;
this.txtTitle.x = 0;
this.sprSeleTitle.x = -8;
this.txtSeleTitle.x = -8;
} else {
this.sprIcon.active = !0;
SpriteUtils.setTexture({
path: t.icon,
isHide: !0,
callback: function() {
i.sprIcon.scale = t.scale || 1;
}
}, this.sprIcon, this);
}
if (TypeUtils.isAllNull(t.name)) {
if (!TypeUtils.isRealNull(t.paths)) {
this.type = 2;
this.sprTitle.active = !0;
this.sprSeleTitle.active = !0;
SpriteUtils.setTexture({
path: t.paths.enable,
isHide: !0
}, this.sprTitle, this);
SpriteUtils.setTexture({
path: t.paths.sele,
isHide: !0
}, this.sprSeleTitle, this);
}
} else {
this.type = 1;
this.txtTitle.active = !0;
this.txtSeleTitle.active = !0;
this.txtTitle.getComponent(cc.Label).string = t.name;
this.txtSeleTitle.getComponent(cc.Label).string = t.name;
}
},
update: function(e) {}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
taskItem: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "6f68elS2QxHObjdSadlmXr5", "taskItem");
var s = e("BaseComponent"), n = e("TaskConst"), o = e("WelfareConst");
cc.Class({
extends: s,
properties: {
progressBar: cc.Node,
btnGet: cc.Node,
txtBtn: cc.Node,
txtProg: cc.Label,
richDesc: cc.RichText,
comItem: cc.Prefab
},
onLoad: function() {
this.initData();
this.initUI();
},
initData: function() {},
initUI: function() {
this.onClick(this.btnGet, this.onGetAward.bind(this));
this.progressBar.getComponent(cc.ProgressBar).progress = 0;
this.txtProg.string = "";
this.richDesc.string = "";
this.awardItem = cc.instantiate(this.comItem);
this.awardItem.parent = this.node;
this.awardItem.scale = .8;
this.awardItem.x = -this.node.width / 2 + this.awardItem.width / 2 + 20;
this.awardItem.script = this.awardItem.getComponent("comItem");
},
setData: function(e) {
this.data = e;
var t = cc.color(90, 90, 90, 255), i = e.status || 1, s = e.type || o.TypeState.Task, n = Number(e.progress) || 0;
this.progressBar.getComponent(cc.ProgressBar).progress = n / e.num;
this.awardItem.script.setData(e.award[0]);
var a = StringUtils.getHtmlStr([ {
str: e.desc,
color: "#FFFFFF",
outline: "#65696b",
lineSize: 2
} ]);
this.richDesc.string = a;
this.txtProg.string = n + "/" + e.num;
var r = "已错过";
this.btnGet.getComponent(cc.Button).interactable = !1;
if (this.isNotFinish(s, i)) r = "未达成"; else if (this.canGet(s, i)) {
r = "领 取";
this.btnGet.getComponent(cc.Button).interactable = !0;
t = cc.color(204, 96, 0, 255);
} else this.hasGet(s, i) && (r = "已领取");
this.txtBtn.getComponent(cc.LabelOutline).color = t;
this.txtBtn.getComponent(cc.Label).string = r;
},
isNotFinish: function(e, t) {
return e == o.TypeState.Task ? t == n.FinishStatus.NotFinish : t == o.OnLineAwardState.NOT_GET;
},
canGet: function(e, t) {
return e == o.TypeState.Task ? t == n.FinishStatus.Finish : t == o.OnLineAwardState.CAN_GET;
},
hasGet: function(e, t) {
return e == o.TypeState.Task ? t == n.FinishStatus.HasReceive : t == o.OnLineAwardState.HAS_GET;
},
onGetAward: function() {
TypeUtils.isFunction(this.callback) && this.callback(this.data);
},
setClickCB: function(e) {
this.callback = e;
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent",
TaskConst: "TaskConst",
WelfareConst: "WelfareConst"
} ],
taskView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "d0fa5LRCr5LA5EgeD3nFo/L", "taskView");
var s = e("List"), n = e("TaskConst");
cc.Class({
extends: ViewBase,
properties: {
listTask: s
},
onCreate: function() {
this.initData();
this.initEvent();
this.initUI();
},
onAdapt: function() {},
initData: function() {
this.ctrl = app.ctrls.task;
this.model = this.ctrl.getModel();
this.ctrl.getTaskInfo();
this.initConfig();
},
initConfig: function() {
this.taskList = this.model.getTaskByType(n.TaskType.FishDaily);
ArrayUtils.sort(this.taskList, function(e, t) {
return TypeUtils.isRealNull(e.status) || TypeUtils.isRealNull(t.status) || e.status == t.status ? TypeUtils.isRealNull(e.rank) || TypeUtils.isRealNull(t.rank) ? e.id - t.id : e.rank - t.rank : e.status == n.FinishStatus.Finish ? -1 : t.status == n.FinishStatus.Finish ? 1 : e.status - t.status;
});
},
initEvent: function() {
this.eventOn(this.model.EVENT_UPDATE_TASK_INFO, this.handleUpdateTaskInfo, this);
this.eventOn(this.model.EVENT_GET_TASK_AWARD, this.handleGetTaskAward, this);
},
initUI: function() {
this.canAction = !0;
this.updateList();
},
updateList: function() {
this.listTask.numItems = this.taskList.length;
this.listTask.scrollTo(0, .02);
},
onRenderEvent: function(e, t) {
var i = this, s = this.taskList[t];
if (TypeUtils.isRealNull(e.script)) {
e.script = e.getComponent("taskItem");
e.script.setClickCB(this.onClickTask.bind(this));
}
e.script.setData(s);
e.stopAllActions();
e.scale = 1;
if (this.canAction) {
e.scale = 0;
ActionUtils.sequence(e, cc.delayTime(.02 * t), cc.scaleTo(.1, 1.1), cc.scaleTo(.05, 1), cc.callFunc(function() {
i.canAction = !1;
}));
}
},
onClickTask: function(e) {
e.status == n.FinishStatus.NotFinish ? TipsUtils.showTips("未完成") : e.status == n.FinishStatus.Finish ? this.ctrl.getTaskAward(e.id, e.award) : TipsUtils.showTips("已完成");
},
handleUpdateTaskInfo: function() {
this.initConfig();
this.updateList();
},
handleGetTaskAward: function() {
this.initConfig();
this.updateList();
}
});
cc._RF.pop();
}, {
List: "List",
TaskConst: "TaskConst"
} ],
tipsScrollView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "a31dfZ0oghNb6aDkBzLgCb4", "tipsScrollView");
var s = e("BaseComponent");
cc.Class({
extends: s,
properties: {
nodeSwallo: cc.Node,
scrollView: cc.Node,
content: cc.Node,
richContent: cc.Node
},
ctor: function() {},
onLoad: function() {
s.prototype.onLoad.call(this);
this.onClick(this.nodeSwallo, this.onClickToHide.bind(this));
this.nodeSwallo.active = !1;
this.scrollView.scale = 0;
this.scrollView.active = !1;
},
onClickToHide: function() {
this.scrollView.active = !1;
this.nodeSwallo.active = !1;
this.scrollView.scale = 0;
this.scrollView.stopAllActions();
},
onClickBtnPlay: function(e, t) {
var i = this;
this.nodeSwallo.active = !0;
this.scrollView.active = !0;
var s = this.scrollView.parent.convertToNodeSpaceAR(e);
this.scrollView.x = s.x;
this.scrollView.y = s.y;
this.richContent.getComponent(cc.RichText).string = t;
ActionUtils.callOnce(this.richContent, function() {
var e = i.richContent.height;
e > i.content.height && (i.content.height = e);
}, .1);
ActionUtils.sequence(this.scrollView, cc.scaleTo(.08, 1.1), cc.scaleTo(.03, 1));
}
});
cc._RF.pop();
}, {
BaseComponent: "BaseComponent"
} ],
tipsWord: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "d6737OD6ppFwoL7bPuqEnr5", "tipsWord");
cc.Class({
extends: ViewBase,
pushData: function(e) {
this.m_strData.length >= 4 || this.m_strData.push(e);
},
onCreate: function(e) {
this.initData(e);
this.initUI();
},
initData: function(e) {
this.m_strData = [];
this.m_strData.push(e);
},
initUI: function() {
this.nodeFly = this.getC("nodeFly");
this.sprBg = this.getC("sprBg");
this.labContent = this.getC("labContent");
this.nodeFly.active = !1;
this.node.runAction(cc.repeatForever(cc.sequence(cc.delayTime(.5), cc.callFunc(function() {
this.fly();
}.bind(this)))));
},
syncSize: function(e, t) {
e.width = t.width + 40;
},
fly: function() {
if (!(this.m_strData.length <= 0)) {
var e = this.getNode();
e.y = 0;
e.active = !0;
e.opacity = 0;
var t = this.seekC(e, "labContent"), i = this.seekC(e, "sprBg");
t.getComponent(cc.Label).string = this.m_strData[0].str;
(TypeUtils.isRealNull(this.m_strData[0].str) || "null" == this.m_strData[0].str) && logger.error("this.m_strData[0]", this.m_strData[0]);
var s = this.m_strData[0].showTime || .5;
e.parent = this.node;
var n = cc.spawn(cc.moveBy(.5, cc.v2(0, 100)), cc.fadeOut(.5));
e.runAction(cc.sequence(cc.callFunc(function() {
e.opacity = 255;
this.syncSize(i, t);
}.bind(this)), cc.moveBy(s, cc.v2(0, 100)), n, cc.callFunc(function() {
this.save(e);
}.bind(this))));
ArrayUtils.remove(this.m_strData, 0);
}
},
save: function(e) {
this.pushPool("nodeFly", e);
},
getNode: function() {
var e = this.popPool("nodeFly");
return e || NodeUtils.clone(this.nodeFly);
}
});
cc._RF.pop();
}, {} ],
use_reversed_rotateTo: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "886caC3wP9CiocnbzefDAa+", "use_reversed_rotateTo");
cc.RotateTo._reverse = !0;
cc._RF.pop();
}, {} ],
utils: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "68cb1nAJAVGsbd1qg7OLEyz", "utils");
var s = function() {
var e = {
array2arraybuffer: function(e) {
for (var t = new ArrayBuffer(e.length), i = new DataView(t, 0), s = 0; s < e.length; s++) i.setUint8(s, e[s]);
return t;
},
arraybuffer2array: function(e) {
for (var t = new DataView(e, 0), i = new Array(), s = 0; s < t.byteLength; s++) i[s] = t.getUint8(s);
return i;
},
stringToBytes: function(e) {
for (var t = new Int8Array(e.length), i = 0; i < e.length; i++) t[i] = e.charCodeAt(i);
return t.buffer;
},
string2utf8: function(e) {
for (var t = [], i = 0; i < e.length; i++) {
var s = e.charCodeAt(i);
if (0 <= s && s <= 127) {
1;
t.push(s);
} else if (128 <= s && s <= 2047) {
2;
t.push(192 | 31 & s >> 6);
t.push(128 | 63 & s);
} else if (2048 <= s && s <= 55295 || 57344 <= s && s <= 65535) {
3;
t.push(224 | 15 & s >> 12);
t.push(128 | 63 & s >> 6);
t.push(128 | 63 & s);
}
}
for (i = 0; i < t.length; i++) t[i] &= 255;
return t;
},
utf82string: function(e) {
if ("string" == typeof e) return null;
for (var t = "", i = 0; i < e.length && null != e[i]; i++) {
var s = e[i].toString(2), n = s.match(/^1+?(?=0)/);
if (n && 8 == s.length) {
for (var o = n[0].length, a = e[i].toString(2).slice(7 - o), r = 1; r < o; r++) a += e[r + i].toString(2).slice(2);
t += String.fromCharCode(parseInt(a, 2));
i += o - 1;
} else t += String.fromCharCode(e[i]);
}
return t;
},
arraybuffer2str: function(e) {
return String.fromCharCode.apply(null, new Uint8Array(e));
},
arrayconcat: function(e, t) {
for (var i = new Array(), s = 0; s < e.length; s++) i[s] = e[s];
for (var n = e.length; n < e.length + t.length; n++) i[n] = t[n - e.length];
return i;
},
arraybufferconcat: function(e, t) {
var i = this.arraybuffer2array(e), s = this.arraybuffer2array(t), n = this.arrayconcat(i, s);
return this.array2arraybuffer(n);
}
};
return e;
}();
t.exports = s;
cc._RF.pop();
}, {} ],
vipTurntableView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "d173dMdW2ROxJ2IVrucH+Uh", "vipTurntableView");
var s = e("CommonConst");
e("ItemConst");
cc.Class({
extends: ViewBase,
properties: {
sprTitle: cc.Node,
btnClose: cc.Node,
btnTips: cc.Node,
txtVip: cc.Label,
txtTimes: cc.Label,
btnDraw: cc.Node,
sprDraw: cc.Node,
txtDrawNum: cc.Label,
sprTips: cc.Node,
nodeTurntable: cc.Node,
nodeLight: cc.Node,
nodeSector: cc.Prefab
},
onAdapt: function() {
AdaptUtils.AdaptNodeToHWAdapt(this.node);
},
onCreate: function(e) {
this.initData(e);
this.initEvent();
this.initUI();
},
initData: function(e) {
this.ctrl = app.ctrls.vip;
this.model = this.ctrl.getModel();
this.ctrl.getDiskCount(s.TurntableType.FishVIP);
},
initEvent: function() {
this.eventOn(this.model.EVENT_UPDATE_DRAW_COUNT, this.handleUpdateDrawCount.bind(this));
this.eventOn(this.model.EVENT_DRAW_SUCCESS_RESULT, this.handleDrawResult.bind(this));
},
initUI: function() {
var e = this;
this.onClick(this.btnClose, function() {
ViewManager.closeView(e);
});
this.onClick(this.btnTips, function() {
var e = ConfigMgr.getConfig("rule_config").findByIndex("vip_disk_2") || {};
TipsUtils.showTipsBox({
title: e.name || "帮 助",
desc: e.content || "无",
signBtn: !0,
isHideCloce: !0,
fontSize: 26,
alignType: cc.macro.TextAlignment.LEFT
});
});
this.onClick(this.btnDraw, this.onClickToDraw.bind(this));
this.sectorItems = [];
for (var t = 0; t < 8; t++) {
var i = cc.instantiate(this.nodeSector);
i.parent = this.nodeTurntable;
i.scale = .8;
i.angle = 45 * t;
i.x = 0;
i.y = 0;
i.script = i.getComponent("nodeSector");
this.sectorItems.push(i);
}
this.lightList = [];
for (var s = function(t) {
var i = new cc.Node();
i.parent = e.nodeLight;
var s = Math.PI / 12 * (t + 9);
i.x = 250 * Math.cos(s);
i.y = 250 * Math.sin(s);
i.addComponent(cc.Sprite);
var n = i.addComponent(cc.Button);
n.transition = cc.Button.Transition.SPRITE;
SpriteUtils.getSpriteFrame("module/fish/texture/vipTurntable/vipcj_img_05", function(e) {
n.normalSprite = e;
}, n);
SpriteUtils.getSpriteFrame("module/fish/texture/vipTurntable/vipcj_img_06", function(e) {
n.disabledSprite = e;
}, n);
n.interactable = t % 2 == 0;
e.lightList.push(n);
ActionUtils.repeat(i, cc.delayTime(.5), cc.callFunc(function() {
n.interactable = !n.interactable;
}));
}, n = 0; n < 19; n++) s(n);
this.refreshView();
},
refreshView: function() {
this.refreshCount();
this.config = ConfigMgr.getConfig("disk_type_config").findAll(function(e) {
return e.diskTypeId == s.TurntableType.FishVIP;
}) || [];
ArrayUtils.sort(this.config, function(e, t) {
return e.id - t.id;
});
for (var e = 0; e < this.sectorItems.length; e++) {
var t = this.sectorItems[e];
TypeUtils.isRealNull(this.config[e]) || t.script.setData({
type: e % 2,
desc: this.config[e].awardName,
itemId: this.config[e].award.itemId,
amount: this.config[e].award.amount
});
}
this.sprDraw.active = !1;
this.txtDrawNum.string = "";
this.costItem = ConfigMgr.getConfig("diskitem_weight_config").findFirst(function(e) {
return e.diskTypeId == s.TurntableType.FishVIP;
});
if (!TypeUtils.isRealNull(this.costItem)) {
this.sprDraw.active = !0;
SpriteUtils.setTexture({
path: ItemUtils.getItemPng(this.costItem.itemId)
}, this.sprDraw, this);
this.txtDrawNum.string = NumberUtils.toString(this.costItem.amount);
}
},
setBtnsEnable: function(e) {
this.btnClose.getComponent(cc.Button).interactable = e;
this.btnTips.getComponent(cc.Button).interactable = e;
this.btnDraw.getComponent(cc.Button).interactable = e;
},
refreshCount: function() {
var e = this.model.getDiskCount(s.TurntableType.FishVIP);
this.txtVip.string = "VIP" + VipUtils.getFishVipLevel();
this.txtTimes.string = e;
},
onClickToDraw: function() {
var e = this;
if (!TypeUtils.isRealNull(this.costItem) && !TypeUtils.isRealNull(this.costItem.itemId)) {
if (ItemUtils.getItemNum(this.costItem.itemId) < this.costItem.amount) {
TipsUtils.showTips(ItemUtils.getItemName(this.costItem.itemId) + "不足");
return;
}
}
if (this.model.getDiskCount(s.TurntableType.FishVIP) <= 0) TipsUtils.showTips("次数不足"); else {
this.isResult = !1;
this.nodeTurntable.angle = 0;
ActionUtils.repeat(this.nodeTurntable, cc.rotateBy(1, 360), function() {
if (e.isResult) {
e.nodeTurntable.stopAllActions();
if (TypeUtils.isRealNull(e.resultIdx)) e.setBtnsEnable(!0); else {
e.scrollResult(e.resultIdx);
e.resultIdx = null;
}
}
});
this.setBtnsEnable(!1);
this.ctrl.requestToDraw(s.TurntableType.FishVIP);
}
},
handleUpdateDrawCount: function() {
this.refreshCount();
},
handleDrawResult: function(e) {
this.isResult = !0;
e = e || {};
if (!TypeUtils.isRealNull(e.data)) {
this.ctrl.getDiskCount(s.TurntableType.FishVIP);
this.resultIdx = Number(e.data) - 1;
}
},
scrollResult: function(e) {
var t = this;
ActionUtils.sequence(this.nodeTurntable, cc.rotateBy(8, 360 * RandomUtils.randInt(5, 8) + 45 * e).easing(cc.easeExponentialOut()), function() {
app.ctrls.role.unfreezeEvents();
t.setBtnsEnable(!0);
var i = t.config[e];
if (!TypeUtils.isRealNull(i)) {
var s = i.award || {};
ViewManager.showAwards({
awards: s
});
}
});
},
onExit: function() {
app.ctrls.role.unfreezeEvents();
}
});
cc._RF.pop();
}, {
CommonConst: "CommonConst",
ItemConst: "ItemConst"
} ],
vipView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "7df48ltHmhIW6aa7skTsKRu", "vipView");
e("console").error;
var s = e("ItemConst"), n = null, o = null;
cc.Class({
extends: ViewBase,
properties: {
nodeDesc: cc.Node,
sprVipBefore: cc.Node,
sprVipLater: cc.Node,
vipProg: cc.ProgressBar,
btnCharge: cc.Node,
txtProg: cc.Label,
txtVipDesc: cc.RichText,
sprDetailBg: cc.Node,
nodeGun: cc.Node,
sprVip: cc.Node,
sprName: cc.Node,
spLight: cc.Node,
spGun: cc.Node,
btnWan: cc.Node,
btnLeft: cc.Node,
btnRight: cc.Node,
vipScrollView: cc.Node,
vipContent: cc.Node,
richContent: cc.Node,
nodeItems: cc.Node,
sprVipNum: cc.Node,
btnLingqu: cc.Node,
txtLingqu: cc.Node,
comItem: cc.Prefab,
tipsScroll: cc.Prefab,
prefabBg: cc.Prefab
},
onCreate: function(e) {
e = e || {};
this.initConfig();
this.initData();
this.initEvent();
this.initUI(e);
},
initConfig: function() {
n = ConfigMgr.getConfig("fish_vip_config");
o = ConfigMgr.getConfig("gun_config");
},
initData: function() {
this.ctrl = app.ctrls.vip;
this.model = this.ctrl.getModel();
this.ctrl.getVipInfo();
this.isGetInfo = !0;
},
initEvent: function() {
this.eventOn(this.model.EVENT_UPDATE_VIP_INFO, this.handleUpdateVipInfo.bind(this));
this.eventOn(this.model.EVENT_GET_VIP_UP_AWARD_SUCCESS, this.handleUpdateVipInfo.bind(this));
},
initUI: function(e) {
var t = this;
this.tabIndex = -1;
this.comBg = cc.instantiate(this.prefabBg);
this.node.addChild(this.comBg);
this.comBg.zIndex = -1;
this.comBg.getComponent("comBaseView").setCloseCallback(function() {
ViewManager.closeView(t);
});
this.comBg.getComponent("comBaseView").setTitle({
type: 1,
path: "module/fish/texture/fishVip/gztq_title",
bgType: 4
});
this.giftItems = [];
for (var i = 0; i < 4; i++) {
var s = cc.instantiate(this.comItem);
s.parent = this.nodeItems;
s.x = i % 2 == 0 ? -60 : 60;
s.y = i / 2 >= 1 ? -60 : 60;
s.script = s.getComponent("comItem");
s.scale = .85;
s.active = !1;
this.giftItems.push(s);
}
var o = cc.sequence(cc.moveBy(1, cc.v2(0, 8)), cc.moveBy(1, cc.v2(0, -8)));
this.spGun.stopAllActions();
this.spGun.runAction(cc.repeatForever(o));
this.onClick(this.btnLeft, this.onClickPrior.bind(this));
this.onClick(this.btnRight, this.onClickNext.bind(this));
this.onClick(this.btnCharge, function() {
ViewManager.showView("SHOP_VIEW");
});
this.maxVipLv = n.getLen() - 1;
this.initGunPlayDesc();
this.freshVipDes();
this.freshChargeInfo();
FishUtils.showOpenSpine(this.node);
},
initGunPlayDesc: function() {
this.onClick(this.btnWan, this.onClickBtnPlay.bind(this));
this.tipsView = cc.instantiate(this.tipsScroll);
this.tipsView.script = this.tipsView.getComponent("tipsScrollView");
this.tipsView.parent = this.node;
this.tipsView.zIndex = 999;
},
onClickBtnPlay: function(e) {
var t = n.findByIndex(this.currVipIdx);
if (!TypeUtils.isRealNull(t)) {
var i = ItemUtils.getItemConfig(t.levelGun.itemId), s = o.findByIndex(i.gun), a = this.btnWan.convertToWorldSpaceAR(cc.v2(0, 0));
this.tipsView.script.onClickBtnPlay(a, s.desc);
}
},
freshVipDes: function() {
var e = this.model.getVipLevel();
this.currVipIdx = e < 1 ? 1 : e < this.maxVipLv ? e + 1 : e;
this.freshAwardIndex();
this.freshVipInfo();
this.freshVipGift();
},
freshAwardIndex: function() {
var e = this.model.getVipLevel();
this.curAwardIdx = 1;
if (e > 0) {
this.curAwardIdx = e < this.maxVipLv ? e + 1 : e;
for (var t = 1; t <= e; t++) if (!this.model.isLingquByLevel(t)) {
this.curAwardIdx = t;
break;
}
}
},
freshVipInfo: function() {
var e = n.findByIndex(this.currVipIdx);
if (!TypeUtils.isRealNull(e)) {
this.btnLeft.active = 1 != this.currVipIdx;
this.btnRight.active = this.currVipIdx != this.maxVipLv;
this.freshVipDesList(e);
var t = ItemUtils.getItemConfig(e.levelGun.itemId);
if (!TypeUtils.isRealNull(t) && !TypeUtils.isRealNull(t.gun)) {
var i = o.findByIndex(t.gun);
this.btnWan.active = "" != i.desc;
}
}
},
freshVipDesList: function(e) {
this.vipScrollView.getComponent(cc.ScrollView).scrollToTop(.02);
for (var t = StringUtils.stringSplit(e.desc, ";"), i = "", s = 0; s < t.length; s++) {
var n = s + 1 + "、" + t[s];
i += StringUtils.getHtmlStr([ {
str: n,
color: "#4586E0"
}, {
br: !0
} ]);
}
this.richContent.getComponent(cc.RichText).string = i;
this.richContent.getComponent(cc.RichText)._updateRichText();
var a = this.richContent.height;
this.vipContent.height = a > 320 ? a : 320;
this.sprName.active = !1;
if (!TypeUtils.isRealNull(e.levelGun)) {
var r = ItemUtils.getItemConfig(e.levelGun.itemId), l = r.iconSp || {};
if (!TypeUtils.isAllNull(l.stay) && !TypeUtils.isAllNull(l.sp)) {
var c = l.stay.replace("-2", "");
if (!TypeUtils.isRealNull(this.spGunNode)) {
this.spGunNode.destroy();
this.spGunNode = null;
}
this.spGunNode = FishUtils.playSpine({
ani: c,
x: 0,
y: 0,
isLoop: !1,
path: l.sp,
loadCallBack: function(e) {
e.addAnimation(0, l.stay, !0, 0);
}
}, this.spGun);
}
if (!TypeUtils.isRealNull(r.gun)) {
var h = o.findByIndex(r.gun);
if (!TypeUtils.isRealNull(h) && !TypeUtils.isRealNull(h.nameRes)) {
this.sprName.active = !0;
SpriteUtils.setTexture({
path: "module/fish/texture/fishVip/" + h.nameRes
}, this.sprName, this);
}
}
}
SpriteUtils.setTexture({
path: "module/fish/texture/fishVip/tq_txt_type_c_" + this.currVipIdx
}, this.sprVip, this);
},
freshVipGift: function() {
var e = this;
this.freshAwardIndex();
var t = n.findByIndex(this.curAwardIdx), i = this.model.getVipLevel(), o = t.levelGift || [], a = 0;
SpriteUtils.setTexture({
path: "module/fish/texture/fishVip/tq_txt_type_a_" + this.curAwardIdx
}, this.sprVipNum, this);
for (var r = [], l = 0; l < o.length; l++) {
var c = o[l];
if (!TypeUtils.isRealNull(c.itemId)) {
if (ItemUtils.getItemConfig(c.itemId).type != s.ItemType.Gun && this.giftItems[a]) {
this.giftItems[a].active = !0;
this.giftItems[a].script.setData(c);
a += 1;
r.push(c);
}
}
}
var h = cc.color(204, 96, 0, 255), u = this.model.isLingquByLevel(this.curAwardIdx), d = !0, p = "可领取";
if (this.curAwardIdx > i) {
h = cc.color(90, 90, 90, 255);
d = !1;
p = "未达成";
} else if (u) {
h = cc.color(90, 90, 90, 255);
d = !1;
p = "已领取";
}
this.btnLingqu.getComponent(cc.Button).interactable = d;
this.txtLingqu.getComponent(cc.Label).string = p;
this.txtLingqu.getComponent(cc.LabelOutline).color = h;
this.onClick(this.btnLingqu, function() {
e.ctrl.getVipUpLvAward(e.curAwardIdx, {
award: r
});
});
},
freshChargeInfo: function() {
var e = this.model.getVipLevel(), t = this.model.getVipLevel() + 1;
t > this.maxVipLv && (t = this.maxVipLv);
var i = StringUtils.getHtmlStr([ {
str: "已达到最高VIP等级！",
color: "#FFFFFF",
outline: "#1F599A",
lineSize: 2
} ]), s = 1, o = 0, a = 0;
if (t > e) {
a = n.findByIndex(t).exp;
o = this.model.getVipExp();
i = StringUtils.getHtmlStr([ {
str: "再充值",
color: "#FFFFFF",
outline: "#1F599A",
lineSize: 2
}, {
str: " " + a - o + " ",
color: "#DCC741",
outline: "#C1542A",
lineSize: 2
}, {
str: "元即可成为",
color: "#FFFFFF",
outline: "#1F599A",
lineSize: 2
}, {
str: " VIP" + t,
color: "#DCC741",
outline: "#C1542A",
lineSize: 2
}, {
str: ",高级VIP可同时享有低级特权",
color: "#FFFFFF",
outline: "#1F599A",
lineSize: 2
} ]);
s = o / a;
}
this.txtVipDesc.string = i;
this.txtProg.string = o + "/" + a;
this.vipProg.progress = s;
SpriteUtils.setTexture({
path: "module/fish/texture/fishVip/tq_txt_type_b_" + e
}, this.sprVipBefore, this);
SpriteUtils.setTexture({
path: "module/fish/texture/fishVip/tq_txt_type_b_" + t
}, this.sprVipLater, this);
},
onClickPrior: function() {
if (this.currVipIdx > 1) {
this.currVipIdx = this.currVipIdx - 1;
this.freshVipInfo();
}
},
onClickNext: function() {
if (this.currVipIdx < this.maxVipLv) {
this.currVipIdx = this.currVipIdx + 1;
this.freshVipInfo();
}
},
handleUpdateVipInfo: function() {
if (this.isGetInfo) {
this.isGetInfo = !1;
this.freshVipDes();
} else this.freshVipInfo();
this.freshVipGift();
this.freshChargeInfo();
}
});
cc._RF.pop();
}, {
ItemConst: "ItemConst",
console: 5
} ],
welfareView: [ function(e, t, i) {
"use strict";
cc._RF.push(t, "3d8b6B7w2NF7bBNk5UGuB9K", "welfareView");
function s(e, t, i) {
t in e ? Object.defineProperty(e, t, {
value: i,
enumerable: !0,
configurable: !0,
writable: !0
}) : e[t] = i;
return e;
}
var n = e("List"), o = e("WelfareConst"), a = e("ItemConst"), r = [ a.ResourceType.Gold, a.ResourceType.Diamond ];
cc.Class({
extends: ViewBase,
properties: {
nodeRoot: cc.Node,
sprBg: cc.Node,
nodeCen: cc.Node,
sprViewBg: cc.Node,
tabList: n,
scrollTab: cc.Node,
btnBack: cc.Node,
txtTips: cc.Node,
comCurrency: cc.Prefab
},
onCreate: function() {
this.initData();
this.initEvent();
this.initUI();
},
onAdapt: function() {
AdaptUtils.AdaptNodeToFullSize(this.nodeRoot);
AdaptUtils.AdaptNodeToFullAdapt(this.sprBg);
AdaptUtils.AdaptNodeToHWAdapt(this.nodeCen);
},
initData: function() {
this.ctrl = app.ctrls.welfare;
this.model = this.ctrl.getModel();
},
initEvent: function() {
this.eventOn(this.model.EVENT_UPDATE_WELFARE_INFO, this.updateActInfo, this);
this.eventOn(AppEvent.SystemOnOffInfo, this.onSystemOnOffInfo, this);
},
initUI: function() {
var e = this;
this.txtTips.active = !0;
this.nodeCen.active = !1;
this.onClick(this.btnBack, function() {
ViewManager.closeView(e.openView);
ViewManager.closeView(e);
});
this.initPnlCurreny();
this.freshActTab();
},
initPnlCurreny: function() {
this.posList = [];
for (var e = 0; e < r.length; e++) {
var t = r[e], i = cc.instantiate(this.comCurrency);
this.nodeRoot.addChild(i);
i.y = this.nodeRoot.height / 2 - 50;
i.x = 400 * (e - (r.length - 1) / 2) + 100;
i.getComponent("comCurrency").setData(t);
this.posList.push({
node: i,
pos: cc.v2(i.x, i.y)
});
}
},
freshActTab: function() {
this.tabDatas = this.model.getTabList();
this.nodeCen.active = this.tabDatas.length > 0;
this.txtTips.active = this.tabDatas.length <= 0;
if (this.tabDatas.length > 0) {
this.tabList.numItems = this.tabDatas.length;
this.tabList.selectedId = 0;
}
},
onListRender: function(e, t) {
var i = this.tabDatas[t], n = o.WelfareIdOfTab[i.id];
e.scale = .9;
TypeUtils.isRealNull(e.script) && (e.script = e.getComponent("tabItem"));
e.script.setData(t, {
paths: n
});
TypeUtils.isRealNull(e.redPoint) && (e.redPoint = e.getComponent("redPoint"));
e.redPoint.setRemind(s({}, i.appEvent, !0));
},
onListSelected: function(e, t, i, s) {
this.doSelect(t);
},
doSelect: function(e) {
TypeUtils.isRealNull(this.openView) || ViewManager.closeView(this.openView);
var t = this.tabDatas[e];
this.openView = o.WelfareIdOfView[t.id];
ViewManager.showView(this.openView, this.sprViewBg);
},
updateActInfo: function(e) {
this.freshActTab();
},
onSystemOnOffInfo: function(e) {
this.model.freshSystemInfo(e);
}
});
cc._RF.pop();
}, {
ItemConst: "ItemConst",
List: "List",
WelfareConst: "WelfareConst"
} ]
}, {}, [ "use_reversed_rotateTo", "BaseCacheComponent", "BaseComponent", "ComGrid", "ComNodePool", "ComSpine", "ComSpineBaseData", "ComTileMap", "List", "ListItem", "ViewBase", "EnvEnum", "GlobalEnum", "ItemConst", "ManagerEnum", "MiniGameEnum", "ShopConst", "TowerShareEnum", "BaseHelper", "HotUpdateHelper", "AdVideoManager", "AnimationCacheManager", "AudioMusicManager", "BaseAssetManager", "BaseManager", "CommonAssetsManager", "ConfigManager", "DataHelper", "EnumManager", "EventManager", "GameManager", "HeadManager", "JsonManager", "KeyboardManager", "NodeCacheManager", "PlistTextureManager", "PopViewManager", "RedRemindManager", "RotationManager", "SingleTextureManager", "TaskSchManager", "TextManager", "Texture2DManager", "TimeManager", "TipsManager", "UserDataManager", "ViewManager", "ConfigMgr", "ConfigTable", "ConfigVO", "HttpMgr", "RecordDotMgr", "TimeMgr", "UidMgr", "MyApp", "BasePart", "PartLocker", "PartTimeBreaker", "AndroidPlatform", "BasePlatfrom", "IOSPlatform", "QQPlatfrom", "TTPlatform", "WXPlatform", "WindowPlatfrom", "YueRenQQPlatfrom", "Sdk", "STTList", "ActionUtils", "AdaptUtils", "AlignUtils", "AppUtils", "ArrayUtils", "ButtonUtils", "ChannelUtils", "ColorUtils", "CountingUtils", "DicUtils", "DragonBoneUtils", "GlobalUtils", "HelpUtils", "HttpUtils", "ItemUtils", "JsonUtils", "ListUtils", "LoadUtils", "LoggerUtils", "Md5Utils", "NodeUtils", "NumberUtils", "PointUtils", "PrefabUtils", "RandomUtils", "RectUtils", "RoleUtils", "SpineUtils", "SpriteUtils", "StringUtils", "SystemUtils", "TableUtils", "TextureUtils", "TilemapUtils", "TimeUtils", "TipsUtils", "TypeUtils", "UserUtils", "Utils", "VipUtils", "CtrlBase", "ModelBase", "protoMap", "socket", "sproto", "utils", "AppEvent", "Errorcode", "LangOfCN", "TextFilterConfig", "ViewConfig", "httpErrorCode", "BagCtrl", "BetTreasureCtrl", "ChannelCtrl", "ClubCtrl", "CountingCtrl", "CurrencyCtrl", "DebugCtrl", "GameCtrl", "GamesCtrl", "HttpCtrl", "LoginCtrl", "MailCtrl", "MarqueeCtrl", "RankingCtrl", "RoleCtrl", "ShopCtrl", "SystemCtrl", "TaskCtrl", "VipCtrl", "WelfareCtrl", "init", "BagModel", "BetTreasureModel", "ChannelModel", "ClubModel", "CountingModel", "CurrencyModel", "DebugModel", "GameModel", "GamesModel", "LoginModel", "MailModel", "MarqueeModel", "RankingModel", "RoleModel", "ShopModel", "SystemModel", "TaskModel", "VipModel", "WelfareModel", "requestView", "tipsWord", "acceptAwardView", "accountView", "awardsView", "bagSendView", "bagView", "cardGiftView", "chargeCarnivalView", "checkPwdView", "clubApplyInfo", "clubApplyView", "clubCreateView", "clubDepotAccess", "clubDepotRecord", "clubDepotView", "clubHallBuild", "clubHallManager", "clubHallRank", "clubHallRoom", "clubHallView", "clubHallWelfare", "clubInfoView", "clubInviteView", "clubModifyNotice", "clubRoleInfoView", "clubScoreDetail", "comfirmBox", "createView", "disclaimerView", "goldFishView", "gunForgeResultView", "gunForgeView", "gunSwitchView", "gunUpSuccAnim", "introduceView", "jadeExchangeView", "loadingView", "loginView", "mailView", "marqueeView", "modifyView", "myRewardView", "newerTaskView", "noticeView", "onlineView", "playerInfoView", "pokerColorView", "rankingView", "roleView", "roomIntroduceView", "roomSeatView", "safeCenterView", "selectPayView", "sendRecordView", "settingView", "shareHitBoss", "shareView", "shopView", "signUpView", "splashView", "taskView", "vipTurntableView", "vipView", "welfareView", "ComListView", "comBasePopView", "comBaseView", "richText", "BagConst", "BetTreasureConst", "CatchFishConst", "ChannelConst", "ClubConst", "CommonConst", "CountingConst", "CurrencyConst", "LoginConst", "MarqueeConst", "MiniGameConst", "RankingConst", "RemindEnum", "ResConst", "RoleConst", "SystemConst", "TaskConst", "UserDefaultConst", "WelfareConst", "catchFishCtrl", "fishInit", "acceptItem", "autoScrollView", "awardZhuanPan", "bubbleItem", "bullet", "clubApplyItem", "clubListItem", "clubMemberItem", "clubRankItem", "clubScoreItem", "clubTaskItem", "clubWelfareItem", "comAwardItem", "comBtn", "comBtnList", "comCurrency", "comFishItem", "comHallArea", "comHead", "comHeadRailing", "comInputItem", "comItem", "comNodeSpine", "comOpenSp", "comTitleSp", "crazyOperate", "drawItem", "dropAwardItem", "dynjDieEffect", "fishCountDown", "fishPokerColor", "fishSeamanReward", "fishTaskInfo", "fishTypeItem", "goldFish", "goodsItem", "greatAnim", "gunSwitchItem", "gunUpgrade", "headScrollView", "hitAwardNum", "introItem", "itemScrollView", "jadeExchangeItem", "mailItem", "myRewardItem", "newerTaskItem", "nodeSector", "playGuideView", "pokerExchange", "pokerExchangeItem", "pokerRank", "pokerRankItem", "rankingItem", "redPoint", "roleInfoTips", "roomItem", "roomSeatItem", "seamanRollItem", "sevenDayItem", "sevenDayView", "signDayItem", "tabItem", "taskItem", "tipsScrollView", "fishStart", "FishConst", "catchFishModel", "bossComingView", "bulletObject", "catchAwardDrop", "catchFishUI", "catchFishView", "playerInfoObject", "spineFishObject", "spineGoldView", "fishHallView", "fishLoadingView", "dragonTreasureView", "fingerPlayResultView", "fingerPlayView", "goldDragonView", "monsterBattleResultView", "monsterBattleView", "najiaPlayView", "fishRoomMagicView", "fishRoomView", "BezierUtils", "FishUtils", "TxtFilterUtils", "scene" ]);